(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-739515a2"],{a90b:function(e,t,r){"use strict";var a=r("b07f"),s=r.n(a);s.a},aec9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"form-layout"},[a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",{attrs:{form:t.form,layout:"vertical"}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.scope"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.scope.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["scope",{initialValue:"cluster"}],expression:"['scope', { initialValue: 'cluster' }]"}],on:{change:function(t){e.scope=t}}},[a("a-select-option",{attrs:{value:"cluster"}},[t._v(" "+t._s(t.$t("label.clusterid"))+" ")]),a("a-select-option",{attrs:{value:"zone"}},[t._v(" "+t._s(t.$t("label.zoneid"))+" ")])],1)],1),"zone"===this.scope?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.hypervisor"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.hypervisor.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["hypervisor",{initialValue:t.hypervisors[0]}],expression:"['hypervisor', { initialValue: hypervisors[0]}]"}],on:{change:function(t){return e.selectedHypervisor=t}}},t._l(t.hypervisors,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1)],1):t._e(),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.zoneid"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.zoneid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zone",{initialValue:this.zoneSelected,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['zone', { initialValue: this.zoneSelected, rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(e){return t.changeZone(e)}}},t._l(t.zones,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),"cluster"===this.scope||"host"===this.scope?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.podid"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.podid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pod",{initialValue:this.podSelected,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['pod', { initialValue: this.podSelected, rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(e){return t.changePod(e)}}},t._l(t.pods,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.clusterid"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.clusterid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["cluster",{initialValue:this.clusterSelected,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['cluster', { initialValue: this.clusterSelected, rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(e){return t.fetchHypervisor(e)}}},t._l(t.clusters,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1):t._e(),"host"===this.scope?a("div",[a("a-form-item",{attrs:{label:t.$t("label.hostid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["host",{initialValue:this.hostSelected,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['host', { initialValue: this.hostSelected, rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(t){return e.hostSelected=t}}},t._l(t.hosts,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1)],1):t._e(),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.name"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.name.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['name', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.protocol"))+" "),a("a-tooltip",{attrs:{title:t.$t("message.protocol.description")}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["protocol",{initialValue:this.protocols[0],rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['protocol', { initialValue: this.protocols[0], rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(t){return e.protocolSelected=t}}},t._l(t.protocols,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),"nfs"===t.protocolSelected||"SMB"===t.protocolSelected||"iscsi"===t.protocolSelected||"vmfs"===t.protocolSelected||"Gluster"===t.protocolSelected||"PreSetup"===t.protocolSelected&&"VMware"===t.hypervisorType||"datastorecluster"===t.protocolSelected?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.server"))+" "),a("a-tooltip",{attrs:{title:t.$t("message.server.description")}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["server",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['server', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1):t._e(),"nfs"===t.protocolSelected||"SMB"===t.protocolSelected||"ocfs2"===t.protocolSelected||"PreSetup"===t.protocolSelected&&"VMware"!==t.hypervisorType||"SharedMountPoint"===t.protocolSelected?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.path"))+" "),a("a-tooltip",{attrs:{title:t.$t("message.path.description")}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['path', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1):t._e(),"SMB"===t.protocolSelected?a("div",[a("a-form-item",{attrs:{label:t.$t("label.smbusername")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["smbUsername",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['smbUsername', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.smbpassword")}},[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["smbPassword",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['smbPassword', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.smbdomain")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["smbDomain",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['smbDomain', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1):t._e(),"iscsi"===t.protocolSelected?a("div",[a("a-form-item",{attrs:{label:t.$t("label.iqn")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["iqn",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['iqn', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.lun")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["lun",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['lun', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1):t._e(),"vmfs"===t.protocolSelected||"PreSetup"===t.protocolSelected&&"VMware"===t.hypervisorType||"datastorecluster"===t.protocolSelected?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.vcenterdatacenter"))+" "),a("a-tooltip",{attrs:{title:t.$t("message.datacenter.description")}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vCenterDataCenter",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['vCenterDataCenter', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.vcenterdatastore"))+" "),a("a-tooltip",{attrs:{title:t.$t("message.datastore.description")}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vCenterDataStore",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['vCenterDataStore', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1):t._e(),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.providername"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.provider.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["provider",{initialValue:t.providerSelected,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['provider', { initialValue: providerSelected, rules: [{ required: true, message: `${$t('label.required')}`}] }]"}],on:{change:function(t){return e.providerSelected=t}}},t._l(t.providers,(function(e,r){return a("a-select-option",{key:r,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),"DefaultPrimary"!==this.providerSelected?a("div",[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.ismanaged"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.managed.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-checkbox-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["managed"],expression:"['managed']"}]},[a("a-checkbox",{attrs:{value:"ismanaged"}})],1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.capacitybytes"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.capacitybytes.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["capacityBytes"],expression:"['capacityBytes']"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.capacityiops"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.capacityiops.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["capacityIops"],expression:"['capacityIops']"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.url"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.url.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url"],expression:"['url']"}]})],1)],1):t._e(),"RBD"===this.protocolSelected?a("div",[a("a-form-item",{attrs:{label:t.$t("label.rados.monitor")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["radosmonitor"],expression:"['radosmonitor']"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.rados.pool")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["radospool"],expression:"['radospool']"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.rados.user")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["radosuser"],expression:"['radosuser']"}]})],1),a("a-form-item",{attrs:{label:t.$t("label.rados.secret")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["radossecret"],expression:"['radossecret']"}]})],1)],1):t._e(),"CLVM"===t.protocolSelected?a("div",[a("a-form-item",{attrs:{label:t.$t("label.volumegroup")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["volumegroup",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['volumegroup', { rules: [{ required: true, message: `${$t('label.required')}`}] }]"}]})],1)],1):t._e(),"Gluster"===t.protocolSelected?a("div",[a("a-form-item",{attrs:{label:t.$t("label.volume")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["volume"],expression:"['volume']"}]})],1)],1):t._e(),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.storagetags"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.tags.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{attrs:{mode:"tags"},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},t._l(t.storageTags,(function(e){return a("a-select-option",{key:e.name},[t._v(t._s(e.name))])})),1)],1)],1),a("div",{staticClass:"actions"},[a("a-button",{on:{click:t.closeModal}},[t._v(t._s(t.$t("label.cancel")))]),a("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("label.ok")))])],1)],1)],1)},s=[],o=(r("a4d3"),r("e01a"),r("d28b"),r("7db0"),r("4160"),r("c975"),r("a15b"),r("b0c0"),r("b64b"),r("d3b7"),r("ac1f"),r("25f0"),r("3ca3"),r("5319"),r("1276"),r("159b"),r("ddb0"),r("365c")),i=r("2ef0"),l=r.n(i),n={name:"AddPrimaryStorage",props:{resource:{type:Object,required:!0}},inject:["parentFetchData"],data:function(){return{hypervisors:["KVM","VMware","Hyperv","Any"],protocols:[],providers:[],scope:"cluster",zones:[],pods:[],clusters:[],hosts:[],selectedTags:[],storageTags:[],zoneId:"",zoneSelected:"",podSelected:"",clusterSelected:"",hostSelected:"",hypervisorType:"",protocolSelected:"nfs",providerSelected:"DefaultPrimary",selectedHypervisor:"KVM",size:"default",loading:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiParams={};var t=this.$store.getters.apis.createStoragePool||{};t.params.forEach((function(t){e.apiParams[t.name]=t}))},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.getInfraData(),this.listStorageTags(),this.listStorageProviders()},getInfraData:function(){var e=this;this.loading=!0,Object(o["a"])("listZones").then((function(t){e.zones=t.listzonesresponse.zone||[],e.changeZone(e.zones[0]?e.zones[0].id:"")})).finally((function(){e.loading=!1}))},changeZone:function(e){var t=this;this.zoneSelected=e,""!==this.zoneSelected?Object(o["a"])("listPods",{zoneid:this.zoneSelected}).then((function(e){t.pods=e.listpodsresponse.pod||[],t.changePod(t.pods[0]?t.pods[0].id:"")})):this.podSelected=""},changePod:function(e){var t=this;this.podSelected=e,""!==this.podSelected?Object(o["a"])("listClusters",{podid:this.podSelected}).then((function(e){t.clusters=e.listclustersresponse.cluster||[],t.clusters.length>0&&(t.clusterSelected=t.clusters[0].id,t.fetchHypervisor())})).then((function(){Object(o["a"])("listHosts",{clusterid:t.clusterSelected}).then((function(e){t.hosts=e.listhostsresponse.host||[],t.hosts.length>0&&(t.hostSelected=t.hosts[0].id)}))})):this.clusterSelected=""},listStorageProviders:function(){var e=this;this.providers=[],this.loading=!0,Object(o["a"])("listStorageProviders",{type:"primary"}).then((function(t){var r=t.liststorageprovidersresponse.dataStoreProvider||[],a=!0,s=!1,o=void 0;try{for(var i,l=r[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var n=i.value;e.providers.push(n.name)}}catch(c){s=!0,o=c}finally{try{a||null==l.return||l.return()}finally{if(s)throw o}}})).finally((function(){e.loading=!1}))},listStorageTags:function(){var e=this;this.loading=!0,Object(o["a"])("listStorageTags").then((function(t){e.storageTags=t.liststoragetagsresponse.storagetag||[],e.storageTags&&(e.storageTags=l.a.uniqBy(e.storageTags,"name"))})).finally((function(){e.loading=!1}))},fetchHypervisor:function(e){var t=this,r=this.clusters.find((function(e){return e.id===t.clusterSelected}));this.hypervisorType=r.hypervisortype,"KVM"===this.hypervisorType?this.protocols=["nfs","SharedMountPoint","RBD","CLVM","Gluster","custom"]:"XenServer"===this.hypervisorType?this.protocols=["nfs","PreSetup","iscsi","custom"]:"VMware"===this.hypervisorType?(this.protocols=["nfs","vmfs","custom"],"importVsphereStoragePolicies"in this.$store.getters.apis&&(this.protocols=["nfs","PreSetup","datastorecluster","custom"])):"Hyperv"===this.hypervisorType?this.protocols=["SMB"]:"Ovm"===this.hypervisorType?this.protocols=["nfs","ocfs2"]:"LXC"===this.hypervisorType?this.protocols=["nfs","SharedMountPoint","RBD"]:this.protocols=["nfs"]},nfsURL:function(e,t){var r;return"/"!==t.substring(0,1)&&(t="/"+t),r=-1===e.indexOf("://")?"nfs://"+e+t:e+t,r},smbURL:function(e,t,r,a,s){var o="";return"/"!==t.substring(0,1)&&(t="/"+t),-1===e.indexOf("://")&&(o+="cifs://"),o+=e+t,o},presetupURL:function(e,t){var r;return r=-1===e.indexOf("://")?"presetup://"+e+t:e+t,r},datastoreclusterURL:function(e,t){var r;return r=-1===e.indexOf("://")?"datastorecluster://"+e+t:e+t,r},ocfs2URL:function(e,t){var r;return r=-1===e.indexOf("://")?"ocfs2://"+e+t:e+t,r},SharedMountPointURL:function(e,t){var r;return r=-1===e.indexOf("://")?"SharedMountPoint://"+e+t:e+t,r},rbdURL:function(e,t,r,a){var s;return a=a.replace("+","-"),a=a.replace("/","_"),null!==r&&null!==a&&(e=r+":"+a+"@"+e),"/"!==t.substring(0,1)&&(t="/"+t),s=-1===e.indexOf("://")?"rbd://"+e+t:e+t,s},clvmURL:function(e){var t;return t=-1===e.indexOf("://")?"clvm://localhost/"+e:e,t},vmfsURL:function(e,t){var r;return r=-1===e.indexOf("://")?"vmfs://"+e+t:e+t,r},iscsiURL:function(e,t,r){var a;return a=-1===e.indexOf("://")?"iscsi://"+e+t+"/"+r:e+t+"/"+r,a},glusterURL:function(e,t){var r;return r=-1===e.indexOf("://")?"gluster://"+e+t:e+t,r},closeModal:function(){this.$parent.$parent.close()},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){if(!e){var a={scope:r.scope,zoneid:r.zone,name:r.name,provider:r.provider};"zone"===r.scope&&(a.hypervisor=r.hypervisor),"cluster"!==r.scope&&"host"!==r.scope||(a.podid=r.pod,a.clusterid=r.cluster),"host"===r.scope&&(a.hostid=r.host);var s=r.server?r.server:null,i=r.path?r.path:null;null!==i&&"/"!==i.substring(0,1)&&(i="/"+i);var l="";if("nfs"===r.protocol)l=t.nfsURL(s,i);else if("SMB"===r.protocol){l=t.smbURL(s,i);var n={user:encodeURIComponent(r.smbUsername),password:encodeURIComponent(r.smbPassword),domain:r.smbDomain};Object.keys(n).forEach((function(e,t){a["details["+t.toString()+"]."+e]=n[e]}))}else if("PreSetup"===r.protocol&&"VMware"!==t.hypervisorType)s="localhost",l=t.presetupURL(s,i);else if("PreSetup"===r.protocol&&"VMware"===t.hypervisorType)i=r.vCenterDataCenter,"/"!==i.substring(0,1)&&(i="/"+i),i+="/"+r.vCenterDataStore,l=t.presetupURL(s,i);else if("datastorecluster"===r.protocol&&"VMware"===t.hypervisorType)i=r.vCenterDataCenter,"/"!==i.substring(0,1)&&(i="/"+i),i+="/"+r.vCenterDataStore,l=t.datastoreclusterURL(s,i);else if("ocfs2"===r.protocol)l=t.ocfs2URL(s,i);else if("SharedMountPoint"===r.protocol)s="localhost",l=t.SharedMountPointURL(s,i);else if("CLVM"===r.protocol){var c="/"!==r.volumegroup.substring(0,1)?"/"+r.volumegroup:r.volumegroup;l=t.clvmURL(c)}else if("RBD"===r.protocol)l=t.rbdURL(r.radosmonitor,r.radospool,r.radosuser,r.radossecret);else if("vmfs"===r.protocol)i=r.vCenterDataCenter,"/"!==i.substring(0,1)&&(i="/"+i),i+="/"+r.vCenterDataStore,l=t.vmfsURL(s,i);else if("Gluster"===r.protocol){var d=r.volume;"/"!==d.substring(0,1)&&(d="/"+d),l=t.glusterURL(s,d)}else if("iscsi"===r.protocol){var u=r.iqn;"/"!==u.substring(0,1)&&(u="/"+u);var p=r.lun;l=t.iscsiURL(s,u,p)}a.url=l,"DefaultPrimary"!==r.provider&&(r.managed?a.managed=!0:a.managed=!1,r.capacityBytes&&r.capacityBytes.length>0&&(a.capacityBytes=r.capacityBytes.split(",").join("")),r.capacityIops&&r.capacityIops.length>0&&(a.capacityIops=r.capacityIops.split(",").join("")),r.url&&r.url.length>0&&(a.url=r.url)),t.selectedTags.length>0&&(a.tags=t.selectedTags.join()),t.loading=!0,Object(o["a"])("createStoragePool",{},"POST",a).then((function(e){t.$notification.success({message:t.$t("label.add.primary.storage"),description:t.$t("label.add.primary.storage")}),t.closeModal(),t.parentFetchData()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))}}))}}},c=n,d=(r("a90b"),r("2877")),u=Object(d["a"])(c,a,s,!1,null,"f40ae7be",null);t["default"]=u.exports},b07f:function(e,t,r){}}]);
//# sourceMappingURL=chunk-739515a2.51efe7f8.js.map