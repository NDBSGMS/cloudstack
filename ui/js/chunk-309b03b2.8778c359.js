(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-309b03b2"],{"208a":function(e,t,s){"use strict";var c=s("73ad"),n=s.n(c);n.a},"33f5":function(e,t,s){"use strict";s.r(t);var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("p",{domProps:{innerHTML:e._s(e.$t("message.assign.instance.another"))}}),s("div",{staticClass:"form"},[e.loading?s("div",{staticClass:"loading"},[s("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"loading"}})],1):e._e(),s("div",{staticClass:"form__item"},[s("p",{staticClass:"form__label"},[e._v(e._s(e.$t("label.accounttype")))]),s("a-select",{attrs:{defaultValue:"account"},model:{value:e.selectedAccountType,callback:function(t){e.selectedAccountType=t},expression:"selectedAccountType"}},[s("a-select-option",{attrs:{value:e.$t("label.account")}},[e._v(e._s(e.$t("label.account")))]),s("a-select-option",{attrs:{value:e.$t("label.project")}},[e._v(e._s(e.$t("label.project")))])],1)],1),s("div",{staticClass:"form__item"},[s("p",{staticClass:"form__label"},[s("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("label.domain")))]),s("a-select",{attrs:{defaultValue:e.selectedDomain},on:{change:e.changeDomain},model:{value:e.selectedDomain,callback:function(t){e.selectedDomain=t},expression:"selectedDomain"}},e._l(e.domains,(function(t){return s("a-select-option",{key:t.name,attrs:{value:t.id}},[e._v(" "+e._s(t.path)+" ")])})),1)],1),"Account"===e.selectedAccountType?[s("div",{staticClass:"form__item"},[s("p",{staticClass:"form__label"},[s("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("label.account")))]),s("a-select",{on:{change:e.changeAccount},model:{value:e.selectedAccount,callback:function(t){e.selectedAccount=t},expression:"selectedAccount"}},e._l(e.accounts,(function(t){return s("a-select-option",{key:t.name,attrs:{value:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1),e.accountError?s("span",{staticClass:"required"},[e._v(e._s(e.$t("label.required")))]):e._e()],1)]:[s("div",{staticClass:"form__item"},[s("p",{staticClass:"form__label"},[s("span",{staticClass:"required"},[e._v("*")]),e._v(e._s(e.$t("label.project")))]),s("a-select",{on:{change:e.changeProject},model:{value:e.selectedProject,callback:function(t){e.selectedProject=t},expression:"selectedProject"}},e._l(e.projects,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1),e.projectError?s("span",{staticClass:"required"},[e._v(e._s(e.$t("label.required")))]):e._e()],1)],s("div",{staticClass:"form__item"},[s("p",{staticClass:"form__label"},[e._v(e._s(e.$t("label.network")))]),s("a-select",{model:{value:e.selectedNetwork,callback:function(t){e.selectedNetwork=t},expression:"selectedNetwork"}},e._l(e.networks,(function(t){return s("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name?t.name:"-")+" ")])})),1)],1),s("a-button",{staticClass:"submit-btn",attrs:{type:"primary"},on:{click:e.submitData}},[e._v(" "+e._s(e.$t("label.submit"))+" ")])],2)])},n=[],a=(s("d3b7"),s("fc11")),o=s("365c"),i={name:"AssignInstance",props:{resource:{type:Object,required:!0}},inject:["parentFetchData"],data:function(){return{domains:[],accounts:[],projects:[],networks:[],selectedAccountType:"Account",selectedDomain:null,selectedAccount:null,selectedProject:null,selectedNetwork:null,accountError:!1,projectError:!1,loading:!1}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,Object(o["a"])("listDomains",{response:"json",listAll:!0,details:"min"}).then((function(t){e.domains=t.listdomainsresponse.domain,e.selectedDomain=e.domains[0].id,e.fetchAccounts(),e.fetchProjects()}))},fetchAccounts:function(){var e=this;this.loading=!0,Object(o["a"])("listAccounts",{response:"json",domainId:this.selectedDomain,state:"Enabled",listAll:!0}).then((function(t){e.accounts=t.listaccountsresponse.account,e.loading=!1}))},fetchProjects:function(){var e=this;this.loading=!0,Object(o["a"])("listProjects",{response:"json",domainId:this.selectedDomain,state:"Active",details:"min",listAll:!0}).then((function(t){e.projects=t.listprojectsresponse.project,e.loading=!1}))},fetchNetworks:function(){var e=this;this.loading=!0,Object(o["a"])("listNetworks",{response:"json",domainId:this.selectedDomain,listAll:!0,isrecursive:!1,account:this.selectedAccount,projectid:this.selectedProject}).then((function(t){e.networks=t.listnetworksresponse.network,e.loading=!1}))},changeDomain:function(){this.selectedAccount=null,this.fetchAccounts(),this.fetchProjects()},changeAccount:function(){this.selectedProject=null,this.fetchNetworks()},changeProject:function(){this.selectedAccount=null,this.fetchNetworks()},submitData:function(){var e,t=this,s="",c="";if("Account"===this.selectedAccountType){if(!this.selectedAccount)return void(this.accountError=!0);s="account",c=this.selectedAccount}else if("Project"===this.selectedAccountType){if(!this.selectedProject)return void(this.projectError=!0);s="projectid",c=this.selectedProject}this.loading=!0,Object(o["a"])("assignVirtualMachine",(e={response:"json",virtualmachineid:this.resource.id,domainid:this.selectedDomain},Object(a["a"])(e,s,c),Object(a["a"])(e,"networkids",this.selectedNetwork),e)).then((function(e){t.$notification.success({message:t.$t("label.loadbalancerinstance")}),t.$parent.$parent.close(),t.parentFetchData()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))}}},l=i,r=(s("208a"),s("2877")),u=Object(r["a"])(l,c,n,!1,null,"2eb55c5e",null);t["default"]=u.exports},"73ad":function(e,t,s){}}]);
//# sourceMappingURL=chunk-309b03b2.8778c359.js.map