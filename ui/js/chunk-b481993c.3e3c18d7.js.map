{"version":3,"sources":["webpack:///./src/views/offering/UpdateOfferingAccess.vue?3acf","webpack:///src/views/offering/UpdateOfferingAccess.vue","webpack:///./src/views/offering/UpdateOfferingAccess.vue?f144","webpack:///./src/views/offering/UpdateOfferingAccess.vue","webpack:///./src/views/offering/UpdateOfferingAccess.vue?4df4"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","staticClass","attrs","loading","form","on","handleSubmit","directives","name","rawName","value","isAdmin","expression","$t","initialValue","offeringIsPublic","val","_e","rules","required","message","selectedDomains","input","option","componentOptions","children","text","toLowerCase","indexOf","domainLoading","apiParams","domainid","description","_l","opt","optIndex","key","_v","_s","validator","rule","callback","length","zoneLoading","zoneid","closeAction","staticRenderFns","props","resource","type","Object","data","formOffering","selectedZones","domains","zones","beforeCreate","$form","createForm","$route","meta","offeringType","apiParamsConfig","$store","getters","apis","params","forEach","created","mounted","fetchData","methods","fetchOfferingData","fetchDomainData","fetchZoneData","includes","userInfo","roletype","id","isrecursive","apiName","updateDomainSelection","keys","offeringDomainIds","split","i","j","push","fieldsStore","fieldsMeta","setFieldsValue","updateZoneSelection","offeringZoneIds","e","preventDefault","validateFields","err","ispublic","values","domainIndexes","domainId","domainIds","concat","join","zoneIndexes","zoneId","zoneIds","$emit","component"],"mappings":"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","file":"js/chunk-b481993c.3e3c18d7.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-layout\"},[_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.isAdmin()),expression:\"this.isAdmin()\"}],attrs:{\"label\":_vm.$t('label.ispublic')}},[_c('a-switch',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['ispublic', { initialValue: this.offeringIsPublic }]),expression:\"['ispublic', { initialValue: this.offeringIsPublic }]\"}],attrs:{\"checked\":this.offeringIsPublic},on:{\"change\":function (val) { this$1.offeringIsPublic = val }}})],1),(!this.offeringIsPublic)?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.domainid')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['domainid', {\n            rules: [\n              {\n                required: true,\n                message: (\"\" + (this.$t('message.error.select')))\n              }\n            ],\n            initialValue: this.selectedDomains\n          }]),expression:\"['domainid', {\\n            rules: [\\n              {\\n                required: true,\\n                message: `${this.$t('message.error.select')}`\\n              }\\n            ],\\n            initialValue: this.selectedDomains\\n          }]\"}],attrs:{\"mode\":\"multiple\",\"showSearch\":\"\",\"optionFilterProp\":\"children\",\"filterOption\":function (input, option) {\n            return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n          },\"loading\":_vm.domainLoading,\"placeholder\":this.apiParams.domainid.description}},_vm._l((this.domains),function(opt,optIndex){return _c('a-select-option',{key:optIndex},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1):_vm._e(),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.zoneid')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['zoneid', {\n            rules: [\n              {\n                validator: function (rule, value, callback) {\n                  if (value && value.length > 1 && value.indexOf(0) !== -1) {\n                    callback(_vm.$t('message.error.zone.combined'))\n                  }\n                  callback()\n                }\n              }\n            ]\n          }]),expression:\"['zoneid', {\\n            rules: [\\n              {\\n                validator: (rule, value, callback) => {\\n                  if (value && value.length > 1 && value.indexOf(0) !== -1) {\\n                    callback($t('message.error.zone.combined'))\\n                  }\\n                  callback()\\n                }\\n              }\\n            ]\\n          }]\"}],attrs:{\"id\":\"zone-selection\",\"mode\":\"multiple\",\"showSearch\":\"\",\"optionFilterProp\":\"children\",\"filterOption\":function (input, option) {\n            return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n          },\"loading\":_vm.zoneLoading,\"placeholder\":this.apiParams.zoneid.description}},_vm._l((this.zones),function(opt,optIndex){return _c('a-select-option',{key:optIndex},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1),_c('div',{staticClass:\"action-button\",attrs:{\"span\":24}},[_c('a-button',{on:{\"click\":_vm.closeAction}},[_vm._v(_vm._s(this.$t('label.cancel')))]),_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(this.$t('label.ok')))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div class=\"form-layout\">\n    <a-spin :spinning=\"loading\">\n      <a-form\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        layout=\"vertical\">\n\n        <a-form-item :label=\"$t('label.ispublic')\" v-show=\"this.isAdmin()\">\n          <a-switch v-decorator=\"['ispublic', { initialValue: this.offeringIsPublic }]\" :checked=\"this.offeringIsPublic\" @change=\"val => { this.offeringIsPublic = val }\" />\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.domainid')\" v-if=\"!this.offeringIsPublic\">\n          <a-select\n            mode=\"multiple\"\n            v-decorator=\"['domainid', {\n              rules: [\n                {\n                  required: true,\n                  message: `${this.$t('message.error.select')}`\n                }\n              ],\n              initialValue: this.selectedDomains\n            }]\"\n            showSearch\n            optionFilterProp=\"children\"\n            :filterOption=\"(input, option) => {\n              return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n            }\"\n            :loading=\"domainLoading\"\n            :placeholder=\"this.apiParams.domainid.description\">\n            <a-select-option v-for=\"(opt, optIndex) in this.domains\" :key=\"optIndex\">\n              {{ opt.name || opt.description }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.zoneid')\">\n          <a-select\n            id=\"zone-selection\"\n            mode=\"multiple\"\n            v-decorator=\"['zoneid', {\n              rules: [\n                {\n                  validator: (rule, value, callback) => {\n                    if (value && value.length > 1 && value.indexOf(0) !== -1) {\n                      callback($t('message.error.zone.combined'))\n                    }\n                    callback()\n                  }\n                }\n              ]\n            }]\"\n            showSearch\n            optionFilterProp=\"children\"\n            :filterOption=\"(input, option) => {\n              return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n            }\"\n            :loading=\"zoneLoading\"\n            :placeholder=\"this.apiParams.zoneid.description\">\n            <a-select-option v-for=\"(opt, optIndex) in this.zones\" :key=\"optIndex\">\n              {{ opt.name || opt.description }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n\n        <div :span=\"24\" class=\"action-button\">\n          <a-button @click=\"closeAction\">{{ this.$t('label.cancel') }}</a-button>\n          <a-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\">{{ this.$t('label.ok') }}</a-button>\n        </div>\n\n      </a-form>\n    </a-spin>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\n\nexport default {\n  name: 'UpdateOfferingAccess',\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      formOffering: {},\n      selectedDomains: [],\n      selectedZones: [],\n      offeringIsPublic: false,\n      domains: [],\n      domainLoading: false,\n      zones: [],\n      zoneLoading: false,\n      loading: false\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    switch (this.$route.meta.name) {\n      case 'computeoffering':\n        this.offeringType = 'ServiceOffering'\n        break\n      case 'diskoffering':\n        this.offeringType = 'DiskOffering'\n        break\n      case 'networkoffering':\n        this.offeringType = 'NetworkOffering'\n        break\n      case 'vpcoffering':\n        this.offeringType = 'VPCOffering'\n        break\n      default:\n        this.offeringType = this.$route.meta.name\n    }\n    this.apiParams = {}\n    this.apiParamsConfig = this.$store.getters.apis['update' + this.offeringType] || {}\n    this.apiParamsConfig.params.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n  },\n  created () {\n    this.zones = [\n      {\n        id: 'all',\n        name: this.$t('label.all.zone')\n      }\n    ]\n  },\n  mounted () {\n    this.fetchData()\n  },\n  methods: {\n    fetchData () {\n      this.fetchOfferingData()\n      this.fetchDomainData()\n      this.fetchZoneData()\n    },\n    isAdmin () {\n      return ['Admin'].includes(this.$store.getters.userInfo.roletype)\n    },\n    fetchOfferingData () {\n      this.loading = true\n      const params = {}\n      params.id = this.resource.id\n      params.isrecursive = true\n      var apiName = 'list' + this.offeringType + 's'\n      api(apiName, params).then(json => {\n        const offerings = json[apiName.toLowerCase() + 'response'][this.offeringType.toLowerCase()]\n        this.formOffering = offerings[0]\n      }).finally(() => {\n        this.updateDomainSelection()\n        this.updateZoneSelection()\n        this.loading = false\n      })\n    },\n    fetchDomainData () {\n      const params = {}\n      params.listAll = true\n      params.details = 'min'\n      this.domainLoading = true\n      api('listDomains', params).then(json => {\n        const listDomains = json.listdomainsresponse.domain\n        this.domains = this.domains.concat(listDomains)\n      }).finally(() => {\n        this.domainLoading = false\n        this.updateDomainSelection()\n      })\n    },\n    fetchZoneData () {\n      const params = {}\n      params.listAll = true\n      this.zoneLoading = true\n      api('listZones', params).then(json => {\n        const listZones = json.listzonesresponse.zone\n        this.zones = this.zones.concat(listZones)\n      }).finally(() => {\n        this.zoneLoading = false\n        this.updateZoneSelection()\n      })\n    },\n    updateDomainSelection () {\n      if (!this.formOffering || Object.keys(this.formOffering).length === 0) return\n      var offeringDomainIds = this.formOffering.domainid\n      this.selectedDomains = []\n      if (offeringDomainIds) {\n        this.offeringIsPublic = false\n        offeringDomainIds = offeringDomainIds.indexOf(',') !== -1 ? offeringDomainIds.split(',') : [offeringDomainIds]\n        for (var i = 0; i < offeringDomainIds.length; i++) {\n          for (var j = 0; j < this.domains.length; j++) {\n            if (offeringDomainIds[i] === this.domains[j].id) {\n              this.selectedDomains.push(j)\n            }\n          }\n        }\n      } else {\n        if (this.isAdmin()) {\n          this.offeringIsPublic = true\n        }\n      }\n      if ('domainid' in this.form.fieldsStore.fieldsMeta) {\n        this.form.setFieldsValue({\n          domainid: this.selectedDomains\n        })\n      }\n    },\n    updateZoneSelection () {\n      if (!this.formOffering || Object.keys(this.formOffering).length === 0) return\n      var offeringZoneIds = this.formOffering.zoneid\n      this.selectedZones = []\n      if (offeringZoneIds) {\n        offeringZoneIds = offeringZoneIds.indexOf(',') !== -1 ? offeringZoneIds.split(',') : [offeringZoneIds]\n        for (var i = 0; i < offeringZoneIds.length; i++) {\n          for (var j = 0; j < this.zones.length; j++) {\n            if (offeringZoneIds[i] === this.zones[j].id) {\n              this.selectedZones.push(j)\n            }\n          }\n        }\n      }\n      this.form.setFieldsValue({\n        zoneid: this.selectedZones\n      })\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err) {\n          return\n        }\n\n        const params = {}\n        params.id = this.resource.id\n        var ispublic = values.ispublic\n        if (ispublic === true) {\n          params.domainid = 'public'\n        } else {\n          var domainIndexes = values.domainid\n          var domainId = 'public'\n          if (domainIndexes && domainIndexes.length > 0) {\n            var domainIds = []\n            for (var i = 0; i < domainIndexes.length; i++) {\n              domainIds = domainIds.concat(this.domains[domainIndexes[i]].id)\n            }\n            domainId = domainIds.join(',')\n          }\n          params.domainid = domainId\n        }\n        var zoneIndexes = values.zoneid\n        var zoneId = 'all'\n        if (zoneIndexes && zoneIndexes.length > 0) {\n          var zoneIds = []\n          for (var j = 0; j < zoneIndexes.length; j++) {\n            zoneIds = zoneIds.concat(this.zones[zoneIndexes[j]].id)\n          }\n          zoneId = zoneIds.join(',')\n        }\n        params.zoneid = zoneId\n\n        this.loading = true\n        api('update' + this.offeringType, params).then(json => {\n          this.$emit('refresh-data')\n          this.$notification.success({\n            message: this.$t('label.action.update.offering.access'),\n            description: this.$t('label.action.update.offering.access')\n          })\n          this.closeAction()\n        }).catch(error => {\n          this.$notifyError(error)\n        }).finally(() => {\n          this.loading = false\n        })\n      })\n    },\n    closeAction () {\n      this.$emit('close-action')\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .form-layout {\n    width: 80vw;\n\n    @media (min-width: 600px) {\n      width: 25vw;\n    }\n  }\n\n  .action-button {\n    text-align: right;\n\n    button {\n      margin-right: 5px;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateOfferingAccess.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateOfferingAccess.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UpdateOfferingAccess.vue?vue&type=template&id=74a28ecf&scoped=true&\"\nimport script from \"./UpdateOfferingAccess.vue?vue&type=script&lang=js&\"\nexport * from \"./UpdateOfferingAccess.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UpdateOfferingAccess.vue?vue&type=style&index=0&id=74a28ecf&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74a28ecf\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateOfferingAccess.vue?vue&type=style&index=0&id=74a28ecf&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UpdateOfferingAccess.vue?vue&type=style&index=0&id=74a28ecf&scoped=true&lang=scss&\""],"sourceRoot":""}