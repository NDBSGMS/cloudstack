(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f22f63f","chunk-54c8c480","chunk-2d21eba3"],{"24bc":function(t,e,a){},"36bd":function(t,e,a){},"40f6":function(t,e,a){},"5c3a8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header-index-wide"},[t.showOnboarding?a("div",[a("onboarding-dashboard")],1):"Admin"!==t.$store.getters.userInfo.roletype||t.project?a("div",[a("usage-dashboard",{attrs:{resource:t.$store.getters.project,showProject:t.project}})],1):a("div",[a("capacity-dashboard")],1)])},o=[],r=(a("caad"),a("365c")),n=a("4360"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{staticClass:"capacity-dashboard",attrs:{gutter:12}},[a("a-col",{attrs:{xl:18}},[a("div",{staticClass:"capacity-dashboard-wrapper"},[a("div",{staticClass:"capacity-dashboard-select"},[a("a-select",{attrs:{showSearch:"",optionFilterProp:"children",defaultValue:t.zoneSelected.name,placeholder:t.$t("label.select.a.zone"),value:t.zoneSelected.name},on:{change:t.changeZone}},t._l(t.zones,(function(e,s){return a("a-select-option",{key:s},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("div",{staticClass:"capacity-dashboard-button"},[a("a-button",{attrs:{shape:"round"},on:{click:function(){t.listCapacity(t.zoneSelected,!0),t.listEvents()}}},[t._v(" "+t._s(t.$t("label.fetch.latest"))+" ")])],1)]),a("a-row",{attrs:{gutter:12}},t._l(t.stats,(function(e){return a("a-col",{key:e.type,style:{marginBottom:"12px"},attrs:{xs:12,sm:8,md:6}},[a("chart-card",{attrs:{loading:t.loading}},[a("router-link",{attrs:{to:{path:"/zone/"+t.zoneSelected.id}}},[a("div",{staticClass:"capacity-dashboard-chart-card-inner"},[a("h3",[t._v(t._s(t.$t(t.ts[e.name])))]),a("a-progress",{attrs:{type:"dashboard",status:t.getStatus(parseFloat(e.percentused)),percent:parseFloat(e.percentused),format:function(t){return parseFloat(e.percentused).toFixed(2)+"%"},strokeColor:t.getStrokeColour(parseFloat(e.percentused)),width:100}})],1)]),a("template",{slot:"footer"},[a("center",[t._v(t._s(t.displayData(e.name,e.capacityused))+" / "+t._s(t.displayData(e.name,e.capacitytotal)))])],1)],2)],1)})),1)],1),a("a-col",{attrs:{xl:6}},[a("chart-card",{attrs:{loading:t.loading}},[a("div",{staticStyle:{"text-align":"center"}},[a("a-tooltip",{staticClass:"capacity-dashboard-button-wrapper",attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.view")+" "+t.$t("label.host.alerts"))+" ")]),a("a-button",{attrs:{type:"danger",shape:"circle"}},[a("router-link",{attrs:{to:{name:"host",query:{state:"Alert"}}}},[a("a-icon",{staticClass:"capacity-dashboard-button-icon",attrs:{type:"desktop"}})],1)],1)],2),a("a-tooltip",{staticClass:"capacity-dashboard-button-wrapper",attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.view")+" "+t.$t("label.alerts"))+" ")]),a("a-button",{attrs:{shape:"circle"}},[a("router-link",{attrs:{to:{name:"alert"}}},[a("a-icon",{staticClass:"capacity-dashboard-button-icon",attrs:{type:"flag"}})],1)],1)],2),a("a-tooltip",{staticClass:"capacity-dashboard-button-wrapper",attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.view")+" "+t.$t("label.events"))+" ")]),a("a-button",{attrs:{shape:"circle"}},[a("router-link",{attrs:{to:{name:"event"}}},[a("a-icon",{staticClass:"capacity-dashboard-button-icon",attrs:{type:"schedule"}})],1)],1)],2)],1),a("template",{slot:"footer"},[a("div",{staticClass:"capacity-dashboard-footer"},[a("a-timeline",t._l(t.events,(function(e){return a("a-timeline-item",{key:e.id,attrs:{color:t.getEventColour(e)}},[a("span",{style:{color:"#999"}},[a("small",[t._v(t._s(t.$toLocaleDate(e.created)))])]),a("br"),a("span",{style:{color:"#666"}},[a("small",[a("router-link",{attrs:{to:{path:"event/"+e.id}}},[t._v(t._s(e.type))])],1)]),a("br"),a("span",{style:{color:"#aaa"}},[t._v("("+t._s(e.username)+") "+t._s(e.description))])])})),1)],1)])],2)],1)],1)},l=[],c=(a("c975"),a("b0c0"),a("b6802"),a("d3d3")),d={name:"CapacityDashboard",components:{ChartCard:c["a"]},data:function(){return{loading:!0,events:[],zones:[],zoneSelected:{},stats:[],ts:{CPU:"label.cpu",CPU_CORE:"label.cpunumber",DIRECT_ATTACHED_PUBLIC_IP:"label.direct.ips",GPU:"label.gpu",LOCAL_STORAGE:"label.local.storage",MEMORY:"label.memory",PRIVATE_IP:"label.management.ips",SECONDARY_STORAGE:"label.secondary.storage",STORAGE:"label.storage",STORAGE_ALLOCATED:"label.primary.storage",VIRTUAL_NETWORK_PUBLIC_IP:"label.public.ips",VLAN:"label.vlan"}}},mounted:function(){this.fetchData()},watch:{$route:function(t,e){"dashboard"===t.name&&this.fetchData()}},created:function(){setTimeout((function(){}),1e3)},methods:{getStatus:function(t){return t>85?"exception":t>75?"active":"normal"},getStrokeColour:function(t){return t>=80?"red":"primary"},displayData:function(t,e){switch(t){case"CPU":e=parseFloat(e/1e3,10).toFixed(2)+" GHz";break;case"MEMORY":case"STORAGE":case"STORAGE_ALLOCATED":case"SECONDARY_STORAGE":case"LOCAL_STORAGE":e=parseFloat(e/1073741824,10).toFixed(2),e>=1024?e=parseFloat(e/1024).toFixed(2)+" TB":e+=" GB";break}return e},fetchData:function(){this.listZones(),this.listEvents()},listCapacity:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s={zoneid:t.id,fetchlatest:a};this.loading=!0,Object(r["a"])("listCapacity",s).then((function(t){e.stats=[],e.loading=!1,t&&t.listcapacityresponse&&t.listcapacityresponse.capacity&&(e.stats=t.listcapacityresponse.capacity)}))},listEvents:function(){var t=this,e={page:1,pagesize:6,listall:!0};this.loading=!0,Object(r["a"])("listEvents",e).then((function(e){t.events=[],t.loading=!1,e&&e.listeventsresponse&&e.listeventsresponse.event&&(t.events=e.listeventsresponse.event)}))},getEventColour:function(t){return"ERROR"===t.level?"red":"Completed"===t.state?"green":"blue"},listZones:function(){var t=this;Object(r["a"])("listZones").then((function(e){e&&e.listzonesresponse&&e.listzonesresponse.zone&&(t.zones=e.listzonesresponse.zone,t.zones.length>0&&(t.zoneSelected=t.zones[0],t.listCapacity(t.zones[0])))}))},changeZone:function(t){this.zoneSelected=this.zones[t],this.listCapacity(this.zoneSelected)},filterZone:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0}}},u=d,p=(a("6394"),a("2877")),h=Object(p["a"])(u,i,l,!1,null,"0efc650a",null),b=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-row",{staticClass:"usage-dashboard",attrs:{gutter:12}},[a("a-col",{attrs:{xl:16}},[a("a-row",{attrs:{gutter:12}},[a("a-card",[t.showProject?a("a-tabs",{attrs:{animated:!1},on:{change:t.onTabChange}},t._l(t.$route.meta.tabs,(function(e){return!("show"in e)||e.show(t.project,t.$route,t.$store.getters.userInfo)?a("a-tab-pane",{key:e.name,attrs:{tab:t.$t("label."+e.name)}},[a(e.component,{tag:"component",attrs:{resource:t.project,loading:t.loading,bordered:!1,stats:t.stats}})],1):t._e()})),1):t._l(t.stats,(function(e){return a("a-col",{key:e.type,staticClass:"usage-dashboard-chart-tile",attrs:{xs:12,md:8}},[a("a-card",{staticClass:"usage-dashboard-chart-card",style:e.bgcolor?{"background-color":e.bgcolor}:{},attrs:{bordered:!1,loading:t.loading}},[a("router-link",{attrs:{to:{path:e.path}}},[a("div",{staticClass:"usage-dashboard-chart-card-inner"},[a("h3",[t._v(t._s(e.name))]),a("h2",[a("a-icon",{attrs:{type:e.icon}}),t._v(" "+t._s(void 0==e.count?0:e.count)+" ")],1)])])],1)],1)}))],2)],1)],1),a("a-col",{attrs:{xl:8}},[a("chart-card",{attrs:{loading:t.loading}},[a("div",{staticClass:"usage-dashboard-chart-card-inner"},[a("a-button",[a("router-link",{attrs:{to:{name:"event"}}},[t._v(" "+t._s(t.$t("label.view")+" "+t.$t("label.events"))+" ")])],1)],1),a("template",{slot:"footer"},[a("div",{staticClass:"usage-dashboard-chart-footer"},[a("a-timeline",t._l(t.events,(function(e){return a("a-timeline-item",{key:e.id,attrs:{color:t.getEventColour(e)}},[a("span",{style:{color:"#999"}},[a("small",[t._v(t._s(t.$toLocaleDate(e.created)))])]),a("br"),a("span",{style:{color:"#666"}},[a("small",[a("router-link",{attrs:{to:{path:"event/"+e.id}}},[t._v(t._s(e.type))])],1)]),a("br"),a("span",{style:{color:"#aaa"}},[t._v("("+t._s(e.username)+") "+t._s(e.description))])])})),1)],1)])],2)],1)],1)},m=[],v=(a("a434"),a("d793")),g={name:"UsageDashboard",components:{ChartCard:c["a"],UsageDashboardChart:v["default"]},props:{resource:{type:Object,default:function(){return[]}},showProject:{type:Boolean,default:!1}},data:function(){return{loading:!1,showAction:!1,showAddAccount:!1,events:[],stats:[],project:{}}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){var t=this;this.project=n["a"].getters.project,this.fetchData(),this.$store.watch((function(t,e){return e.project}),(function(e,a){e&&e.id&&t.fetchData()}))},watch:{$route:function(t,e){"dashboard"===t.name&&this.fetchData()},resource:function(t,e){this.project=t},"$i18n.locale":function(t,e){t!==e&&this.fetchData()}},methods:{fetchData:function(){var t=this;this.stats=[{},{},{},{},{},{}],Object(r["a"])("listVirtualMachines",{state:"Running",listall:!0}).then((function(e){var a=0;e&&e.listvirtualmachinesresponse&&(a=e.listvirtualmachinesresponse.count),t.stats.splice(0,1,{name:t.$t("label.running"),count:a,icon:"desktop",bgcolor:"#dfe9cc",path:"/vm?state=running&filter=running"})})),Object(r["a"])("listVirtualMachines",{state:"Stopped",listall:!0}).then((function(e){var a=0;e&&e.listvirtualmachinesresponse&&(a=e.listvirtualmachinesresponse.count),t.stats.splice(1,1,{name:t.$t("label.stopped"),count:a,icon:"poweroff",bgcolor:"#edcbce",path:"/vm?state=stopped&filter=stopped"})})),Object(r["a"])("listVirtualMachines",{listall:!0}).then((function(e){var a=0;e&&e.listvirtualmachinesresponse&&(a=e.listvirtualmachinesresponse.count),t.stats.splice(2,1,{name:t.$t("label.total.vms"),count:a,icon:"number",path:"/vm"})})),Object(r["a"])("listVolumes",{listall:!0}).then((function(e){var a=0;e&&e.listvolumesresponse&&(a=e.listvolumesresponse.count),t.stats.splice(3,1,{name:t.$t("label.total.volume"),count:a,icon:"database",path:"/volume"})})),Object(r["a"])("listNetworks",{listall:!0}).then((function(e){var a=0;e&&e.listnetworksresponse&&(a=e.listnetworksresponse.count),t.stats.splice(4,1,{name:t.$t("label.total.network"),count:a,icon:"apartment",path:"/guestnetwork"})})),Object(r["a"])("listPublicIpAddresses",{listall:!0}).then((function(e){var a=0;e&&e.listpublicipaddressesresponse&&(a=e.listpublicipaddressesresponse.count),t.stats.splice(5,1,{name:t.$t("label.public.ip.addresses"),count:a,icon:"environment",path:"/publicip"})})),this.listEvents()},listEvents:function(){var t=this,e={page:1,pagesize:6,listall:!0};this.loading=!0,Object(r["a"])("listEvents",e).then((function(e){t.events=[],t.loading=!1,e&&e.listeventsresponse&&e.listeventsresponse.event&&(t.events=e.listeventsresponse.event)}))},getEventColour:function(t){return"ERROR"===t.level?"red":"Completed"===t.state?"green":"blue"},onTabChange:function(t){this.showAddAccount=!1,"Dashboard"!==t&&(this.showAddAccount=!0)}}},w=g,y=(a("82bf"),Object(p["a"])(w,f,m,!1,null,"77683b30",null)),_=y.exports,C=function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"onboarding"},[s("div",{staticClass:"head"},[s("h2",[e._v(e._s(e.$t("label.installwizard.title")))]),s("h3",[e._v(e._s(e.$t("label.installwizard.subtitle")))])]),s("div",{staticClass:"body"},[s("div",{staticClass:"intro"},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("label.what.is.cloudstack")))]),s("div",{staticClass:"subtitle"},[e._v(e._s(e.$t("label.introduction.to.cloudstack")))]),s("p",[e._v(e._s(e.$t("message.installwizard.copy.whatiscloudstack")))]),s("img",{staticClass:"center",attrs:{src:"assets/bg-what-is-cloudstack.png"}}),s("a-button",{attrs:{type:"primary"},on:{click:function(){t.step=1}}},[e._v(" "+e._s(e.$t("label.continue.install"))+" "),s("a-icon",{attrs:{type:"double-right"}})],1)],1)]),s("a-modal",{attrs:{title:e.$t("message.change.password"),visible:1===this.step,closable:!0,maskClosable:!1,footer:null,cancelText:e.$t("label.cancel"),centered:"",width:"auto"},on:{cancel:e.closeAction}},[s("change-user-password",{attrs:{resource:this.resource},on:{"close-action":function(){2!==t.step&&(t.step=0)},"refresh-data":function(){t.step=2}}})],1),s("a-modal",{attrs:{title:e.$t("label.installwizard.addzoneintro.title"),visible:2===this.step,closable:!0,maskClosable:!1,footer:null,cancelText:e.$t("label.cancel"),centered:"",width:"auto"},on:{cancel:e.closeAction}},[s("zone-wizard",{on:{"close-action":e.closeAction,"refresh-data":e.parentFetchData}})],1)],1)},$=[],O=a("e898"),k=a("78dc"),A={name:"OnboardingDashboard",components:{ChangeUserPassword:O["default"],ZoneWizard:k["default"]},inject:["parentFetchData"],data:function(){return{step:0,resource:{id:this.$store.getters.userInfo.id,username:this.$store.getters.userInfo.username}}},methods:{closeAction:function(){this.step=0}}},j=A,D=(a("b07fd"),Object(p["a"])(j,C,$,!1,null,"333319f1",null)),E=D.exports,z={name:"Dashboard",components:{CapacityDashboard:b,UsageDashboard:_,OnboardingDashboard:E},provide:function(){return{parentFetchData:this.fetchData}},data:function(){return{showCapacityDashboard:!1,project:!1,showOnboarding:!1}},mounted:function(){var t=this;this.fetchData(),this.showCapacityDashboard=Object.prototype.hasOwnProperty.call(n["a"].getters.apis,"listCapacity"),this.project=!1,n["a"].getters.project&&n["a"].getters.project.id&&(this.project=!0),this.$store.watch((function(t,e){return e.project}),(function(e,a){e&&e.id?t.project=!0:t.project=!1}))},methods:{fetchData:function(){var t=this;["Admin"].includes(this.$store.getters.userInfo.roletype)&&Object(r["a"])("listZones").then((function(e){t.showOnboarding=!e.listzonesresponse.count||0===e.listzonesresponse.count}))}}},S=z,x=Object(p["a"])(S,s,o,!1,null,null,null);e["default"]=x.exports},6394:function(t,e,a){"use strict";var s=a("40f6"),o=a.n(s);o.a},"6df6":function(t,e,a){"use strict";var s=a("a31f"),o=a.n(s);o.a},"82bf":function(t,e,a){"use strict";var s=a("24bc"),o=a.n(s);o.a},a31f:function(t,e,a){},b07fd:function(t,e,a){"use strict";var s=a("36bd"),o=a.n(s);o.a},d793:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.stats,(function(e){return a("a-col",{key:e.type,staticClass:"usage-dashboard-chart-tile",attrs:{xs:12,md:8}},[a("a-card",{staticClass:"usage-dashboard-chart-card",style:e.bgcolor?{"background-color":e.bgcolor}:{},attrs:{bordered:!1,loading:t.loading}},[a("router-link",{attrs:{to:{path:e.path}}},[a("div",{staticClass:"usage-dashboard-chart-card-inner"},[a("h3",[t._v(t._s(e.name))]),a("h2",[a("a-icon",{attrs:{type:e.icon}}),t._v(" "+t._s(void 0==e.count?0:e.count)+" ")],1)])])],1)],1)})),1)},o=[],r=a("d3d3"),n={name:"UsageDashboardChart",components:{ChartCard:r["a"]},props:{stats:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1}}},i=n,l=a("2877"),c=Object(l["a"])(i,s,o,!1,null,null,null);e["default"]=c.exports},e898:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-layout"},[a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.handleSubmit}},[this.isAdminOrDomainAdmin()?t._e():a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.currentpassword"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.currentpassword.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentpassword",{rules:[{required:!0,message:t.$t("message.error.current.password")}]}],expression:"['currentpassword', {\n            rules: [{ required: true, message: $t('message.error.current.password') }]\n          }]"}],attrs:{placeholder:t.$t("message.error.current.password")}})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.new.password"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.password.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:t.$t("message.error.new.password")}]}],expression:"['password', {\n            rules: [{ required: true, message: $t('message.error.new.password') }]\n          }]"}],attrs:{placeholder:t.$t("label.new.password")}})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.confirmpassword"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.password.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",{rules:[{required:!0,message:t.$t("message.error.confirm.password")},{validator:t.validateTwoPassword}]}],expression:"['confirmpassword', {\n            rules: [\n              {\n                required: true,\n                message: $t('message.error.confirm.password')\n              },\n              {\n                validator: validateTwoPassword\n              }\n            ]\n          }]"}],attrs:{placeholder:t.$t("label.confirmpassword.description")}})],1),a("div",{staticClass:"action-button",attrs:{span:24}},[a("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),a("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(this.$t("label.ok")))])],1)],1)],1)],1)},o=[],r=(a("99af"),a("4160"),a("caad"),a("b0c0"),a("d3b7"),a("159b"),a("365c")),n={name:"ChangeUserPassword",props:{resource:{type:Object,required:!0}},data:function(){return{loading:!1}},beforeCreate:function(){var t=this;this.form=this.$form.createForm(this),this.apiParams={},this.apiConfig=this.$store.getters.apis.updateUser||{},this.apiConfig.params.forEach((function(e){t.apiParams[e.name]=e}))},methods:{isAdminOrDomainAdmin:function(){return["Admin","DomainAdmin"].includes(this.$store.getters.userInfo.roletype)},isValidValueForKey:function(t,e){return e in t&&null!=t[e]},validateTwoPassword:function(t,e,a){if(e&&0!==e.length)if("confirmpassword"===t.field){var s=this.form,o=this.$t("message.validate.equalto"),r=s.getFieldValue("password");r&&r!==e?a(o):a()}else a();else a()},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){if(!t){e.loading=!0;var s={id:e.resource.id,password:a.password};e.isValidValueForKey(a,"currentpassword")&&a.currentpassword.length>0&&(s.currentpassword=a.currentpassword),Object(r["a"])("updateUser",{},"POST",s).then((function(t){e.$notification.success({message:e.$t("label.action.change.password"),description:"".concat(e.$t("message.success.change.password")," ").concat(e.resource.username)}),e.$emit("refresh-data"),e.closeAction()})).catch((function(t){e.$notifyError(t)})).finally((function(){e.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},i=n,l=(a("6df6"),a("2877")),c=Object(l["a"])(i,s,o,!1,null,"23494fca",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-5f22f63f.467fdbd2.js.map