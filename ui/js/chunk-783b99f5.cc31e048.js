(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-783b99f5"],{"0a56":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.fetchLoading}},[a("a-tabs",{attrs:{tabPosition:"mobile"===e.device?"top":"left",animated:!1}},e._l(e.traffictypes,(function(t,n){return a("a-tab-pane",{key:n,attrs:{tab:t.traffictype}},[e._l(["kvmnetworklabel","vmwarenetworklabel","xennetworklabel","hypervnetworklabel","ovm3networklabel"],(function(n,o){return a("div",{key:o,staticStyle:{"margin-bottom":"10px"}},[a("div",[a("strong",[e._v(e._s(e.$t(n)))])]),a("div",[e._v(e._s(t[n]||e.$t("label.network.label.display.for.blank.value")))])])})),"Guest"===t.traffictype?a("div",[a("a-divider"),a("IpRangesTabGuest",{attrs:{resource:e.resource,loading:e.loading}})],1):e._e(),"Public"===t.traffictype?a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",[a("strong",[e._v(e._s(e.$t("label.traffictype")))])]),a("div",[e._v(e._s(e.publicNetwork.traffictype))])]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",[a("strong",[e._v(e._s(e.$t("label.broadcastdomaintype")))])]),a("div",[e._v(e._s(e.publicNetwork.broadcastdomaintype))])]),a("a-divider"),a("IpRangesTabPublic",{attrs:{resource:e.resource,loading:e.loading,network:e.publicNetwork}})],1):e._e(),"Management"===t.traffictype?a("div",[a("a-divider"),a("IpRangesTabManagement",{attrs:{resource:e.resource,loading:e.loading}})],1):e._e(),"Storage"===t.traffictype?a("div",[a("a-divider"),a("IpRangesTabStorage",{attrs:{resource:e.resource}})],1):e._e()],2)})),1)],1)},o=[],i=(a("d3b7"),a("365c")),s=a("ac0d"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.componentLoading}},[a("a-button",{staticStyle:{"margin-bottom":"20px",width:"100%"},attrs:{disabled:!("createVlanIpRange"in this.$store.getters.apis),type:"dashed",icon:"plus"},on:{click:e.handleOpenAddIpRangeModal}},[e._v(" "+e._s(e.$t("label.add.ip.range"))+" ")]),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"account",fn:function(t){return[a("a-button",{on:{click:function(){return e.handleOpenAccountModal(t)}}},[e._v(e._s("["+t.domain+"] "+t.account))])]}},{key:"actions",fn:function(t){return[a("div",{staticClass:"actions"},["system"===t.account?a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[e._v(e._s(e.$t("label.add.account")))]),a("a-button",{attrs:{icon:"user-add",shape:"circle",disabled:!("dedicatePublicIpRange"in e.$store.getters.apis)},on:{click:function(){return e.handleOpenAddAccountModal(t)}}})],2):a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[e._v(e._s(e.$t("label.release.account")))]),a("a-button",{attrs:{icon:"user-delete",shape:"circle",type:"danger",disabled:!("releasePublicIpRange"in e.$store.getters.apis)},on:{click:function(){return e.handleRemoveAccount(t.id)}}})],2),a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[e._v(e._s(e.$t("label.remove.ip.range")))]),a("a-button",{attrs:{icon:"delete",shape:"circle",type:"danger",disabled:!("deleteVlanIpRange"in e.$store.getters.apis)},on:{click:function(a){return e.handleDeleteIpRange(t.id)}}})],2)],1)]}}])}),a("a-pagination",{staticClass:"row-element pagination",staticStyle:{"overflow-y":"auto"},attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.total,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])}),e.selectedItem?a("a-modal",{attrs:{maskClosable:!1},on:{ok:function(t){e.accountModal=!1}},model:{value:e.accountModal,callback:function(t){e.accountModal=t},expression:"accountModal"}},[a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.account")))]),a("div",[e._v(e._s(e.selectedItem.account))])]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.domain")))]),a("div",[e._v(e._s(e.selectedItem.domain))])]),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.system.vms")))]),a("div",[e._v(e._s(e.selectedItem.forsystemvms))])])])]):e._e(),a("a-modal",{attrs:{zIndex:1001,maskClosable:!1,title:e.$t("label.add.account")},on:{ok:e.handleAddAccount},model:{value:e.addAccountModal,callback:function(t){e.addAccountModal=t},expression:"addAccountModal"}},[a("a-spin",{attrs:{spinning:e.domainsLoading}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.account"))+":")]),a("a-input",{model:{value:e.addAccount.account,callback:function(t){e.$set(e.addAccount,"account",t)},expression:"addAccount.account"}})],1),a("div",[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.domain"))+":")]),a("a-select",{model:{value:e.addAccount.domain,callback:function(t){e.$set(e.addAccount,"domain",t)},expression:"addAccount.domain"}},e._l(e.domains,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+" ")])})),1)],1)])],1),a("a-modal",{attrs:{title:e.$t("label.add.ip.range"),maskClosable:!1},on:{ok:e.handleAddIpRange},model:{value:e.addIpRangeModal,callback:function(t){e.addIpRangeModal=t},expression:"addIpRangeModal"}},[a("a-form",{staticClass:"form",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleAddIpRange}},[a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.gateway")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['gateway', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.netmask")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['netmask', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.vlan")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlan"],expression:"['vlan']"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.startip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['startip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.endip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["endip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['endip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("div",{staticClass:"form__item"},[a("div",{staticStyle:{color:"black"}},[e._v(e._s(e.$t("label.set.reservation")))]),a("a-switch",{on:{change:e.handleShowAccountFields}})],1),e.showAccountFields?a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{domProps:{innerHTML:e._s(e.$t("label.set.reservation.desc"))}}),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.system.vms")}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["forsystemvms"],expression:"['forsystemvms']"}]})],1),a("a-spin",{attrs:{spinning:e.domainsLoading}},[a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.account")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account"],expression:"['account']"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.domain")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["domain"],expression:"['domain']"}]},e._l(e.domains,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name)+" ")])})),1)],1)],1)],1):e._e()],1)],1)],1)},l=[],c=(a("99af"),{name:"IpRangesTabPublic",props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1},network:{type:Object,required:!0}},data:function(){return{componentLoading:!1,items:[],total:0,selectedItem:null,accountModal:!1,addAccountModal:!1,addAccount:{account:null,domain:null},domains:[],domainsLoading:!1,addIpRangeModal:!1,showAccountFields:!1,page:1,pageSize:10,columns:[{title:this.$t("label.gateway"),dataIndex:"gateway"},{title:this.$t("label.netmask"),dataIndex:"netmask"},{title:this.$t("label.vlan"),dataIndex:"vlan"},{title:this.$t("label.startip"),dataIndex:"startip"},{title:this.$t("label.endip"),dataIndex:"endip"},{title:this.$t("label.account"),scopedSlots:{customRender:"account"}},{title:this.$t("label.action"),scopedSlots:{customRender:"actions"}}]}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchData()},watch:{network:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.componentLoading=!0,Object(i["a"])("listVlanIpRanges",{networkid:this.network.id,zoneid:this.resource.zoneid,page:this.page,pagesize:this.pageSize}).then((function(t){e.items=t.listvlaniprangesresponse.vlaniprange?t.listvlaniprangesresponse.vlaniprange:[],e.total=t.listvlaniprangesresponse.count||0})).catch((function(t){e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},fetchDomains:function(){var e=this;this.domainsLoading=!0,Object(i["a"])("listDomains",{details:"min",listAll:!0}).then((function(t){e.domains=t.listdomainsresponse.domain?t.listdomainsresponse.domain:[],e.domains.length>0&&(e.addAccount.domain=e.domains[0].id,e.form.setFieldsValue({domain:e.domains[0].id}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.domainsLoading=!1}))},handleAddAccount:function(){var e=this;this.domainsLoading=!0,!0!==this.addIpRangeModal?Object(i["a"])("dedicatePublicIpRange",{id:this.selectedItem.id,zoneid:this.selectedItem.zoneid,domainid:this.addAccount.domain,account:this.addAccount.account}).catch((function(t){e.$notifyError(t)})).finally((function(){e.addAccountModal=!1,e.domainsLoading=!1,e.fetchData()})):this.addAccountModal=!1},handleRemoveAccount:function(e){var t=this;this.componentLoading=!0,Object(i["a"])("releasePublicIpRange",{id:e}).catch((function(e){t.$notifyError(e)})).finally((function(){t.fetchData()}))},handleOpenAccountModal:function(e){this.selectedItem=e,this.accountModal=!0},handleOpenAddAccountModal:function(e){this.addIpRangeModal||(this.selectedItem=e),this.addAccountModal=!0,this.fetchDomains()},handleShowAccountFields:function(){if(!1===this.showAccountFields)return this.showAccountFields=!0,void this.fetchDomains();this.showAccountFields=!1},handleOpenAddIpRangeModal:function(){this.addIpRangeModal=!0},handleDeleteIpRange:function(e){var t=this;this.componentLoading=!0,Object(i["a"])("deleteVlanIpRange",{id:e}).then((function(){t.$notification.success({message:"Removed IP Range"})})).catch((function(e){t.$notifyError(e)})).finally((function(){t.componentLoading=!1,t.fetchData()}))},handleAddIpRange:function(e){var t=this;this.form.validateFields((function(e,a){e||(t.componentLoading=!0,t.addIpRangeModal=!1,Object(i["a"])("createVlanIpRange",{zoneId:t.resource.zoneid,vlan:a.vlan,gateway:a.gateway,netmask:a.netmask,startip:a.startip,endip:a.endip,forsystemvms:a.forsystemvms,account:a.forsystemvms?null:a.account,domainid:a.forsystemvms?null:a.domain,forvirtualnetwork:!0}).then((function(){t.$notification.success({message:t.$t("message.success.add.iprange")})})).catch((function(e){t.$notification.error({message:"".concat(t.$t("label.error")," ").concat(e.response.status),description:e.response.data.createvlaniprangeresponse?e.response.data.createvlaniprangeresponse.errortext:e.response.data.errorresponse.errortext,duration:0})})).finally((function(){t.componentLoading=!1,t.fetchData()})))}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}}),d=c,u=(a("804e"),a("2877")),p=Object(u["a"])(d,r,l,!1,null,"0076d186",null),m=p.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.componentLoading}},[a("a-button",{staticStyle:{"margin-bottom":"20px",width:"100%"},attrs:{disabled:!("createManagementNetworkIpRange"in e.$store.getters.apis),type:"dashed",icon:"plus"},on:{click:e.handleOpenAddIpRangeModal}},[e._v(" "+e._s(e.$t("label.add.ip.range"))+" ")]),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id+e.startip},pagination:!1},scopedSlots:e._u([{key:"forsystemvms",fn:function(e,t){return[a("a-checkbox",{attrs:{checked:t.forsystemvms}})]}},{key:"actions",fn:function(t){return[a("div",{staticClass:"actions"},[a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[e._v(e._s(e.$t("label.remove.ip.range")))]),a("a-button",{attrs:{disabled:!("deleteManagementNetworkIpRange"in e.$store.getters.apis),icon:"delete",shape:"circle",type:"danger"},on:{click:function(a){return e.handleDeleteIpRange(t)}}})],2)],1)]}}])}),a("a-pagination",{staticClass:"row-element pagination",staticStyle:{"overflow-y":"auto"},attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.total,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])}),a("a-modal",{attrs:{title:e.$t("label.add.ip.range"),maskClosable:!1},on:{ok:e.handleAddIpRange},model:{value:e.addIpRangeModal,callback:function(t){e.addIpRangeModal=t},expression:"addIpRangeModal"}},[a("a-form",{staticClass:"form",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleAddIpRange}},[a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.podid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pod",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['pod', {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}]},e._l(e.items,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.gateway")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['gateway', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.netmask")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['netmask', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.vlan")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlan"],expression:"['vlan']"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.startip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['startip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.endip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["endip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['endip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.system.vms")}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["vms"],expression:"['vms']"}]})],1)],1)],1)],1)},f=[],h=(a("a4d3"),a("e01a"),a("d28b"),a("b0c0"),a("3ca3"),a("ddb0"),{name:"IpRangesTabManagement",props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{componentLoading:!1,items:[],total:0,domains:[],domainsLoading:!1,addIpRangeModal:!1,defaultSelectedPod:null,page:1,pageSize:10,columns:[{title:this.$t("label.podid"),dataIndex:"name"},{title:this.$t("label.gateway"),dataIndex:"gateway"},{title:this.$t("label.netmask"),dataIndex:"netmask"},{title:this.$t("label.vlan"),dataIndex:"vlanid",scopedSlots:{customRender:"vlan"}},{title:this.$t("label.startip"),dataIndex:"startip",scopedSlots:{customRender:"startip"}},{title:this.$t("label.endip"),dataIndex:"endip",scopedSlots:{customRender:"endip"}},{title:this.$t("label.system.vms"),dataIndex:"forsystemvms",scopedSlots:{customRender:"forsystemvms"}},{title:this.$t("label.action"),scopedSlots:{customRender:"actions"}}]}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.componentLoading=!0,Object(i["a"])("listPods",{zoneid:this.resource.zoneid,page:this.page,pagesize:this.pageSize}).then((function(t){e.items=[],e.total=t.listpodsresponse.count||0;var a=t.listpodsresponse.pod?t.listpodsresponse.pod:[],n=!0,o=!1,i=void 0;try{for(var s,r=a[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var l=s.value;if(l&&l.startip&&l.startip.length>0)for(var c=0;c<l.startip.length;c++)e.items.push({id:l.id,name:l.name,gateway:l.gateway,netmask:l.netmask,vlanid:l.vlanid[c],startip:l.startip[c],endip:l.endip[c],forsystemvms:"1"===l.forsystemvms[c]})}}catch(d){o=!0,i=d}finally{try{n||null==r.return||r.return()}finally{if(o)throw i}}})).catch((function(t){console.log(t),e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},handleOpenAddIpRangeModal:function(){var e=this;this.addIpRangeModal=!0,setTimeout((function(){e.items.length>0&&e.form.setFieldsValue({pod:e.items[0].id})}),200)},handleDeleteIpRange:function(e){var t=this;this.componentLoading=!0,Object(i["a"])("deleteManagementNetworkIpRange",{podid:e.id,startip:e.startip,endip:e.endip,vlan:e.vlanid}).then((function(e){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.remove.iprange"),jobid:e.deletemanagementnetworkiprangeresponse.jobid,status:"progress"}),t.$pollJob({jobId:e.deletemanagementnetworkiprangeresponse.jobid,successMethod:function(){t.componentLoading=!1,t.fetchData()},errorMessage:t.$t("message.remove.failed"),errorMethod:function(){t.componentLoading=!1,t.fetchData()},loadingMessage:t.$t("message.remove.iprange.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.componentLoading=!1,t.fetchData()}})})).catch((function(e){t.$notifyError(e),t.componentLoading=!1,t.fetchData()}))},handleAddIpRange:function(e){var t=this;this.form.validateFields((function(e,a){e||(t.componentLoading=!0,t.addIpRangeModal=!1,Object(i["a"])("createManagementNetworkIpRange",{podid:a.pod,gateway:a.gateway,netmask:a.netmask,startip:a.startip,endip:a.endip,forsystemvms:a.vms,vlan:a.vlan||null}).then((function(e){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.add.iprange"),jobid:e.createmanagementnetworkiprangeresponse.jobid,status:"progress"}),t.$pollJob({jobId:e.createmanagementnetworkiprangeresponse.jobid,successMethod:function(){t.componentLoading=!1,t.fetchData()},errorMessage:t.$t("message.add.failed"),errorMethod:function(){t.componentLoading=!1,t.fetchData()},loadingMessage:t.$t("message.add.iprange.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.componentLoading=!1,t.fetchData()}})})).catch((function(e){t.$notifyError(e)})).finally((function(){t.componentLoading=!1,t.fetchData()})))}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}}),b=h,v=(a("9d1d"),Object(u["a"])(b,g,f,!1,null,"43bb2366",null)),$=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.componentLoading}},[a("a-button",{staticStyle:{"margin-bottom":"20px",width:"100%"},attrs:{disabled:!("createStorageNetworkIpRange"in e.$store.getters.apis),type:"dashed",icon:"plus"},on:{click:e.handleOpenAddIpRangeModal}},[e._v(" "+e._s(e.$t("label.add.ip.range"))+" ")]),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t){return[a("div",[e._v(e._s(e.returnPodName(t.podid)))])]}},{key:"actions",fn:function(t){return[a("a-popover",{attrs:{placement:"bottom"}},[a("template",{slot:"content"},[e._v(e._s(e.$t("label.remove.ip.range")))]),a("a-button",{attrs:{disabled:!("deleteStorageNetworkIpRange"in e.$store.getters.apis),icon:"delete",shape:"circle",type:"danger"},on:{click:function(a){return e.handleDeleteIpRange(t.id)}}})],2)]}}])}),a("a-pagination",{staticClass:"row-element pagination",staticStyle:{"overflow-y":"auto"},attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.total,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])}),a("a-modal",{attrs:{title:e.$t("label.add.ip.range"),maskClosable:!1},on:{ok:e.handleAddIpRange},model:{value:e.addIpRangeModal,callback:function(t){e.addIpRangeModal=t},expression:"addIpRangeModal"}},[a("a-form",{staticClass:"form",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleAddIpRange}},[a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.podid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pod",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['pod', {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}]},e._l(e.pods,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.gateway")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['gateway', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.netmask")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['netmask', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.vlan")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlan"],expression:"['vlan']"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.startip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['startip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1),a("a-form-item",{staticClass:"form__item",attrs:{label:e.$t("label.endip")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["endip",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['endip', { rules: [{ required: true, message: `${$t('label.required')}` }] }]"}]})],1)],1)],1)],1)},w=[],_=(a("7db0"),{name:"IpRangesTabStorage",props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{componentLoading:!1,items:[],total:0,pods:[],domains:[],domainsLoading:!1,addIpRangeModal:!1,defaultSelectedPod:null,columns:[{title:this.$t("label.podid"),scopedSlots:{customRender:"name"}},{title:this.$t("label.gateway"),dataIndex:"gateway"},{title:this.$t("label.netmask"),dataIndex:"netmask"},{title:this.$t("label.vlan"),dataIndex:"vlanid"},{title:this.$t("label.startip"),dataIndex:"startip"},{title:this.$t("label.endip"),dataIndex:"endip"},{title:this.$t("label.action"),scopedSlots:{customRender:"actions"}}],page:1,pageSize:10}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.fetchPods(),this.componentLoading=!0,Object(i["a"])("listStorageNetworkIpRange",{zoneid:this.resource.zoneid,page:this.page,pageSize:this.pageSize}).then((function(t){e.items=t.liststoragenetworkiprangeresponse.storagenetworkiprange||[],e.total=t.liststoragenetworkiprangeresponse.count||0})).catch((function(t){e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},fetchPods:function(){var e=this;this.componentLoading=!0,Object(i["a"])("listPods",{zoneid:this.resource.zoneid}).then((function(t){e.pods=t.listpodsresponse.pod?t.listpodsresponse.pod:[]})).catch((function(t){e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},returnPodName:function(e){var t=this.pods.find((function(t){return t.id===e}));return t?t.name:null},handleOpenAddIpRangeModal:function(){var e=this;this.addIpRangeModal=!0,setTimeout((function(){e.items.length>0&&e.form.setFieldsValue({pod:e.pods[0].id})}),200)},handleDeleteIpRange:function(e){var t=this;this.componentLoading=!0,Object(i["a"])("deleteStorageNetworkIpRange",{id:e}).then((function(e){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.remove.iprange"),jobid:e.deletestoragenetworkiprangeresponse.jobid,status:"progress"}),t.$pollJob({jobId:e.deletestoragenetworkiprangeresponse.jobid,successMethod:function(){t.componentLoading=!1,t.fetchData()},errorMessage:t.$t("message.remove.failed"),errorMethod:function(){t.componentLoading=!1,t.fetchData()},loadingMessage:t.$t("message.remove.iprange.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.componentLoading=!1,t.fetchData()}})})).catch((function(e){t.$notifyError(e),t.componentLoading=!1,t.fetchData()}))},handleAddIpRange:function(e){var t=this;this.form.validateFields((function(e,a){e||(t.componentLoading=!0,t.addIpRangeModal=!1,Object(i["a"])("createStorageNetworkIpRange",{podid:a.pod,zoneid:t.resource.zoneid,gateway:a.gateway,netmask:a.netmask,startip:a.startip,endip:a.endip,vlan:a.vlan||null}).then((function(e){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.add.iprange"),jobid:e.createstoragenetworkiprangeresponse.jobid,status:"progress"}),t.$pollJob({jobId:e.createstoragenetworkiprangeresponse.jobid,successMethod:function(){t.componentLoading=!1,t.fetchData()},errorMessage:t.$t("message.add.failed"),errorMethod:function(){t.componentLoading=!1,t.fetchData()},loadingMessage:t.$t("message.add.iprange.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.componentLoading=!1,t.fetchData()}})})).catch((function(e){t.$notifyError(e)})).finally((function(){t.componentLoading=!1,t.fetchData()})))}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}}),k=_,I=(a("c031"),Object(u["a"])(k,y,w,!1,null,"08b13c30",null)),S=I.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.componentLoading}},[a("a-button",{staticStyle:{"margin-bottom":"20px",width:"100%"},attrs:{disabled:!("createNetwork"in this.$store.getters.apis),type:"dashed",icon:"plus"},on:{click:e.handleOpenShowCreateForm}},[e._v(" "+e._s(e.$t("label.add.guest.network"))+" ")]),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id},pagination:!1}}),a("a-pagination",{staticClass:"row-element pagination",staticStyle:{"overflow-y":"auto"},attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.total,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])}),a("a-modal",{attrs:{title:e.$t("label.add.guest.network"),closable:!0,maskClosable:!1,footer:null,cancelText:e.$t("label.cancel"),centered:"",width:"auto"},on:{cancel:function(t){e.showCreateForm=!1}},model:{value:e.showCreateForm,callback:function(t){e.showCreateForm=t},expression:"showCreateForm"}},[a("CreateNetwork",{attrs:{resource:{zoneid:e.resource.zoneid}}})],1)],1)},x=[],z=a("75c5"),M={name:"IpRangesTabGuest",components:{CreateNetwork:z["default"]},props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{componentLoading:!1,items:[],total:0,showCreateForm:!1,page:1,pageSize:10,columns:[{title:this.$t("label.name"),dataIndex:"name"},{title:this.$t("label.type"),dataIndex:"type"},{title:this.$t("label.vlan"),dataIndex:"vlan"},{title:this.$t("label.broadcasturi"),dataIndex:"broadcasturi"},{title:this.$t("label.cidr"),dataIndex:"cidr"},{title:this.$t("label.ip6cidr"),dataIndex:"ip6cidr"}]}},mounted:function(){this.fetchData()},watch:{network:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.componentLoading=!0,Object(i["a"])("listNetworks",{zoneid:this.resource.zoneid,physicalnetworkid:this.resource.id,page:this.page,pagesize:this.pageSize}).then((function(t){console.log(t),e.items=t.listnetworksresponse.network?t.listnetworksresponse.network:[],e.total=t.listnetworksresponse.count||0})).catch((function(t){e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},handleOpenShowCreateForm:function(){this.showCreateForm=!0},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}},C=M,q=(a("ec82"),Object(u["a"])(C,R,x,!1,null,"3e87d959",null)),A=q.exports,L={name:"TrafficTypesTab",components:{IpRangesTabPublic:m,IpRangesTabManagement:$,IpRangesTabStorage:S,IpRangesTabGuest:A},mixins:[s["c"]],props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{traffictypes:[],publicNetwork:{},fetchLoading:!1}},mounted:function(){this.fetchData()},watch:{loading:function(e,t){!e&&this.resource.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("listTrafficTypes",{physicalnetworkid:this.resource.id}).then((function(t){e.traffictypes=t.listtraffictypesresponse.traffictype})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1})),this.fetchLoading=!0,Object(i["a"])("listNetworks",{listAll:!0,trafficType:"Public",isSystem:!0,zoneId:this.resource.zoneid}).then((function(t){t.listnetworksresponse&&t.listnetworksresponse.network&&t.listnetworksresponse.network.length>0?e.publicNetwork=t.listnetworksresponse.network[0]:e.publicNetwork={}})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))}}},D=L,j=Object(u["a"])(D,n,o,!1,null,"17ef258c",null);t["default"]=j.exports},1284:function(e,t,a){},6061:function(e,t,a){},"804e":function(e,t,a){"use strict";var n=a("b44f5"),o=a.n(n);o.a},"9d1d":function(e,t,a){"use strict";var n=a("1284"),o=a.n(n);o.a},a3fd:function(e,t,a){},b44f5:function(e,t,a){},c031:function(e,t,a){"use strict";var n=a("a3fd"),o=a.n(n);o.a},ec82:function(e,t,a){"use strict";var n=a("6061"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-783b99f5.cc31e048.js.map