(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-624441d8"],{"2a32":function(e,r,t){},"2cbf":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"form-layout"},[t("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.ip")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['ip', {\n              rules: [{ required: true, message: $t('message.error.required.input') }]\n            }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.username")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['username', {\n              rules: [{ required: true, message: $t('message.error.required.input') }]\n            }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.password")}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['password', {\n              rules: [{ required: true, message: $t('message.error.required.input') }]\n            }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.networkdevicetype")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkdevicetype",{rules:[{required:!0,message:e.$t("message.error.select")}]}],expression:"['networkdevicetype', {\n              rules: [{ required: true, message: $t('message.error.select') }]\n            }]"}]},e._l(e.networkDeviceType,(function(r){return t("a-select-option",{key:r.id},[e._v(e._s(e.$t(r.description)))])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.publicinterface")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["publicinterface"],expression:"['publicinterface']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.privateinterface")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["privateinterface"],expression:"['privateinterface']"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:12,lg:12}},[t("a-form-item",{attrs:{label:e.$t("label.numretries")}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["numretries",{initialValue:2}],expression:"['numretries', { initialValue: 2 }]"}],staticStyle:{width:"100%"}})],1)],1),t("a-col",{attrs:{md:12,lg:12}},[t("a-form-item",{attrs:{label:e.$t("label.dedicated")}},[t("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["dedicated",{initialValue:!1}],expression:"['dedicated', { initialValue: false }]"}]})],1)],1)],1),t("a-row",{attrs:{gutter:12}},[t("a-col",{attrs:{md:24,lg:24}},[t("a-form-item",{attrs:{label:e.$t("label.capacity")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["capacity"],expression:"['capacity']"}]})],1)],1)],1),t("div",{staticClass:"action-button",attrs:{span:24}},[t("a-button",{attrs:{loading:e.loading},on:{click:e.onCloseAction}},[e._v(e._s(this.$t("label.cancel")))]),t("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(this.$t("label.ok")))])],1)],1)],1)},n=[],i=(t("a15b"),t("b0c0"),t("b64b"),t("d3b7"),t("f3f3")),s=(t("96cf"),t("c964")),o=t("365c"),c={name:"AddF5LoadBalancer",props:{resource:{type:Object,default:function(){}},action:{type:Object,default:function(){}}},data:function(){return{loading:!1,nsp:{}}},computed:{networkDeviceType:function(){var e=[];return e.push({id:"F5BigIpLoadBalancer",description:"label.f5.ip.loadbalancer"}),e}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.resource&&Object.keys(this.resource).length>0&&(this.nsp=this.resource)},inject:["provideCloseAction","provideReload","provideCloseAction","parentPollActionCompletion"],methods:{onCloseAction:function(){this.provideCloseAction()},handleSubmit:function(e){var r=this;e.preventDefault(),this.form.validateFields(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var n,s,o,c,u,l,d,p,m,b,v,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(n={},n.physicalnetworkid=r.resource.physicalnetworkid,n.username=a.username,n.password=a.password,n.networkdevicetype=a.networkdevicetype,s=[],o=a.ip,s.push("https://"+o),c=!1,u=a.publicinterface?a.publicinterface:null,null!=u&&u.length>0&&(c?s.push("&"):(s.push("?"),c=!0),s.push("publicinterface="+u)),l=a.privateinterface?a.privateinterface:null,null!=l&&l.length>0&&(c?s.push("&"):(s.push("?"),c=!0),s.push("privateinterface="+u)),d=a.numretries?a.numretries:null,null!=d&&d.length>0&&(c?s.push("&"):(s.push("?"),c=!0),s.push("numretries="+d)),p=a.capacity?a.capacity:null,null!=p&&p.length>0&&(c?s.push("&"):(s.push("?"),c=!0),s.push("lbdevicecapacity="+p)),m=!!a.dedicated&&a.dedicated,c?s.push("&"):(s.push("?"),c=!0),s.push("lbdevicededicated="+m),n.url=s.join(""),r.loading=!0,e.prev=24,r.nsp.id){e.next=33;break}return b={},b.name=r.resource.name,b.physicalnetworkid=r.resource.physicalnetworkid,e.next=31,r.addNetworkServiceProvider(b);case 31:v=e.sent,r.nsp=Object(i["a"])(Object(i["a"])({},r.resource),v);case 33:return n.id=r.nsp.id,e.next=36,r.addF5LoadBalancer(n);case 36:if(f=e.sent,!f){e.next=42;break}return e.next=40,r.$store.dispatch("AddAsyncJob",{title:r.$t(r.action.label),jobid:f,description:r.$t(r.nsp.name),status:"progress"});case 40:return e.next=42,r.parentPollActionCompletion(f,r.action);case 42:return r.loading=!1,e.next=45,r.provideCloseAction();case 45:e.next=51;break;case 47:e.prev=47,e.t0=e["catch"](24),r.loading=!1,r.$notification.error({message:r.$t("message.request.failed"),description:e.t0.response&&e.t0.response.headers&&e.t0.response.headers["x-description"]||e.t0.message});case 51:case"end":return e.stop()}}),e,null,[[24,47]])})));return function(r,t){return e.apply(this,arguments)}}())},addNetworkServiceProvider:function(e){var r=this;return new Promise((function(t,a){Object(o["a"])("addNetworkServiceProvider",e).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.addnetworkserviceproviderresponse.jobid,!i){e.next=9;break}return e.next=4,r.pollJob(i);case 4:if(s=e.sent,2!==s.jobstatus){e.next=8;break}return a(s.jobresult.errortext),e.abrupt("return");case 8:t(s.jobresult.networkserviceprovider);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){a(e)}))}))},addF5LoadBalancer:function(e){return new Promise((function(r,t){Object(o["a"])("addF5LoadBalancer",e).then((function(e){var t=e.addf5bigiploadbalancerresponse.jobid||null;r(t)})).catch((function(e){t(e)}))}))},pollJob:function(e){return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r){var t=setInterval((function(){Object(o["a"])("queryAsyncJobResult",{jobId:e}).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.queryasyncjobresultresponse,0!==n.jobstatus){e.next=3;break}return e.abrupt("return");case 3:clearInterval(t),r(n);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())}),1e3)})));case 1:case"end":return r.stop()}}),r)})))()}}},u=c,l=(t("3b98"),t("2877")),d=Object(l["a"])(u,a,n,!1,null,"0439a700",null);r["default"]=d.exports},"3b98":function(e,r,t){"use strict";var a=t("2a32"),n=t.n(a);n.a}}]);
//# sourceMappingURL=chunk-624441d8.3ea95110.js.map