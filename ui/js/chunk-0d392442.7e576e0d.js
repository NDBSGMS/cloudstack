(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d392442"],{"1a94":function(e,t,s){"use strict";var a=s("38a0"),i=s.n(a);i.a},"38a0":function(e,t,s){},c773:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-spin",{attrs:{spinning:e.loading}},[s("a-form",{staticClass:"form",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.name"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.name.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("message.error.volume.name")}]}],expression:"['name', {\n          rules: [{ required: true, message: $t('message.error.volume.name') }]\n        }]"}],attrs:{placeholder:e.$t("label.volumename")}})],1),s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.zoneid"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.zoneid.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{initialValue:e.selectedZoneId,rules:[{required:!0,message:e.$t("message.error.zone")}]}],expression:"['zoneid', {\n          initialValue: selectedZoneId,\n          rules: [{ required: true, message: $t('message.error.zone') }] }]"}],attrs:{loading:e.loading},on:{change:function(t){return e.fetchDiskOfferings(t)}}},e._l(e.zones,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.diskoffering"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.diskofferingid.description||"Disk Offering"}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["diskofferingid",{initialValue:e.selectedDiskOfferingId,rules:[{required:!0,message:e.$t("message.error.select")}]}],expression:"['diskofferingid', {\n          initialValue: selectedDiskOfferingId,\n          rules: [{ required: true, message: $t('message.error.select') }]}]"}],attrs:{loading:e.loading},on:{change:function(t){return e.customDiskOffering=e.offerings.filter((function(e){return e.id===t}))[0].iscustomized||!1}}},e._l(e.offerings,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.displaytext||t.name)+" ")])})),1)],1),e.customDiskOffering?s("span",[s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.sizegb"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.size.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["size",{rules:[{required:!0,message:e.$t("message.error.custom.disk.size")}]}],expression:"['size', {\n            rules: [{ required: true, message: $t('message.error.custom.disk.size') }]}]"}],attrs:{placeholder:e.$t("label.disksize")}})],1)],1):e._e(),s("div",{staticClass:"action-button",attrs:{span:24}},[s("a-button",{on:{click:e.closeModal}},[e._v(e._s(e.$t("label.cancel")))]),s("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("label.ok")))])],1)],1)],1)},i=[],r=(s("4160"),s("b0c0"),s("d3b7"),s("159b"),s("365c")),o={name:"CreateVolume",data:function(){return{zones:[],offerings:[],selectedZoneId:"",selectedDiskOfferingId:"",customDiskOffering:!1,loading:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiParams={};var t=this.$store.getters.apis.createVolume||{};t.params.forEach((function(t){e.apiParams[t.name]=t}))},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,Object(r["a"])("listZones").then((function(t){e.zones=t.listzonesresponse.zone||[],e.selectedZoneId=e.zones[0].id||"",e.fetchDiskOfferings(e.selectedZoneId)})).finally((function(){e.loading=!1}))},fetchDiskOfferings:function(e){var t=this;this.loading=!0,Object(r["a"])("listDiskOfferings",{zoneid:e,listall:!0}).then((function(e){t.offerings=e.listdiskofferingsresponse.diskoffering||[],t.selectedDiskOfferingId=t.offerings[0].id||"",t.customDiskOffering=t.offerings[0].iscustomized||!1})).finally((function(){t.loading=!1}))},handleSubmit:function(e){var t=this;this.form.validateFields((function(e,s){e||(t.loading=!0,Object(r["a"])("createVolume",s).then((function(e){t.$pollJob({jobId:e.createvolumeresponse.jobid,successMessage:t.$t("message.success.create.volume"),successMethod:function(){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.create.volume"),jobid:e.createvolumeresponse.jobid,description:s.name,status:"progress"}),t.$emit("refresh-data")},errorMessage:t.$t("message.create.volume.failed"),errorMethod:function(){t.$emit("refresh-data")},loadingMessage:t.$t("message.create.volume.processing"),catchMessage:t.$t("error.fetching.async.job.result")}),t.$emit("refresh-data"),t.closeModal()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1})))}))},closeModal:function(){this.$emit("close-action")}}},n=o,l=(s("1a94"),s("2877")),c=Object(l["a"])(n,a,i,!1,null,"7eb12b2a",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-0d392442.7e576e0d.js.map