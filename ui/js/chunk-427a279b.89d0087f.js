(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-427a279b"],{"776b":function(e,t,a){"use strict";var i=a("a00e"),s=a.n(i);s.a},a00e:function(e,t,a){},b42f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"form-layout"},[i("a-spin",{attrs:{spinning:t.loading}},[i("a-form",{attrs:{form:t.form,loading:t.loading,layout:"vertical"},on:{submit:t.handleSubmit}},[i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.role"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.roleid.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleid",{initialValue:t.selectedRole,rules:[{required:!0,message:t.$t("message.error.select")}]}],expression:"['roleid', {\n            initialValue: selectedRole,\n            rules: [{ required: true, message: $t('message.error.select') }] }]"}],attrs:{loading:t.roleLoading,placeholder:t.apiParams.roleid.description}},t._l(t.roles,(function(e){return i("a-select-option",{key:e.id},[t._v(" "+t._s(e.name+" ("+e.type+")")+" ")])})),1)],1),i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.username"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.username.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['username', {\n            rules: [{ required: true, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:t.apiParams.username.description}})],1),i("a-row",{attrs:{gutter:12}},[i("a-col",{attrs:{md:24,lg:12}},[i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.password"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.password.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['password', {\n                rules: [{ required: true, message: $t('message.error.required.input') }]\n              }]"}],attrs:{placeholder:t.apiParams.password.description}})],1)],1),i("a-col",{attrs:{md:24,lg:12}},[i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.confirmpassword"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.password.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",{rules:[{required:!0,message:t.$t("message.error.required.input")},{validator:t.validateConfirmPassword}]}],expression:"['confirmpassword', {\n                rules: [\n                  { required: true, message: $t('message.error.required.input') },\n                  { validator: validateConfirmPassword }\n                ]\n              }]"}],attrs:{placeholder:t.apiParams.password.description}})],1)],1)],1),i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.email"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.email.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['email', {\n            rules: [{ required: true, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:t.apiParams.email.description}})],1),i("a-row",{attrs:{gutter:12}},[i("a-col",{attrs:{md:24,lg:12}},[i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.firstname"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.firstname.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["firstname",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['firstname', {\n                rules: [{ required: true, message: $t('message.error.required.input') }]\n              }]"}],attrs:{placeholder:t.apiParams.firstname.description}})],1)],1),i("a-col",{attrs:{md:24,lg:12}},[i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.lastname"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.lastname.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["lastname",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['lastname', {\n                rules: [{ required: true, message: $t('message.error.required.input') }]\n              }]"}],attrs:{placeholder:t.apiParams.lastname.description}})],1)],1)],1),this.isAdminOrDomainAdmin()?i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.domain"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.domainid.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["domainid",{initialValue:t.selectedDomain,rules:[{required:!0,message:t.$t("message.error.select")}]}],expression:"['domainid', {\n            initialValue: selectedDomain,\n            rules: [{ required: true, message: $t('message.error.select') }] }]"}],attrs:{loading:t.domainLoading,placeholder:t.apiParams.domainid.description}},t._l(t.domainsList,(function(e){return i("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1):t._e(),i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.account"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.account.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account"],expression:"['account']"}],attrs:{placeholder:t.apiParams.account.description}})],1),i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.timezone"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.timezone.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["timezone"],expression:"['timezone']"}],attrs:{showSearch:"",loading:t.timeZoneLoading,placeholder:t.apiParams.timezone.description}},t._l(t.timeZoneMap,(function(e){return i("a-select-option",{key:e.id},[t._v(" "+t._s(e.name||e.description)+" ")])})),1)],1),i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.networkdomain"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.networkdomain.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkdomain"],expression:"['networkdomain']"}],attrs:{placeholder:t.apiParams.networkdomain.description}})],1),"authorizeSamlSso"in t.$store.getters.apis?i("div",[i("a-form-item",{attrs:{label:t.$t("label.samlenable")}},[i("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["samlenable"],expression:"['samlenable']"}],on:{change:function(t){e.samlEnable=t}}})],1),t.samlEnable?i("a-form-item",[i("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.samlentity"))+" "),i("a-tooltip",{attrs:{title:t.apiParams.entityid.description}},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),i("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["samlentity",{initialValue:t.selectedIdp}],expression:"['samlentity', {\n              initialValue: selectedIdp,\n            }]"}],attrs:{loading:t.idpLoading}},t._l(t.idps,(function(e,a){return i("a-select-option",{key:a},[t._v(" "+t._s(e.orgName)+" ")])})),1)],1):t._e()],1):t._e(),i("div",{staticClass:"action-button",attrs:{span:24}},[i("a-button",{on:{click:t.closeAction}},[t._v(t._s(t.$t("label.cancel")))]),i("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("label.ok")))])],1)],1)],1)],1)},s=[],r=(a("99af"),a("4de4"),a("4160"),a("caad"),a("b0c0"),a("d3b7"),a("159b"),a("365c")),o=a("e95a3"),n=a("b047"),l=a.n(n),c={name:"AddAccountForm",data:function(){return this.fetchTimeZone=l()(this.fetchTimeZone,800),{loading:!1,domainLoading:!1,domainsList:[],selectedDomain:"",roleLoading:!1,roles:[],selectedRole:"",timeZoneLoading:!1,timeZoneMap:[],samlEnable:!1,idpLoading:!1,idps:[],selectedIdp:""}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiConfig=this.$store.getters.apis.createAccount||{},this.apiParams={},this.apiConfig.params&&this.apiConfig.params.forEach((function(t){e.apiParams[t.name]=t})),this.apiConfig=this.$store.getters.apis.authorizeSamlSso||{},this.apiConfig.params&&this.apiConfig.params.forEach((function(t){e.apiParams[t.name]=t}))},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.fetchDomains(),this.fetchRoles(),this.fetchTimeZone(),"listIdps"in this.$store.getters.apis&&this.fetchIdps()},isAdminOrDomainAdmin:function(){return["Admin","DomainAdmin"].includes(this.$store.getters.userInfo.roletype)},isDomainAdmin:function(){return"DomainAdmin"===this.$store.getters.userInfo.roletype},isValidValueForKey:function(e,t){return t in e&&null!=e[t]},validateConfirmPassword:function(e,t,a){if(t&&0!==t.length)if("confirmpassword"===e.field){var i=this.form,s=this.$t("error.password.not.match"),r=i.getFieldValue("password");r&&r!==t?a(s):a()}else a();else a()},fetchDomains:function(){var e=this;this.domainLoading=!0,Object(r["a"])("listDomains",{listAll:!0,details:"min"}).then((function(t){e.domainsList=t.listdomainsresponse.domain||[],e.selectedDomain=e.domainsList[0].id||""})).catch((function(t){e.$notification.error({message:"".concat(e.$t("label.error")," ").concat(t.response.status),description:t.response.data.errorresponse.errortext})})).finally((function(){e.domainLoading=!1}))},fetchRoles:function(){var e=this;this.roleLoading=!0,Object(r["a"])("listRoles").then((function(t){if(e.roles=t.listrolesresponse.role||[],e.selectedRole=e.roles[0].id,e.isDomainAdmin()){var a=e.roles.filter((function(e){return"User"===e.type}));a.length>0&&(e.selectedRole=a[0].id)}})).finally((function(){e.roleLoading=!1}))},fetchTimeZone:function(e){var t=this;this.timeZoneMap=[],this.timeZoneLoading=!0,Object(o["a"])(e).then((function(e){t.timeZoneMap=e,t.timeZoneLoading=!1}))},fetchIdps:function(){var e=this;this.idpLoading=!0,Object(r["a"])("listIdps").then((function(t){e.idps=t.listidpsresponse.idp||[],e.selectedIdp=e.idps[0].id||""})).finally((function(){e.idpLoading=!1}))},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){t.loading=!0;var i={roleid:a.roleid,username:a.username,password:a.password,email:a.email,firstname:a.firstname,lastname:a.lastname,domainid:a.domainid};t.isValidValueForKey(a,"account")&&a.account.length>0&&(i.account=a.account),t.isValidValueForKey(a,"timezone")&&a.timezone.length>0&&(i.timezone=a.timezone),t.isValidValueForKey(a,"networkdomain")&&a.networkdomain.length>0&&(i.networkdomain=a.networkdomain),Object(r["a"])("createAccount",i).then((function(e){t.$emit("refresh-data"),t.$notification.success({message:t.$t("label.create.account"),description:"".concat(t.$t("message.success.create.account")," ").concat(i.username)});var s=e.createaccountresponse.account.user;if(a.samlenable&&s)for(var o=0;o<s.length;o++)Object(r["a"])("authorizeSamlSso",{enable:a.samlenable,entityid:a.samlentity,userid:s[o].id}).then((function(e){t.$notification.success({message:t.$t("samlenable"),description:t.$t("message.success.enable.saml.auth")})})).catch((function(e){t.$notification.error({message:t.$t("message.request.failed"),description:e.response&&e.response.headers&&e.response.headers["x-description"]||e.message,duration:0})}));t.closeAction()})).catch((function(e){t.$notification.error({message:t.$t("message.request.failed"),description:e.response&&e.response.headers&&e.response.headers["x-description"]||e.message,duration:0})})).finally((function(){t.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},d=c,m=(a("776b"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,"34ee334c",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-427a279b.89d0087f.js.map