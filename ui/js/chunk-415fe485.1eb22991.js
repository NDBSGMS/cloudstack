(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-415fe485"],{3912:function(e,t,s){"use strict";var a=s("7512"),o=s.n(a);o.a},7512:function(e,t,s){},fb55:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-spin",{attrs:{spinning:e.loading}},[s("a-form",{staticClass:"form",attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[s("a-form-item",{attrs:{label:e.$t("label.name")}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("message.error.name")}]}],expression:"['name', {\n          rules: [{ required: true, message: $t('message.error.name') }]\n        }]"}],attrs:{placeholder:e.$t("label.snapshot.name")}})],1),s("a-form-item",{attrs:{label:e.$t("label.volume")}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["volumeid",{initialValue:e.selectedVolumeId,rules:[{required:!0,message:e.$t("message.error.select")}]}],expression:"['volumeid', {\n          initialValue: selectedVolumeId,\n          rules: [{ required: true, message: $t('message.error.select') }]}]"}],attrs:{loading:e.loading},on:{change:function(t){return e.volumes.filter((function(e){return e.id===t}))}}},e._l(e.volumes,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.id}},[e._v(" "+e._s(t.displaytext||t.name)+" ")])})),1)],1),s("div",{staticClass:"action-button",attrs:{span:24}},[s("a-button",{on:{click:e.closeModal}},[e._v(e._s(e.$t("label.cancel")))]),s("a-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("label.ok")))])],1)],1)],1)},o=[],r=(s("b0c0"),s("d3b7"),s("365c")),n={name:"CreateSnapshotFromVMSnapshot",props:{resource:{type:Object,required:!0}},data:function(){return{volumes:[],selectedVolumeId:"",loading:!1}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,Object(r["a"])("listVolumes",{virtualmachineid:this.resource.virtualmachineid,listall:!0}).then((function(t){e.volumes=t.listvolumesresponse.volume||[],e.selectedVolumeId=e.volumes[0].id||""})).finally((function(){e.loading=!1}))},handleSubmit:function(e){var t=this;this.form.validateFields((function(e,s){e||(t.loading=!0,Object(r["a"])("createSnapshotFromVMSnapshot",{name:s.name,volumeid:s.volumeid,vmsnapshotid:t.resource.id}).then((function(e){t.$pollJob({jobId:e.createsnapshotfromvmsnapshotresponse.jobid,successMessage:t.$t("message.success.create.snapshot.from.vmsnapshot"),successMethod:function(){t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.create.snapshot.from.vmsnapshot"),jobid:e.createsnapshotfromvmsnapshotresponse.jobid,description:s.name,status:"progress"}),t.$emit("refresh-data")},errorMessage:t.$t("message.create.snapshot.from.vmsnapshot.failed"),errorMethod:function(){t.$emit("refresh-data")},loadingMessage:t.$t("message.create.snapshot.from.vmsnapshot.progress"),catchMessage:t.$t("error.fetching.async.job.result")}),t.$emit("refresh-data"),t.closeModal()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1})))}))},closeModal:function(){this.$emit("close-action")}}},i=n,l=(s("3912"),s("2877")),c=Object(l["a"])(i,a,o,!1,null,"79fbc9ff",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-415fe485.1eb22991.js.map