(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4e034f6"],{"629e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-layout"},[a("a-form",{attrs:{layout:"vertical",form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.name"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.name.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['name', {\n          rules: [{ required: true, message: $t('message.error.required.input') }]\n        }]"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.description"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.description.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['description', {\n          rules: [{ required: true, message: $t('message.error.required.input') }]\n        }]"}]})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.zoneid"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.zoneid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{rules:[{required:!0,message:""+this.$t("message.error.select")}]}],expression:"['zoneid', {\n          rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\n        }]"}],attrs:{showSearch:"",allowClear:"",loading:e.zones.loading},on:{change:e.onChangeZone}},e._l(e.zones.opts,(function(t){return a("a-select-option",{key:t.name},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.externalid"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.externalid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["externalid",{rules:[{required:!0,message:""+this.$t("message.error.select")}]}],expression:"['externalid', {\n          rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\n        }] "}],attrs:{allowClear:"",loading:e.externals.loading}},e._l(e.externals.opts,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.allowuserdrivenbackups"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.allowuserdrivenbackups.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["allowuserdrivenbackups"],expression:"['allowuserdrivenbackups']"}],attrs:{"default-checked":!0}})],1),a("div",{staticClass:"action-button",attrs:{span:24}},[a("a-button",{attrs:{loading:e.loading},on:{click:e.closeAction}},[e._v(e._s(this.$t("label.cancel")))]),a("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(this.$t("label.ok")))])],1)],1)],1)},o=[],s=(a("99af"),a("4de4"),a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("365c")),n={name:"ImportBackupOffering",data:function(){return{loading:!1,zones:{loading:!1,opts:[]},externals:{loading:!1,opts:[]}}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiParams={};var t=this.$store.getters.apis.importBackupOffering||{};t.params.forEach((function(t){e.apiParams[t.name]=t}))},mounted:function(){this.fetchData()},inject:["parentFetchData"],methods:{fetchData:function(){this.fetchZone()},fetchZone:function(){var e=this;this.zones.loading=!0,Object(s["a"])("listZones",{available:!0}).then((function(t){e.zones.opts=t.listzonesresponse.zone||[],e.$forceUpdate()})).catch((function(t){e.$notifyError(t)})).finally((function(t){e.zones.loading=!1}))},fetchExternal:function(e){var t=this;e?(this.externals.loading=!0,Object(s["a"])("listBackupProviderOfferings",{zoneid:e}).then((function(e){t.externals.opts=e.listbackupproviderofferingsresponse.backupoffering||[],t.$forceUpdate()})).catch((function(e){t.$notifyError(e)})).finally((function(e){t.externals.loading=!1}))):this.externals.opts=[]},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){var r={},o=function(e){var o=a[e];r[e]="zoneid"===e?t.zones.opts.filter((function(e){return e.name===o}))[0].id||null:o};for(var n in a)o(n);r.allowuserdrivenbackups=!a.allowuserdrivenbackups||a.allowuserdrivenbackups,t.loading=!0;var i=t.$t("label.import.offering");Object(s["a"])("importBackupOffering",r).then((function(e){var a=e.importbackupofferingresponse.jobid;a&&t.$pollJob({jobId:a,successMethod:function(e){var r=e.jobresult.backupoffering.name;t.$store.dispatch("AddAsyncJob",{title:i,jobid:a,description:r,status:"progress"}),t.parentFetchData(),t.closeAction()},loadingMessage:"".concat(i," ").concat(t.$t("label.in.progress")," ").concat(t.$t("label.for")," ").concat(r.name),catchMessage:t.$t("error.fetching.async.job.result")})})).catch((function(e){t.$notifyError(e)})).finally((function(e){t.loading=!1}))}}))},onChangeZone:function(e){if(e){var t=this.zones.opts.filter((function(t){return t.name===e}))[0].id||null;this.fetchExternal(t)}else this.externals.opts=[]},closeAction:function(){this.$emit("close-action")}}},i=n,l=(a("79f5"),a("2877")),c=Object(l["a"])(i,r,o,!1,null,"225aead4",null);t["default"]=c.exports},"79f5":function(e,t,a){"use strict";var r=a("a2ae"),o=a.n(r);o.a},a2ae:function(e,t,a){}}]);
//# sourceMappingURL=chunk-d4e034f6.3e284620.js.map