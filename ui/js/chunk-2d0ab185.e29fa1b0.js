(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab185"],{"148d":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.loading}},[e.routerHealthChecksEnabled?a("div",[a("a-button",{staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{disabled:!("getRouterHealthCheckResults"in e.$store.getters.apis),type:"primary",icon:"play-circle"},on:{click:e.showGetHelathCheck}},[e._v(" "+e._s(e.$t("label.action.router.health.checks"))+" ")]),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{columns:e.columns,dataSource:e.healthChecks,pagination:!1,rowKey:function(e){return e.checkname},size:"large"},scopedSlots:e._u([{key:"status",fn:function(e){return[a("status",{staticClass:"status",attrs:{text:!0===e.success?"True":"False",displayText:""}})]}}])}),"getRouterHealthCheckResults"in e.$store.getters.apis?a("a-modal",{staticStyle:{top:"20px"},attrs:{title:e.$t("label.action.router.health.checks"),visible:e.showGetHealthChecksForm,closable:!0,maskClosable:!1,okText:e.$t("label.ok"),cancelText:e.$t("label.cancel"),centered:""},on:{ok:e.handleGetHealthChecksSubmit,cancel:e.onCloseGetHealthChecksForm}},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleGetHealthChecksSubmit}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.perform.fresh.checks"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.performfreshchecks.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.$t("performfreshchecks")],expression:"[$t('performfreshchecks')]"}],attrs:{placeholder:e.apiParams.performfreshchecks.description}})],1)],1)],1)],1):e._e()],1):a("a-alert",{attrs:{banner:"",message:e.$t("message.action.router.health.checks.disabled.warning")}})],1)},r=[],o=(a("4160"),a("b0c0"),a("d3b7"),a("159b"),a("365c")),c=a("829c"),h={name:"RouterHealthCheck",components:{Status:c["a"]},props:{resource:{type:Object,required:!0}},data:function(){return{routerHealthChecksEnabled:!1,healthChecks:[],loading:!1,columns:[{title:this.$t("label.router.health.check.name"),dataIndex:"checkname"},{title:this.$t("label.type"),dataIndex:"checktype"},{title:this.$t("label.router.health.check.success"),scopedSlots:{customRender:"status"}},{title:this.$t("label.router.health.check.last.updated"),dataIndex:"lastupdated"},{title:this.$t("label.details"),dataIndex:"details"}],showGetHealthChecksForm:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiConfigParams=this.$store.getters.apis.getRouterHealthCheckResults&&this.$store.getters.apis.getRouterHealthCheckResults.params||[],this.apiParams={},this.apiConfigParams.forEach((function(t){e.apiParams[t.name]=t}))},watch:{resource:function(e,t){this.updateResource(e)}},mounted:function(){this.updateResource(this.resource)},methods:{updateResource:function(e){e&&(this.resource=e,e.id&&this.checkConfigurationAndGetHealthChecks())},showGetHelathCheck:function(){this.showGetHealthChecksForm=!0},onCloseGetHealthChecksForm:function(){this.showGetHealthChecksForm=!1},handleGetHealthChecksSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(t.onCloseGetHealthChecksForm(),t.checkConfigurationAndGetHealthChecks(a.performfreshchecks))}))},checkConfigurationAndGetHealthChecks:function(e){var t=this,a={name:"router.health.checks.enabled"};this.loading=!0,Object(o["a"])("listConfigurations",a).then((function(e){if(t.routerHealthChecksEnabled=!1,null!==e.listconfigurationsresponse.configuration){var s=e.listconfigurationsresponse.configuration[0];s&&s.name===a.name&&(t.routerHealthChecksEnabled="true"===s.value)}})).catch((function(e){t.$notifyError(e)})).finally((function(a){t.loading=!1,t.routerHealthChecksEnabled&&t.getHealthChecks(e)}))},getHealthChecks:function(e){var t=this,a={routerid:this.resource.id};e&&(a.performfreshchecks=e),this.loading=!0,Object(o["a"])("getRouterHealthCheckResults",a).then((function(e){t.healthChecks=e.getrouterhealthcheckresultsresponse.routerhealthchecks.healthchecks})).catch((function(e){t.$notifyError(e)})).finally((function(e){t.loading=!1}))}}},n=h,l=a("2877"),i=Object(l["a"])(n,s,r,!1,null,null,null);t["default"]=i.exports}}]);
//# sourceMappingURL=chunk-2d0ab185.e29fa1b0.js.map