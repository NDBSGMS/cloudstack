{"version":3,"sources":["webpack:///./src/views/image/RegisterOrUploadTemplate.vue?03ef","webpack:///src/views/image/RegisterOrUploadTemplate.vue","webpack:///./src/views/image/RegisterOrUploadTemplate.vue?fe1b","webpack:///./src/views/image/RegisterOrUploadTemplate.vue","webpack:///./src/views/image/RegisterOrUploadTemplate.vue?0b5b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","uploadPercentage","attrs","_v","_s","$t","loading","form","on","handleSubmit","currentForm","directives","name","rawName","value","rules","required","message","expression","apiParams","url","description","_e","fileList","handleRemove","beforeUpload","length","displaytext","zoneError","zoneErrorMessage","type","zones","input","option","componentOptions","children","text","toLowerCase","indexOf","zoneids","handlerSelectZone","_l","opt","key","id","initialValue","zoneSelected","zoneid","zone","hyperVisor","hypervisor","handlerSelectHyperVisor","optIndex","format","allowed","hyperKVMShow","handleChangeDirect","checksum","hyperXenServerShow","xenServerProvider","hyperVMWShow","rootDisk","opts","keyboardType","defaultOsId","osTypes","ostypeid","staticStyle","$store","getters","userInfo","roletype","features","userpublictemplateenabled","closeAction","staticRenderFns","props","resource","Object","action","data","uploading","defaultZone","nicAdapterType","defaultOsType","rootAdmin","allowDirectDownload","uploadParams","currentAction","icon","beforeCreate","$form","createForm","apiConfig","apis","registerTemplate","params","forEach","created","$set","mounted","fetchData","computed","methods","fetchZone","fetchOsTypes","prototype","hasOwnProperty","call","store","fetchXenServerProvider","handleFormChange","e","target","newFileList","splice","index","file","handleUpload","formData","append","duration","listAll","listZones","push","concat","listZonesResponse","fetchHyperVisor","listResponse","listhyperVisors","json","listconfigurationsresponse","configuration","fetchRootDisk","controller","fetchNicAdapterType","fetchKeyboardType","keys","keyboardOpts","keyboard","fetchFormat","Array","isArray","validZone","resetSelect","includes","preventDefault","validateFields","err","undefined","join","formattedDetailData","assign","checked","allZoneExists","$emit","setFieldsValue","rootDiskControllerType","component"],"mappings":"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","file":"js/chunk-4092847c.b4fa1311.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-layout\"},[(_vm.uploadPercentage > 0)?_c('span',[_c('a-icon',{attrs:{\"type\":\"loading\"}}),_vm._v(\" \"+_vm._s(_vm.$t('message.upload.file.processing'))+\" \"),_c('a-progress',{attrs:{\"percent\":_vm.uploadPercentage}})],1):_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[(_vm.currentForm === 'Create')?_c('div',[_c('a-row',{attrs:{\"gutter\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.url')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['url', {\n                rules: [{ required: true, message: (\"\" + (this.$t('message.error.required.input'))) }]\n              }]),expression:\"['url', {\\n                rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\\n              }]\"}],attrs:{\"autoFocus\":\"\",\"placeholder\":_vm.apiParams.url.description}})],1)],1)],1):_vm._e(),(_vm.currentForm === 'Upload')?_c('div',[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.templatefileupload')}},[_c('a-upload-dragger',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['file', {\n              rules: [{ required: true, message: (\"\" + (this.$t('message.error.required.input'))) }]\n            }]),expression:\"['file', {\\n              rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\\n            }]\"}],attrs:{\"multiple\":false,\"fileList\":_vm.fileList,\"remove\":_vm.handleRemove,\"beforeUpload\":_vm.beforeUpload}},[_c('p',{staticClass:\"ant-upload-drag-icon\"},[_c('a-icon',{attrs:{\"type\":\"cloud-upload\"}})],1),(_vm.fileList.length === 0)?_c('p',{staticClass:\"ant-upload-text\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.volume.volumefileupload.description'))+\" \")]):_vm._e()])],1)],1):_vm._e(),_c('a-row',{attrs:{\"gutter\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.name')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['name', {\n              rules: [{ required: true, message: (\"\" + (this.$t('message.error.required.input'))) }]\n            }]),expression:\"['name', {\\n              rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\\n            }]\"}],attrs:{\"placeholder\":_vm.apiParams.name.description}})],1)],1),_c('a-row',{attrs:{\"gutter\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.displaytext')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['displaytext', {\n              rules: [{ required: true, message: (\"\" + (this.$t('message.error.required.input'))) }]\n            }]),expression:\"['displaytext', {\\n              rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\\n            }]\"}],attrs:{\"placeholder\":_vm.apiParams.displaytext.description}})],1)],1),(_vm.currentForm === 'Create')?_c('div',[_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.zone'),\"validate-status\":_vm.zoneError,\"help\":_vm.zoneErrorMessage}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['zoneids', {\n                  rules: [\n                    {\n                      required: true,\n                      message: (\"\" + (this.$t('message.error.select'))),\n                      type: 'array'\n                    }\n                  ]\n                }]),expression:\"['zoneids', {\\n                  rules: [\\n                    {\\n                      required: true,\\n                      message: `${this.$t('message.error.select')}`,\\n                      type: 'array'\\n                    }\\n                  ]\\n                }]\"}],attrs:{\"loading\":_vm.zones.loading,\"mode\":\"multiple\",\"optionFilterProp\":\"children\",\"filterOption\":function (input, option) {\n                  return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                },\"placeholder\":_vm.apiParams.zoneids.description},on:{\"change\":_vm.handlerSelectZone}},_vm._l((_vm.zones.opts),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1)],1)],1)],1):_c('div',[_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.zoneid'),\"validate-status\":_vm.zoneError,\"help\":_vm.zoneErrorMessage}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['zoneid', {\n                  initialValue: this.zoneSelected,\n                  rules: [\n                    {\n                      required: true,\n                      message: (\"\" + (this.$t('message.error.select')))\n                    }\n                  ]\n                }]),expression:\"['zoneid', {\\n                  initialValue: this.zoneSelected,\\n                  rules: [\\n                    {\\n                      required: true,\\n                      message: `${this.$t('message.error.select')}`\\n                    }\\n                  ]\\n                }]\"}],attrs:{\"showSearch\":\"\",\"optionFilterProp\":\"children\",\"filterOption\":function (input, option) {\n                  return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                },\"placeholder\":_vm.apiParams.zoneid.description,\"loading\":_vm.zones.loading},on:{\"change\":_vm.handlerSelectZone}},_vm._l((_vm.zones.opts),function(zone){return _c('a-select-option',{key:zone.id,attrs:{\"value\":zone.id}},[_vm._v(\" \"+_vm._s(zone.name || zone.description)+\" \")])}),1)],1)],1)],1)],1),_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.hypervisor')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['hypervisor', {\n                rules: [\n                  {\n                    required: true,\n                    message: (\"\" + (this.$t('message.error.select')))\n                  }\n                ]\n              }]),expression:\"['hypervisor', {\\n                rules: [\\n                  {\\n                    required: true,\\n                    message: `${this.$t('message.error.select')}`\\n                  }\\n                ]\\n              }]\"}],attrs:{\"loading\":_vm.hyperVisor.loading,\"placeholder\":_vm.apiParams.hypervisor.description},on:{\"change\":_vm.handlerSelectHyperVisor}},_vm._l((_vm.hyperVisor.opts),function(opt,optIndex){return _c('a-select-option',{key:optIndex},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1)],1),_c('a-col',{attrs:{\"md\":24,\"lg\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.format')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['format', {\n                rules: [\n                  {\n                    required: true,\n                    message: (\"\" + (this.$t('message.error.select')))\n                  }\n                ]\n              }]),expression:\"['format', {\\n                rules: [\\n                  {\\n                    required: true,\\n                    message: `${this.$t('message.error.select')}`\\n                  }\\n                ]\\n              }]\"}],attrs:{\"placeholder\":_vm.apiParams.format.description}},_vm._l((_vm.format.opts),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1)],1)],1),(_vm.allowed && _vm.hyperKVMShow && _vm.currentForm !== 'Upload')?_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.directdownload')}},[_c('a-switch',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['directdownload']),expression:\"['directdownload']\"}],on:{\"change\":_vm.handleChangeDirect}})],1)],1),(_vm.allowDirectDownload)?_c('a-col',{attrs:{\"md\":24,\"lg\":12}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.checksum')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['checksum', {\n                rules: [{ required: false, message: (\"\" + (this.$t('message.error.required.input'))) }]\n              }]),expression:\"['checksum', {\\n                rules: [{ required: false, message: `${this.$t('message.error.required.input')}` }]\\n              }]\"}],attrs:{\"placeholder\":_vm.apiParams.checksum.description}})],1)],1):_vm._e()],1):_vm._e(),(_vm.allowed && _vm.hyperXenServerShow)?_c('a-row',{attrs:{\"gutter\":12}},[(_vm.hyperXenServerShow)?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.xenservertoolsversion61plus')}},[_c('a-switch',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['xenserverToolsVersion61plus',{\n              initialValue: _vm.xenServerProvider\n            }]),expression:\"['xenserverToolsVersion61plus',{\\n              initialValue: xenServerProvider\\n            }]\"}],attrs:{\"default-checked\":_vm.xenServerProvider}})],1):_vm._e()],1):_vm._e(),(_vm.hyperKVMShow || _vm.hyperVMWShow)?_c('a-row',{attrs:{\"gutter\":12}},[(_vm.hyperKVMShow)?_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.rootdiskcontrollertype')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['rootDiskControllerType', {\n                initialValue: _vm.rootDisk.opts.length > 0 ? 'osdefault' : '',\n                rules: [\n                  {\n                    required: true,\n                    message: (\"\" + (this.$t('message.error.select')))\n                  }\n                ]\n              }]),expression:\"['rootDiskControllerType', {\\n                initialValue: rootDisk.opts.length > 0 ? 'osdefault' : '',\\n                rules: [\\n                  {\\n                    required: true,\\n                    message: `${this.$t('message.error.select')}`\\n                  }\\n                ]\\n              }]\"}],attrs:{\"loading\":_vm.rootDisk.loading,\"placeholder\":_vm.$t('label.rootdiskcontrollertype')}},_vm._l((_vm.rootDisk.opts),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1)],1):_vm._e(),_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[(_vm.hyperVMWShow)?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.keyboardtype')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['keyboardType', {\n                rules: [\n                  {\n                    required: false,\n                    message: (\"\" + (this.$t('message.error.select')))\n                  }\n                ]\n              }]),expression:\"['keyboardType', {\\n                rules: [\\n                  {\\n                    required: false,\\n                    message: `${this.$t('message.error.select')}`\\n                  }\\n                ]\\n              }]\"}],attrs:{\"placeholder\":_vm.$t('label.keyboard')}},_vm._l((_vm.keyboardType.opts),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1):_vm._e()],1)],1):_vm._e(),(!_vm.hyperVMWShow)?_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.ostypeid')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['ostypeid', {\n                initialValue: _vm.defaultOsId,\n                rules: [\n                  {\n                    required: true,\n                    message: (\"\" + (this.$t('message.error.select')))\n                  }\n                ]\n              }]),expression:\"['ostypeid', {\\n                initialValue: defaultOsId,\\n                rules: [\\n                  {\\n                    required: true,\\n                    message: `${this.$t('message.error.select')}`\\n                  }\\n                ]\\n              }]\"}],attrs:{\"showSearch\":\"\",\"optionFilterProp\":\"children\",\"filterOption\":function (input, option) {\n                return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n              },\"loading\":_vm.osTypes.loading,\"placeholder\":_vm.apiParams.ostypeid.description}},_vm._l((_vm.osTypes.opts),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1)],1)],1):_vm._e(),_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-form-item',[_c('a-checkbox-group',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['groupenabled', { initialValue: ['requireshvm'] }]),expression:\"['groupenabled', { initialValue: ['requireshvm'] }]\"}],staticStyle:{\"width\":\"100%\"}},[_c('a-row',[_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"isextractable\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.isextractable'))+\" \")])],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"passwordenabled\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.passwordenabled'))+\" \")])],1)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"isdynamicallyscalable\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.isdynamicallyscalable'))+\" \")])],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"requireshvm\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.requireshvm'))+\" \")])],1)],1),_c('a-row',[_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"isfeatured\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.isfeatured'))+\" \")])],1),_c('a-col',{attrs:{\"span\":12}},[(_vm.$store.getters.userInfo.roletype === 'Admin' || _vm.$store.getters.features.userpublictemplateenabled)?_c('a-checkbox',{attrs:{\"value\":\"ispublic\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.ispublic'))+\" \")]):_vm._e()],1)],1),_c('a-row',[(_vm.$store.getters.userInfo.roletype === 'Admin')?_c('a-col',{attrs:{\"span\":12}},[_c('a-checkbox',{attrs:{\"value\":\"isrouting\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.isrouting'))+\" \")])],1):_vm._e()],1)],1)],1)],1)],1),_c('div',{staticClass:\"action-button\",attrs:{\"span\":24}},[_c('a-button',{on:{\"click\":_vm.closeAction}},[_vm._v(_vm._s(this.$t('label.cancel')))]),_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(this.$t('label.ok')))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div class=\"form-layout\">\n    <span v-if=\"uploadPercentage > 0\">\n      <a-icon type=\"loading\" />\n      {{ $t('message.upload.file.processing') }}\n      <a-progress :percent=\"uploadPercentage\" />\n    </span>\n    <a-spin :spinning=\"loading\" v-else>\n      <a-form\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        layout=\"vertical\">\n        <div v-if=\"currentForm === 'Create'\">\n          <a-row :gutter=\"12\">\n            <a-form-item :label=\"$t('label.url')\">\n              <a-input\n                autoFocus\n                v-decorator=\"['url', {\n                  rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\n                }]\"\n                :placeholder=\"apiParams.url.description\" />\n            </a-form-item>\n          </a-row>\n        </div>\n        <div v-if=\"currentForm === 'Upload'\">\n          <a-form-item :label=\"$t('label.templatefileupload')\">\n            <a-upload-dragger\n              :multiple=\"false\"\n              :fileList=\"fileList\"\n              :remove=\"handleRemove\"\n              :beforeUpload=\"beforeUpload\"\n              v-decorator=\"['file', {\n                rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\n              }]\">\n              <p class=\"ant-upload-drag-icon\">\n                <a-icon type=\"cloud-upload\" />\n              </p>\n              <p class=\"ant-upload-text\" v-if=\"fileList.length === 0\">\n                {{ $t('label.volume.volumefileupload.description') }}\n              </p>\n            </a-upload-dragger>\n          </a-form-item>\n        </div>\n        <a-row :gutter=\"12\">\n          <a-form-item :label=\"$t('label.name')\">\n            <a-input\n              v-decorator=\"['name', {\n                rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\n              }]\"\n              :placeholder=\"apiParams.name.description\" />\n          </a-form-item>\n        </a-row>\n        <a-row :gutter=\"12\">\n          <a-form-item :label=\"$t('label.displaytext')\">\n            <a-input\n              v-decorator=\"['displaytext', {\n                rules: [{ required: true, message: `${this.$t('message.error.required.input')}` }]\n              }]\"\n              :placeholder=\"apiParams.displaytext.description\" />\n          </a-form-item>\n        </a-row>\n        <div v-if=\"currentForm === 'Create'\">\n          <a-row :gutter=\"12\">\n            <a-col :md=\"24\" :lg=\"24\">\n              <a-form-item\n                :label=\"$t('label.zone')\"\n                :validate-status=\"zoneError\"\n                :help=\"zoneErrorMessage\">\n                <a-select\n                  v-decorator=\"['zoneids', {\n                    rules: [\n                      {\n                        required: true,\n                        message: `${this.$t('message.error.select')}`,\n                        type: 'array'\n                      }\n                    ]\n                  }]\"\n                  :loading=\"zones.loading\"\n                  mode=\"multiple\"\n                  optionFilterProp=\"children\"\n                  :filterOption=\"(input, option) => {\n                    return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                  }\"\n                  :placeholder=\"apiParams.zoneids.description\"\n                  @change=\"handlerSelectZone\">\n                  <a-select-option v-for=\"opt in zones.opts\" :key=\"opt.id\">\n                    {{ opt.name || opt.description }}\n                  </a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </div>\n        <div v-else>\n          <a-row :gutter=\"12\">\n            <a-col :md=\"24\" :lg=\"24\">\n              <a-form-item\n                :label=\"$t('label.zoneid')\"\n                :validate-status=\"zoneError\"\n                :help=\"zoneErrorMessage\">\n                <a-select\n                  v-decorator=\"['zoneid', {\n                    initialValue: this.zoneSelected,\n                    rules: [\n                      {\n                        required: true,\n                        message: `${this.$t('message.error.select')}`\n                      }\n                    ]\n                  }]\"\n                  showSearch\n                  optionFilterProp=\"children\"\n                  :filterOption=\"(input, option) => {\n                    return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                  }\"\n                  @change=\"handlerSelectZone\"\n                  :placeholder=\"apiParams.zoneid.description\"\n                  :loading=\"zones.loading\">\n                  <a-select-option :value=\"zone.id\" v-for=\"zone in zones.opts\" :key=\"zone.id\">\n                    {{ zone.name || zone.description }}\n                  </a-select-option>\n                </a-select>\n              </a-form-item>\n            </a-col>\n          </a-row>\n        </div>\n        <a-row :gutter=\"12\">\n          <a-col :md=\"24\" :lg=\"12\">\n            <a-form-item :label=\"$t('label.hypervisor')\">\n              <a-select\n                v-decorator=\"['hypervisor', {\n                  rules: [\n                    {\n                      required: true,\n                      message: `${this.$t('message.error.select')}`\n                    }\n                  ]\n                }]\"\n                :loading=\"hyperVisor.loading\"\n                :placeholder=\"apiParams.hypervisor.description\"\n                @change=\"handlerSelectHyperVisor\">\n                <a-select-option v-for=\"(opt, optIndex) in hyperVisor.opts\" :key=\"optIndex\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"24\" :lg=\"12\">\n            <a-form-item :label=\"$t('label.format')\">\n              <a-select\n                v-decorator=\"['format', {\n                  rules: [\n                    {\n                      required: true,\n                      message: `${this.$t('message.error.select')}`\n                    }\n                  ]\n                }]\"\n                :placeholder=\"apiParams.format.description\">\n                <a-select-option v-for=\"opt in format.opts\" :key=\"opt.id\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"12\" v-if=\"allowed && hyperKVMShow && currentForm !== 'Upload'\">\n          <a-col :md=\"24\" :lg=\"12\">\n            <a-form-item :label=\"$t('label.directdownload')\">\n              <a-switch v-decorator=\"['directdownload']\" @change=\"handleChangeDirect\" />\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"24\" :lg=\"12\" v-if=\"allowDirectDownload\">\n            <a-form-item :label=\"$t('label.checksum')\">\n              <a-input\n                v-decorator=\"['checksum', {\n                  rules: [{ required: false, message: `${this.$t('message.error.required.input')}` }]\n                }]\"\n                :placeholder=\"apiParams.checksum.description\" />\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"12\" v-if=\"allowed && hyperXenServerShow\">\n          <a-form-item v-if=\"hyperXenServerShow\" :label=\"$t('label.xenservertoolsversion61plus')\">\n            <a-switch\n              v-decorator=\"['xenserverToolsVersion61plus',{\n                initialValue: xenServerProvider\n              }]\"\n              :default-checked=\"xenServerProvider\" />\n          </a-form-item>\n        </a-row>\n        <a-row :gutter=\"12\" v-if=\"hyperKVMShow || hyperVMWShow\">\n          <a-col :md=\"24\" :lg=\"24\" v-if=\"hyperKVMShow\">\n            <a-form-item :label=\"$t('label.rootdiskcontrollertype')\">\n              <a-select\n                v-decorator=\"['rootDiskControllerType', {\n                  initialValue: rootDisk.opts.length > 0 ? 'osdefault' : '',\n                  rules: [\n                    {\n                      required: true,\n                      message: `${this.$t('message.error.select')}`\n                    }\n                  ]\n                }]\"\n                :loading=\"rootDisk.loading\"\n                :placeholder=\"$t('label.rootdiskcontrollertype')\">\n                <a-select-option v-for=\"opt in rootDisk.opts\" :key=\"opt.id\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :md=\"24\" :lg=\"24\">\n            <a-form-item v-if=\"hyperVMWShow\" :label=\"$t('label.keyboardtype')\">\n              <a-select\n                v-decorator=\"['keyboardType', {\n                  rules: [\n                    {\n                      required: false,\n                      message: `${this.$t('message.error.select')}`\n                    }\n                  ]\n                }]\"\n                :placeholder=\"$t('label.keyboard')\">\n                <a-select-option v-for=\"opt in keyboardType.opts\" :key=\"opt.id\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"12\" v-if=\"!hyperVMWShow\">\n          <a-col :md=\"24\" :lg=\"24\">\n            <a-form-item :label=\"$t('label.ostypeid')\">\n              <a-select\n                showSearch\n                optionFilterProp=\"children\"\n                :filterOption=\"(input, option) => {\n                  return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase()) >= 0\n                }\"\n                v-decorator=\"['ostypeid', {\n                  initialValue: defaultOsId,\n                  rules: [\n                    {\n                      required: true,\n                      message: `${this.$t('message.error.select')}`\n                    }\n                  ]\n                }]\"\n                :loading=\"osTypes.loading\"\n                :placeholder=\"apiParams.ostypeid.description\">\n                <a-select-option v-for=\"opt in osTypes.opts\" :key=\"opt.id\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"12\">\n          <a-col :md=\"24\" :lg=\"24\">\n            <a-form-item>\n              <a-checkbox-group\n                v-decorator=\"['groupenabled', { initialValue: ['requireshvm'] }]\"\n                style=\"width: 100%;\"\n              >\n                <a-row>\n                  <a-col :span=\"12\">\n                    <a-checkbox value=\"isextractable\">\n                      {{ $t('label.isextractable') }}\n                    </a-checkbox>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-checkbox value=\"passwordenabled\">\n                      {{ $t('label.passwordenabled') }}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n                <a-row>\n                  <a-col :span=\"12\">\n                    <a-checkbox value=\"isdynamicallyscalable\">\n                      {{ $t('label.isdynamicallyscalable') }}\n                    </a-checkbox>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-checkbox value=\"requireshvm\">\n                      {{ $t('label.requireshvm') }}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n                <a-row>\n                  <a-col :span=\"12\">\n                    <a-checkbox value=\"isfeatured\">\n                      {{ $t('label.isfeatured') }}\n                    </a-checkbox>\n                  </a-col>\n                  <a-col :span=\"12\">\n                    <a-checkbox\n                      value=\"ispublic\"\n                      v-if=\"$store.getters.userInfo.roletype === 'Admin' || $store.getters.features.userpublictemplateenabled\" >\n                      {{ $t('label.ispublic') }}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n                <a-row>\n                  <a-col :span=\"12\" v-if=\"$store.getters.userInfo.roletype === 'Admin'\">\n                    <a-checkbox value=\"isrouting\">\n                      {{ $t('label.isrouting') }}\n                    </a-checkbox>\n                  </a-col>\n                </a-row>\n              </a-checkbox-group>\n            </a-form-item>\n          </a-col>\n        </a-row>\n\n        <div :span=\"24\" class=\"action-button\">\n          <a-button @click=\"closeAction\">{{ this.$t('label.cancel') }}</a-button>\n          <a-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\">{{ this.$t('label.ok') }}</a-button>\n        </div>\n      </a-form>\n    </a-spin>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport store from '@/store'\nimport { axios } from '../../utils/request'\n\nexport default {\n  name: 'RegisterOrUploadTemplate',\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    },\n    action: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      uploadPercentage: 0,\n      uploading: false,\n      fileList: [],\n      zones: {},\n      defaultZone: '',\n      zoneSelected: '',\n      hyperVisor: {},\n      rootDisk: {},\n      nicAdapterType: {},\n      keyboardType: {},\n      format: {},\n      osTypes: {},\n      defaultOsType: '',\n      defaultOsId: null,\n      xenServerProvider: false,\n      hyperKVMShow: false,\n      hyperXenServerShow: false,\n      hyperVMWShow: false,\n      zoneError: '',\n      zoneErrorMessage: '',\n      loading: false,\n      rootAdmin: 'Admin',\n      allowed: false,\n      allowDirectDownload: false,\n      uploadParams: null,\n      currentForm: this.action.currentAction.icon === 'plus' ? 'Create' : 'Upload'\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiConfig = this.$store.getters.apis.registerTemplate || {}\n    this.apiParams = {}\n    this.apiConfig.params.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n  },\n  created () {\n    this.$set(this.zones, 'loading', false)\n    this.$set(this.zones, 'opts', [])\n    this.$set(this.hyperVisor, 'loading', false)\n    this.$set(this.hyperVisor, 'opts', [])\n    this.$set(this.rootDisk, 'loading', false)\n    this.$set(this.rootDisk, 'opts', [])\n    this.$set(this.nicAdapterType, 'loading', false)\n    this.$set(this.nicAdapterType, 'opts', [])\n    this.$set(this.keyboardType, 'loading', false)\n    this.$set(this.keyboardType, 'opts', [])\n    this.$set(this.format, 'loading', false)\n    this.$set(this.format, 'opts', [])\n    this.$set(this.osTypes, 'loading', false)\n    this.$set(this.osTypes, 'opts', [])\n  },\n  mounted () {\n    this.fetchData()\n  },\n  computed: {\n  },\n  methods: {\n    fetchData () {\n      this.fetchZone()\n      this.fetchOsTypes()\n      if (Object.prototype.hasOwnProperty.call(store.getters.apis, 'listConfigurations')) {\n        this.fetchXenServerProvider()\n      }\n    },\n    handleFormChange (e) {\n      this.currentForm = e.target.value\n    },\n    handleRemove (file) {\n      const index = this.fileList.indexOf(file)\n      const newFileList = this.fileList.slice()\n      newFileList.splice(index, 1)\n      this.fileList = newFileList\n    },\n    beforeUpload (file) {\n      this.fileList = [file]\n      return false\n    },\n    handleUpload () {\n      const { fileList } = this\n      const formData = new FormData()\n      fileList.forEach(file => {\n        formData.append('files[]', file)\n      })\n      this.uploadPercentage = 0\n      axios.post(this.uploadParams.postURL,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'X-signature': this.uploadParams.signature,\n            'X-expires': this.uploadParams.expires,\n            'X-metadata': this.uploadParams.metadata\n          },\n          onUploadProgress: (progressEvent) => {\n            this.uploadPercentage = Number(parseFloat(100 * progressEvent.loaded / progressEvent.total).toFixed(1))\n          },\n          timeout: 86400000\n        }).then((json) => {\n        this.$notification.success({\n          message: this.$t('message.success.upload'),\n          description: this.$t('message.success.upload.template.description')\n        })\n        this.$emit('refresh-data')\n        this.closeAction()\n      }).catch(e => {\n        this.$notification.error({\n          message: this.$t('message.upload.failed'),\n          description: `${this.$t('message.upload.template.failed.description')} -  ${e}`,\n          duration: 0\n        })\n      })\n    },\n    fetchZone () {\n      const params = {}\n      let listZones = []\n      params.listAll = true\n\n      this.allowed = false\n\n      if (store.getters.userInfo.roletype === this.rootAdmin && this.currentForm === 'Create') {\n        this.allowed = true\n        listZones.push({\n          id: this.$t('label.all.zone'),\n          name: this.$t('label.all.zone')\n        })\n      }\n\n      this.zones.loading = true\n      this.zones.opts = []\n\n      api('listZones', params).then(json => {\n        const listZonesResponse = json.listzonesresponse.zone\n        listZones = listZones.concat(listZonesResponse)\n\n        this.$set(this.zones, 'opts', listZones)\n      }).finally(() => {\n        this.zoneSelected = (this.zones.opts && this.zones.opts[1]) ? this.zones.opts[1].id : ''\n        this.zones.loading = false\n        this.fetchHyperVisor({ zoneid: this.zoneSelected })\n      })\n    },\n    fetchHyperVisor (params) {\n      this.hyperVisor.loading = true\n      let listhyperVisors = this.hyperVisor.opts\n\n      api('listHypervisors', params).then(json => {\n        const listResponse = json.listhypervisorsresponse.hypervisor\n        if (listResponse) {\n          listhyperVisors = listhyperVisors.concat(listResponse)\n        }\n        if (this.currentForm !== 'Upload') {\n          listhyperVisors.push({\n            name: 'Any'\n          })\n        }\n        this.$set(this.hyperVisor, 'opts', listhyperVisors)\n      }).finally(() => {\n        this.hyperVisor.loading = false\n      })\n    },\n    fetchOsTypes () {\n      const params = {}\n      params.listAll = true\n\n      this.osTypes.opts = []\n      this.osTypes.loading = true\n\n      api('listOsTypes', params).then(json => {\n        const listOsTypes = json.listostypesresponse.ostype\n        this.$set(this.osTypes, 'opts', listOsTypes)\n        this.defaultOsType = this.osTypes.opts[1].description\n        this.defaultOsId = this.osTypes.opts[1].id\n      }).finally(() => {\n        this.osTypes.loading = false\n      })\n    },\n    fetchXenServerProvider () {\n      const params = {}\n      params.name = 'xenserver.pvdriver.version'\n\n      this.xenServerProvider = true\n\n      api('listConfigurations', params).then(json => {\n        if (json.listconfigurationsresponse.configuration !== null && json.listconfigurationsresponse.configuration[0].value !== 'xenserver61') {\n          this.xenServerProvider = false\n        }\n      })\n    },\n    fetchRootDisk (hyperVisor) {\n      const controller = []\n      this.rootDisk.opts = []\n\n      if (hyperVisor === 'KVM') {\n        controller.push({\n          id: '',\n          description: ''\n        })\n        controller.push({\n          id: 'ide',\n          description: 'ide'\n        })\n        controller.push({\n          id: 'osdefault',\n          description: 'osdefault'\n        })\n        controller.push({\n          id: 'scsi',\n          description: 'scsi'\n        })\n        controller.push({\n          id: 'virtio',\n          description: 'virtio'\n        })\n      } else if (hyperVisor === 'VMware') {\n        controller.push({\n          id: '',\n          description: ''\n        })\n        controller.push({\n          id: 'scsi',\n          description: 'scsi'\n        })\n        controller.push({\n          id: 'ide',\n          description: 'ide'\n        })\n        controller.push({\n          id: 'osdefault',\n          description: 'osdefault'\n        })\n        controller.push({\n          id: 'pvscsi',\n          description: 'pvscsi'\n        })\n        controller.push({\n          id: 'lsilogic',\n          description: 'lsilogic'\n        })\n        controller.push({\n          id: 'lsisas1068',\n          description: 'lsilogicsas'\n        })\n        controller.push({\n          id: 'buslogic',\n          description: 'buslogic'\n        })\n      }\n\n      this.$set(this.rootDisk, 'opts', controller)\n    },\n    fetchNicAdapterType () {\n      const nicAdapterType = []\n      nicAdapterType.push({\n        id: '',\n        description: ''\n      })\n      nicAdapterType.push({\n        id: 'E1000',\n        description: 'E1000'\n      })\n      nicAdapterType.push({\n        id: 'PCNet32',\n        description: 'PCNet32'\n      })\n      nicAdapterType.push({\n        id: 'Vmxnet2',\n        description: 'Vmxnet2'\n      })\n      nicAdapterType.push({\n        id: 'Vmxnet3',\n        description: 'Vmxnet3'\n      })\n\n      this.$set(this.nicAdapterType, 'opts', nicAdapterType)\n    },\n    fetchKeyboardType () {\n      const keyboardType = []\n      const keyboardOpts = this.$config.keyboardOptions || {}\n      keyboardType.push({\n        id: '',\n        description: ''\n      })\n\n      Object.keys(keyboardOpts).forEach(keyboard => {\n        keyboardType.push({\n          id: keyboard,\n          description: this.$t(keyboardOpts[keyboard])\n        })\n      })\n\n      this.$set(this.keyboardType, 'opts', keyboardType)\n    },\n    fetchFormat (hyperVisor) {\n      const format = []\n\n      switch (hyperVisor) {\n        case 'Hyperv':\n          format.push({\n            id: 'VHD',\n            description: 'VHD'\n          })\n          format.push({\n            id: 'VHDX',\n            description: 'VHDX'\n          })\n          break\n        case 'KVM':\n          this.hyperKVMShow = true\n          format.push({\n            id: 'QCOW2',\n            description: 'QCOW2'\n          })\n          format.push({\n            id: 'RAW',\n            description: 'RAW'\n          })\n          format.push({\n            id: 'VHD',\n            description: 'VHD'\n          })\n          format.push({\n            id: 'VMDK',\n            description: 'VMDK'\n          })\n          break\n        case 'XenServer':\n          this.hyperXenServerShow = true\n          format.push({\n            id: 'VHD',\n            description: 'VHD'\n          })\n          break\n        case 'Simulator':\n          format.push({\n            id: 'VHD',\n            description: 'VHD'\n          })\n          break\n        case 'VMware':\n          this.hyperVMWShow = true\n          format.push({\n            id: 'OVA',\n            description: 'OVA'\n          })\n          break\n        case 'BareMetal':\n          format.push({\n            id: 'BareMetal',\n            description: 'BareMetal'\n          })\n          break\n        case 'Ovm':\n          format.push({\n            id: 'RAW',\n            description: 'RAW'\n          })\n          break\n        case 'LXC':\n          format.push({\n            id: 'TAR',\n            description: 'TAR'\n          })\n          break\n        default:\n          break\n      }\n      this.$set(this.format, 'opts', format)\n    },\n    handlerSelectZone (value) {\n      if (!Array.isArray(value)) {\n        value = [value]\n      }\n      this.validZone(value)\n      this.hyperVisor.opts = []\n\n      if (this.zoneError !== '') {\n        return\n      }\n\n      this.resetSelect()\n\n      const params = {}\n\n      if (value.includes(this.$t('label.all.zone'))) {\n        params.listAll = true\n        this.fetchHyperVisor(params)\n        return\n      }\n\n      for (let i = 0; i < value.length; i++) {\n        const zoneSelected = this.zones.opts.filter(zone => zone.id === value[i])\n\n        if (zoneSelected.length > 0) {\n          params.zoneid = zoneSelected[0].id\n          this.fetchHyperVisor(params)\n        }\n      }\n    },\n    handlerSelectHyperVisor (value) {\n      const hyperVisor = this.hyperVisor.opts[value].name\n\n      this.hyperXenServerShow = false\n      this.hyperVMWShow = false\n      this.hyperKVMShow = false\n      this.allowDirectDownload = false\n\n      this.resetSelect()\n      this.fetchFormat(hyperVisor)\n      this.fetchRootDisk(hyperVisor)\n      this.fetchNicAdapterType()\n      this.fetchKeyboardType()\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err || this.zoneError !== '') {\n          return\n        }\n        let params = {}\n        for (const key in values) {\n          const input = values[key]\n\n          if (input === undefined) {\n            continue\n          }\n          if (key === 'file') {\n            continue\n          }\n\n          if (key === 'zoneids') {\n            if (input.length === 1 && input[0] === this.$t('label.all.zone')) {\n              params.zoneids = '-1'\n              continue\n            }\n            params[key] = input.join()\n          } else if (key === 'zoneid') {\n            params[key] = input\n          } else if (key === 'ostypeid') {\n            params[key] = input\n          } else if (key === 'hypervisor') {\n            params[key] = this.hyperVisor.opts[input].name\n          } else if (key === 'groupenabled') {\n            for (const index in input) {\n              const name = input[index]\n              params[name] = true\n            }\n          } else {\n            const formattedDetailData = {}\n            switch (key) {\n              case 'rootDiskControllerType':\n                formattedDetailData['details[0].rootDiskController'] = input\n                break\n              case 'nicAdapterType':\n                formattedDetailData['details[0].nicAdapter'] = input\n                break\n              case 'keyboardType':\n                formattedDetailData['details[0].keyboard'] = input\n                break\n              case 'xenserverToolsVersion61plus':\n                formattedDetailData['details[0].hypervisortoolsversion'] = input\n                break\n            }\n\n            if (Object.keys(formattedDetailData).length > 0) {\n              params = Object.assign({}, params, formattedDetailData)\n            } else {\n              params[key] = input\n            }\n          }\n        }\n        if (this.currentForm === 'Create') {\n          this.loading = true\n          api('registerTemplate', params).then(json => {\n            this.$notification.success({\n              message: this.$t('label.register.template'),\n              description: `${this.$t('message.success.register.template')} ${params.name}`\n            })\n            this.$emit('refresh-data')\n            this.closeAction()\n          }).catch(error => {\n            this.$notifyError(error)\n          }).finally(() => {\n            this.loading = false\n          })\n        } else {\n          this.loading = true\n          if (this.fileList.length > 1) {\n            this.$notification.error({\n              message: this.$t('message.error.upload.template'),\n              description: this.$t('message.error.upload.template.description'),\n              duration: 0\n            })\n          }\n          api('getUploadParamsForTemplate', params).then(json => {\n            this.uploadParams = (json.postuploadtemplateresponse && json.postuploadtemplateresponse.getuploadparams) ? json.postuploadtemplateresponse.getuploadparams : ''\n            this.handleUpload()\n          }).catch(error => {\n            this.$notifyError(error)\n          }).finally(() => {\n            this.loading = false\n          })\n        }\n      })\n    },\n    handleChangeDirect (checked) {\n      this.allowDirectDownload = checked\n    },\n    validZone (zones) {\n      const allZoneExists = zones.filter(zone => zone === this.$t('label.all.zone'))\n\n      this.zoneError = ''\n      this.zoneErrorMessage = ''\n\n      if (allZoneExists.length > 0 && zones.length > 1) {\n        this.zoneError = 'error'\n        this.zoneErrorMessage = this.$t('message.error.zone.combined')\n      }\n    },\n    closeAction () {\n      this.$emit('close-action')\n    },\n    resetSelect () {\n      this.form.setFieldsValue({\n        hypervisor: undefined,\n        format: undefined,\n        rootDiskControllerType: undefined,\n        nicAdapterType: undefined,\n        keyboardType: undefined\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n  .form-layout {\n    width: 80vw;\n\n    @media (min-width: 700px) {\n      width: 550px;\n    }\n  }\n\n  .action-button {\n    text-align: right;\n\n    button {\n      margin-right: 5px;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterOrUploadTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterOrUploadTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RegisterOrUploadTemplate.vue?vue&type=template&id=2e2c9a30&scoped=true&\"\nimport script from \"./RegisterOrUploadTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./RegisterOrUploadTemplate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RegisterOrUploadTemplate.vue?vue&type=style&index=0&id=2e2c9a30&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e2c9a30\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterOrUploadTemplate.vue?vue&type=style&index=0&id=2e2c9a30&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RegisterOrUploadTemplate.vue?vue&type=style&index=0&id=2e2c9a30&scoped=true&lang=less&\""],"sourceRoot":""}