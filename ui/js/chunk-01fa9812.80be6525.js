(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01fa9812"],{"33e8":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("a-tabs",{staticClass:"form-layout"},[o("a-tab-pane",{key:"1",attrs:{tab:t.$t("label.action.project.add.account")}},[o("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.addAccountToProject}},[o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.account"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addAccountToProject.account.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account"],expression:"['account']"}],attrs:{placeholder:t.apiParams.addAccountToProject.account.description}})],1),o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.email"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addAccountToProject.email.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}],attrs:{placeholder:t.apiParams.addAccountToProject.email.description}})],1),t.apiParams.addAccountToProject.projectroleid?o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.project.role"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addAccountToProject.projectroleid.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectroleid"],expression:"['projectroleid']"}],attrs:{showSearch:"",loading:t.loading,placeholder:t.$t("label.project.role")}},t._l(t.projectRoles,(function(e){return o("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1):t._e(),t.apiParams.addAccountToProject.roletype?o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.roletype"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addAccountToProject.roletype.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roletype"],expression:"['roletype']"}],attrs:{showSearch:"",placeholder:t.$t("label.roletype")}},[o("a-select-option",{attrs:{value:"Admin"}},[t._v("Admin")]),o("a-select-option",{attrs:{value:"Regular"}},[t._v("Regular")])],1)],1):t._e(),o("div",{staticClass:"action-button",attrs:{span:24}},[o("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),o("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addAccountToProject}},[t._v(t._s(t.$t("label.ok")))])],1)],1)],1),t.apiParams.addUserToProject?o("a-tab-pane",{key:"2",attrs:{tab:t.$t("label.action.project.add.user")}},[o("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.addUserToProject}},[o("p",{domProps:{innerHTML:t._s(t.$t("message.add.user.to.project"))}}),o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.user"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addUserToProject.username.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username"],expression:"['username']"}],attrs:{placeholder:t.apiParams.addUserToProject.username.description}})],1),o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.email"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addUserToProject.email.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email"],expression:"['email']"}],attrs:{placeholder:t.apiParams.addUserToProject.email.description}})],1),o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.project.role"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addUserToProject.roletype.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectroleid"],expression:"['projectroleid']"}],attrs:{showSearch:"",loading:t.loading,placeholder:t.$t("label.project.role")}},t._l(t.projectRoles,(function(e){return o("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1)],1),o("a-form-item",[o("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.roletype"))+" "),o("a-tooltip",{attrs:{title:t.apiParams.addUserToProject.roletype.description}},[o("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),o("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roletype"],expression:"['roletype']"}],attrs:{showSearch:"",placeholder:t.$t("label.roletype")}},[o("a-select-option",{attrs:{value:"Admin"}},[t._v("Admin")]),o("a-select-option",{attrs:{value:"Regular"}},[t._v("Regular")])],1)],1),o("div",{staticClass:"action-button",attrs:{span:24}},[o("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),o("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.addUserToProject}},[t._v(t._s(t.$t("label.ok")))])],1)],1)],1):t._e()],1)],1)},r=[],c=(o("4160"),o("b0c0"),o("d3b7"),o("159b"),o("365c")),s={name:"AddAccountOrUserToProject",props:{resource:{type:Object,required:!0}},data:function(){return{users:[],accounts:[],projectRoles:[],selectedUser:null,selectedAccount:null,loading:!1,load:{users:!1,accounts:!1,projectRoles:!1}}},mounted:function(){this.fetchData()},beforeCreate:function(){var t=this;this.form=this.$form.createForm(this);var e=["addAccountToProject"];"addUserToProject"in this.$store.getters.apis&&e.push("addUserToProject"),this.apiParams={};for(var o=function(){c=r[a];var e={},o=t.$store.getters.apis[c];o.params.forEach((function(t){e[t.name]=t})),t.apiParams[c]=e},a=0,r=e;a<r.length;a++){var c;o()}},methods:{fetchData:function(){this.fetchUsers(),this.fetchAccounts(),this.isProjectRolesSupported()&&this.fetchProjectRoles()},fetchUsers:function(){var t=this;this.load.users=!0,Object(c["a"])("listUsers",{listall:!0}).then((function(e){t.users=e.listusersresponse.user?e.listusersresponse.user:[]})).catch((function(e){t.$notifyError(e)})).finally((function(){t.load.users=!1}))},fetchAccounts:function(){var t=this;this.load.accounts=!0,Object(c["a"])("listAccounts",{domainid:this.resource.domainid}).then((function(e){t.accounts=e.listaccountsresponse.account||[]})).catch((function(e){t.$notifyError(e)})).finally((function(){t.load.accounts=!1}))},fetchProjectRoles:function(){var t=this;this.load.projectRoles=!0,Object(c["a"])("listProjectRoles",{projectid:this.resource.id}).then((function(e){t.projectRoles=e.listprojectrolesresponse.projectrole||[]})).catch((function(e){t.$notifyError(e)})).finally((function(){t.load.projectRoles=!1}))},isProjectRolesSupported:function(){return"listProjectRoles"in this.$store.getters.apis},addAccountToProject:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,o){if(!t){e.loading=!0;var a={projectid:e.resource.id};for(var r in o){var s=o[r];void 0!==s&&(a[r]=s)}Object(c["a"])("addAccountToProject",a).then((function(t){e.$pollJob({jobId:t.addaccounttoprojectresponse.jobid,successMessage:"Successfully added account ".concat(a.account," to project"),errorMessage:"Failed to add account: ".concat(a.account," to project"),loadingMessage:"Adding Account: ".concat(a.account," to project..."),catchMessage:"Error encountered while fetching async job result"}),e.$emit("refresh-data"),e.closeAction()})).catch((function(t){e.$notifyError(t)})).finally((function(){e.loading=!1}))}}))},addUserToProject:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,o){if(!t){e.loading=!0;var a={projectid:e.resource.id};for(var r in o){var s=o[r];void 0!==s&&(a[r]=s)}Object(c["a"])("addUserToProject",a).then((function(t){e.$pollJob({jobId:t.addusertoprojectresponse.jobid,successMessage:"Successfully added user ".concat(a.username," to project"),errorMessage:"Failed to add user: ".concat(a.username," to project"),loadingMessage:"Adding User ".concat(a.username," to project..."),catchMessage:"Error encountered while fetching async job result"}),e.$emit("refresh-data"),e.closeAction()})).catch((function(t){console.log("catch"),e.$notifyError(t)})).finally((function(){e.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},i=s,l=(o("7db7"),o("2877")),n=Object(l["a"])(i,a,r,!1,null,"3a7d2eea",null);e["default"]=n.exports},"7db7":function(t,e,o){"use strict";var a=o("8de7"),r=o.n(a);r.a},"8de7":function(t,e,o){}}]);
//# sourceMappingURL=chunk-01fa9812.80be6525.js.map