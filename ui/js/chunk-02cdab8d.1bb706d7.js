(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02cdab8d"],{"2ecd":function(e,t,a){},"8b36":function(e,t,a){"use strict";var s=a("2ecd"),i=a.n(s);i.a},c4f8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form"},[a("a-input-search",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:e.$t("label.search")},on:{search:e.fetchData},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",loading:e.loading,columns:e.columns,dataSource:e.hosts,pagination:!1,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"suitability",fn:function(e){return a("div",{},[e.suitableformigration?a("a-icon",{staticClass:"host-item__suitability-icon",attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}}):a("a-icon",{staticClass:"host-item__suitability-icon",attrs:{type:"close-circle",theme:"twoTone",twoToneColor:"#f5222d"}})],1)}},{key:"memused",fn:function(t){return a("div",{},[e._v(" "+e._s(e._f("byteToGigabyte")(t.memoryused))+" GB ")])}},{key:"select",fn:function(t){return[a("a-radio",{staticClass:"host-item__radio",attrs:{checked:t.id===e.selectedHost.id,disabled:!t.suitableformigration},on:{click:function(a){e.selectedHost=t}}})]}}])}),a("a-pagination",{staticClass:"pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.totalCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.handleChangePage,showSizeChange:e.handleChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])}),a("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"flex-end"}},[a("a-button",{attrs:{type:"primary",disabled:!e.selectedHost.id},on:{click:e.submitForm}},[e._v(" "+e._s(e.$t("label.ok"))+" ")])],1)],1)},i=[],o=(a("99af"),a("b0c0"),a("b6802"),a("d3b7"),a("365c")),n={name:"VMMigrateWizard",props:{resource:{type:Object,required:!0}},data:function(){return{loading:!0,hosts:[],selectedHost:{},searchQuery:"",totalCount:0,page:1,pageSize:10,columns:[{title:this.$t("label.name"),dataIndex:"name"},{title:this.$t("label.suitability"),scopedSlots:{customRender:"suitability"}},{title:this.$t("label.cpuused"),dataIndex:"cpuused"},{title:this.$t("label.memused"),scopedSlots:{customRender:"memused"}},{title:this.$t("label.select"),scopedSlots:{customRender:"select"}}]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0,Object(o["a"])("findHostsForMigration",{virtualmachineid:this.resource.id,keyword:this.searchQuery,page:this.page,pagesize:this.pageSize}).then((function(t){e.hosts=t.findhostsformigrationresponse.host||[],e.hosts.sort((function(e,t){return t.suitableformigration-e.suitableformigration})),e.totalCount=t.findhostsformigrationresponse.count})).catch((function(t){e.$message.error("".concat(e.$t("message.load.host.failed"),": ").concat(t))})).finally((function(){e.loading=!1}))},submitForm:function(){var e=this;this.loading=!0,Object(o["a"])(this.selectedHost.requiresStorageMotion?"migrateVirtualMachineWithVolume":"migrateVirtualMachine",{hostid:this.selectedHost.id,virtualmachineid:this.resource.id}).then((function(t){e.$store.dispatch("AddAsyncJob",{title:"".concat(e.$t("label.migrating")," ").concat(e.resource.name),jobid:t.migratevirtualmachineresponse.jobid,description:e.resource.name,status:"progress"}),e.$pollJob({jobId:t.migratevirtualmachineresponse.jobid,successMessage:"".concat(e.$t("message.success.migrating")," ").concat(e.resource.name),successMethod:function(){e.$parent.$parent.close()},errorMessage:e.$t("message.migrating.failed"),errorMethod:function(){e.$parent.$parent.close()},loadingMessage:"".concat(e.$t("message.migrating.processing")," ").concat(e.resource.name),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.$parent.$parent.close()}}),e.$parent.$parent.close()})).catch((function(t){e.$notification.error({message:e.$t("message.request.failed"),description:t.response&&t.response.headers&&t.response.headers["x-description"]||t.message,duration:0})})).finally((function(){e.loading=!1}))},handleChangePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},handleChangePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}},filters:{byteToGigabyte:function(e){return(e/Math.pow(10,9)).toFixed(2)}}},c=n,r=(a("8b36"),a("2877")),l=Object(r["a"])(c,s,i,!1,null,"ec69eef0",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-02cdab8d.1bb706d7.js.map