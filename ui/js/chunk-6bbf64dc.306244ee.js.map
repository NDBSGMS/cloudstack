{"version":3,"sources":["webpack:///./src/views/infra/ClusterAdd.vue?44ff","webpack:///src/views/infra/ClusterAdd.vue","webpack:///./src/views/infra/ClusterAdd.vue?4f78","webpack:///./src/views/infra/ClusterAdd.vue","webpack:///./src/views/infra/ClusterAdd.vue?cfd1"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","attrs","loading","staticClass","_v","_s","$t","on","fetchPods","model","value","callback","$$v","zoneId","expression","_l","zone","key","id","name","resetAllFields","hypervisor","hv","podId","pod","ref","placeholder","clustername","host","username","password","dataCenter","_e","toggleDedicated","domainError","dedicatedDomainId","dedicatedAccount","$parent","close","handleSubmitForm","staticRenderFns","components","DedicateDomain","props","resource","type","Object","required","inject","data","clustertype","url","ovm3pool","ovm3cluster","ovm3vip","zonesList","hypervisorsList","podsList","showDedicated","params","mounted","fetchData","methods","fetchZones","fetchHypervisors","$store","getters","apis","addCluster","keys","forEach","zoneid","$refs","requiredCluster","classList","remove","parentToggleLoading","cluster","message","description","error","response","addclusterresponse","errortext","duration","add","dedicateCluster","clusterId","domainId","account","jobId","dedicateclusterresponse","jobid","successMessage","successMethod","title","status","errorMessage","errorMethod","loadingMessage","catchMessage","catchMethod","errorresponse","returnPlaceholder","find","i","field","component"],"mappings":"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","file":"js/chunk-6bbf64dc.306244ee.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.zonenamelabel')))]),_c('a-select',{on:{\"change\":_vm.fetchPods},model:{value:(_vm.zoneId),callback:function ($$v) {_vm.zoneId=$$v},expression:\"zoneId\"}},_vm._l((_vm.zonesList),function(zone){return _c('a-select-option',{key:zone.id,attrs:{\"value\":zone.id}},[_vm._v(\" \"+_vm._s(zone.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.hypervisor')))]),_c('a-select',{on:{\"change\":_vm.resetAllFields},model:{value:(_vm.hypervisor),callback:function ($$v) {_vm.hypervisor=$$v},expression:\"hypervisor\"}},_vm._l((_vm.hypervisorsList),function(hv){return _c('a-select-option',{key:hv.name,attrs:{\"value\":hv.name}},[_vm._v(\" \"+_vm._s(hv.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.podname')))]),_c('a-select',{model:{value:(_vm.podId),callback:function ($$v) {_vm.podId=$$v},expression:\"podId\"}},_vm._l((_vm.podsList),function(pod){return _c('a-select-option',{key:pod.id,attrs:{\"value\":pod.id}},[_vm._v(\" \"+_vm._s(pod.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.clusternamelabel')))]),_c('span',{ref:\"requiredCluster\",staticClass:\"required required-label\"},[_vm._v(_vm._s(_vm.$t('label.required')))]),_c('a-input',{attrs:{\"placeholder\":_vm.placeholder.clustername},model:{value:(_vm.clustername),callback:function ($$v) {_vm.clustername=$$v},expression:\"clustername\"}})],1),(_vm.hypervisor === 'VMware')?[_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.vcenter.host')))]),_c('a-input',{model:{value:(_vm.host),callback:function ($$v) {_vm.host=$$v},expression:\"host\"}})],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.vcenterusername')))]),_c('a-input',{model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}})],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.vcenterpassword')))]),_c('a-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.vcenterdatacenter')))]),_c('a-input',{model:{value:(_vm.dataCenter),callback:function ($$v) {_vm.dataCenter=$$v},expression:\"dataCenter\"}})],1)]:_vm._e(),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.isdedicated')))]),_c('a-checkbox',{on:{\"change\":_vm.toggleDedicated}})],1),(_vm.showDedicated)?[_c('DedicateDomain',{attrs:{\"error\":_vm.domainError},on:{\"domainChange\":function (id) { return _vm.dedicatedDomainId = id; },\"accountChange\":function (id) { return _vm.dedicatedAccount = id; }}})]:_vm._e(),_c('a-divider'),_c('div',{staticClass:\"actions\"},[_c('a-button',{on:{\"click\":function () { return this$1.$parent.$parent.close(); }}},[_vm._v(_vm._s(_vm.$t('label.cancel')))]),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmitForm}},[_vm._v(_vm._s(_vm.$t('label.ok')))])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-spin :spinning=\"loading\">\n    <div class=\"form\">\n      <div class=\"form__item\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.zonenamelabel') }}</div>\n        <a-select v-model=\"zoneId\" @change=\"fetchPods\">\n          <a-select-option\n            v-for=\"zone in zonesList\"\n            :value=\"zone.id\"\n            :key=\"zone.id\">\n            {{ zone.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\">{{ $t('label.hypervisor') }}</div>\n        <a-select v-model=\"hypervisor\" @change=\"resetAllFields\">\n          <a-select-option\n            v-for=\"hv in hypervisorsList\"\n            :value=\"hv.name\"\n            :key=\"hv.name\">\n            {{ hv.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\">{{ $t('label.podname') }}</div>\n        <a-select v-model=\"podId\">\n          <a-select-option\n            v-for=\"pod in podsList\"\n            :value=\"pod.id\"\n            :key=\"pod.id\">\n            {{ pod.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.clusternamelabel') }}</div>\n        <span class=\"required required-label\" ref=\"requiredCluster\">{{ $t('label.required') }}</span>\n        <a-input :placeholder=\"placeholder.clustername\" v-model=\"clustername\"></a-input>\n      </div>\n\n      <template v-if=\"hypervisor === 'VMware'\">\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.vcenter.host') }}</div>\n          <a-input v-model=\"host\"></a-input>\n        </div>\n\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.vcenterusername') }}</div>\n          <a-input v-model=\"username\"></a-input>\n        </div>\n\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.vcenterpassword') }}</div>\n          <a-input type=\"password\" v-model=\"password\"></a-input>\n        </div>\n\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.vcenterdatacenter') }}</div>\n          <a-input v-model=\"dataCenter\"></a-input>\n        </div>\n      </template>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\">{{ $t('label.isdedicated') }}</div>\n        <a-checkbox @change=\"toggleDedicated\" />\n      </div>\n\n      <template v-if=\"showDedicated\">\n        <DedicateDomain\n          @domainChange=\"id => dedicatedDomainId = id\"\n          @accountChange=\"id => dedicatedAccount = id\"\n          :error=\"domainError\" />\n      </template>\n\n      <a-divider></a-divider>\n\n      <div class=\"actions\">\n        <a-button @click=\"() => this.$parent.$parent.close()\">{{ $t('label.cancel') }}</a-button>\n        <a-button @click=\"handleSubmitForm\" type=\"primary\">{{ $t('label.ok') }}</a-button>\n      </div>\n\n    </div>\n  </a-spin>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport DedicateDomain from '../../components/view/DedicateDomain'\n\nexport default {\n  name: 'ClusterAdd',\n  components: {\n    DedicateDomain\n  },\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  inject: ['parentFetchData', 'parentToggleLoading'],\n  data () {\n    return {\n      loading: false,\n      zoneId: null,\n      hypervisor: null,\n      podId: null,\n      clustername: null,\n      clustertype: 'CloudManaged',\n      username: null,\n      password: null,\n      url: null,\n      host: null,\n      dataCenter: null,\n      ovm3pool: null,\n      ovm3cluster: null,\n      ovm3vip: null,\n      zonesList: [],\n      hypervisorsList: [],\n      podsList: [],\n      showDedicated: false,\n      dedicatedDomainId: null,\n      dedicatedAccount: null,\n      domainError: false,\n      params: [],\n      placeholder: {\n        clustername: null\n      }\n    }\n  },\n  mounted () {\n    this.fetchData()\n  },\n  methods: {\n    fetchData () {\n      this.fetchZones()\n      this.fetchHypervisors()\n      this.params = this.$store.getters.apis.addCluster.params\n      Object.keys(this.placeholder).forEach(item => { this.returnPlaceholder(item) })\n    },\n    fetchZones () {\n      this.loading = true\n      api('listZones').then(response => {\n        this.zonesList = response.listzonesresponse.zone || []\n        this.zoneId = this.zonesList[0].id || null\n        this.fetchPods()\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchHypervisors () {\n      this.loading = true\n      api('listHypervisors').then(response => {\n        this.hypervisorsList = response.listhypervisorsresponse.hypervisor || []\n        this.hypervisor = this.hypervisorsList[0].name || null\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchPods () {\n      this.loading = true\n      api('listPods', {\n        zoneid: this.zoneId\n      }).then(response => {\n        this.podsList = response.listpodsresponse.pod || []\n        this.podId = this.podsList[0].id || null\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    toggleDedicated () {\n      this.dedicatedDomainId = null\n      this.dedicatedAccount = null\n      this.showDedicated = !this.showDedicated\n    },\n    handleSubmitForm () {\n      if (!this.clustername) {\n        this.$refs.requiredCluster.classList.add('required-label--visible')\n        return\n      }\n      this.$refs.requiredCluster.classList.remove('required-label--visible')\n\n      if (this.hypervisor === 'Ovm3') {\n        this.ovm3pool = 'on'\n        this.ovm3cluster = 'undefined'\n        this.ovm3vip = ''\n      }\n\n      if (this.hypervisor === 'VMware') {\n        this.clustertype = 'ExternalManaged'\n        const clusternameVal = this.clustername\n        this.url = `http://${this.host}/${this.dataCenter}/${clusternameVal}`\n        this.clustername = `${this.host}/${this.dataCenter}/${clusternameVal}`\n      }\n\n      this.loading = true\n      this.parentToggleLoading()\n      api('addCluster', {}, 'POST', {\n        zoneId: this.zoneId,\n        hypervisor: this.hypervisor,\n        clustertype: this.clustertype,\n        podId: this.podId,\n        clustername: this.clustername,\n        ovm3pool: this.ovm3pool,\n        ovm3cluster: this.ovm3cluster,\n        ovm3vip: this.ovm3vip,\n        username: this.username,\n        password: this.password,\n        url: this.url\n      }).then(response => {\n        const cluster = response.addclusterresponse.cluster[0] || {}\n        if (cluster.id && this.showDedicated) {\n          this.dedicateCluster(cluster.id)\n        }\n        this.parentFetchData()\n        this.parentToggleLoading()\n        this.$parent.$parent.close()\n      }).catch(error => {\n        this.$notification.error({\n          message: `${this.$t('label.error')} ${error.response.status}`,\n          description: error.response.data.addclusterresponse.errortext,\n          duration: 0\n        })\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    dedicateCluster (clusterId) {\n      this.loading = true\n      api('dedicateCluster', {\n        clusterId,\n        domainId: this.dedicatedDomainId,\n        account: this.dedicatedAccount\n      }).then(response => {\n        this.$pollJob({\n          jobId: response.dedicateclusterresponse.jobid,\n          successMessage: this.$t('message.cluster.dedicated'),\n          successMethod: () => {\n            this.loading = false\n            this.$store.dispatch('AddAsyncJob', {\n              title: this.$t('message.cluster.dedicated'),\n              jobid: response.dedicateclusterresponse.jobid,\n              description: `${this.$t('label.domainid')} : ${this.dedicatedDomainId}`,\n              status: 'progress'\n            })\n          },\n          errorMessage: this.$t('error.dedicate.cluster.failed'),\n          errorMethod: () => {\n            this.loading = false\n          },\n          loadingMessage: this.$t('message.dedicate.zone'),\n          catchMessage: this.$t('error.fetching.async.job.result'),\n          catchMethod: () => {\n            this.loading = false\n          }\n        })\n      }).catch(error => {\n        this.$notification.error({\n          message: `${this.$t('label.error')} ${error.response.status}`,\n          description: error.response.data.errorresponse.errortext,\n          duration: 0\n        })\n        this.loading = false\n      })\n    },\n    resetAllFields () {\n      this.clustertype = 'CloudManaged'\n      this.username = null\n      this.password = null\n      this.url = null\n      this.host = null\n      this.dataCenter = null\n      this.ovm3pool = null\n      this.ovm3cluster = null\n      this.ovm3vip = null\n    },\n    returnPlaceholder (field) {\n      this.params.find(i => {\n        if (i.name === field) this.placeholder[field] = i.description\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .form {\n\n    &__label {\n      margin-bottom: 5px;\n    }\n\n    &__item {\n      margin-bottom: 20px;\n    }\n\n    .ant-select {\n      width: 85vw;\n\n      @media (min-width: 760px) {\n        width: 400px;\n      }\n    }\n  }\n\n  .actions {\n    display: flex;\n    justify-content: flex-end;\n\n    button {\n      &:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n\n  .required {\n    color: #ff0000;\n\n    &-label {\n      display: none;\n\n      &--visible {\n        display: block;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClusterAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClusterAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClusterAdd.vue?vue&type=template&id=bc34ec9e&scoped=true&\"\nimport script from \"./ClusterAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./ClusterAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClusterAdd.vue?vue&type=style&index=0&id=bc34ec9e&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc34ec9e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClusterAdd.vue?vue&type=style&index=0&id=bc34ec9e&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClusterAdd.vue?vue&type=style&index=0&id=bc34ec9e&scoped=true&lang=scss&\""],"sourceRoot":""}