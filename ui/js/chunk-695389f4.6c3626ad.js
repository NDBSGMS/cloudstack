(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-695389f4"],{"07ac":function(e,t,r){var a=r("23e7"),n=r("6f53").values;a({target:"Object",stat:!0},{values:function(e){return n(e)}})},"29f5":function(e,t,r){"use strict";var a=r("9475"),n=r.n(a);n.a},"3b69":function(e,t,r){},"3c2e":function(e,t,r){},"78dc":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form"},[r("a-steps",{attrs:{labelPlacement:"vertical",size:"small",current:e.currentStep}},e._l(e.steps,(function(t){return r("a-step",{key:t.title,attrs:{title:e.$t(t.title)}})})),1),r("div",[0===e.currentStep?r("zone-wizard-zone-type-step",{attrs:{prefillContent:e.zoneConfig},on:{nextPressed:e.nextPressed,fieldsChanged:e.onFieldsChanged}}):1===e.currentStep?r("zone-wizard-zone-details-step",{attrs:{isFixError:e.stepFixError,prefillContent:e.zoneConfig},on:{nextPressed:e.nextPressed,backPressed:e.backPressed,fieldsChanged:e.onFieldsChanged,submitLaunchZone:e.onLaunchZone}}):2===e.currentStep?r("zone-wizard-network-setup-step",{attrs:{stepChild:e.stepChild,isFixError:e.stepFixError,prefillContent:e.zoneConfig},on:{nextPressed:e.nextPressed,backPressed:e.backPressed,fieldsChanged:e.onFieldsChanged,submitLaunchZone:e.onLaunchZone}}):3===e.currentStep?r("zone-wizard-add-resources",{attrs:{stepChild:e.stepChild,isFixError:e.stepFixError,prefillContent:e.zoneConfig},on:{nextPressed:e.nextPressed,backPressed:e.backPressed,fieldsChanged:e.onFieldsChanged,submitLaunchZone:e.onLaunchZone}}):r("zone-wizard-launch-zone",{attrs:{launchZone:e.launchZone,stepChild:e.stepChild,launchData:e.launchData,isFixError:e.stepFixError,prefillContent:e.zoneConfig},on:{backPressed:e.backPressed,closeAction:e.onCloseAction,"refresh-data":e.onRefreshData,stepError:e.onStepError}})],1)],1)},n=[],s=(r("c740"),r("caad"),r("2532"),r("f3f3")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-form",{staticClass:"form-content",attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneType",{rules:[{required:!0,message:e.$t("message.error.zone.type"),initialValue:e.zoneType}]}],expression:"['zoneType', {\n          rules: [{\n            required: true,\n            message: $t('message.error.zone.type'),\n            initialValue: zoneType\n          }]\n        }]"}]},[r("a-card",{staticClass:"card-item",attrs:{gutter:12}},[r("a-col",{attrs:{md:6,lg:6}},[r("a-radio",{staticClass:"card-form-item",staticStyle:{display:"none"},attrs:{value:"Advanced"}},[e._v(e._s(e.$t("label.advanced")))]),r("span",{staticClass:"card-form-item",staticStyle:{"margin-top":"20px"}},[r("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"setting"}}),e._v(" "+e._s(e.$t("label.advanced"))+" ")],1)],1),r("a-col",{attrs:{md:18,lg:18}},[r("a-card",{staticClass:"ant-form-text zone-support"},[e._v(e._s(e.$t(e.zoneDescription.Advanced)))])],1),r("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:6,lg:6}},[r("a-form-item",e._b({staticClass:"card-form-item"},"a-form-item",e.formItemLayout,!1),[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["securityGroupsEnabled",{valuePropName:"checked"}],expression:"['securityGroupsEnabled', { valuePropName: 'checked' }]"}],staticClass:"card-form-item",attrs:{value:e.securityGroupsEnabled,disabled:!e.isAdvancedZone}})],1),r("span",[e._v(e._s(e.$t("label.menu.security.groups")))])],1),r("a-col",{staticStyle:{"margin-top":"15px"},attrs:{md:18,lg:18}},[r("a-card",{staticClass:"zone-support"},[e._v(e._s(e.$t(e.zoneDescription.SecurityGroups)))])],1)],1)],1)],1)],1),r("div",{staticClass:"form-action"},[r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1)],1)},o=[],l={props:{prefillContent:{type:Object,default:function(){return{}}}},data:function(){return{formItemLayout:{labelCol:{span:6},wrapperCol:{span:14}},zoneDescription:{Advanced:"message.desc.advanced.zone",SecurityGroups:"message.advanced.security.group"}}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(t,r){e.$emit("fieldsChanged",r)}})},mounted:function(){this.form.setFieldsValue({zoneType:this.zoneType,securityGroupsEnabled:this.securityGroupsEnabled})},computed:{isAdvancedZone:function(){return"Advanced"===this.zoneType},zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:"Advanced"},securityGroupsEnabled:function(){return this.isAdvancedZone&&!!this.prefillContent.securityGroupsEnabled&&this.prefillContent.securityGroupsEnabled.value}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||t.$emit("nextPressed")}))}}},c=l,u=(r("8cc4"),r("2877")),d=Object(u["a"])(c,i,o,!1,null,"33155973",null),p=d.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-card",{staticClass:"ant-form-text",staticStyle:{"text-align":"justify",margin:"10px 0",padding:"24px"},domProps:{innerHTML:e._s(e.$t(e.description))}}),r("a-form",{staticClass:"form-content",attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",e._b({attrs:{label:e.$t("label.name"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("message.error.zone.name"),initialValue:e.name}]}],expression:"['name', {\n          rules: [{\n            required: true,\n            message: $t('message.error.zone.name'),\n            initialValue: name\n          }]\n        }]"}]})],1),r("a-form-item",e._b({attrs:{label:e.$t("label.ipv4.dns1"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipv4Dns1",{rules:[{required:!0,message:e.$t("message.error.ipv4.dns1"),initialValue:e.ipv4Dns1},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"['ipv4Dns1', {\n          rules: [\n            {\n              required: true,\n              message: $t('message.error.ipv4.dns1'),\n              initialValue: ipv4Dns1\n            },\n            {\n              validator: checkIpFormat,\n              ipV4: true,\n              message: $t('message.error.ipv4.address')\n            }\n          ]\n        }]"}]})],1),r("a-form-item",e._b({attrs:{label:e.$t("label.ipv4.dns2"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipv4Dns2",{rules:[{message:e.$t("message.error.ipv4.dns2"),initialValue:e.ipv4Dns2},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"['ipv4Dns2', {\n          rules: [\n            {\n              message: $t('message.error.ipv4.dns2'),\n              initialValue: ipv4Dns2\n            },\n            {\n              validator: checkIpFormat,\n              ipV4: true,\n              message: $t('message.error.ipv4.address')\n            }\n          ]\n        }]"}]})],1),e.isAdvancedZone?r("a-form-item",e._b({attrs:{label:e.$t("label.ipv6.dns1"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipv6Dns1",{rules:[{message:e.$t("message.error.ipv6.dns1"),initialValue:e.ipv6Dns1},{validator:e.checkIpFormat,ipV6:!0,message:e.$t("message.error.ipv6.address")}]}],expression:"['ipv6Dns1', {\n          rules: [\n            {\n              message: $t('message.error.ipv6.dns1'),\n              initialValue: ipv6Dns1\n            },\n            {\n              validator: checkIpFormat,\n              ipV6: true,\n              message: $t('message.error.ipv6.address')\n            }\n          ]\n        }]"}]})],1):e._e(),e.isAdvancedZone?r("a-form-item",e._b({attrs:{label:e.$t("label.ipv6.dns2"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipv6Dns2",{rules:[{message:e.$t("message.error.ipv6.dns2"),initialValue:e.ipv6Dns2},{validator:e.checkIpFormat,ipV6:!0,message:e.$t("message.error.ipv6.address")}]}],expression:"['ipv6Dns2', {\n          rules: [\n            {\n              message: $t('message.error.ipv6.dns2'),\n              initialValue: ipv6Dns2\n            },\n            {\n              validator: checkIpFormat,\n              ipV6: true,\n              message: $t('message.error.ipv6.address')\n            }\n          ]\n        }]"}]})],1):e._e(),e.isAdvancedZone&&e.securityGroupsEnabled?r("a-form-item",e._b({attrs:{label:e.$t("label.ip6cidr"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipv6Cidr",{rules:[{message:e.$t("message.error.ipv6.cidr"),initialValue:e.ipv6Cidr}]}],expression:"['ipv6Cidr', {\n          rules: [\n            {\n              message: $t('message.error.ipv6.cidr'),\n              initialValue: ipv6Cidr\n            }\n          ]\n        }]"}]})],1):e._e(),e.isAdvancedZone&&e.securityGroupsEnabled?r("a-form-item",e._b({attrs:{label:e.$t("label.ip6gateway"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip6gateway",{rules:[{message:e.$t("message.error.ipv6.gateway"),initialValue:e.ip6gateway},{validator:e.checkIpFormat,ipV6:!0,message:e.$t("message.error.ipv6.gateway.format")}]}],expression:"['ip6gateway', {\n          rules: [\n            {\n              message: $t('message.error.ipv6.gateway'),\n              initialValue: ip6gateway\n            },\n            {\n              validator: checkIpFormat,\n              ipV6: true,\n              message: $t('message.error.ipv6.gateway.format')\n            }\n          ]\n        }]"}]})],1):e._e(),r("a-form-item",e._b({attrs:{label:e.$t("label.internal.dns.1"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["internalDns1",{rules:[{required:!0,message:e.$t("message.error.internal.dns1"),initialValue:e.internalDns1},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"['internalDns1', {\n          rules: [\n            {\n              required: true,\n              message: $t('message.error.internal.dns1'),\n              initialValue: internalDns1\n            },\n            {\n              validator: checkIpFormat,\n              ipV4: true,\n              message: $t('message.error.ipv4.address')\n            }\n          ]\n        }]"}]})],1),r("a-form-item",e._b({attrs:{label:e.$t("label.internal.dns.2"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["internalDns2",{rules:[{message:e.$t("message.error.internal.dns2"),initialValue:e.internalDns2},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"['internalDns2', {\n          rules: [\n            {\n              message: $t('message.error.internal.dns2'),\n              initialValue: internalDns2\n            },\n            {\n              validator: checkIpFormat,\n              ipV4: true,\n              message: $t('message.error.ipv4.address')\n            }\n          ]\n        }]"}]})],1),r("a-form-item",e._b({attrs:{label:e.$t("label.hypervisor"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["hypervisor",{rules:[{required:!0,message:e.$t("message.error.hypervisor.type"),initialValue:e.currentHypervisor}]}],expression:"['hypervisor',{\n          rules: [{\n            required: true,\n            message: $t('message.error.hypervisor.type'),\n            initialValue: currentHypervisor\n          }]\n        }]"}],attrs:{loading:null===e.hypervisors,showSearch:"",placeholder:e.$t("message.error.hypervisor.type")}},e._l(e.hypervisors,(function(t){return r("a-select-option",{key:t.name},[e._v(" "+e._s(t.name)+" ")])})),1)],1),!e.isAdvancedZone||e.securityGroupsEnabled?r("a-form-item",e._b({attrs:{label:e.$t("label.network.offering"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkOfferingId",{rules:[{message:e.$t("message.error.network.offering"),initialValue:e.currentNetworkOfferingId}]}],expression:"['networkOfferingId', {\n          rules: [{\n            message: $t('message.error.network.offering'),\n            initialValue: currentNetworkOfferingId\n          }]\n        }]"}],attrs:{loading:null===e.availableNetworkOfferings,placeholder:e.$t("message.error.network.offering")}},e._l(e.availableNetworkOfferings,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e(),r("a-form-item",e._b({attrs:{label:e.$t("label.network.domain"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkDomain",{rules:[{message:e.$t("message.error.network.domain"),intialValue:e.networkDomain}]}],expression:"['networkDomain', {\n          rules: [{\n            message: $t('message.error.network.domain'),\n            intialValue: networkDomain\n          }]\n        }]"}]})],1),e.isAdvancedZone&&!e.securityGroupsEnabled?r("a-form-item",e._b({attrs:{label:e.$t("label.guest.cidr"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["guestcidraddress",{rules:[{intialValue:e.guestcidraddress}]}],expression:"['guestcidraddress', {\n          rules: [{\n            intialValue: guestcidraddress\n          }]\n        }]"}]})],1):e._e(),r("a-form-item",e._b({attrs:{label:e.$t("label.dedicated")}},"a-form-item",e.formItemLayout,!1),[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["isDedicated",{valuePropName:"checked"}],expression:"['isDedicated', { valuePropName: 'checked' }]"}],attrs:{value:e.isDedicated}})],1),e.isDedicated?r("a-form-item",e._b({attrs:{label:e.$t("label.domains"),"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["domainId",{rules:[{initialValue:e.domain}]}],expression:"['domainId', {\n          rules: [{\n            initialValue: domain\n          }]\n        }]"}],attrs:{loading:null===e.domains,placeholder:e.$t("message.error.select.domain.to.dedicate")}},e._l(e.domains,(function(t){return r("a-select-option",{key:t.id},[e._v(" "+e._s(t.path)+" ")])})),1)],1):e._e(),e.isDedicated?r("a-form-item",e._b({attrs:{label:e.$t("label.account")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{intialValue:e.guestcidraddress}]}],expression:"['account', {\n          rules: [{\n            intialValue: guestcidraddress\n          }]\n        }]"}]})],1):e._e(),r("a-form-item",e._b({attrs:{label:e.$t("label.local.storage.enabled")}},"a-form-item",e.formItemLayout,!1),[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["localstorageenabled",{valuePropName:"checked"}],expression:"['localstorageenabled', { valuePropName: 'checked' }]"}],attrs:{value:e.localstorageenabled}})],1),r("a-form-item",e._b({attrs:{label:e.$t("label.local.storage.enabled.system.vms")}},"a-form-item",e.formItemLayout,!1),[r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["localstorageenabledforsystemvm",{valuePropName:"checked"}],expression:"['localstorageenabledforsystemvm', { valuePropName: 'checked' }]"}],attrs:{value:e.localstorageenabledforsystemvm}})],1)],1),r("div",{staticClass:"form-action"},[e.isFixError?e._e():r("a-button",{staticClass:"button-back",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1)],1)},h=[],m=(r("4de4"),r("4160"),r("b0c0"),r("07ac"),r("159b"),r("365c")),v={props:{prefillContent:{type:Object,default:function(){return{}}},isFixError:{type:Boolean,default:!1}},data:function(){return{description:"message.desc.zone",formItemLayout:{labelCol:{span:8},wrapperCol:{span:12}},hypervisors:null,networkOfferings:null,domains:null,baremetalProviders:["BaremetalDhcpProvider","BaremetalPxeProvider","BaremetalUserdataProvider"],selectedBaremetalProviders:[],availableNetworkOfferings:null,ipV4Regex:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,ipV6Regex:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i}},created:function(){var e=this;this.hypervisors=this.prefillContent.hypervisors?this.prefillContent.hypervisors:null,this.networkOfferings=this.prefillContent.networkOfferings?this.prefillContent.networkOfferings:null,this.form=this.$form.createForm(this,{onFieldsChange:function(t,r){r.networkOfferingId&&e.prefillContent.networkOfferingSelected&&e.prefillContent.networkOfferingSelected.id!==r.networkOfferingId.value&&(r.physicalNetworks=[]),e.networkOfferings&&r.networkOfferingId&&(r.networkOfferings=e.networkOfferings,r.networkOfferingSelected=e.networkOfferings[r.networkOfferingId.value]),e.hypervisors&&r.hypervisor&&(r.hypervisors=e.hypervisors,e.availableNetworkOfferings=e.getAvailableNetworkOfferings(r.hypervisor)),e.domains&&r.domain&&(r.domains=e.domains),e.$emit("fieldsChanged",r)}})},mounted:function(){var e=this;this.form.setFieldsValue({name:this.name,ipv4Dns1:this.ipv4Dns1,ipv4Dns2:this.ipv4Dns2,ipv6Dns1:this.ipv6Dns1,ipv6Dns2:this.ipv6Dns2,internalDns1:this.internalDns1,internalDns2:this.internalDns2,hypervisor:this.currentHypervisor,networkOfferingId:this.currentNetworkOfferingId,networkDomain:this.networkDomain,guestcidraddress:this.isAdvancedZone&&!this.securityGroupsEnabled?this.guestcidraddress:null,isDedicated:this.isDedicated,domain:this.domain,account:this.account,localstorageenabled:this.localstorageenabled,localstorageenabledforsystemvm:this.localstorageenabledforsystemvm});var t=this.form;Object(m["a"])("listHypervisors",{listAll:!0}).then((function(r){e.hypervisors=r.listhypervisorsresponse.hypervisor,"listSimulatorHAStateTransitions"in e.$store.getters.apis&&e.hypervisors.push({name:"Simulator"}),t.setFieldsValue({hypervisor:e.currentHypervisor})})),this.isAdvancedZone&&!this.securityGroupsEnabled||Object(m["a"])("listNetworkOfferings",{state:"Enabled",guestiptype:"Shared"}).then((function(r){e.networkOfferings={},r.listnetworkofferingsresponse.networkoffering.forEach((function(t){e.setupNetworkOfferingAdditionalFlags(t),e.networkOfferings[t.id]=t})),e.availableNetworkOfferings=e.getAvailableNetworkOfferings(e.currentHypervisor),t.setFieldsValue({networkOfferingId:e.currentNetworkOfferingId})})),Object(m["a"])("listDomains",{listAll:!0}).then((function(r){e.domains={},r.listdomainsresponse.domain.forEach((function(t){e.domains[t.id]=t})),t.setFieldsValue({domain:e.domain})}))},computed:{isAdvancedZone:function(){return"Advanced"===this.zoneType},zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:null},securityGroupsEnabled:function(){return this.isAdvancedZone&&!!this.prefillContent.securityGroupsEnabled&&this.prefillContent.securityGroupsEnabled.value},name:function(){return this.prefillContent.name?this.prefillContent.name.value:null},ipv4Dns1:function(){return this.prefillContent.ipv4Dns1?this.prefillContent.ipv4Dns1.value:null},ipv4Dns2:function(){return this.prefillContent.ipv4Dns2?this.prefillContent.ipv4Dns2.value:null},ipv6Dns1:function(){return this.prefillContent.ipv6Dns1?this.prefillContent.ipv6Dns1.value:null},ipv6Dns2:function(){return this.prefillContent.ipv6Dns2?this.prefillContent.ipv6Dns2.value:null},internalDns1:function(){return this.prefillContent.internalDns1?this.prefillContent.internalDns1.value:null},internalDns2:function(){return this.prefillContent.internalDns2?this.prefillContent.internalDns2.value:null},ipv6Cidr:function(){return this.prefillContent.ipv6Cidr?this.prefillContent.ipv6Cidr.value:null},ip6gateway:function(){return this.prefillContent.ip6gateway?this.prefillContent.ip6gateway.value:null},currentHypervisor:function(){return this.prefillContent.hypervisor?this.prefillContent.hypervisor.value:this.hypervisors&&this.hypervisors.length>0?this.hypervisors[0]:null},currentNetworkOfferingId:function(){var e=this.prefillContent.networkOfferingSelected?this.prefillContent.networkOfferingSelected.id:null;return this.networkOfferings?null!==e&&this.networkOfferings[e]?e:this.availableNetworkOfferings[0].id:null},networkDomain:function(){return this.prefillContent.networkDomain?this.prefillContent.networkDomain.value:null},guestcidraddress:function(){return this.prefillContent.guestcidraddress?this.prefillContent.guestcidraddress.value:"10.1.1.0/24"},isDedicated:function(){return!!this.prefillContent.isDedicated&&this.prefillContent.isDedicated.value},domain:function(){var e=this.prefillContent.domainId?this.prefillContent.domainId.value:null;return null!==this.domains&&null!==e&&this.domains[e]?e:null},account:function(){return this.prefillContent.account?this.prefillContent.account.value:null},localstorageenabled:function(){return!!this.prefillContent.localstorageenabled&&this.prefillContent.localstorageenabled.value},localstorageenabledforsystemvm:function(){return!!this.prefillContent.localstorageenabledforsystemvm&&this.prefillContent.localstorageenabledforsystemvm.value}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||(t.isFixError?t.$emit("submitLaunchZone"):t.$emit("nextPressed"))}))},handleBack:function(e){this.$emit("backPressed")},setupNetworkOfferingAdditionalFlags:function(e){var t=this;e.havingNetscaler=!1,e.havingSG=!1,e.havingEIP=!1,e.havingELB=!1,e.selectedBaremetalProviders=[],e.service.forEach((function(r){r.provider.forEach((function(r){"Netscaler"===r.name?e.havingNetscaler=!0:t.baremetalProviders.includes(r.name)&&(t.selectedBaremetalProviders.push(t.name),e.selectedBaremetalProviders=t.selectedBaremetalProviders)})),"SecurityGroup"===r.name?e.havingSG=!0:"StaticNat"===r.name?r.capability.forEach((function(t){"ElasticIp"===t.name&&"true"===t.value&&(e.havingEIP=!0)})):"Lb"===r.name&&r.capability.forEach((function(t){"ElasticLb"===t.name&&"true"===t.value&&(e.havingELB=!0)}))}))},getAvailableNetworkOfferings:function(e){var t=this;return this.networkOfferings?Object.values(this.networkOfferings).filter((function(r){return!(("VMware"===e||t.isAdvancedZone&&t.securityGroupsEnabled)&&r.havingEIP&&r.havingELB)&&!(t.isAdvancedZone&&t.securityGroupsEnabled&&!r.havingSG)})):null},checkIpFormat:function(e,t,r){t&&""!==t&&(e.ipV4&&!this.ipV4Regex.test(t)||e.ipV6&&!this.ipV6Regex.test(t))?r(e.message):r()}}},g=v,b=(r("29f5"),Object(u["a"])(g,f,h,!1,null,"3f15729b",null)),y=b.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"auto"}},[r("a-steps",{staticStyle:{"margin-left":"0px","margin-top":"16px"},attrs:{progressDot:"",current:e.currentStep,size:"small"}},e._l(e.steps,(function(t){return r("a-step",{key:t.title,style:e.stepScales,attrs:{title:e.$t(t.title)}})})),1),e.steps&&"physicalNetwork"===e.steps[e.currentStep].formKey?r("zone-wizard-physical-network-setup-step",{attrs:{prefillContent:e.prefillContent,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),e.steps&&"netscaler"===e.steps[e.currentStep].formKey?r("static-inputs-form",{attrs:{fields:e.netscalerFields,prefillContent:e.prefillContent,description:e.netscalerSetupDescription,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),e.steps&&"publicTraffic"===e.steps[e.currentStep].formKey?r("ip-address-range-form",{attrs:{traffic:"public",description:e.publicTrafficDescription[e.zoneType.toLowerCase()],prefillContent:e.prefillContent,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),e.steps&&"pod"===e.steps[e.currentStep].formKey?r("static-inputs-form",{attrs:{fields:e.podFields,prefillContent:e.prefillContent,description:e.podSetupDescription,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),e.guestTrafficRangeMode?r("div",[e.steps&&"guestTraffic"===e.steps[e.currentStep].formKey?r("static-inputs-form",{attrs:{fields:e.guestTrafficFields,prefillContent:e.prefillContent,description:e.guestTrafficDescription[this.zoneType.toLowerCase()],isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e()],1):r("div",[e.steps&&"guestTraffic"===e.steps[e.currentStep].formKey?r("advanced-guest-traffic-form",{attrs:{prefillContent:e.prefillContent,description:e.guestTrafficDescription[this.zoneType.toLowerCase()],isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e()],1),e.steps&&"storageTraffic"===e.steps[e.currentStep].formKey?r("ip-address-range-form",{attrs:{traffic:"storage",description:e.storageTrafficDescription,prefillContent:e.prefillContent,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e()],1)},S=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-card",{staticClass:"ant-form-text",staticStyle:{"text-align":"justify",margin:"10px 0",padding:"20px"},domProps:{innerHTML:e._s(null!==e.zoneType?e.$t(e.zoneDescription[e.zoneType]):e.$t("message.error.select.zone.type"))}}),r("a-table",{staticStyle:{"margin-bottom":"24px"},attrs:{bordered:"",dataSource:e.physicalNetworks,columns:e.columns,pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t,a){return[r("a-input",{attrs:{value:t},on:{change:function(t){return e.onCellChange(a.key,"name",t.target.value)}}})]}},{key:"isolationMethod",fn:function(t,a){return[r("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:t},on:{change:function(t){return e.onCellChange(a.key,"isolationMethod",t)}}},[r("a-select-option",{attrs:{value:"VLAN"}},[e._v(" VLAN ")]),r("a-select-option",{attrs:{value:"VXLAN"}},[e._v(" VXLAN ")]),r("a-select-option",{attrs:{value:"GRE"}},[e._v(" GRE ")]),r("a-select-option",{attrs:{value:"STT"}},[e._v(" STT ")]),r("a-select-option",{attrs:{value:"BCF_SEGMENT"}},[e._v(" BCF_SEGMENT ")]),r("a-select-option",{attrs:{value:"ODL"}},[e._v(" ODL ")]),r("a-select-option",{attrs:{value:"L3VPN"}},[e._v(" L3VPN ")]),r("a-select-option",{attrs:{value:"VSP"}},[e._v(" VSP ")]),r("a-select-option",{attrs:{value:"VCS"}},[e._v(" VCS ")])],1)]}},{key:"traffics",fn:function(t,a){return[e._l(t,(function(t){return r("div",{key:t.type},[r("a-tag",{staticStyle:{margin:"2px"},attrs:{color:e.trafficColors[t.type]}},[e._v(" "+e._s(t.type.toUpperCase())+" "),r("a-icon",{staticClass:"traffic-type-action",attrs:{type:"edit"},on:{click:function(r){return e.editTraffic(a.key,t,r)}}}),r("a-icon",{staticClass:"traffic-type-action",attrs:{type:"delete"},on:{click:function(r){return e.deleteTraffic(a.key,t,r)}}})],1)],1)})),r("a-modal",{attrs:{title:e.$t("label.edit.traffic.type"),visible:e.showEditTraffic,closable:!0,maskClosable:!1,okText:e.$t("label.ok"),cancelText:e.$t("label.cancel"),centered:""},on:{ok:function(t){return e.updateTrafficLabel(e.trafficInEdit)},cancel:e.cancelEditTraffic}},[r("a-form",{attrs:{form:e.form}},[r("span",{staticClass:"ant-form-text"},[e._v(" "+e._s(e.$t("message.edit.traffic.type"))+" ")]),r("a-form-item",e._b({staticStyle:{"margin-top":"16px"},attrs:{label:e.$t("label.traffic.label")}},"a-form-item",e.formItemLayout,!1),[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["trafficLabel",{rules:[{required:!0,message:e.$t("message.error.traffic.label")}]}],expression:"['trafficLabel', {\n                rules: [{\n                  required: true,\n                  message: $t('message.error.traffic.label'),\n                }]\n              }]"}]})],1)],1)],1),e.isShowAddTraffic(a.traffics)?r("div",[e.addingTrafficForKey===a.key?r("div",{staticClass:"traffic-select-item"},[r("a-select",{staticStyle:{"min-width":"120px"},attrs:{defaultValue:e.trafficLabelSelected},on:{change:function(t){e.trafficLabelSelected=t}}},e._l(e.availableTrafficToAdd,(function(t,n){return r("a-select-option",{key:n,attrs:{value:t,disabled:e.isDisabledTraffic(a.traffics,t)}},[e._v(" "+e._s(t.toUpperCase())+" ")])})),1),r("a-button",{staticClass:"icon-button",attrs:{shape:"circle",icon:"plus",size:"small"},on:{click:e.trafficAdded}}),r("a-button",{staticClass:"icon-button",attrs:{type:"danger",shape:"circle",icon:"close",size:"small"},on:{click:function(){e.addingTrafficForKey=null}}})],1):r("a-tag",{key:"addingTraffic",staticStyle:{margin:"2px"},on:{click:function(t){return e.addingTraffic(a.key,a.traffics)}}},[r("a-icon",{attrs:{type:"plus"}}),e._v(" "+e._s(e.$t("label.add.traffic"))+" ")],1)],1):e._e()]}},{key:"actions",fn:function(t,a){return[e.physicalNetworks.indexOf(a)>0?r("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete"},on:{click:function(t){return e.onDelete(a)}}}):e._e()]}}])},[e.isAdvancedZone?r("template",{slot:"footer"},[r("a-button",{on:{click:e.handleAddPhysicalNetwork}},[e._v(" "+e._s(e.$t("label.add.physical.network"))+" ")])],1):e._e()],2),r("div",{staticClass:"form-action"},[e.isFixError?e._e():r("a-button",{staticClass:"button-right",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1),r("a-modal",{attrs:{visible:e.showError,title:e.$t("label.error")+"!",maskClosable:!1,okText:e.$t("label.ok"),cancelText:e.$t("label.cancel"),centered:""},on:{ok:function(){e.showError=!1},cancel:function(){e.showError=!1}}},[r("span",[e._v(e._s(e.$t("message.required.traffic.type")))])])],1)},C=[],x=(r("99af"),r("7db0"),r("c975"),r("a15b"),r("d81d"),r("a434"),r("d3b7"),r("25f0"),r("d0ff")),P={props:{prefillContent:{type:Object,default:function(){return{}}},isFixError:{type:Boolean,default:!1}},data:function(){return{formItemLayout:{labelCol:{span:10},wrapperCol:{span:12}},physicalNetworks:[],count:0,zoneDescription:{Basic:"message.setup.physical.network.during.zone.creation.basic",Advanced:"message.setup.physical.network.during.zone.creation"},hasUnusedPhysicalNetwork:!1,trafficColors:{public:"orange",guest:"green",management:"blue",storage:"red"},showEditTraffic:!1,trafficInEdit:null,availableTrafficToAdd:["storage"],addingTrafficForKey:"-1",trafficLabelSelected:null,showError:!1,defaultTrafficOptions:[]}},computed:{columns:function(){var e=[];return e.push({title:this.$t("label.network.name"),dataIndex:"name",width:"30%",scopedSlots:{customRender:"name"}}),e.push({title:this.$t("label.isolation.method"),dataIndex:"isolationMethod",width:"20%",scopedSlots:{customRender:"isolationMethod"}}),e.push({title:this.$t("label.traffic.types"),key:"traffics",dataIndex:"traffics",scopedSlots:{customRender:"traffics"}}),this.isAdvancedZone&&e.push({title:"",dataIndex:"actions",scopedSlots:{customRender:"actions"},width:50}),e},isAdvancedZone:function(){return"Advanced"===this.zoneType},zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:null},securityGroupsEnabled:function(){return this.isAdvancedZone&&!!this.prefillContent.securityGroupsEnabled&&this.prefillContent.securityGroupsEnabled.value},networkOfferingSelected:function(){return this.prefillContent.networkOfferingSelected},needsPublicTraffic:function(){return this.isAdvancedZone?!this.securityGroupsEnabled:this.networkOfferingSelected&&(this.networkOfferingSelected.havingEIP||this.networkOfferingSelected.havingELB)},requiredTrafficTypes:function(){var e=["management","guest"];return this.needsPublicTraffic&&e.push("public"),e}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){var e=this;this.defaultTrafficOptions=["management","guest","storage"],(this.isAdvancedZone||this.needsPublicTraffic)&&this.defaultTrafficOptions.push("public"),this.physicalNetworks=this.prefillContent.physicalNetworks,this.hasUnusedPhysicalNetwork=this.getHasUnusedPhysicalNetwork();var t=this.requiredTrafficTypes;if(this.physicalNetworks&&this.physicalNetworks.length>0)this.count=this.physicalNetworks.length,t.forEach((function(t){var r=!1;e.physicalNetworks.forEach((function(a){for(var n in a.traffics){var s=a.traffics[n];if("storage"===s.type){var i=e.availableTrafficToAdd.indexOf(s.type);i>-1&&e.availableTrafficToAdd.splice(i,1)}s.type===t&&(r=!0)}})),r||e.availableTrafficToAdd.push(t)}));else{var r=t.map((function(e){return{type:e,label:""}}));this.count=1,this.physicalNetworks=[{key:this.randomKeyTraffic(this.count),name:"Physical Network 1",isolationMethod:"VLAN",traffics:r}]}this.isAdvancedZone&&this.availableTrafficToAdd.push("guest"),this.emitPhysicalNetworks()},methods:{onCellChange:function(e,t,r){var a=Object(x["a"])(this.physicalNetworks),n=a.find((function(t){return t.key===e}));n&&(n[t]=r,this.physicalNetworks=a),this.emitPhysicalNetworks()},onDelete:function(e){var t=this;e.traffics.forEach((function(e){t.availableTrafficToAdd.includes(e.type)||t.availableTrafficToAdd.push(e.type)}));var r=Object(x["a"])(this.physicalNetworks);this.physicalNetworks=r.filter((function(t){return t.key!==e.key})),this.hasUnusedPhysicalNetwork=this.getHasUnusedPhysicalNetwork(),this.emitPhysicalNetworks()},handleAddPhysicalNetwork:function(){var e=this.count,t=this.physicalNetworks,r={key:this.randomKeyTraffic(e+1),name:"Physical Network ".concat(e+1),isolationMethod:"VLAN",traffics:[]};this.physicalNetworks=[].concat(Object(x["a"])(t),[r]),this.count=e+1,this.hasUnusedPhysicalNetwork=this.getHasUnusedPhysicalNetwork()},isValidSetup:function(){var e=this,t=this.physicalNetworks.length>1,r=!0;return this.requiredTrafficTypes.forEach((function(a){var n=!1;e.physicalNetworks.forEach((function(e){e.traffics.forEach((function(e){e.type===a&&(n=!0),!t||e.label&&0!==e.label.length||(r=!1)}))})),n&&r||(r=!1)})),r},handleSubmit:function(e){if(this.isValidSetup()){if(this.isFixError)return void this.$emit("submitLaunchZone");this.$emit("nextPressed",this.physicalNetworks)}else this.showError=!0},handleBack:function(e){this.$emit("backPressed")},addingTraffic:function(e,t){var r=this;this.addingTrafficForKey=e,this.availableTrafficToAdd.forEach((function(e){var a=t.filter((function(t){return t.type===e}));if(!a||0===a.length)return r.trafficLabelSelected=e,!1}))},trafficAdded:function(e){var t=this,r=this.physicalNetworks.findIndex((function(e){return e.key===t.addingTrafficForKey}));this.physicalNetworks[r].traffics.push({type:this.trafficLabelSelected.toLowerCase(),label:""}),this.isAdvancedZone&&"guest"===this.trafficLabelSelected||(this.availableTrafficToAdd=this.availableTrafficToAdd.filter((function(e){return e!==t.trafficLabelSelected}))),this.addingTrafficForKey=null,this.trafficLabelSelected=null,this.emitPhysicalNetworks()},editTraffic:function(e,t,r){this.trafficInEdit={key:e,traffic:t},this.showEditTraffic=!0,this.form.setFieldsValue({trafficLabel:null!==this.trafficInEdit?this.trafficInEdit.traffic.label:null})},deleteTraffic:function(e,t,r){var a=this.physicalNetworks.findIndex((function(t){return t.key===e}));this.physicalNetworks[a].traffics=this.physicalNetworks[a].traffics.filter((function(e){return e.type!==t.type})),this.isAdvancedZone&&"guest"===t.type||this.availableTrafficToAdd.push(t.type),this.hasUnusedPhysicalNetwork=this.getHasUnusedPhysicalNetwork(),this.emitPhysicalNetworks()},updateTrafficLabel:function(e){var t=this;this.form.validateFields((function(r,a){r||(t.showEditTraffic=!1,e.traffic.label=a.trafficLabel,t.trafficInEdit=null)})),this.emitPhysicalNetworks()},cancelEditTraffic:function(){this.showEditTraffic=!1,this.trafficInEdit=null},getHasUnusedPhysicalNetwork:function(){var e=!1;return this.physicalNetworks&&this.physicalNetworks.length>0&&this.physicalNetworks.forEach((function(t){t.traffics&&0!==t.traffics.length||(e=!0)})),e},emitPhysicalNetworks:function(){this.physicalNetworks&&this.$emit("fieldsChanged",{physicalNetworks:this.physicalNetworks})},isDisabledTraffic:function(e,t){var r=e.filter((function(e){return e.type===t}));return!!(r&&r.length>0)},isShowAddTraffic:function(e){if(!this.availableTrafficToAdd||0===this.availableTrafficToAdd.length)return!1;if(e.length===this.defaultTrafficOptions.length)return!1;if(this.isAdvancedZone&&1===this.availableTrafficToAdd.length){var t=e.filter((function(e){return"guest"===e.type}));if(t&&t.length>0)return!1}return!0},randomKeyTraffic:function(e){var t=new Date,r=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);return[e,r,t.getTime()].join("")}}},N=P,D=(r("a7bd"),Object(u["a"])(N,w,C,!1,null,"00a37681",null)),R=D.exports,T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-card",{staticClass:"ant-form-text",staticStyle:{"text-align":"justify",margin:"10px 0",padding:"24px"},domProps:{innerHTML:e._s(e.$t(e.description))}}),r("a-table",{staticStyle:{"margin-bottom":"24px"},attrs:{bordered:"",dataSource:e.ipRanges,columns:e.columns,pagination:!1},scopedSlots:e._u([{key:"actions",fn:function(t,a){return[r("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete"},on:{click:function(t){return e.onDelete(a.key)}}})]}}])},[r("template",{slot:"footer"},[r("a-form",{attrs:{layout:"inline",form:e.form},on:{submit:e.handleAddRange}},[r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:e.$t("message.error.gateway")}]}],expression:"[ 'gateway', {\n              rules: [{ required: true, message: $t('message.error.gateway') }]\n            }]"}],attrs:{placeholder:e.$t("label.gateway")}})],1),r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:e.$t("message.error.netmask")}]}],expression:"[ 'netmask', {\n              rules: [{ required: true, message: $t('message.error.netmask') }]\n            }]"}],attrs:{placeholder:e.$t("label.netmask")}})],1),r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlan",{rules:[{required:!1}]}],expression:"[ 'vlan', { rules: [{ required: false }] }]"}],attrs:{placeholder:e.$t("label.vlan")}})],1),r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startIp",{rules:[{required:!0,message:e.$t("message.error.startip")},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"[ 'startIp', {\n              rules: [\n                {\n                  required: true,\n                  message: $t('message.error.startip')\n                },\n                {\n                  validator: checkIpFormat,\n                  ipV4: true,\n                  message: $t('message.error.ipv4.address')\n                }\n              ]\n            }]"}],attrs:{placeholder:e.$t("label.start.ip")}})],1),r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["endIp",{rules:[{required:!0,message:e.$t("message.error.endip")},{validator:e.checkIpFormat,ipV4:!0,message:e.$t("message.error.ipv4.address")}]}],expression:"[ 'endIp', {\n              rules: [\n                {\n                  required: true,\n                  message: $t('message.error.endip')\n                },\n                {\n                  validator: checkIpFormat,\n                  ipV4: true,\n                  message: $t('message.error.ipv4.address')\n                }]\n            }]"}],attrs:{placeholder:e.$t("label.end.ip")}})],1),r("a-form-item",{style:{display:"inline-block",width:"14%"}},[r("a-button",{attrs:{type:"primary","html-type":"submit"}},[e._v(e._s(e.$t("label.add")))])],1)],1)],1)],2),r("div",{staticClass:"form-action"},[e.isFixError?e._e():r("a-button",{staticClass:"button-prev",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1),r("a-modal",{attrs:{visible:e.showError,maskClosable:!1,title:e.$t("label.error")+"!",okText:e.$t("label.ok"),cancelText:e.$t("label.cancel"),centered:""},on:{ok:function(){e.showError=!1},cancel:function(){e.showError=!1}}},[r("span",[e._v(e._s(e.$t("message.required.add.least.ip")))])])],1)},E=[],$={props:{traffic:{type:String,default:"0"},description:{type:String,default:"label.creating.iprange"},prefillContent:{type:Object,default:function(){return{}}},isFixError:{type:Boolean,default:!1}},data:function(){return{formItemLayout:{wrapperCol:{span:0}},ipRanges:[],columns:[{title:this.$t("label.gateway"),dataIndex:"gateway",width:150},{title:this.$t("label.netmask"),dataIndex:"netmask",width:150},{title:this.$t("label.vlan"),dataIndex:"vlan",width:120},{title:this.$t("label.start.ip"),dataIndex:"startIp",width:130},{title:this.$t("label.end.ip"),dataIndex:"endIp",width:130},{title:"",dataIndex:"actions",scopedSlots:{customRender:"actions"},width:50}],showError:!1,ipV4Regex:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,ipV6Regex:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i}},mounted:function(){var e=this.traffic+"-ipranges";this.prefillContent[e]&&(this.ipRanges=this.prefillContent[e])},beforeCreate:function(){this.form=this.$form.createForm(this)},methods:{handleAddRange:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||(t.ipRanges.push({key:t.ipRanges.length.toString(),gateway:r.gateway,netmask:r.netmask,vlan:r.vlan,startIp:r.startIp,endIp:r.endIp}),t.form.resetFields())})),this.emitIpRanges()},isValidSetup:function(){return this.ipRanges&&this.ipRanges.length>0},handleSubmit:function(e){if(this.isValidSetup()){if(this.isFixError)return void this.$emit("submitLaunchZone");this.$emit("nextPressed",this.ipRanges)}else this.showError=!0},handleBack:function(e){this.$emit("backPressed")},onDelete:function(e){var t=Object(x["a"])(this.ipRanges);this.ipRanges=t.filter((function(t){return t.key!==e})),this.emitIpRanges()},emitIpRanges:function(){var e={};e[this.traffic+"-ipranges"]=this.ipRanges,this.$emit("fieldsChanged",e)},checkIpFormat:function(e,t,r){t&&""!==t&&(e.ipV4&&!this.ipV4Regex.test(t)||e.ipV6&&!this.ipV6Regex.test(t))?r(e.message):r()}}},F=$,O=Object(u["a"])(F,T,E,!1,null,null,null),V=O.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.description&&e.description.length>0?r("a-card",{staticClass:"ant-form-text",domProps:{innerHTML:e._s(e.$t(e.description))}}):e._e(),r("a-form",{staticClass:"form-content",attrs:{form:e.form},on:{submit:e.handleSubmit}},e._l(this.fields,(function(t,a){return e.isDisplayInput(t.display)?r("a-form-item",e._b({key:a,attrs:{label:e.$t(t.title),"has-feedback":!t.switch}},"a-form-item",e.formItemLayout,!1),[t.select?r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.key,{rules:[{required:t.required,message:e.$t(t.placeHolder),initialValue:e.getPrefilled(t.key)}]}],expression:"[field.key, {\n          rules: [\n            {\n              required: field.required,\n              message: $t(field.placeHolder),\n              initialValue: getPrefilled(field.key)\n            }\n          ]\n        }]"}],attrs:{allowClear:!0}},e._l(t.options,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name||t.description)+" ")])})),1):t.switch?r("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.key],expression:"[field.key]"}],attrs:{"default-checked":e.isChecked(t)}}):t.password?r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.key,{rules:[{required:t.required,message:e.$t(t.placeHolder),initialValue:e.getPrefilled(t.key)}]}],expression:"[field.key, {\n          rules: [\n            {\n              required: field.required,\n              message: $t(field.placeHolder),\n              initialValue: getPrefilled(field.key)\n            }\n          ]\n        }]"}],attrs:{type:"password"}}):r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.key,{rules:[{required:t.required,message:e.$t(t.placeHolder),initialValue:e.getPrefilled(t.key)},{validator:e.checkIpFormat,ipV4:t.ipV4,ipV6:t.ipV6,message:e.$t(t.message)}]}],expression:"[field.key, {\n          rules: [\n            {\n              required: field.required,\n              message: $t(field.placeHolder),\n              initialValue: getPrefilled(field.key)\n            },\n            {\n              validator: checkIpFormat,\n              ipV4: field.ipV4,\n              ipV6: field.ipV6,\n              message: $t(field.message)\n            }\n          ]\n        }]"}]})],1):e._e()})),1),r("div",{staticClass:"form-action"},[e.isFixError?e._e():r("a-button",{staticClass:"button-prev",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1)],1)},I=[],_=(r("b64b"),{props:{prefillContent:{type:Object,default:function(){return{}}},fields:{type:Array,default:function(){return[]}},description:{type:String,default:"label.creating.iprange"},isFixError:{type:Boolean,default:!1}},created:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(t,r){e.$emit("fieldsChanged",r)}})},data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:12}},ipV4Regex:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,ipV6Regex:/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i}},mounted:function(){this.fillValue(!0)},watch:{fields:function(){this.fillValue(!1)}},methods:{fillValue:function(e){var t=this;this.fields.forEach((function(r){var a=t.isDisplayInput(r.display);if(a){var n={};"agentUserName"!==r.key||t.getPrefilled(r.key)?n[r.key]=t.getPrefilled(r.key):n[r.key]="Oracle",e?t.form.setFieldsValue(n):t.form.getFieldDecorator(r.key,{initialValue:t.getPrefilled(r.key)})}}))},getPrefilled:function(e){return this.prefillContent[e]?this.prefillContent[e].value:null},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||(t.isFixError?t.$emit("submitLaunchZone"):t.$emit("nextPressed"))}))},handleBack:function(e){this.$emit("backPressed")},checkIpFormat:function(e,t,r){t&&""!==t&&(e.ipV4&&!this.ipV4Regex.test(t)||e.ipV6&&!this.ipV6Regex.test(t))?r(e.message):r()},isDisplayInput:function(e){var t=this;if(!e||0===Object.keys(e).length)return!0;var r=!1;return Object.keys(e).forEach((function(a){var n=e[a],s=t.form.getFieldValue(a)?t.form.getFieldValue(a):t.prefillContent[a]?t.prefillContent[a].value:null;return Array.isArray(n)&&n.includes(s)?(r=!0,!1):!(!Array.isArray(n)&&s===n)||(r=!0,!1)})),r},isChecked:function(e){return this.prefillContent[e.key]&&this.prefillContent[e.key].value?this.prefillContent[e.key].value:!!e.checked}}}),L=_,M=(r("f825"),Object(u["a"])(L,A,I,!1,null,"eb69629e",null)),z=M.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.description&&e.description.length>0?r("a-card",{staticClass:"ant-form-text",staticStyle:{"text-align":"justify",margin:"10px 0",padding:"24px"},domProps:{innerHTML:e._s(e.$t(e.description))}}):e._e(),r("a-form",{staticClass:"form-content",attrs:{form:e.form},on:{submit:e.handleSubmit}},[r("a-form-item",e._b({attrs:{label:e.$t("label.vlan.range"),help:e.validMessage,"validate-status":e.validStatus,"has-feedback":""}},"a-form-item",e.formItemLayout,!1),[r("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"},attrs:{"has-feedback":""}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlanRangeStart",{rules:[{validator:e.validateFromTo,fromInput:!0,compare:"vlanRangeEnd",initialValue:e.getPrefilled("vlanRangeStart")}]}],expression:"['vlanRangeStart', {\n            rules: [{\n              validator: validateFromTo,\n              fromInput: true,\n              compare: 'vlanRangeEnd',\n              initialValue: getPrefilled('vlanRangeStart')\n            }]\n          }]"}],staticStyle:{width:"100%"}})],1),r("span",{style:{display:"inline-block",width:"24px",textAlign:"center"}},[e._v(" - ")]),r("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"},attrs:{"has-feedback":""}},[r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlanRangeEnd",{rules:[{validator:e.validateFromTo,toInput:!0,compare:"vlanRangeStart",initialValue:e.getPrefilled("vlanRangeEnd")}]}],expression:"['vlanRangeEnd', {\n            rules: [{\n              validator: validateFromTo,\n              toInput: true,\n              compare: 'vlanRangeStart',\n              initialValue: getPrefilled('vlanRangeEnd')\n            }]\n          }]"}],staticStyle:{width:"100%"}})],1)],1)],1),r("div",{staticClass:"form-action"},[e.isFixError?e._e():r("a-button",{staticClass:"button-prev",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$t("label.next"))+" ")])],1)],1)},B=[],Z={name:"AdvancedGuestTrafficForm",props:{prefillContent:{type:Object,default:function(){return{}}},description:{type:String,default:"label.creating.iprange"},isFixError:{type:Boolean,default:!1}},data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:12}},validStatus:"",validMessage:""}},created:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(t,r){e.$emit("fieldsChanged",r)}})},mounted:function(){this.fillValue()},methods:{fillValue:function(){var e={};e.vlanRangeStart=this.getPrefilled("vlanRangeStart"),this.form.setFieldsValue(e),e.vlanRangeEnd=this.getPrefilled("vlanRangeEnd"),this.form.setFieldsValue(e)},getPrefilled:function(e){return this.prefillContent[e]?this.prefillContent[e].value:null},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){if(t.validStatus="",t.validMessage="",!e)return t.checkFromTo(r.vlanRangeStart,r.vlanRangeEnd)?void(t.isFixError?t.$emit("submitLaunchZone"):t.$emit("nextPressed")):(t.validStatus="error",void(t.validMessage=t.$t("message.error.vlan.range")))}))},handleBack:function(e){this.$emit("backPressed")},validateFromTo:function(e,t,r){var a="",n="";this.validStatus="",this.validMessage="",e.fromInput?(a=t,n=this.form.getFieldValue(e.compare)):e.toInput&&(n=t,a=this.form.getFieldValue(e.compare)),this.checkFromTo(a,n)||(this.validStatus="error",this.validMessage=this.$t("message.error.vlan.range")),r()},checkFromTo:function(e,t){return e||(e=0),t||(t=0),!(e>t)}}},q=Z,H=(r("8bf3"),Object(u["a"])(q,j,B,!1,null,"daf4dabc",null)),G=H.exports,U={components:{ZoneWizardPhysicalNetworkSetupStep:R,IpAddressRangeForm:V,StaticInputsForm:z,AdvancedGuestTrafficForm:G},props:{prefillContent:{type:Object,default:function(){return{}}},stepChild:{type:String,default:""},isFixError:{type:Boolean,default:!1}},computed:{zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:null},sgEnabled:function(){return!!this.prefillContent.securityGroupsEnabled&&this.prefillContent.securityGroupsEnabled.value},havingNetscaler:function(){return!!this.prefillContent.networkOfferingSelected&&this.prefillContent.networkOfferingSelected.havingNetscaler},guestTrafficRangeMode:function(){return"Basic"===this.zoneType||"Advanced"===this.zoneType&&this.sgEnabled},allSteps:function(){var e=[];return e.push({title:"label.physical.network",formKey:"physicalNetwork"}),this.havingNetscaler&&e.push({title:"label.netScaler",formKey:"netscaler"}),e.push({title:"label.public.traffic",formKey:"publicTraffic",trafficType:"public"}),e.push({title:"label.pod",formKey:"pod"}),e.push({title:"label.guest.traffic",formKey:"guestTraffic",trafficType:"guest"}),e.push({title:"label.storage.traffic",formKey:"storageTraffic",trafficType:"storage"}),e},stepScales:function(){return this.allSteps.length>4?{width:"calc(100% / "+this.allSteps.length+")"}:{}},netscalerFields:function(){return[{title:"label.guest.ip",key:"netscalerIp",required:!1,ipV4:!0,message:"message.error.ipv4.address"},{title:"label.username",key:"netscalerUsername",required:!1},{title:"label.password",key:"netscalerPassword",required:!1,password:!0},{title:"label.type",key:"netscalerType",required:!1,select:!0,options:this.netscalerType},{title:"label.public.interface",key:"publicinterface",required:!1},{title:"label.private.interface",key:"privateinterface",required:!1},{title:"label.gslb.service",key:"gslbprovider",required:!1,switch:!0},{title:"label.gslb.service.public.ip",key:"gslbproviderpublicip",required:!1,ipV4:!0,message:"message.error.ipv4.address"},{title:"label.gslb.service.private.ip",key:"gslbproviderprivateip",required:!1,ipV4:!0,message:"message.error.ipv4.address"},{title:"label.numretries",key:"numretries",required:!1},{title:"label.capacity",key:"capacity",required:!1}]},guestTrafficFields:function(){var e=[{title:"label.guest.gateway",key:"guestGateway",placeHolder:"message.installwizard.tooltip.configureguesttraffic.guestgateway",required:!1},{title:"label.guest.netmask",key:"guestNetmask",placeHolder:"message.installwizard.tooltip.configureguesttraffic.guestnetmask",required:!1},{title:"label.guest.start.ip",key:"guestStartIp",placeHolder:"message.installwizard.tooltip.configureguesttraffic.gueststartip",required:!1,ipV4:!0,message:"message.error.ipv4.address"},{title:"label.guest.end.ip",key:"guestStopIp",placeHolder:"message.installwizard.tooltip.configureguesttraffic.guestendip",required:!1,ipV4:!0,message:"message.error.ipv4.address"}];return this.sgEnabled&&e.push({title:"label.vlanid",key:"guestVlan",required:!1,ipV4:!1}),e}},data:function(){return{physicalNetworks:null,currentStep:0,steps:null,skipGuestTrafficStep:!1,netscalerType:[],publicTrafficDescription:{advanced:"message.public.traffic.in.advanced.zone",basic:"message.public.traffic.in.basic.zone"},guestTrafficDescription:{advanced:"message.guest.traffic.in.advanced.zone",basic:"message.guest.traffic.in.basic.zone"},podSetupDescription:"message.add.pod.during.zone.creation",netscalerSetupDescription:"label.please.specify.netscaler.info",storageTrafficDescription:"label.zonewizard.traffictype.storage",podFields:[{title:"label.pod.name",key:"podName",placeHolder:"message.installwizard.tooltip.addpod.name",required:!0},{title:"label.reserved.system.gateway",key:"podReservedGateway",placeHolder:"message.installwizard.tooltip.addpod.reservedsystemgateway",required:!0},{title:"label.reserved.system.netmask",key:"podReservedNetmask",placeHolder:"message.tooltip.reserved.system.netmask",required:!0},{title:"label.start.reserved.system.ip",key:"podReservedStartIp",placeHolder:"message.installwizard.tooltip.addpod.reservedsystemstartip",required:!0,ipV4:!0,message:"message.error.ipv4.address"},{title:"label.end.reserved.system.ip",key:"podReservedStopIp",placeHolder:"message.installwizard.tooltip.addpod.reservedsystemendip",required:!1,ipV4:!0,message:"message.error.ipv4.address"}]}},mounted:function(){var e=this;this.physicalNetworks=this.prefillContent.physicalNetworks,this.steps=this.filteredSteps(),this.currentStep=this.prefillContent.networkStep?this.prefillContent.networkStep:0,this.stepChild&&""!==this.stepChild&&(this.currentStep=this.steps.findIndex((function(t){return t.formKey===e.stepChild}))),"Basic"===this.zoneType||"Advanced"===this.zoneType&&this.sgEnabled?this.skipGuestTrafficStep=!1:this.fetchConfiguration(),this.$emit("fieldsChanged",{skipGuestTrafficStep:this.skipGuestTrafficStep}),this.fetchNetscalerType()},methods:{fetchNetscalerType:function(){var e=[];e.push({id:"NetscalerMPXLoadBalancer",description:"NetScaler MPX LoadBalancer"}),e.push({id:"NetscalerVPXLoadBalancer",description:"NetScaler VPX LoadBalancer"}),e.push({id:"NetscalerSDXLoadBalancer",description:"NetScaler SDX LoadBalancer"}),this.netscalerType=e,this.$forceUpdate()},nextPressed:function(){this.currentStep===this.steps.length-1?this.$emit("nextPressed"):(this.currentStep++,this.$emit("fieldsChanged",{networkStep:this.currentStep}))},handleBack:function(e){0===this.currentStep?this.$emit("backPressed"):(this.currentStep--,this.$emit("fieldsChanged",{networkStep:this.currentStep}))},submitLaunchZone:function(){this.$emit("submitLaunchZone")},fieldsChanged:function(e){e.physicalNetworks&&(this.physicalNetworks=e.physicalNetworks,this.steps=this.filteredSteps()),this.$emit("fieldsChanged",e)},filteredSteps:function(){var e=this;return this.allSteps.filter((function(t){if(!t.trafficType)return!0;if(e.physicalNetworks){var r=!1;if(e.physicalNetworks.forEach((function(e){e.traffics.forEach((function(e){e.type===t.trafficType&&(r=!0)}))})),r)return!0}return!1}))},fetchConfiguration:function(){var e=this;this.skipGuestTrafficStep=!1,Object(m["a"])("listConfigurations",{name:"sdn.ovs.controller"}).then((function(t){var r=t.listconfigurationsresponse.configuration;r.forEach((function(t){if("sdn.ovs.controller"===t.name)return t.value&&(e.skipGuestTrafficStep=!0),!1}))}))}}},K=U,X=Object(u["a"])(K,k,S,!1,null,null,null),J=X.exports,W=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"auto"}},[r("a-steps",{staticStyle:{"margin-left":"0","margin-top":"16px"},attrs:{progressDot:"",current:e.currentStep,size:"small"}},e._l(e.steps,(function(t){return r("a-step",{key:t.title,attrs:{title:e.$t(t.title)}})})),1),0===e.currentStep?r("static-inputs-form",{attrs:{fields:e.clusterFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),"VMware"!==e.hypervisor?r("div",[1===e.currentStep?r("static-inputs-form",{attrs:{fields:e.hostFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),2===e.currentStep?r("static-inputs-form",{attrs:{fields:e.primaryStorageFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),3===e.currentStep?r("static-inputs-form",{attrs:{fields:e.secondaryStorageFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e()],1):r("div",[1===e.currentStep?r("static-inputs-form",{attrs:{fields:e.primaryStorageFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e(),2===e.currentStep?r("static-inputs-form",{attrs:{fields:e.secondaryStorageFields,prefillContent:e.prefillContent,description:e.steps[e.currentStep].description,isFixError:e.isFixError},on:{nextPressed:e.nextPressed,backPressed:e.handleBack,fieldsChanged:e.fieldsChanged,submitLaunchZone:e.submitLaunchZone}}):e._e()],1)],1)},Q=[],Y=(r("96cf"),r("c964")),ee={components:{StaticInputsForm:z},props:{prefillContent:{type:Object,default:function(){return{}}},stepChild:{type:String,default:""},isFixError:{type:Boolean,default:!1}},computed:{zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:null},hypervisor:function(){return this.prefillContent.hypervisor?this.prefillContent.hypervisor.value:null},steps:function(){var e=[],t=this.prefillContent.hypervisor?this.prefillContent.hypervisor.value:null,r=this.prefillContent.localstorageenabled.value,a=this.prefillContent.localstorageenabledforsystemvm.value;return e.push({title:"label.cluster",fromKey:"clusterResource",description:"message.desc.cluster"}),"VMware"!==t&&e.push({title:"label.host",fromKey:"hostResource",description:"message.desc.host"}),r&&a||e.push({title:"label.primary.storage",fromKey:"primaryResource",description:"message.desc.primary.storage"}),e.push({title:"label.secondary.storage",fromKey:"secondaryResource",description:"message.desc.secondary.storage"}),e},clusterFields:function(){return[{title:"label.cluster.name",key:"clusterName",placeHolder:"message.error.cluster.name",required:!0},{title:"label.vcenter.host",key:"vCenterHost",placeHolder:"message.error.vcenter.host",required:!0,display:{hypervisor:["VMware","Ovm3"]}},{title:"label.vcenter.username",key:"vCenterUsername",placeHolder:"message.error.vcenter.username",required:!0,display:{hypervisor:["VMware","Ovm3"]}},{title:"label.vcenter.password",key:"vCenterPassword",placeHolder:"message.error.vcenter.password",required:!0,password:!0,display:{hypervisor:["VMware","Ovm3"]}},{title:"label.vcenter.datacenter",key:"vCenterDatacenter",placeHolder:"message.error.vcenter.datacenter",required:!0,display:{hypervisor:["VMware","Ovm3"]}},{title:"label.override.public.traffic",key:"overridepublictraffic",required:!1,switch:!0,display:{dvSwitchEnabled:!0}},{title:"label.override.guest.traffic",key:"overrideguesttraffic",required:!1,switch:!0,display:{dvSwitchEnabled:!0}},{title:"label.cisco.nexus1000v.ip.address",key:"vsmipaddress",placeHolder:"message.error.nexus1000v.ipaddess",required:!1,display:{vSwitchEnabled:!0}},{title:"label.cisco.nexus1000v.username",key:"vsmusername",placeHolder:"message.error.nexus1000v.username",required:!1,display:{vSwitchEnabled:!0}},{title:"label.cisco.nexus1000v.password",key:"vsmpassword",placeHolder:"message.error.nexus1000v.password",required:!1,display:{vSwitchEnabled:!0}}]},hostFields:function(){return[{title:"label.host.name",key:"hostName",placeHolder:"message.error.host.name",required:!0,display:{hypervisor:["VMware","BareMetal","Ovm","Hyperv","KVM","XenServer","LXC","Simulator"]}},{title:"label.username",key:"hostUserName",placeHolder:"message.error.host.username",required:!0,display:{hypervisor:["VMware","BareMetal","Ovm","Hyperv","KVM","XenServer","LXC","Simulator"]}},{title:"label.password",key:"hostPassword",placeHolder:"message.error.host.password",required:!0,password:!0,display:{hypervisor:["VMware","BareMetal","Ovm","Hyperv","KVM","XenServer","LXC","Simulator"]}},{title:"label.agent.username",key:"agentUserName",placeHolder:"message.error.agent.username",required:!1,defaultValue:"Oracle",display:{hypervisor:"Ovm"}},{title:"label.agent.password",key:"agentPassword",placeHolder:"message.error.agent.password",required:!0,password:!0,display:{hypervisor:"Ovm"}},{title:"label.tags",key:"hostTags",placeHolder:"message.error.host.tags",required:!1}]},primaryStorageFields:function(){return[{title:"label.name",key:"primaryStorageName",placeHolder:"message.error.name",required:!0},{title:"label.scope",key:"primaryStorageScope",required:!1,select:!0,options:this.primaryStorageScopes},{title:"label.protocol",key:"primaryStorageProtocol",placeHolder:"message.error.select",required:!0,select:!0,options:this.primaryStorageProtocols},{title:"label.server",key:"primaryStorageServer",placeHolder:"message.error.server",required:!0,display:{primaryStorageProtocol:["nfs","iscsi","gluster","SMB"]}},{title:"label.path",key:"primaryStoragePath",placeHolder:"message.error.path",required:!0,display:{primaryStorageProtocol:["nfs","SMB","SharedMountPoint","ocfs2"]}},{title:"label.SR.name",key:"primaryStorageSRLabel",placeHolder:"message.error.sr.namelabel",required:!0,display:{primaryStorageProtocol:"PreSetup"}},{title:"label.target.iqn",key:"primaryStorageTargetIQN",placeHolder:"message.error.target.iqn",required:!0,display:{primaryStorageProtocol:"iscsi"}},{title:"label.LUN.number",key:"primaryStorageLUN",placeHolder:"message.error.lun",required:!0,display:{primaryStorageProtocol:"iscsi"}},{title:"label.smb.domain",key:"primaryStorageSMBDomain",placeHolder:"message.error.sbdomain",required:!0,display:{primaryStorageProtocol:"SMB"}},{title:"label.smb.username",key:"primaryStorageSMBUsername",placeHolder:"message.error.sbdomain.username",required:!0,display:{primaryStorageProtocol:"SMB"}},{title:"label.smb.password",key:"primaryStorageSMBPassword",placeHolder:"message.error.sbdomain.password",required:!0,password:!0,display:{primaryStorageProtocol:"SMB"}},{title:"label.rados.monitor",key:"primaryStorageRADOSMonitor",placeHolder:"message.error.rados.monitor",required:!1,display:{primaryStorageProtocol:["rbd"]}},{title:"label.rados.pool",key:"primaryStorageRADOSPool",placeHolder:"message.error.rados.pool",required:!1,display:{primaryStorageProtocol:["rbd"]}},{title:"label.rados.user",key:"primaryStorageRADOSUser",placeHolder:"message.error.rados.user",required:!1,display:{primaryStorageProtocol:["rbd"]}},{title:"label.rados.secret",key:"primaryStorageRADOSSecret",placeHolder:"message.error.rados.secret",required:!1,display:{primaryStorageProtocol:["rbd"]}},{title:"label.volgroup",key:"primaryStorageVolumeGroup",placeHolder:"message.error.volumne.group",required:!0,display:{primaryStorageProtocol:"clvm"}},{title:"label.volume",key:"primaryStorageVolume",placeHolder:"message.error.volumne",required:!0,display:{primaryStorageProtocol:"gluster"}},{title:"label.vcenter.datacenter",key:"primaryStorageVmfsDatacenter",placeHolder:"message.error.vcenter.datacenter",required:!0,display:{primaryStorageProtocol:"vmfs"}},{title:"label.vcenter.datastore",key:"primaryStorageVmfsDatastore",placeHolder:"message.error.vcenter.datastore",required:!0,display:{primaryStorageProtocol:"vmfs"}},{title:"label.storage.tags",key:"primaryStorageTags",placeHolder:"message.error.storage.tags",required:!1}]},secondaryStorageFields:function(){return[{title:"label.provider",key:"secondaryStorageProvider",required:!1,select:!0,options:this.storageProviders},{title:"label.name",key:"secondaryStorageName",required:!1,display:{secondaryStorageProvider:["NFS","SMB","S3","Swift"]}},{title:"label.server",key:"secondaryStorageServer",required:!0,placeHolder:"message.error.server",display:{secondaryStorageProvider:["NFS","SMB"]}},{title:"label.path",key:"secondaryStoragePath",required:!0,placeHolder:"message.error.path",display:{secondaryStorageProvider:["NFS","SMB"]}},{title:"label.smb.domain",key:"secondaryStorageSMBDomain",required:!0,placeHolder:"message.error.sbdomain",display:{secondaryStorageProvider:["SMB"]}},{title:"label.smb.username",key:"secondaryStorageSMBUsername",required:!0,placeHolder:"message.error.smb.username",display:{secondaryStorageProvider:["SMB"]}},{title:"label.smb.password",key:"secondaryStorageSMBPassword",required:!0,password:!0,placeHolder:"message.error.smb.password",display:{secondaryStorageProvider:["SMB"]}},{title:"label.s3.access_key",key:"secondaryStorageAccessKey",required:!0,placeHolder:"message.error.access.key",display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.secret_key",key:"secondaryStorageSecretKey",required:!0,placeHolder:"message.error.secret.key",display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.bucket",key:"secondaryStorageBucket",required:!0,placeHolder:"message.error.bucket",display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.endpoint",key:"secondaryStorageEndpoint",required:!1,display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.use_https",key:"secondaryStorageHttps",required:!1,switch:!0,checked:!0,display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.connection_timeoutt",key:"secondaryStorageConnectionTimeout",required:!1,display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.max_error_retry",key:"secondaryStorageMaxError",required:!1,display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.socket_timeout",key:"secondaryStorageSocketTimeout",required:!1,display:{secondaryStorageProvider:["S3"]}},{title:"label.create.nfs.secondary.staging.storage",key:"secondaryStorageNFSStaging",required:!1,switch:!0,display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.nfs.server",key:"secondaryStorageNFSServer",required:!0,placeHolder:"message.error.s3nfs.server",display:{secondaryStorageProvider:["S3"]}},{title:"label.s3.nfs.path",key:"secondaryStorageNFSPath",required:!0,placeHolder:"message.error.s3nfs.path",display:{secondaryStorageProvider:["S3"]}},{title:"label.url",key:"secondaryStorageURL",required:!0,placeHolder:"message.error.url",display:{secondaryStorageProvider:["Swift"]}},{title:"label.account",key:"secondaryStorageAccount",required:!1,display:{secondaryStorageProvider:["Swift"]}},{title:"label.username",key:"secondaryStorageUsername",required:!1,display:{secondaryStorageProvider:["Swift"]}},{title:"label.key",key:"secondaryStorageKey",required:!1,display:{secondaryStorageProvider:["Swift"]}}]}},data:function(){return{physicalNetworks:null,currentHypervisor:null,primaryStorageScopes:[],primaryStorageProtocols:[],storageProviders:[],currentStep:0,options:["primaryStorageScope","primaryStorageProtocol","provider"]}},mounted:function(){var e=this;this.stepChild&&""!==this.stepChild&&(this.currentStep=this.steps.findIndex((function(t){return t.fromKey===e.stepChild}))),"BareMetal"===this.prefillContent.hypervisor.value?this.$emit("nextPressed"):(this.fetchConfigurationSwitch(),this.options.forEach(this.fetchOptions),this.prefillContent.lastHypervisor?this.prefillContent.lastHypervisor.value!==this.prefillContent.hypervisor.value&&this.$emit("fieldsChanged",{lastHypervisor:this.prefillContent.hypervisor,primaryStorageProtocol:null,primaryStorageScope:null}):this.$emit("fieldsChanged",{lastHypervisor:this.prefillContent.hypervisor}))},methods:{nextPressed:function(){this.currentStep===this.steps.length-1?this.$emit("nextPressed"):this.currentStep++},handleBack:function(e){0===this.currentStep?this.$emit("backPressed"):this.currentStep--},fieldsChanged:function(e){this.$emit("fieldsChanged",e)},fetchOptions:function(e){switch(e){case"primaryStorageScope":this.fetchScope();break;case"primaryStorageProtocol":this.fetchProtocol();break;case"provider":this.fetchProvider();break;default:break}},fetchScope:function(){var e=this.prefillContent.hypervisor?this.prefillContent.hypervisor.value:null,t=[];["KVM","VMware","Hyperv"].includes(e)?(t.push({id:"zone",description:this.$t("label.zone")}),t.push({id:"cluster",description:this.$t("label.cluster")})):t.push({id:"cluster",description:this.$t("label.cluster")}),this.primaryStorageScopes=t,this.$forceUpdate()},fetchProtocol:function(){var e=this.prefillContent.hypervisor?this.prefillContent.hypervisor.value:null,t=[];"KVM"===e?(t.push({id:"nfs",description:"nfs"}),t.push({id:"SharedMountPoint",description:"SharedMountPoint"}),t.push({id:"rbd",description:"RBD"}),t.push({id:"clvm",description:"CLVM"}),t.push({id:"gluster",description:"Gluster"})):"XenServer"===e?(t.push({id:"nfs",description:"nfs"}),t.push({id:"PreSetup",description:"PreSetup"}),t.push({id:"iscsi",description:"iscsi"})):"VMware"===e?(t.push({id:"nfs",description:"nfs"}),t.push({id:"vmfs",description:"vmfs"})):"Hyperv"===e?t.push({id:"SMB",description:"SMB/CIFS"}):"Ovm"===e?(t.push({id:"nfs",description:"nfs"}),t.push({id:"ocfs2",description:"ocfs2"})):"LXC"===e?(t.push({id:"nfs",description:"nfs"}),t.push({id:"SharedMountPoint",description:"SharedMountPoint"}),t.push({id:"rbd",description:"RBD"})):t.push({id:"nfs",description:"nfs"}),this.primaryStorageProtocols=t,this.$forceUpdate()},fetchConfigurationSwitch:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.prefillContent.hypervisor?e.prefillContent.hypervisor.value:null,e.$emit("fieldsChanged",{dvSwitchEnabled:{value:!1}}),e.$emit("fieldsChanged",{vSwitchEnabled:{value:!1}}),!r||"VMware"!==r){t.next=8;break}return t.next=6,e.fetchNexusSwitchConfig();case 6:return t.next=8,e.fetchDvSwitchConfig();case 8:case"end":return t.stop()}}),t)})))()},fetchNexusSwitchConfig:function(){var e=this;Object(m["a"])("listConfigurations",{name:"vmware.use.nexus.vswitch"}).then((function(t){var r=!1;t.listconfigurationsresponse.configuration[0].value&&(r=!0),e.$emit("fieldsChanged",{vSwitchEnabled:{value:r}})}))},fetchDvSwitchConfig:function(){var e=this,t=!1;Object(m["a"])("listConfigurations",{name:"vmware.use.dvswitch"}).then((function(r){r.listconfigurationsresponse.configuration[0].value&&(t=!0),e.$emit("fieldsChanged",{dvSwitchEnabled:{value:t}})}))},fetchProvider:function(){var e=this,t=[];Object(m["a"])("listImageStores",{provider:"S3"}).then((function(r){var a=r.listimagestoresresponse.imagestore;null!=a&&a.length>0?t.push({id:"S3",description:"S3"}):(t.push({id:"NFS",description:"NFS"}),t.push({id:"SMB",description:"SMB/CIFS"}),t.push({id:"S3",description:"S3"}),t.push({id:"Swift",description:"Swift"})),e.storageProviders=t,e.$forceUpdate()}))},submitLaunchZone:function(){this.$emit("submitLaunchZone")}}},te=ee,re=Object(u["a"])(te,W,Q,!1,null,null,null),ae=re.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLaunchZone?r("div",[r("a-card",{staticClass:"ant-form-text card-launch-description"},[e._v(" "+e._s(e.$t(e.description.launching))+" ")]),r("a-card",{staticClass:"ant-form-text card-launch-content",attrs:{id:"launch-content"}},[r("a-steps",{attrs:{size:"small",direction:"vertical",current:e.currentStep}},e._l(e.steps,(function(t,a){return r("a-step",{key:a,attrs:{title:e.$t(t.title),status:t.status}},[t.status===e.status.PROCESS?r("a-icon",{attrs:{slot:"icon",type:"loading"},slot:"icon"}):t.status===e.status.FAILED?r("a-icon",{attrs:{slot:"icon",type:"close-circle"},slot:"icon"}):e._e(),t.status===e.status.FAILED?r("a-card",{staticClass:"step-error",attrs:{slot:"description"},slot:"description"},[r("div",[r("strong",[e._v(e._s(e.$t("label.error.something.went.wrong.please.correct.the.following"))+":")])]),r("div",[e._v(e._s(e.messageError))])]):e._e()],1)})),1)],1),r("div",{staticClass:"form-action"},["finish"===e.processStatus?r("a-button",{staticClass:"button-next",attrs:{type:"primary",icon:"play-circle",loading:e.loading},on:{click:e.enableZoneAction}},[e._v(e._s(e.$t("label.action.enable.zone")))]):e._e(),"error"===e.processStatus?r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleFixesError}},[e._v(e._s(e.$t("label.fix.errors")))]):e._e()],1)],1):r("div",[r("a-card",{staticClass:"ant-form-text card-waiting-launch"},[r("a-icon",{staticStyle:{"font-size":"20px"},attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}}),e._v(" "+e._s(e.$t(e.description.waiting))+" ")],1),r("div",{staticClass:"form-action"},[r("a-button",{staticClass:"button-prev",on:{click:e.handleBack}},[e._v(" "+e._s(e.$t("label.previous"))+" ")]),r("a-button",{staticClass:"button-next",attrs:{type:"primary"},on:{click:e.handleSubmit}},[r("a-icon",{attrs:{type:"rocket"}}),e._v(" "+e._s(e.$t("label.launch.zone"))+" ")],1)],1)],1)},se=[],ie=(r("ac1f"),r("3ca3"),r("5319"),r("ddb0"),"Basic"),oe="Advanced",le="process",ce="finish",ue="error",de={props:{prefillContent:{type:Object,default:function(){return{}}},launchZone:{type:Boolean,default:!1},launchData:{type:Object,default:function(){return{}}},stepChild:{type:String,default:""}},data:function(){return{description:{waiting:"message.launch.zone",launching:"message.please.wait.while.zone.is.being.created"},isLaunchZone:!1,processStatus:null,messageError:"",currentStep:0,advZoneConfiguredVirtualRouterCount:0,steps:[],stepData:{},status:{PROCESS:le,FAILED:ue,FINISH:ce},loading:!1}},updated:function(){var e=this.$el.querySelector("#launch-content");e&&(e.scrollTop=e.scrollHeight)},computed:{zoneType:function(){return this.prefillContent.zoneType?this.prefillContent.zoneType.value:null},isBasicZone:function(){return this.zoneType===ie},isAdvancedZone:function(){return this.zoneType===oe},isDedicated:function(){return!!this.prefillContent.isDedicated&&this.prefillContent.isDedicated.value},sgEnabled:function(){return!!this.prefillContent.securityGroupsEnabled&&this.prefillContent.securityGroupsEnabled.value},havingNetscaler:function(){return!!this.prefillContent.networkOfferingSelected&&this.prefillContent.networkOfferingSelected.havingNetscaler},havingSG:function(){return!!this.prefillContent.networkOfferingSelected&&this.prefillContent.networkOfferingSelected.havingSG},havingEIP:function(){return!!this.prefillContent.networkOfferingSelected&&this.prefillContent.networkOfferingSelected.havingEIP},havingELB:function(){return!!this.prefillContent.networkOfferingSelected&&this.prefillContent.networkOfferingSelected.havingELB},selectedBaremetalProviders:function(){return this.prefillContent.networkOfferingSelected?this.prefillContent.networkOfferingSelected.selectedBaremetalProviders:[]}},mounted:function(){this.launchZone&&(this.processStatus=le,this.stepData=this.launchData,"publicTraffic"===this.stepChild&&(this.stepData.returnedPublicTraffic=[],this.stepData.stepMove=this.stepData.stepMove.filter((function(e){return-1===e.indexOf("createPublicVlanIpRange")}))),"storageTraffic"===this.stepChild&&(this.stepData.tasks=[],this.stepData.stepMove=this.stepData.stepMove.filter((function(e){return-1===e.indexOf("createStorageNetworkIpRange")}))),this.handleSubmit())},methods:{addStep:function(e,t){this.steps.push({index:this.currentStep,title:e,step:t,status:le}),this.setStepStatus(le)},setStepStatus:function(e){var t=this,r=this.steps.findIndex((function(e){return e.index===t.currentStep}));this.steps[r].status=e},handleBack:function(e){this.$emit("backPressed")},handleSubmit:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLaunchZone=!0,e.advZoneConfiguredVirtualRouterCount=0,e.processStatus=le,e.stepData.stepMove||(e.stepData.stepMove=[]),t.next=6,e.stepAddZone();case 6:case"end":return t.stop()}}),t)})))()},handleFixesError:function(){var e=this,t=this.steps.filter((function(t){return t.index===e.currentStep}));if(t&&t.length>0){var r=t[0].step;this.$emit("stepError",r,this.stepData)}},trafficLabelParam:function(e,t){var r=this.prefillContent.hypervisor.value;t=this.isAdvancedZone?t:0;var a,n,s=[],i=null;switch(this.prefillContent.physicalNetworks&&(s=this.prefillContent.physicalNetworks[0].traffics.filter((function(t){return t.type===e})),i=s.length>0?s[0]:null),null!==i&&("label"in i?a=i.label:(a="","vSwitchName"in i&&(a+=i.vSwitchName),"vlanId"in i&&(a.length>0&&(a+=","),a+=i.vlanId),"vSwitchType"in i&&(a.length>0&&(a+=","),a+=i.vSwitchType),0===a.length?a=null:a.length>=1&&","===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)))),r){case"XenServer":n="xennetworklabel";break;case"KVM":n="kvmnetworklabel";break;case"VMware":n="vmwarenetworklabel";break;case"Hyperv":n="hypervnetworklabel";break;case"BareMetal":n="baremetalnetworklabel";break;case"Ovm":n="ovmnetworklabel";break;case"LXC":n="lxcnetworklabel";break;case"Ovm3":n="ovm3networklabel";break}var o={};return a&&(o[n]=a),o},stepAddZone:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.addStep("message.creating.zone","stepAddZone"),r=e.prefillContent.guestcidraddress?e.prefillContent.guestcidraddress.value:null,a={},a.networktype=e.zoneType,e.isBasicZone?e.havingSG?a.securitygroupenabled=!0:a.securitygroupenabled=!1:e.sgEnabled?a.securitygroupenabled=!0:(a.securitygroupenabled=!1,null!=r&&r.length>0&&(a.guestcidraddress=r)),a.name=e.prefillContent.name.value,a.localstorageenabled=!!e.prefillContent.localstorageenabled&&e.prefillContent.localstorageenabled.value,a.dns1=e.prefillContent.ipv4Dns1.value,a.dns2=e.prefillContent.ipv4Dns2?e.prefillContent.ipv4Dns2.value:null,a.ip6dns1=e.prefillContent.ipv6Dns1?e.prefillContent.ipv6Dns1.value:null,a.ip6dns2=e.prefillContent.ipv6Dns1?e.prefillContent.ipv6Dns1.value:null,a.internaldns1=e.prefillContent.internalDns1?e.prefillContent.internalDns1.value:null,a.internaldns2=e.prefillContent.internalDns2?e.prefillContent.internalDns2.value:null,a.domain=e.prefillContent.networkDomain?e.prefillContent.networkDomain.value:null,t.prev=14,e.stepData.stepMove.includes("createZone")){t.next=20;break}return t.next=18,e.createZone(a);case 18:e.stepData.zoneReturned=t.sent,e.stepData.stepMove.push("createZone");case 20:return t.next=22,e.stepDedicateZone();case 22:return t.next=24,e.stepAddPhysicalNetworks();case 24:t.next=31;break;case 26:t.prev=26,t.t0=t["catch"](14),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 31:case"end":return t.stop()}}),t,null,[[14,26]])})))()},stepDedicateZone:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isDedicated&&!e.stepData.stepMove.includes("dedicateZone")){t.next=2;break}return t.abrupt("return");case 2:return e.setStepStatus(ce),e.currentStep++,e.addStep("message.dedicate.zone","dedicateZone"),r={},r.zoneid=e.stepData.zoneReturned.id,r.domainid=e.prefillContent.domainId?e.prefillContent.domainId.value:null,r.account=e.prefillContent.account?e.prefillContent.account.value:null,t.prev=9,t.next=12,e.dedicateZone(r);case 12:e.stepData.stepMove.push("dedicateZone"),t.next=20;break;case 15:t.prev=15,t.t0=t["catch"](9),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 20:case"end":return t.stop()}}),t,null,[[9,15]])})))()},stepAddPhysicalNetworks:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c,u,d,p,f,h,m,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.physical.networks","physicalNetwork"),r={},r.zoneid=e.stepData.zoneReturned.id,!e.isBasicZone){t.next=58;break}if(a=e.prefillContent.physicalNetworks[0].traffics.length,e.stepData.requestedTrafficTypeCount=a,e.stepData.returnedTrafficTypes=e.stepData.returnedTrafficTypes?e.stepData.returnedTrafficTypes:[],e.stepData.physicalNetworkReturned=e.stepData.physicalNetworkReturned?e.stepData.physicalNetworkReturned:{},e.prefillContent.physicalNetworks&&e.prefillContent.physicalNetworks.length>0?r.name=e.prefillContent.physicalNetworks[0].name:r.name="PhysicalNetworkInBasicZone",t.prev=11,e.stepData.stepMove.includes("createPhysicalNetwork")){t.next=18;break}return t.next=15,e.createPhysicalNetwork(r);case 15:n=t.sent,e.stepData.physicalNetworkReturned=n.jobresult.physicalnetwork,e.stepData.stepMove.push("createPhysicalNetwork");case 18:if(e.stepData.stepMove.includes("Guest")){t.next=24;break}return t.next=21,e.addTrafficType("Guest");case 21:s=t.sent,e.stepData.returnedTrafficTypes.push(s.jobresult.traffictype),e.stepData.stepMove.push("Guest");case 24:if(e.stepData.stepMove.includes("Management")){t.next=30;break}return t.next=27,e.addTrafficType("Management");case 27:i=t.sent,e.stepData.returnedTrafficTypes.push(i.jobresult.traffictype),e.stepData.stepMove.push("Management");case 30:if(e.stepData.stepMove.includes("Storage")){t.next=38;break}if(o=e.prefillContent.physicalNetworks[0].traffics.filter((function(e){return"storage"===e.type})),!(o&&o.length>0)){t.next=38;break}return t.next=35,e.addTrafficType("Storage");case 35:l=t.sent,e.stepData.returnedTrafficTypes.push(l.jobresult.traffictype),e.stepData.stepMove.push("Storage");case 38:if(e.stepData.stepMove.includes("Public")){t.next=45;break}if(!(e.havingSG&&e.havingEIP&&e.havingELB)){t.next=44;break}return t.next=42,e.addTrafficType("Public");case 42:c=t.sent,e.stepData.returnedTrafficTypes.push(c.jobresult.traffictype);case 44:e.stepData.stepMove.push("Public");case 45:if(e.stepData.returnedTrafficTypes.length!==a){t.next=49;break}return e.stepData.physicalNetworkReturned.returnedTrafficTypes=e.stepData.returnedTrafficTypes,t.next=49,e.stepConfigurePhysicalNetwork();case 49:t.next=56;break;case 51:t.prev=51,t.t0=t["catch"](11),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 56:t.next=135;break;case 58:if(e.stepData.physicalNetworksReturned=e.stepData.physicalNetworksReturned?e.stepData.physicalNetworksReturned:[],e.stepData.physicalNetworkItem=e.stepData.physicalNetworkItem?e.stepData.physicalNetworkItem:{},u={},e.stepData.physicalNetworksReturned.length!==e.prefillContent.physicalNetworks.length){t.next=65;break}return t.next=64,e.stepConfigurePhysicalNetwork();case 64:return t.abrupt("return");case 65:d=0;case 66:if(!(d<e.prefillContent.physicalNetworks.length)){t.next=135;break}if(p=e.prefillContent.physicalNetworks[d],r.name=p.name,p.isolationMethod&&(r.isolationmethods=p.isolationMethod),t.prev=70,e.stepData.stepMove.includes("createPhysicalNetwork"+d)){t.next=81;break}return t.next=74,e.createPhysicalNetwork(r);case 74:f=t.sent,u=f.jobresult.physicalnetwork,e.stepData.physicalNetworkReturned=u,e.stepData.physicalNetworkItem["createPhysicalNetwork"+d]=u,e.stepData.stepMove.push("createPhysicalNetwork"+d),t.next=82;break;case 81:e.stepData.physicalNetworkReturned=e.stepData.physicalNetworkItem["createPhysicalNetwork"+d];case 82:t.next=90;break;case 84:return t.prev=84,t.t1=t["catch"](70),e.messageError=t.t1,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",135);case 90:h=0,m=0;case 92:if(!(m<p.traffics.length)){t.next=132;break}if(v=p.traffics[m],t.prev=94,e.stepData.stepMove.includes("addTrafficType"+d+m)){t.next=115;break}if("public"!==v.type){t.next=101;break}return t.next=99,e.addTrafficType("Public");case 99:t.next=114;break;case 101:if("management"!==v.type){t.next=106;break}return t.next=104,e.addTrafficType("Management");case 104:t.next=114;break;case 106:if("guest"!==v.type){t.next=111;break}return t.next=109,e.addTrafficType("Guest");case 109:t.next=114;break;case 111:if("storage"!==v.type){t.next=114;break}return t.next=114,e.addTrafficType("Storage");case 114:e.stepData.stepMove.push("addTrafficType"+d+m);case 115:h++,t.next=124;break;case 118:return t.prev=118,t.t2=t["catch"](94),e.messageError=t.t2,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",132);case 124:if(h!==p.traffics.length){t.next=129;break}if(Object.keys(u).length>0&&e.stepData.physicalNetworksReturned.push(u),e.stepData.physicalNetworksReturned.length!==e.prefillContent.physicalNetworks.length){t.next=129;break}return t.next=129,e.stepConfigurePhysicalNetwork();case 129:m++,t.next=92;break;case 132:d++,t.next=66;break;case 135:case"end":return t.stop()}}),t,null,[[11,51],[70,84],[94,118]])})))()},stepConfigurePhysicalNetwork:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c,u,d,p,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.configuring.physical.networks","physicalNetwork"),!e.isBasicZone){t.next=59;break}if(r={},r.state="Enabled",r.id=e.stepData.physicalNetworkReturned.id,t.prev=7,e.stepData.stepMove.includes("updatePhysicalNetwork")){t.next=12;break}return t.next=11,e.updatePhysicalNetwork(r);case 11:e.stepData.stepMove.push("updatePhysicalNetwork");case 12:if(e.stepData.stepMove.includes("basicVirtualRouter")){t.next=27;break}return a={},a.name="VirtualRouter",a.physicalNetworkId=e.stepData.physicalNetworkReturned.id,t.next=18,e.listNetworkServiceProviders(a);case 18:return n=t.sent,t.next=21,e.listVirtualRouterElements(n);case 21:return s=t.sent,t.next=24,e.configureVirtualRouterElement(s);case 24:return t.next=26,e.updateNetworkServiceProvider(n);case 26:e.stepData.stepMove.push("basicVirtualRouter");case 27:i=0;case 28:if(!(i<e.selectedBaremetalProviders.length)){t.next=43;break}if(e.stepData.stepMove.includes("basicVirtualRouter"+i)){t.next=40;break}return o={},o.name=e.selectedBaremetalProviders[i],o.physicalNetworkId=e.stepData.physicalNetworkReturned.id,t.next=35,e.listNetworkServiceProviders(o,"BaremetalProvider");case 35:if(l=t.sent,null===l){t.next=39;break}return t.next=39,e.updateNetworkServiceProvider(l);case 39:e.stepData.stepMove.push("basicVirtualRouter"+i);case 40:i++,t.next=28;break;case 43:if(!e.havingSG){t.next=48;break}return t.next=46,e.stepEnableSecurityGroupProvider();case 46:t.next=50;break;case 48:return t.next=50,e.stepAddNetscalerProvider();case 50:t.next=57;break;case 52:t.prev=52,t.t0=t["catch"](7),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 57:t.next=134;break;case 59:if(!e.isAdvancedZone){t.next=134;break}c=0;case 61:if(!(c<e.stepData.physicalNetworksReturned.length)){t.next=134;break}if(u=e.stepData.physicalNetworksReturned[c],e.stepData.stepMove.includes("advUpdatePhysicalNetwork"+u.id)){t.next=79;break}return d={},d.state="Enabled",d.id=u.id,t.prev=67,t.next=70,e.updatePhysicalNetwork(d);case 70:e.stepData.stepMove.push("advUpdatePhysicalNetwork"+u.id),t.next=79;break;case 73:return t.prev=73,t.t1=t["catch"](67),e.messageError=t.t1,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",134);case 79:if(e.stepData.stepMove.includes("advVirtualRouter"+u.id)){t.next=103;break}return p={},p.name="VirtualRouter",p.physicalNetworkId=u.id,t.prev=83,t.next=86,e.listNetworkServiceProviders(p);case 86:return f=t.sent,t.next=89,e.listVirtualRouterElements(f);case 89:return h=t.sent,t.next=92,e.configureVirtualRouterElement(h);case 92:return t.next=94,e.updateNetworkServiceProvider(f);case 94:e.stepData.stepMove.push("advVirtualRouter"+u.id),t.next=103;break;case 97:return t.prev=97,t.t2=t["catch"](83),e.messageError=t.t2,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",134);case 103:if(e.advZoneConfiguredVirtualRouterCount++,e.configOvs(u),e.configInternalLBVM(u),t.prev=106,e.sgEnabled){t.next=112;break}return t.next=110,e.configVpcVirtualRouter(u);case 110:t.next=115;break;case 112:return e.stepData.physicalNetworkReturned=u,t.next=115,e.stepEnableSecurityGroupProvider();case 115:t.next=123;break;case 117:return t.prev=117,t.t3=t["catch"](106),e.messageError=t.t3,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",134);case 123:if(e.advZoneConfiguredVirtualRouterCount!==e.stepData.physicalNetworksReturned.length){t.next=131;break}if(e.sgEnabled){t.next=129;break}return t.next=127,e.stepAddPod();case 127:t.next=131;break;case 129:return t.next=131,e.stepAddGuestNetwork();case 131:c++,t.next=61;break;case 134:case"end":return t.stop()}}),t,null,[[7,52],[67,73],[83,97],[106,117]])})))()},configOvs:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.stepData.stepMove.includes("configOvs"+e.id)){r.next=2;break}return r.abrupt("return");case 2:return a={},a.name="Ovs",a.physicalNetworkId=e.id,r.next=7,t.listNetworkServiceProviders(a,"ovsProvider");case 7:if(n=r.sent,null===n){r.next=17;break}return r.next=11,t.listOvsElements(n);case 11:if(s=r.sent,null==s){r.next=17;break}return r.next=15,t.configureOvsElement(s);case 15:return r.next=17,t.updateNetworkServiceProvider(n);case 17:t.stepData.stepMove.push("configOvs"+e.id);case 18:case"end":return r.stop()}}),r)})))()},configInternalLBVM:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.stepData.stepMove.includes("configInternalLBVM"+e.id)){r.next=2;break}return r.abrupt("return");case 2:return a={},a.name="Internallbvm",a.physicalNetworkId=e.id,r.next=7,t.listNetworkServiceProviders(a,"configInternalLBVM");case 7:if(n=r.sent,null===n){r.next=17;break}return r.next=11,t.listInternalLoadBalancerElements(n);case 11:if(s=r.sent,null===s){r.next=17;break}return r.next=15,t.configureInternalLoadBalancerElement(s);case 15:return r.next=17,t.updateNetworkServiceProvider(n);case 17:t.stepData.stepMove.push("configInternalLBVM"+e.id);case 18:case"end":return r.stop()}}),r)})))()},configVpcVirtualRouter:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a={},a.name="VpcVirtualRouter",a.physicalNetworkId=e.id,r.prev=3,t.stepData.stepMove.includes("configVpcVirtualRouter"+e.id)){r.next=16;break}return r.next=7,t.listNetworkServiceProviders(a);case 7:return n=r.sent,r.next=10,t.listVirtualRouterElements(n);case 10:return s=r.sent,r.next=13,t.configureVirtualRouterElement(s);case 13:return r.next=15,t.updateNetworkServiceProvider(n);case 15:t.stepData.stepMove.push("configVpcVirtualRouter"+e.id);case 16:r.next=23;break;case 18:r.prev=18,r.t0=r["catch"](3),t.messageError=r.t0,t.processStatus=ue,t.setStepStatus(ue);case 23:case"end":return r.stop()}}),r,null,[[3,18]])})))()},stepAddNetscalerProvider:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.havingNetscaler){t.next=25;break}if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.adding.Netscaler.provider","netscaler"),r={},r.name="Netscaler",r.physicalnetworkid=e.stepData.physicalNetworkReturned.id,t.prev=7,e.stepData.stepMove.includes("addNetworkServiceProvider")){t.next=14;break}return t.next=11,e.addNetworkServiceProvider(r);case 11:a=t.sent,e.stepData.netscalerProviderReturned=a.jobresult.networkserviceprovider,e.stepData.stepMove.push("addNetworkServiceProvider");case 14:return t.next=16,e.stepAddNetscalerDevice();case 16:t.next=23;break;case 18:t.prev=18,t.t0=t["catch"](7),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 23:t.next=27;break;case 25:return t.next=27,e.stepAddGuestNetwork();case 27:case"end":return t.stop()}}),t,null,[[7,18]])})))()},stepAddNetscalerDevice:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.adding.Netscaler.device","netscaler"),r={},r.physicalnetworkid=e.stepData.physicalNetworkReturned.id,r.username=e.prefillContent.netscalerUsername?e.prefillContent.netscalerUsername.value:null,r.password=e.prefillContent.netscalerPassword?e.prefillContent.netscalerPassword.value:null,r.networkdevicetype=e.prefillContent.netscalerType?e.prefillContent.netscalerType.value:null,r.gslbprovider=!!e.prefillContent.gslbprovider&&e.prefillContent.gslbprovider.value,r.gslbproviderpublicip=e.prefillContent.gslbproviderpublicip?e.prefillContent.gslbproviderpublicip.value:null,r.gslbproviderprivateip=e.prefillContent.gslbproviderprivateip?e.prefillContent.gslbproviderprivateip.value:null,a=[],n=e.prefillContent.netscalerIp.value,a.push("https://"+n),s=!1,i=e.prefillContent.publicinterface?e.prefillContent.publicinterface.value:null,null!=i&&i.length>0&&(s?a.push("&"):(a.push("?"),s=!0),a.push("publicinterface="+i)),o=e.prefillContent.privateinterface?e.prefillContent.privateinterface.value:null,null!=o&&o.length>0&&(s?a.push("&"):(a.push("?"),s=!0),a.push("privateinterface="+i)),l=e.prefillContent.numretries?e.prefillContent.numretries.value:null,null!=l&&l.length>0&&(s?a.push("&"):(a.push("?"),s=!0),a.push("numretries="+l)),c=e.prefillContent.capacity?e.prefillContent.capacity.value:null,null!=c&&c.length>0&&(s?a.push("&"):(a.push("?"),s=!0),a.push("lbdevicecapacity="+c)),r.url=encodeURIComponent(a.join("")),t.prev=24,e.stepData.stepMove.includes("addNetscalerLoadBalancer")){t.next=31;break}return t.next=28,e.addNetscalerLoadBalancer(r);case 28:u=t.sent,e.stepData.netscalerProviderReturned.netScalerLoadBalancer=u.jobresult.netscalerloadbalancer,e.stepData.stepMove.push("addNetscalerLoadBalancer");case 31:if(e.stepData.stepMove.includes("netUpdateNetwork")){t.next=35;break}return t.next=34,e.updateNetworkServiceProvider(e.stepData.netscalerProviderReturned.id,"netscalerProvider");case 34:e.stepData.stepMove.push("netUpdateNetwork");case 35:return t.next=37,e.stepAddGuestNetwork();case 37:t.next=44;break;case 39:t.prev=39,t.t0=t["catch"](24),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 44:case"end":return t.stop()}}),t,null,[[24,39]])})))()},stepAddPod:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.pod","pod"),r={},r.zoneId=e.stepData.zoneReturned.id,r.name=e.prefillContent.podName?e.prefillContent.podName.value:null,r.gateway=e.prefillContent.podReservedGateway?e.prefillContent.podReservedGateway.value:null,r.netmask=e.prefillContent.podReservedNetmask?e.prefillContent.podReservedNetmask.value:null,r.startIp=e.prefillContent.podReservedStartIp?e.prefillContent.podReservedStartIp.value:null,r.endIp=e.prefillContent.podReservedStopIp?e.prefillContent.podReservedStopIp.value:null,t.prev=10,e.stepData.stepMove.includes("createPod")){t.next=16;break}return t.next=14,e.createPod(r);case 14:e.stepData.podReturned=t.sent,e.stepData.stepMove.push("createPod");case 16:return t.next=18,e.stepConfigurePublicTraffic();case 18:t.next=25;break;case 20:t.prev=20,t.t0=t["catch"](10),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 25:case"end":return t.stop()}}),t,null,[[10,20]])})))()},stepAddGuestNetwork:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.guest.network","guestTraffic"),r={},r.zoneid=e.stepData.zoneReturned.id,r.name="defaultGuestNetwork",r.displaytext="defaultGuestNetwork",r.networkofferingid=e.prefillContent.networkOfferingSelected?e.prefillContent.networkOfferingSelected.id:null,e.isAdvancedZone&&e.sgEnabled&&(r.gateway=e.prefillContent.guestGateway?e.prefillContent.guestGateway.value:null,r.netmask=e.prefillContent.guestNetmask?e.prefillContent.guestNetmask.value:null,r.startip=e.prefillContent.guestStartIp?e.prefillContent.guestStartIp.value:null,r.endip=e.prefillContent.guestStopIp?e.prefillContent.guestStopIp.value:null,r.vlan=e.prefillContent.guestVlan?e.prefillContent.guestVlan.value:null),t.prev=9,e.stepData.stepMove.includes("createNetwork")){t.next=15;break}return t.next=13,e.createNetwork(r);case 13:e.stepData.networkReturned=t.sent,e.stepData.stepMove.push("createNetwork");case 15:return t.next=17,e.stepAddPod();case 17:t.next=24;break;case 19:t.prev=19,t.t0=t["catch"](9),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 24:case"end":return t.stop()}}),t,null,[[9,19]])})))()},stepConfigurePublicTraffic:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.isBasicZone&&e.havingSG&&e.havingEIP&&e.havingELB||e.isAdvancedZone&&!e.sgEnabled)){t.next=25;break}e.setStepStatus(ce),e.currentStep++,e.addStep("message.configuring.public.traffic","publicTraffic"),r=!1,e.stepData.returnedPublicTraffic=e.stepData.returnedPublicTraffic?e.stepData.returnedPublicTraffic:[],a=regeneratorRuntime.mark((function t(a){var n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.prefillContent["public-ipranges"][a],s=!1,e.stepData.returnedPublicTraffic.forEach((function(e){if(e.vlan===n.vlan&&e.startIp===n.startIp&&e.netmask===n.netmask&&e.gateway===n.gateway)return s=!0,!1})),!s){t.next=5;break}return t.abrupt("return","continue");case 5:if(i={},i.zoneId=e.stepData.zoneReturned.id,n.vlan&&n.vlan.length>0?i.vlan=n.vlan:i.vlan="untagged",i.gateway=n.gateway,i.netmask=n.netmask,i.startip=n.startIp,i.endip=n.endIp,e.isBasicZone?i.forVirtualNetwork=!0:e.isAdvancedZone&&(e.sgEnabled?i.forVirtualNetwork=!1:i.forVirtualNetwork=!0),t.prev=13,e.stepData.stepMove.includes("createPublicVlanIpRange"+a)){t.next=20;break}return t.next=17,e.createVlanIpRange(i);case 17:o=t.sent,e.stepData.returnedPublicTraffic.push(o),e.stepData.stepMove.push("createPublicVlanIpRange"+a);case 20:t.next=28;break;case 22:t.prev=22,t.t0=t["catch"](13),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue),r=!0;case 28:if(!r){t.next=30;break}return t.abrupt("return","break");case 30:case"end":return t.stop()}}),t,null,[[13,22]])})),n=0;case 8:if(!(n<e.prefillContent["public-ipranges"].length)){t.next=19;break}return t.delegateYield(a(n),"t0",10);case 10:s=t.t0,t.t1=s,t.next="continue"===t.t1?14:"break"===t.t1?15:16;break;case 14:return t.abrupt("continue",16);case 15:return t.abrupt("break",19);case 16:n++,t.next=8;break;case 19:if(!r){t.next=21;break}return t.abrupt("return");case 21:return t.next=23,e.stepConfigureStorageTraffic();case 23:t.next=39;break;case 25:if(!e.isAdvancedZone||!e.sgEnabled){t.next=30;break}return t.next=28,e.stepConfigureStorageTraffic();case 28:t.next=39;break;case 30:if(!e.prefillContent.physicalNetworks){t.next=39;break}if(i=e.prefillContent.physicalNetworks[0].traffics.filter((function(e){return"storage"===e.type})),!(i&&i.length>0)){t.next=37;break}return t.next=35,e.stepConfigureStorageTraffic();case 35:t.next=39;break;case 37:return t.next=39,e.stepConfigureGuestTraffic();case 39:case"end":return t.stop()}}),t)})))()},stepConfigureStorageTraffic:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=!1,e.prefillContent.physicalNetworks.forEach((function(e){var t=e.traffics.filter((function(e){return"storage"===e.type}));if(t&&t.length>0)return r=!0,!1})),r){t.next=6;break}return t.next=5,e.stepConfigureGuestTraffic();case 5:return t.abrupt("return");case 6:return e.setStepStatus(ce),e.currentStep++,e.addStep("message.configuring.storage.traffic","storageTraffic"),e.stepData.tasks=e.stepData.tasks?e.stepData.tasks:[],t.next=12,e.prefillContent["storage-ipranges"].map(function(){var t=Object(Y["a"])(regeneratorRuntime.mark((function t(r,a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={},n.vlan=r.vlan,n.gateway=r.gateway,n.netmask=r.netmask,n.startip=r.startIp,n.endip=r.endIp,n.vlan&&0!==n.vlan.length||delete n.vlan,n.zoneid=e.stepData.zoneReturned.id,n.podid=e.stepData.podReturned.id,t.prev=9,e.stepData.stepMove.includes("createStorageNetworkIpRange"+a)){t.next=16;break}return t.next=13,e.createStorageNetworkIpRange(n);case 13:s=t.sent,e.stepData.tasks.push(s),e.stepData.stepMove.push("createStorageNetworkIpRange"+a);case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](9),e.stepData.tasks.push({error:!0,message:t.t0});case 21:case"end":return t.stop()}}),t,null,[[9,18]])})));return function(e,r){return t.apply(this,arguments)}}());case 12:return a=setInterval((function(){var t=e.stepData.tasks.filter((function(e){return e.complete||e.error})),r=e.stepData.tasks.filter((function(e){return e.error}));return t.length===e.prefillContent["storage-ipranges"].length?(clearInterval(a),r.length?(e.messageError="configureStorageTraffic. Error: "+r[0].message,e.processStatus=ue,void e.setStepStatus(ue)):void e.stepConfigureGuestTraffic()):(e.stepData.tasks.length===e.prefillContent["storage-ipranges"].length&&e.stepData.tasks.forEach(function(){var t=Object(Y["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.error){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,e.pollJob(r.jobid);case 4:return a=t.sent,1===a.jobstatus?r.complete=!0:2===a.jobstatus&&(r.error=!0,r.message=a.jobresult.errortext),t.abrupt("return",!0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),!0)}),1e3),t.abrupt("return",!0);case 14:case"end":return t.stop()}}),t)})))()},stepConfigureGuestTraffic:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.prefillContent.skipGuestTrafficStep){t.next=4;break}return t.next=3,e.stepAddCluster();case 3:return t.abrupt("return");case 4:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.configuring.guest.traffic","guestTraffic"),!e.isBasicZone){t.next=39;break}if(r={},r.podid=e.stepData.podReturned.id,r.networkid=e.stepData.networkReturned.id,r.gateway=e.prefillContent.guestGateway?e.prefillContent.guestGateway.value:null,r.netmask=e.prefillContent.guestNetmask?e.prefillContent.guestNetmask.value:null,r.startip=e.prefillContent.guestStartIp?e.prefillContent.guestStartIp.value:null,r.endip=e.prefillContent.guestStopIp?e.prefillContent.guestStopIp.value:null,r.forVirtualNetwork=!1,t.prev=16,e.stepData.stepMove.includes("createGuestVlanIpRange")){t.next=22;break}return t.next=20,e.createVlanIpRange(r);case 20:e.stepData.returnedGuestNetwork=t.sent,e.stepData.stepMove.push("createGuestVlanIpRange");case 22:if(a=e.prefillContent.hypervisor.value,"BareMetal"!==a){t.next=28;break}return t.next=26,e.stepComplete();case 26:t.next=30;break;case 28:return t.next=30,e.stepAddCluster();case 30:t.next=37;break;case 32:t.prev=32,t.t0=t["catch"](16),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 37:t.next=76;break;case 39:if(!e.isAdvancedZone){t.next=76;break}return n=[],t.next=43,e.prefillContent.physicalNetworks.map(function(){var t=Object(Y["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.prefillContent.vlanRangeStart&&n.push(r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 43:if(0!==n.length){t.next=48;break}return t.next=46,e.stepAddCluster();case 46:t.next=76;break;case 48:s=0,i=0;case 50:if(!(i<n.length)){t.next=76;break}if(o=null,o=e.prefillContent.vlanRangeEnd&&e.prefillContent.vlanRangeEnd.value?[e.prefillContent.vlanRangeStart.value,e.prefillContent.vlanRangeEnd.value].join("-"):e.prefillContent.vlanRangeStart.value,l={},l.id=e.stepData.physicalNetworkReturned.id,l.vlan=o,t.prev=56,e.stepData.stepMove.includes("advGuestUpdatePhysicalNetwork"+i)){t.next=61;break}return t.next=60,e.updatePhysicalNetwork(l);case 60:e.stepData.stepMove.push("advGuestUpdatePhysicalNetwork"+i);case 61:if(s++,s!==n.length){t.next=65;break}return t.next=65,e.stepAddCluster();case 65:t.next=73;break;case 67:return t.prev=67,t.t1=t["catch"](56),e.messageError=t.t1,e.processStatus=ue,e.setStepStatus(ue),t.abrupt("break",76);case 73:i++,t.next=50;break;case 76:case"end":return t.stop()}}),t,null,[[16,32],[56,67]])})))()},stepAddCluster:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.cluster","clusterResource"),r=e.prefillContent.hypervisor.value,a={},a.zoneId=e.stepData.zoneReturned.id,a.hypervisor=r,n=null,n="VMware"===r?"ExternalManaged":"CloudManaged",a.clustertype=n,a.podId=e.stepData.podReturned.id,s=e.prefillContent.clusterName.value,"VMware"===r&&(a.username=e.prefillContent.vCenterUsername?e.prefillContent.vCenterUsername.value:null,a.password=e.prefillContent.vCenterPassword?e.prefillContent.vCenterPassword.value:null,a.vsmipaddress=e.prefillContent.vsmipaddress?e.prefillContent.vsmipaddress.value:null,a.vsmusername=e.prefillContent.vsmusername?e.prefillContent.vsmusername.value:null,a.vsmpassword=e.prefillContent.vsmpassword?e.prefillContent.vsmpassword.value:null,i=e.prefillContent.vCenterHost?e.prefillContent.vCenterHost.value:null,o=e.prefillContent.vCenterDatacenter?e.prefillContent.vCenterDatacenter.value:null,l=null,l=-1===i.indexOf("http://")?["http://",i].join(""):i,l+="/"+o+"/"+s,a.url=l,s=i+"/"+o+"/"+s),a.clustername=s,"VMware"!==r){t.next=44;break}if(c={},c.zoneId=e.stepData.zoneReturned.id,c.username=e.prefillContent.vCenterUsername?e.prefillContent.vCenterUsername.value:null,c.password=e.prefillContent.vCenterPassword?e.prefillContent.vCenterPassword.value:null,c.name=e.prefillContent.vCenterDatacenter?e.prefillContent.vCenterDatacenter.value:null,c.vcenter=e.prefillContent.vCenterHost?e.prefillContent.vCenterHost.value:null,t.prev=21,e.stepData.stepMove.includes("addVmwareDc")){t.next=27;break}return t.next=25,e.addVmwareDc(c);case 25:e.stepData.vmWareResult=t.sent,e.stepData.stepMove.push("addVmwareDc");case 27:if(null===e.stepData.vmWareResult.id){t.next=35;break}if(e.stepData.stepMove.includes("addCluster")){t.next=33;break}return t.next=31,e.addCluster(a);case 31:e.stepData.clusterReturned=t.sent,e.stepData.stepMove.push("addCluster");case 33:return t.next=35,e.stepAddPrimaryStorage();case 35:t.next=42;break;case 37:t.prev=37,t.t0=t["catch"](21),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 42:t.next=59;break;case 44:if(t.prev=44,e.stepData.stepMove.includes("addCluster")){t.next=50;break}return t.next=48,e.addCluster(a);case 48:e.stepData.clusterReturned=t.sent,e.stepData.stepMove.push("addCluster");case 50:return t.next=52,e.stepAddHost();case 52:t.next=59;break;case 54:t.prev=54,t.t1=t["catch"](44),e.messageError=t.t1,e.processStatus=ue,e.setStepStatus(ue);case 59:case"end":return t.stop()}}),t,null,[[21,37],[44,54]])})))()},stepAddHost:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.adding.host","hostResource"),r={},r.zoneid=e.stepData.zoneReturned.id,r.podid=e.stepData.podReturned.id,r.clusterid=e.stepData.clusterReturned.id,r.hypervisor=e.stepData.clusterReturned.hypervisortype,r.clustertype=e.stepData.clusterReturned.clustertype,r.hosttags=e.prefillContent.hostTags?e.prefillContent.hostTags.value:null,r.username=e.prefillContent.hostUserName?e.prefillContent.hostUserName.value:null,r.password=e.prefillContent.hostPassword?e.prefillContent.hostPassword.value:null,a=e.prefillContent.hostName?e.prefillContent.hostName.value:null,n=null,n=-1===a.indexOf("http://")?["http://",a].join(""):a,r.url=n,s=e.prefillContent.hypervisor.value,"Ovm"===s&&(r.agentusername=e.prefillContent.agentUserName?e.prefillContent.agentUserName.value:null,r.agentpassword=e.prefillContent.agentPassword?e.prefillContent.agentPassword.value:null),!e.prefillContent.localstorageenabledforsystemvm.value){t.next=40;break}return i={},i.name="system.vm.use.local.storage",i.value=!0,i.zoneid=e.stepData.zoneReturned.id,t.prev=23,t.next=26,e.updateConfiguration(i);case 26:return t.next=28,e.addHost(r);case 28:return e.stepData.returnedHost=t.sent,t.next=31,e.stepAddPrimaryStorage();case 31:t.next=38;break;case 33:t.prev=33,t.t0=t["catch"](23),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 38:t.next=53;break;case 40:return t.prev=40,t.next=43,e.addHost(r);case 43:return e.stepData.returnedHost=t.sent,t.next=46,e.stepAddPrimaryStorage();case 46:t.next=53;break;case 48:t.prev=48,t.t1=t["catch"](40),e.messageError=t.t1,e.processStatus=ue,e.setStepStatus(ue);case 53:case"end":return t.stop()}}),t,null,[[23,33],[40,48]])})))()},stepAddPrimaryStorage:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c,u,d,p,f,h,m,v,g,b,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.prefillContent.localstorageenabled.value||!e.prefillContent.localstorageenabledforsystemvm.value){t.next=4;break}return t.next=3,e.stepAddSecondaryStorage();case 3:return t.abrupt("return");case 4:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.primary.storage","primaryResource"),r={},r.zoneid=e.stepData.zoneReturned.id,r.podId=e.stepData.podReturned.id,r.clusterid=e.stepData.clusterReturned.id,r.name=e.prefillContent.primaryStorageName?e.prefillContent.primaryStorageName.value:null,r.scope=e.prefillContent.primaryStorageScope?e.prefillContent.primaryStorageScope.value:null,"zone"===r.scope&&(a=e.prefillContent.hypervisor.value,void 0!==a?r.hypervisor=a:void 0!==e.stepData.clusterReturned.hypervisortype&&(r.hypervisor=e.stepData.clusterReturned.hypervisortype)),n=e.prefillContent.primaryStorageServer?e.prefillContent.primaryStorageServer.value:null,s="",i=e.prefillContent.primaryStorageProtocol.value,"nfs"===i?(o=e.prefillContent.primaryStoragePath.value,"/"!==o.substring(0,1)&&(o="/"+o),s=e.nfsURL(n,o)):"SMB"===i?(l=e.prefillContent.primaryStoragePath.value,"/"!==l.substring(0,1)&&(l="/"+l),s=e.smbURL(n,l),r["details[0].user"]=e.prefillContent.primaryStorageSMBUsername.value,r["details[0].password"]=e.prefillContent.primaryStorageSMBPassword.value,r["details[0].domain"]=e.prefillContent.primaryStorageSMBDomain.value):"PreSetup"===i?(c=e.prefillContent.primaryStoragePath.value,"/"!==c.substring(0,1)&&(c="/"+c),s=e.presetupURL(n,c)):"ocfs2"===i?(u=e.prefillContent.primaryStoragePath.value,"/"!==u.substring(0,1)&&(u="/"+u),s=e.ocfs2URL(n,u)):"SharedMountPoint"===i?(d=e.prefillContent.primaryStoragePath.value,"/"!==d.substring(0,1)&&(d="/"+d),s=e.sharedMountPointURL(n,d)):"clvm"===i?(p=e.prefillContent.primaryStorageVolumeGroup.value,"/"!==p.substring(0,1)&&(p="/"+p),s=e.clvmURL(p)):"rbd"===i?(f=e.prefillContent.primaryStorageRADOSMonitor.value,h=e.prefillContent.primaryStorageRADOSPool.value,m=e.prefillContent.primaryStorageRADOSUser.value,v=e.prefillContent.primaryStorage.value,s=e.rbdURL(f,h,m,v)):"vmfs"===i?(g=e.prefillContent.primaryStorageVmfsDatacenter.value,"/"!==g.substring(0,1)&&(g="/"+g),g+="/"+e.prefillContent.primaryStorageVmfsDatastore.value,s=e.vmfsURL("dummy",g)):(b=e.prefillContent.primaryStorageTargetIQN.value,"/"!==b.substring(0,1)&&(b="/"+b),y=e.prefillContent.primaryStorageLUN.value,s=e.iscsiURL(n,b,y)),r.url=s,r.tags=e.prefillContent.primaryStorageTags.value,t.prev=20,e.stepData.stepMove.includes("createStoragePool")){t.next=26;break}return t.next=24,e.createStoragePool(r);case 24:e.stepData.primaryStorageRetunred=t.sent,e.stepData.stepMove.push("createStoragePool");case 26:return t.next=28,e.stepAddSecondaryStorage();case 28:t.next=35;break;case 30:t.prev=30,t.t0=t["catch"](20),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 35:case"end":return t.stop()}}),t,null,[[20,30]])})))()},stepAddSecondaryStorage:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,l,c,u,d,p,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.prefillContent.secondaryStorageProvider.value&&0!==e.prefillContent.secondaryStorageProvider.value.length){t.next=4;break}return t.next=3,e.stepComplete();case 3:return t.abrupt("return");case 4:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.creating.secondary.storage","secondaryResource"),r={},r.name=e.prefillContent.secondaryStorageName?e.prefillContent.secondaryStorageName.value:null,"NFS"===e.prefillContent.secondaryStorageProvider.value?(a=e.prefillContent.secondaryStorageServer.value,n=e.prefillContent.secondaryStoragePath.value,s=e.nfsURL(a,n),r.provider=e.prefillContent.secondaryStorageProvider.value,r.zoneid=e.stepData.zoneReturned.id,r.url=s):"SMB"===e.prefillContent.secondaryStorageProvider.value?(i=e.prefillContent.secondaryStorageServer.value,o=e.prefillContent.secondaryStoragePath.value,l=e.smbURL(i,o),r.provider=e.prefillContent.secondaryStorageProvider.value,r.zoneid=e.stepData.zoneReturned.id,r.url=l,r["details[0].key"]="user",r["details[0].value"]=e.prefillContent.secondaryStorageSMBUsername.value,r["details[1].key"]="password",r["details[1].value"]=e.prefillContent.secondaryStorageSMBPassword.value,r["details[2].key"]="domain",r["details[2].value"]=e.prefillContent.secondaryStorageSMBDomain.value):"S3"===e.prefillContent.secondaryStorageProvider.value?(r.provider=e.prefillContent.secondaryStorageProvider.value,r["details[0].key"]="accesskey",r["details[0].value"]=e.prefillContent.secondaryStorageAccessKey.value,r["details[1].key"]="secretkey",r["details[1].value"]=e.prefillContent.secondaryStorageSecretKey.value,r["details[2].key"]="bucket",r["details[2].value"]=e.prefillContent.secondaryStorageBucket.value,r["details[3].key"]="usehttps",r["details[3].value"]=!!e.prefillContent.secondaryStorageHttps&&e.prefillContent.secondaryStorageHttps.value,c=4,e.prefillContent.secondaryStorageEndpoint&&e.prefillContent.secondaryStorageEndpoint.value.length>0&&(r["details["+c.toString()+"].key"]="endpoint",r["details["+c.toString()+"].value"]=e.prefillContent.secondaryStorageEndpoint.value,c++),e.prefillContent.secondaryStorageConnectionTimeout&&e.prefillContent.secondaryStorageConnectionTimeout.value.length>0&&(r["details["+c.toString()+"].key"]="connectiontimeout",r["details["+c.toString()+"].value"]=e.prefillContent.secondaryStorageConnectionTimeout.value,c++),e.prefillContent.secondaryStorageMaxError&&e.prefillContent.secondaryStorageMaxError.value.length>0&&(r["details["+c.toString()+"].key"]="maxerrorretry",r["details["+c.toString()+"].value"]=e.prefillContent.secondaryStorageMaxError.value,c++),e.prefillContent.secondaryStorageSocketTimeout&&e.prefillContent.secondaryStorageSocketTimeout.value.length>0&&(r["details["+c.toString()+"].key"]="sockettimeout",r["details["+c.toString()+"].value"]=e.prefillContent.secondaryStorageSocketTimeout.value,c++)):"Swift"===e.prefillContent.secondaryStorageProvider.value&&(r.provider=e.prefillContent.secondaryStorageProvider.value,r.url=e.prefillContent.secondaryStorageURL.value,u=0,e.prefillContent.secondaryStorageAccount&&e.prefillContent.secondaryStorageAccount.value.length>0&&(r["details["+u.toString()+"].key"]="account",r["details["+u.toString()+"].value"]=e.prefillContent.secondaryStorageAccount.value,u++),e.prefillContent.secondaryStorageUsername&&e.prefillContent.secondaryStorageUsername.value.length>0&&(r["details["+u.toString()+"].key"]="username",r["details["+u.toString()+"].value"]=e.prefillContent.secondaryStorageUsername.value,u++),e.prefillContent.secondaryStorageKey&&e.prefillContent.secondaryStorageKey.value.length>0&&(r["details["+u.toString()+"].key"]="key",r["details["+u.toString()+"].value"]=e.prefillContent.secondaryStorageKey.value,u++)),t.prev=10,e.stepData.stepMove.includes("addImageStore")){t.next=15;break}return t.next=14,e.addImageStore(r);case 14:e.stepData.stepMove.push("addImageStore");case 15:if(!e.prefillContent.secondaryStorageNFSStaging||!e.prefillContent.secondaryStorageNFSStaging.value){t.next=27;break}if(d=e.prefillContent.secondaryStorageNFSServer.value,p=e.prefillContent.secondaryStorageNFSPath.value,f=e.nfsURL(d,p),h={},h.provider="nfs",h.zoneid=e.stepData.zoneReturned.id,h.url=f,e.stepData.stepMove.includes("createSecondaryStagingStore")){t.next=27;break}return t.next=26,e.createSecondaryStagingStore(h);case 26:e.stepData.stepMove.push("createSecondaryStagingStore");case 27:return t.next=29,e.stepComplete();case 29:t.next=36;break;case 31:t.prev=31,t.t0=t["catch"](10),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 36:case"end":return t.stop()}}),t,null,[[10,31]])})))()},stepEnableSecurityGroupProvider:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.setStepStatus(ce),e.currentStep++,e.addStep("message.enabling.security.group.provider","stepZone"),r={},r.name="SecurityGroupProvider",r.physicalNetworkId=e.stepData.physicalNetworkReturned.id,t.prev=6,e.stepData.stepMove.includes("enableSecurityGroupProvider"+e.stepData.physicalNetworkReturned.id)){t.next=14;break}return t.next=10,e.listNetworkServiceProviders(r);case 10:return a=t.sent,t.next=13,e.updateNetworkServiceProvider(a,"enableSecurityGroupProvider");case 13:e.stepData.stepMove.push("enableSecurityGroupProvider"+e.stepData.physicalNetworkReturned.id);case 14:return t.next=16,e.stepAddNetscalerProvider();case 16:t.next=23;break;case 18:t.prev=18,t.t0=t["catch"](6),e.messageError=t.t0,e.processStatus=ue,e.setStepStatus(ue);case 23:case"end":return t.stop()}}),t,null,[[6,18]])})))()},stepComplete:function(){this.setStepStatus(ce),this.currentStep++,this.addStep("message.zone.creation.complete","stepComplete"),this.setStepStatus(ce),this.processStatus=ce},enableZoneAction:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={},r.allocationstate="Enabled",r.id=e.stepData.zoneReturned.id,e.loading=!0,t.prev=4,t.next=7,e.enableZone(r);case 7:return t.next=9,e.$message.success("Success");case 9:e.loading=!1,e.steps=[],e.$emit("closeAction"),e.$emit("refresh-data"),t.next=20;break;case 15:return t.prev=15,t.t0=t["catch"](4),e.loading=!1,t.next=20,e.$notification.error({message:e.$t("message.request.failed"),description:t.t0});case 20:case"end":return t.stop()}}),t,null,[[4,15]])})))()},pollJob:function(e){return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r=setInterval((function(){Object(m["a"])("queryAsyncJobResult",{jobId:e}).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(a){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.queryasyncjobresultresponse,0!==n.jobstatus){e.next=3;break}return e.abrupt("return");case 3:clearInterval(r),t(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),1e3)})));case 1:case"end":return t.stop()}}),t)})))()},createZone:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createZone",e).then((function(e){var r=e.createzoneresponse.zone;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},dedicateZone:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("dedicateZone",e).then((function(e){t()})).catch((function(e){a=e.response.headers["x-description"],t(a)}))}))},createPhysicalNetwork:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,a){var n="";Object(m["a"])("createPhysicalNetwork",e).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.createphysicalnetworkresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="createPhysicalNetwork ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))})));case 1:case"end":return r.stop()}}),r)})))()},addTrafficType:function(e){var t=this,r=this.trafficLabelParam(e.toLowerCase()),a={};return a.trafficType=e,a.physicalnetworkid=this.stepData.physicalNetworkReturned.id,a=Object(s["a"])(Object(s["a"])({},a),r),new Promise((function(r,n){var s="";Object(m["a"])("addTrafficType",a).then(function(){var a=Object(Y["a"])(regeneratorRuntime.mark((function a(i){var o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=i.addtraffictyperesponse.jobid,!o){a.next=11;break}return a.next=4,t.pollJob(o);case 4:if(l=a.sent,2!==l.jobstatus){a.next=10;break}return t.setStepStatus(ue),s="".concat(t.$t("message.failed.to.add")," ")+e+" ".concat(t.$t("message.traffic.type.to.basic.zone"),". ").concat(t.$t("label.error"),": ")+l.jobresult.errortext,n(s),a.abrupt("return");case 10:r(l);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){s=e.response.headers["x-description"],n(s)}))}))},updatePhysicalNetwork:function(e){var t=this;return new Promise((function(r,a){var n="";Object(m["a"])("updatePhysicalNetwork",e).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.updatephysicalnetworkresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="updatePhysicalNetwork ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},listNetworkServiceProviders:function(e,t){var r=this;return new Promise((function(a,n){var s=null,i="";Object(m["a"])("listNetworkServiceProviders",e).then((function(e){var o=e.listnetworkserviceprovidersresponse.networkserviceprovider;if(null!=o&&o.length>0&&(s=o[0].id),!t&&null==s)return i=r.$t("message.listnsp.not.return.providerid"),void n(i);a(s)})).catch((function(e){i=e.response.headers["x-description"],n(i)}))}))},listVirtualRouterElements:function(e){var t=this;return new Promise((function(r,a){var n=null,s="";Object(m["a"])("listVirtualRouterElements",{nspid:e}).then((function(e){var i=e.listvirtualrouterelementsresponse.virtualrouterelement;if(null!=i&&i.length>0&&(n=i[0].id),null===n)return s=t.$t("message.virtual.router.not.return.elementid"),void a(s);r(n)})).catch((function(e){s=e.response.headers["x-description"],a(s)}))}))},configureVirtualRouterElement:function(e){var t=this;return new Promise((function(r,a){var n="",s={enabled:!0};s.id=e,Object(m["a"])("configureVirtualRouterElement",s).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.configurevirtualrouterelementresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="configureVirtualRouterElement ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},updateNetworkServiceProvider:function(e,t){var r=this;return new Promise((function(a,n){var s="",i={};i.id=e,i.state="Enabled",Object(m["a"])("updateNetworkServiceProvider",i).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(i){var o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=i.updatenetworkserviceproviderresponse.jobid,!o){e.next=18;break}return e.next=4,r.pollJob(o);case 4:if(l=e.sent,2!==l.jobstatus){e.next=17;break}s="updateNetworkServiceProvider ".concat(r.$t("label.failed").toLowerCase(),". ").concat(r.$t("label.error"),": "),e.t0=t,e.next="netscalerProvider"===e.t0?10:"enableSecurityGroupProvider"===e.t0?12:14;break;case 10:return s="".concat(r.$t("message.enable.netsacler.provider.failed"),". ").concat(r.$t("label.error"),": "),e.abrupt("break",14);case 12:return s="".concat(r.$t("message.enable.securitygroup.provider.failed"),". ").concat(r.$t("label.error"),": "),e.abrupt("break",14);case 14:return s+=l.jobresult.errortext,n(s),e.abrupt("return");case 17:a(l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){s=e.response.headers["x-description"],n(s)}))}))},listOvsElements:function(e){return new Promise((function(t,r){var a="",n=null;Object(m["a"])("listOvsElements",{nspid:e}).then((function(e){var r=e.listovselementsresponse.ovselement;null!=r&&r.length>0&&(n=r[0].id),t(n)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},configureOvsElement:function(e){var t=this;return new Promise((function(r,a){var n="";Object(m["a"])("configureOvsElement",{enabled:!0,id:e}).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.configureovselementresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="configureOvsElement ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},listInternalLoadBalancerElements:function(e){var t=this;return new Promise((function(r,a){var n=null,s="";Object(m["a"])("listInternalLoadBalancerElements",{nspid:e}).then((function(e){var i=e.listinternalloadbalancerelementsresponse.internalloadbalancerelement;if(null!=i&&i.length>0&&(n=i[0].id),null==n)return s=t.$t("message.interloadbalance.not.return.elementid"),void a(s);r(n)})).catch((function(e){s=e.response.headers["x-description"],a(s)}))}))},configureInternalLoadBalancerElement:function(e){var t=this;return new Promise((function(r,a){var n="";Object(m["a"])("configureInternalLoadBalancerElement",{enabled:!0,id:e}).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.configureinternalloadbalancerelementresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="configureVirtualRouterElement ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},addNetworkServiceProvider:function(e){var t=this;return new Promise((function(r,a){var n="";Object(m["a"])("addNetworkServiceProvider",e).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.addnetworkserviceproviderresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="addNetworkServiceProvider&name=Netscaler ".concat(t.$t("label.failed").toLowerCase(),". ").concat(t.$t("label.error"),": ")+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},createNetwork:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createNetwork",e).then((function(e){var r=e.createnetworkresponse.network;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},createPod:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createPod",e).then((function(e){var r=e.createpodresponse.pod;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},createVlanIpRange:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createVlanIpRange",e).then((function(e){var r=e.createvlaniprangeresponse.vlan;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},createStorageNetworkIpRange:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createStorageNetworkIpRange",e).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=r.createstoragenetworkiprangeresponse.jobid,t({jobid:a,complete:!1});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},addVmwareDc:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("addVmwareDc",{},"POST",e).then((function(e){var r=e.addvmwaredcresponse.vmwaredc;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},addCluster:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("addCluster",e).then((function(e){var r=e.addclusterresponse.cluster[0];t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},addHost:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("addHost",{},"POST",e).then((function(e){var r=e.addhostresponse.host[0];t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},updateConfiguration:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("updateConfiguration",e).then((function(e){t()})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},createStoragePool:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createStoragePool",e).then((function(e){var r=e.createstoragepoolresponse.storagepool;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},addImageStore:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("addImageStore",e).then((function(e){var r=e.addimagestoreresponse.secondarystorage;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},createSecondaryStagingStore:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("createSecondaryStagingStore",e).then((function(e){var r=e.addimagestoreresponse.secondarystorage;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},addNetscalerLoadBalancer:function(e){var t=this;return new Promise((function(r,a){var n="";Object(m["a"])("addNetscalerLoadBalancer",{},"POST",e).then(function(){var e=Object(Y["a"])(regeneratorRuntime.mark((function e(s){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=s.addnetscalerloadbalancerresponse.jobid,!i){e.next=10;break}return e.next=4,t.pollJob(i);case 4:if(o=e.sent,2!==o.jobstatus){e.next=9;break}return n="addNetscalerDevice "+o.jobresult.errortext,a(n),e.abrupt("return");case 9:r(o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n=e.response.headers["x-description"],a(n)}))}))},enableZone:function(e){return new Promise((function(t,r){var a="";Object(m["a"])("updateZone",e).then((function(e){var r=e.updatezoneresponse.zone;t(r)})).catch((function(e){a=e.response.headers["x-description"],r(a)}))}))},nfsURL:function(e,t){var r=null;return"/"!==t.substring(0,1)&&(t="/"+t),r=-1===e.indexOf("://")?"nfs://"+e+t:e+t,r},smbURL:function(e,t,r,a,n){var s="";return"/"!==t.substring(0,1)&&(t="/"+t),-1===e.indexOf("://")&&(s+="cifs://"),s+=e+t,s},presetupURL:function(e,t){var r=null;return r=-1===e.indexOf("://")?"presetup://"+e+t:e+t,r},ocfs2URL:function(e,t){var r=null;return r=-1===e.indexOf("://")?"ocfs2://"+e+t:e+t,r},sharedMountPointURL:function(e,t){var r="";return r=-1===e.indexOf("://")?"SharedMountPoint://"+e+t:e+t,r},rbdURL:function(e,t,r,a){var n;return a=a.replace("+","-"),a=a.replace("/","_"),null!=r&&null!=a&&(e=r+":"+a+"@"+e),"/"!==t.substring(0,1)&&(t="/"+t),n=-1===e.indexOf("://")?"rbd://"+e+t:e+t,n},clvmURL:function(e){var t="";return t=-1===e.indexOf("://")?"clvm://localhost/"+e:e,t},vmfsURL:function(e,t){var r="";return r=-1===e.indexOf("://")?"vmfs://"+e+t:e+t,r},iscsiURL:function(e,t,r){var a="";return a=-1===e.indexOf("://")?"iscsi://"+e+t+"/"+r:e+t+"/"+r,a}}},pe=de,fe=(r("89a8"),Object(u["a"])(pe,ne,se,!1,null,"11a9f71c",null)),he=fe.exports,me={components:{ZoneWizardZoneTypeStep:p,ZoneWizardZoneDetailsStep:y,ZoneWizardNetworkSetupStep:J,ZoneWizardAddResources:ae,ZoneWizardLaunchZone:he},data:function(){return{currentStep:0,stepFixError:!1,launchZone:!1,launchData:{},stepChild:"",steps:[{title:"label.zone.type",step:[],description:this.$t("message.select.zone.description"),hint:this.$t("message.select.zone.hint")},{title:"label.zone.details",step:["stepAddZone","dedicateZone"],description:this.$t("message.zone.detail.description"),hint:this.$t("message.zone.detail.hint")},{title:"label.network",step:["physicalNetwork","netscaler","pod","guestTraffic","storageTraffic","publicTraffic"],description:this.$t("message.network.description"),hint:this.$t("message.network.hint")},{title:"label.add.resources",step:["clusterResource","hostResource","primaryResource","secondaryResource"],description:this.$t("message.add.resource.description"),hint:this.$t("message.add.resource.hint")},{title:"label.launch",step:["launchZone"],description:this.$t("message.launch.zone.description"),hint:this.$t("message.launch.zone.hint")}],zoneConfig:{}}},methods:{nextPressed:function(){this.currentStep++},backPressed:function(e){this.currentStep--},onFieldsChanged:function(e){e.zoneType&&this.zoneConfig.zoneType&&e.zoneType.value!==this.zoneConfig.zoneType.value&&(this.zoneConfig.physicalNetworks=null),this.zoneConfig=Object(s["a"])(Object(s["a"])({},this.zoneConfig),e)},onCloseAction:function(){this.$emit("close-action")},onRefreshData:function(){this.$message.success(this.$t("message.processing.complete")),this.$emit("refresh-data"),this.onCloseAction()},onStepError:function(e,t){this.currentStep=this.steps.findIndex((function(t){return t.step.includes(e)})),this.stepChild=e,this.launchData=t,this.launchZone=!1,this.stepFixError=!0},onLaunchZone:function(){this.stepFixError=!1,this.launchZone=!0,this.currentStep=this.steps.findIndex((function(e){return e.step.includes("launchZone")}))}}},ve=me,ge=(r("809c"),Object(u["a"])(ve,a,n,!1,null,"6ca58348",null));t["default"]=ge.exports},"800c":function(e,t,r){},"809c":function(e,t,r){"use strict";var a=r("3b69"),n=r.n(a);n.a},"89a8":function(e,t,r){"use strict";var a=r("3c2e"),n=r.n(a);n.a},"8bf3":function(e,t,r){"use strict";var a=r("d538"),n=r.n(a);n.a},"8cc4":function(e,t,r){"use strict";var a=r("800c"),n=r.n(a);n.a},9475:function(e,t,r){},"97fd":function(e,t,r){},a7bd:function(e,t,r){"use strict";var a=r("97fd"),n=r.n(a);n.a},d538:function(e,t,r){},f825:function(e,t,r){"use strict";var a=r("fb15"),n=r.n(a);n.a},fb15:function(e,t,r){}}]);
//# sourceMappingURL=chunk-695389f4.6c3626ad.js.map