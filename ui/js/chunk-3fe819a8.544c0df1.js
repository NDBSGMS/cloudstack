(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3fe819a8"],{"3ba5":function(e,t,a){},cb19:function(e,t,a){"use strict";var i=a("3ba5"),s=a.n(i);s.a},ec83:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("a-list",{staticClass:"list",attrs:{size:"large",loading:e.loading||e.tabLoading}},e._l(e.items,(function(t,i){return a("a-list-item",{key:i,staticClass:"item"},[a("a-list-item-meta",[a("span",{staticStyle:{"word-break":"break-all"},attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))]),a("span",{staticStyle:{"word-break":"break-all"},attrs:{slot:"description"},slot:"description"},[e._v(e._s(t.description))])]),a("div",{staticClass:"item__content"},[e.editableValueKey===i?a("a-input",{staticClass:"editable-value value",attrs:{autoFocus:e.editableValueKey===i,defaultValue:t.value},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;e.editableValueKey=null},pressEnter:function(a){return e.updateData(t)}},model:{value:e.editableValue,callback:function(t){e.editableValue=t},expression:"editableValue"}}):a("span",{staticClass:"value"},[e._v(" "+e._s(t.value)+" ")])],1),a("div",{staticClass:"action",attrs:{slot:"actions"},slot:"actions"},[e.editableValueKey!==i?a("a-button",{attrs:{shape:"circle",disabled:!("updateConfiguration"in e.$store.getters.apis),icon:"edit"},on:{click:function(a){return e.setEditableSetting(t,i)}}}):e._e(),e.editableValueKey===i?a("a-button",{attrs:{shape:"circle",size:"default"},on:{click:function(t){e.editableValueKey=null}}},[a("a-icon",{attrs:{type:"close-circle",theme:"twoTone",twoToneColor:"#f5222d"}})],1):e._e(),e.editableValueKey===i?a("a-button",{attrs:{shape:"circle"},on:{click:function(a){return e.updateData(t)}}},[a("a-icon",{attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}})],1):e._e()],1)],1)})),1)],1)},s=[],n=(a("99af"),a("4de4"),a("b0c0"),a("d3b7"),a("fc11")),o=a("365c"),c={name:"SettingsTab",props:{resource:{type:Object,required:!0},loading:{type:Boolean,required:!0}},data:function(){return{items:[],scopeKey:"",editableValueKey:null,editableValue:"",tabLoading:!1,filter:""}},beforeMount:function(){switch(this.$route.meta.name){case"account":this.scopeKey="accountid";break;case"domain":this.scopeKey="domainid";break;case"zone":this.scopeKey="zoneid";break;case"cluster":this.scopeKey="clusterid";break;case"storagepool":this.scopeKey="storageid";break;case"imagestore":this.scopeKey="imagestoreuuid";break;default:this.scopeKey=""}},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e.id&&(this.resource=e,this.fetchData())}},methods:{fetchData:function(e){var t,a=this;this.tabLoading=!0;var i=(t={},Object(n["a"])(t,this.scopeKey,this.resource.id),Object(n["a"])(t,"listAll",!0),t);this.filter&&(i.keyword=this.filter),Object(o["a"])("listConfigurations",i).then((function(e){a.items=e.listconfigurationsresponse.configuration})).catch((function(e){console.error(e),a.$message.error(a.$t("message.error.loading.setting"))})).finally((function(){a.tabLoading=!1,e&&e()}))},updateData:function(e){var t,a=this;this.tabLoading=!0,Object(o["a"])("updateConfiguration",(t={},Object(n["a"])(t,this.scopeKey,this.resource.id),Object(n["a"])(t,"name",e.name),Object(n["a"])(t,"value",this.editableValue),t)).then((function(){var t="".concat(a.$t("label.setting")," ").concat(e.name," ").concat(a.$t("label.update.to")," ").concat(a.editableValue);a.$message.success(t)})).catch((function(e){console.error(e),a.$message.error(a.$t("message.error.save.setting")),a.$notification.error({message:a.$t("label.error"),description:a.$t("message.error.try.save.setting")})})).finally((function(){a.tabLoading=!1,a.fetchData((function(){a.editableValueKey=null}))}))},setEditableSetting:function(e,t){this.editableValueKey=t,this.editableValue=e.value},handleSearch:function(e){this.filter=e,this.fetchData()}}},l=c,r=(a("cb19"),a("2877")),u=Object(r["a"])(l,i,s,!1,null,"844dc50a",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-3fe819a8.544c0df1.js.map