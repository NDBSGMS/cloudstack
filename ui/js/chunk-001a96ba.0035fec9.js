(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-001a96ba"],{5514:function(e,t,s){"use strict";var a=s("ec74"),o=s.n(a);o.a},"6d5e":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-spin",{attrs:{spinning:e.componentLoading}},[s("div",{staticClass:"new-route"},[s("a-input",{attrs:{icon:"plus",placeholder:e.$t("label.cidr.destination.network")},model:{value:e.newRoute,callback:function(t){e.newRoute=t},expression:"newRoute"}}),s("a-button",{attrs:{type:"primary",disabled:!("createStaticRoute"in e.$store.getters.apis)},on:{click:e.handleAdd}},[e._v(e._s(e.$t("label.add.route")))])],1),s("div",{staticClass:"list"},e._l(e.routes,(function(t,a){return s("div",{key:a,staticClass:"list__item"},[s("div",{staticClass:"list__col"},[s("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.cidr.destination.network")))]),s("div",[e._v(e._s(t.cidr))])]),s("div",{staticClass:"actions"},[s("a-button",{attrs:{shape:"circle",icon:"tag"},on:{click:function(){return e.openTagsModal(t)}}}),s("a-button",{attrs:{disabled:!("deleteStaticRoute"in e.$store.getters.apis),shape:"circle",icon:"delete",type:"danger"},on:{click:function(){return e.handleDelete(t)}}})],1)])})),0),s("a-modal",{attrs:{title:"Edit Tags",footer:null,maskClosable:!1},model:{value:e.tagsModalVisible,callback:function(t){e.tagsModalVisible=t},expression:"tagsModalVisible"}},[e.tagsLoading?s("a-spin"):s("div",[s("a-form",{staticClass:"add-tags",attrs:{form:e.newTagsForm},on:{submit:e.handleAddTag}},[s("div",{staticClass:"add-tags__input"},[s("p",{staticClass:"add-tags__label"},[e._v(e._s(e.$t("label.key")))]),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["key",{rules:[{required:!0,message:this.$t("message.specifiy.tag.key")}]}],expression:"['key', { rules: [{ required: true, message: this.$t('message.specifiy.tag.key')}] }]"}]})],1)],1),s("div",{staticClass:"add-tags__input"},[s("p",{staticClass:"add-tags__label"},[e._v(e._s(e.$t("label.value")))]),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["value",{rules:[{required:!0,message:this.$t("message.specifiy.tag.value")}]}],expression:"['value', { rules: [{ required: true, message: this.$t('message.specifiy.tag.value')}] }]"}]})],1)],1),s("a-button",{attrs:{type:"primary",disabled:!("createTags"in e.$store.getters.apis),"html-type":"submit"}},[e._v(e._s(e.$t("label.add")))])],1),s("a-divider",{staticStyle:{"margin-top":"0"}}),s("div",{staticClass:"tags-container"},e._l(e.tags,(function(t,a){return s("div",{key:a,staticClass:"tags"},[s("a-tag",{key:a,attrs:{closable:"deleteTags"in e.$store.getters.apis,afterClose:function(){return e.handleDeleteTag(t)}}},[e._v(" "+e._s(t.key)+" = "+e._s(t.value)+" ")])],1)})),0),s("a-button",{staticClass:"add-tags-done",attrs:{type:"primary"},on:{click:function(t){e.tagsModalVisible=!1}}},[e._v(e._s(e.$t("label.ok")))])],1)],1)],1)},o=[],i=(s("d3b7"),s("365c")),n={name:"StaticRoutesTab",props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{routes:[],componentLoading:!1,selectedRule:null,tagsModalVisible:!1,newTagsForm:this.$form.createForm(this),tags:[],tagsLoading:!1,newRoute:null}},mounted:function(){this.fetchData()},watch:{loading:function(e,t){!e&&this.resource.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.componentLoading=!0,Object(i["a"])("listStaticRoutes",{gatewayid:this.resource.id}).then((function(t){e.routes=t.liststaticroutesresponse.staticroute})).catch((function(t){e.$notifyError(t)})).finally((function(){e.componentLoading=!1}))},handleAdd:function(){var e=this;this.newRoute&&(this.componentLoading=!0,Object(i["a"])("createStaticRoute",{cidr:this.newRoute,gatewayid:this.resource.id}).then((function(t){e.$pollJob({jobId:t.createstaticrouteresponse.jobid,successMethod:function(){e.fetchData(),e.$store.dispatch("AddAsyncJob",{title:e.$t("message.success.add.static.route"),jobid:t.createstaticrouteresponse.jobid,status:"progress"}),e.componentLoading=!1,e.newRoute=null},errorMessage:e.$t("message.add.static.route.failed"),errorMethod:function(){e.fetchData(),e.componentLoading=!1},loadingMessage:e.$t("message.add.static.route.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.fetchData(),e.componentLoading=!1}})})).catch((function(t){e.$notifyError(t),e.fetchData(),e.componentLoading=!1})))},handleDelete:function(e){var t=this;this.componentLoading=!0,Object(i["a"])("deleteStaticRoute",{id:e.id}).then((function(e){t.$pollJob({jobId:e.deletestaticrouteresponse.jobid,successMethod:function(){t.fetchData(),t.$store.dispatch("AddAsyncJob",{title:t.$t("message.success.delete.static.route"),jobid:e.deletestaticrouteresponse.jobid,status:"progress"}),t.componentLoading=!1},errorMessage:t.$t("message.delete.static.route.failed"),errorMethod:function(){t.fetchData(),t.componentLoading=!1},loadingMessage:t.$t("message.delete.static.route.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.fetchData(),t.componentLoading=!1}})})).catch((function(e){t.$notifyError(e),t.fetchData(),t.componentLoading=!1}))},fetchTags:function(e){var t=this;Object(i["a"])("listTags",{resourceId:e.id,resourceType:"StaticRoute",listAll:!0}).then((function(e){t.tags=e.listtagsresponse.tag})).catch((function(e){t.$notifyError(e)}))},handleDeleteTag:function(e){var t=this;this.tagsLoading=!0,Object(i["a"])("deleteTags",{"tags[0].key":e.key,"tags[0].value":e.value,resourceIds:this.selectedRule.id,resourceType:"StaticRoute"}).then((function(e){t.$pollJob({jobId:e.deletetagsresponse.jobid,successMessage:t.$t("message.success.delete.tag"),successMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1},errorMessage:t.$t("message.delete.tag.failed"),errorMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1},loadingMessage:t.$t("message.delete.tag.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1}})})).catch((function(e){t.$notifyError(e),t.tagsLoading=!1}))},handleAddTag:function(e){var t=this;this.tagsLoading=!0,e.preventDefault(),this.newTagsForm.validateFields((function(e,s){e?t.tagsLoading=!1:Object(i["a"])("createTags",{"tags[0].key":s.key,"tags[0].value":s.value,resourceIds:t.selectedRule.id,resourceType:"StaticRoute"}).then((function(e){t.$pollJob({jobId:e.createtagsresponse.jobid,successMessage:t.$t("message.success.add.tag"),successMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1},errorMessage:t.$t("message.add.tag.failed"),errorMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1},loadingMessage:t.$t("message.add.tag.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.fetchTags(t.selectedRule),t.tagsLoading=!1}})})).catch((function(e){t.$notifyError(e),t.tagsLoading=!1}))}))},openTagsModal:function(e){this.selectedRule=e,this.newTagsForm.resetFields(),this.fetchTags(this.selectedRule),this.tagsModalVisible=!0}}},c=n,r=(s("5514"),s("2877")),d=Object(r["a"])(c,a,o,!1,null,"aad26b84",null);t["default"]=d.exports},ec74:function(e,t,s){}}]);
//# sourceMappingURL=chunk-001a96ba.0035fec9.js.map