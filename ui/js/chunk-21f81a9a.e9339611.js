(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21f81a9a"],{"15a9":function(e,t,i){},1844:function(e,t,i){},"2e96":function(e,t,i){"use strict";var n=i("582b"),s=i.n(n);s.a},3047:function(e,t,i){},"308b":function(e,t,i){"use strict";var n=i("3047"),s=i.n(n);s.a},"3a49":function(e,t,i){"use strict";var n=i("4ea2"),s=i.n(n);s.a},4338:function(e,t,i){},"4b90":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-table",{attrs:{columns:e.columns,dataSource:e.tableSource,pagination:!1,rowSelection:e.rowSelection,customRow:e.onClickRow,loading:e.loading,size:"middle",scroll:{y:225}}},[i("span",{attrs:{slot:"cpuTitle"},slot:"cpuTitle"},[i("a-icon",{attrs:{type:"appstore"}}),e._v(" "+e._s(e.$t("label.cpu")))],1),i("span",{attrs:{slot:"ramTitle"},slot:"ramTitle"},[i("a-icon",{attrs:{type:"bulb"}}),e._v(" "+e._s(e.$t("label.memory")))],1)]),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},s=[],o=(i("99af"),i("4de4"),i("d81d"),i("b0c0"),i("a9e3"),i("b6802"),{name:"ComputeOfferingSelection",props:{computeItems:{type:Array,default:function(){return[]}},rowCount:{type:Number,default:function(){return 0}},value:{type:String,default:""},loading:{type:Boolean,default:!1},preFillContent:{type:Object,default:function(){}},zoneId:{type:String,default:function(){return""}},minimumCpunumber:{type:Number,default:0},minimumCpuspeed:{type:Number,default:0},minimumMemory:{type:Number,default:0}},data:function(){return{filter:"",columns:[{dataIndex:"name",title:this.$t("label.serviceofferingid"),width:"40%"},{dataIndex:"cpu",slots:{title:"cpuTitle"},width:"30%"},{dataIndex:"ram",slots:{title:"ramTitle"},width:"30%"}],selectedRowKeys:[],oldZoneId:null,options:{page:1,pageSize:10,keyword:null}}},computed:{tableSource:function(){var e=this;return this.computeItems.map((function(t){var i=t.cpunumber,n=t.cpuspeed,s=t.memory,o=null!==t.cpunumber&&void 0!==t.cpunumber&&t.cpunumber>0?t.cpunumber+"":"",a=null!==t.cpuspeed&&void 0!==t.cpuspeed&&t.cpuspeed>0?parseFloat(t.cpuspeed/1e3).toFixed(2)+"":"",r=null!==t.memory&&void 0!==t.memory&&t.memory>0?t.memory+"":"";!0===t.iscustomized&&("serviceofferingdetails"in t&&"mincpunumber"in t.serviceofferingdetails&&"maxcpunumber"in t.serviceofferingdetails&&(i=t.serviceofferingdetails.maxcpunumber,o=t.serviceofferingdetails.mincpunumber+"-"+t.serviceofferingdetails.maxcpunumber),"serviceofferingdetails"in t&&"minmemory"in t.serviceofferingdetails&&"maxmemory"in t.serviceofferingdetails&&(s=t.serviceofferingdetails.maxmemory,r=t.serviceofferingdetails.minmemory+"-"+t.serviceofferingdetails.maxmemory));var l=!1;return e.minimumCpunumber>0&&(!1===t.iscustomized&&i!==e.minimumCpunumber||!0===t.iscustomized&&i<e.minimumCpunumber)&&(l=!0),!1===l&&e.minimumCpuspeed>0&&n&&n!==e.minimumCpuspeed&&(l=!0),!1===l&&s&&e.minimumMemory>0&&(!1===t.iscustomized&&s!==e.minimumMemory||!0===t.iscustomized&&s<e.minimumMemory)&&(l=!0),{key:t.id,name:t.name,cpu:o.length>0?"".concat(o," CPU x ").concat(a," Ghz"):"",ram:r.length>0?"".concat(r," MB"):"",disabled:l}}))},rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys||[],onChange:this.onSelectRow,getCheckboxProps:function(e){return{props:{disabled:e.disabled}}}}}},watch:{value:function(e,t){this.selectedRowKeys=e&&e!==t?[e]:[]},loading:function(){if(!this.loading){if(!this.preFillContent)return;if(this.preFillContent.computeofferingid)this.selectedRowKeys=[this.preFillContent.computeofferingid],this.$emit("select-compute-item",this.preFillContent.computeofferingid);else{if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.computeItems&&this.computeItems.length>0&&(this.selectedRowKeys=[this.computeItems[0].id],this.$emit("select-compute-item",this.computeItems[0].id))}}}},methods:{onSelectRow:function(e){this.selectedRowKeys=e,this.$emit("select-compute-item",e[0])},handleSearch:function(e){this.filter=e,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.$emit("handle-search-filter",this.options)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onClickRow:function(e){var t=this;return{on:{click:function(){t.selectedRowKeys=[e.key],t.$emit("select-compute-item",e.key)}}}}}}),a=o,r=(i("3a49"),i("2877")),l=Object(r["a"])(a,n,s,!1,null,"67b2d30e",null);t["a"]=l.exports},"4ea2":function(e,t,i){},"551d":function(e,t,i){"use strict";var n=i("8b7c"),s=i.n(n);s.a},"582b":function(e,t,i){},6445:function(e,t,i){"use strict";var n=i("fae4"),s=i.n(n);s.a},6820:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",[i("a-col",[i("a-row",[i("a-col",{attrs:{md:e.colContraned,lg:e.colContraned}},[i("a-form-item",{attrs:{label:e.$t("label.cpunumber"),"validate-status":e.errors.cpu.status,help:e.errors.cpu.message}},[i("a-row",{attrs:{gutter:12}},[i("a-col",{directives:[{name:"show",rawName:"v-show",value:e.isConstrained,expression:"isConstrained"}],attrs:{md:10,lg:10}},[i("a-slider",{attrs:{min:e.minCpu,max:e.maxCpu},on:{change:function(t){return e.updateComputeCpuNumber(t)}},model:{value:e.cpuNumberInputValue,callback:function(t){e.cpuNumberInputValue=t},expression:"cpuNumberInputValue"}})],1),i("a-col",{attrs:{md:4,lg:4}},[i("a-input-number",{on:{change:function(t){return e.updateComputeCpuNumber(t)}},model:{value:e.cpuNumberInputValue,callback:function(t){e.cpuNumberInputValue=t},expression:"cpuNumberInputValue"}})],1)],1)],1)],1),i("a-col",{directives:[{name:"show",rawName:"v-show",value:!e.isConstrained,expression:"!isConstrained"}],attrs:{md:8,lg:8}},[i("a-form-item",{attrs:{label:e.$t("label.cpuspeed"),"validate-status":e.errors.cpuspeed.status,help:e.errors.cpuspeed.message}},[i("a-input-number",{on:{change:function(t){return e.updateComputeCpuSpeed(t)}},model:{value:e.cpuSpeedInputValue,callback:function(t){e.cpuSpeedInputValue=t},expression:"cpuSpeedInputValue"}})],1)],1),i("a-col",{attrs:{md:e.colContraned,lg:e.colContraned}},[i("a-form-item",{attrs:{label:e.$t("label.memory.mb"),"validate-status":e.errors.memory.status,help:e.errors.memory.message}},[i("a-row",{attrs:{gutter:12}},[i("a-col",{directives:[{name:"show",rawName:"v-show",value:e.isConstrained,expression:"isConstrained"}],attrs:{md:10,lg:10}},[i("a-slider",{attrs:{min:e.minMemory,max:e.maxMemory},on:{change:function(t){return e.updateComputeMemory(t)}},model:{value:e.memoryInputValue,callback:function(t){e.memoryInputValue=t},expression:"memoryInputValue"}})],1),i("a-col",{attrs:{md:4,lg:4}},[i("a-input-number",{on:{change:function(t){return e.updateComputeMemory(t)}},model:{value:e.memoryInputValue,callback:function(t){e.memoryInputValue=t},expression:"memoryInputValue"}})],1)],1)],1)],1)],1)],1)],1)},s=[],o=(i("99af"),i("a9e3"),{name:"ComputeSelection",props:{computeOfferingId:{type:String,default:function(){return""}},isConstrained:{type:Boolean,default:!0},minCpu:{type:Number,default:0},maxCpu:{type:Number,default:2},minMemory:{type:Number,default:0},maxMemory:{type:Number,default:256},cpunumberInputDecorator:{type:String,default:""},cpuspeedInputDecorator:{type:String,default:""},memoryInputDecorator:{type:String,default:""},preFillContent:{type:Object,default:function(){}}},data:function(){return{cpuNumberInputValue:0,cpuSpeedInputValue:0,memoryInputValue:0,errors:{cpu:{status:"",message:""},cpuspeed:{status:"",message:""},memory:{status:"",message:""}}}},computed:{colContraned:function(){return this.isConstrained?12:8}},watch:{computeOfferingId:function(e,t){e!==t&&this.fillValue()}},mounted:function(){this.fillValue()},methods:{fillValue:function(){if(this.cpuNumberInputValue=this.minCpu,this.memoryInputValue=this.minMemory,!this.preFillContent)return this.updateComputeCpuNumber(this.cpuNumberInputValue),this.updateComputeCpuSpeed(this.cpuSpeedInputValue),void this.updateComputeMemory(this.memoryInputValue);this.preFillContent.cpunumber&&(this.cpuNumberInputValue=this.preFillContent.cpunumber),this.preFillContent.cpuspeed&&(this.cpuSpeedInputValue=this.preFillContent.cpuspeed),this.preFillContent.memory&&(this.memoryInputValue=this.preFillContent.memory),this.updateComputeCpuNumber(this.preFillContent.cpunumber||this.cpuNumberInputValue),this.updateComputeCpuSpeed(this.preFillContent.cpuspeed||this.cpuSpeedInputValue),this.updateComputeMemory(this.preFillContent.memory||this.memoryInputValue)},updateComputeCpuNumber:function(e){e||(this.cpuNumberInputValue=0),this.validateInput("cpu",e)&&this.$emit("update-compute-cpunumber",this.cpunumberInputDecorator,e)},updateComputeCpuSpeed:function(e){this.$emit("update-compute-cpuspeed",this.cpuspeedInputDecorator,e)},updateComputeMemory:function(e){e||(this.memoryInputValue=0),this.validateInput("memory",e)&&this.$emit("update-compute-memory",this.memoryInputDecorator,e)},validateInput:function(e,t){if(this.errors[e].status="",this.errors[e].message="",null===t||void 0===t||0===t.length)return this.errors[e].status="error",this.errors[e].message=this.$t("message.error.required.input"),!1;if(!this.isConstrained)return!0;var i,n;switch(e){case"cpu":i=this.minCpu,n=this.maxCpu;break;case"memory":i=this.minMemory,n=this.maxMemory;break}return!!this.checkValidRange(t,i,n)||(this.errors[e].status="error",this.errors[e].message="".concat(this.$t("message.please.enter.value")," ").concat(this.$t("label.from")," ").concat(i," ").concat(this.$t("label.to")," ").concat(n,")"),!1)},checkValidRange:function(e,t,i){return!(e<t||e>i)}}}),a=o,r=i("2877"),l=Object(r["a"])(a,n,s,!1,null,null,null);t["a"]=l.exports},"6a22":function(e,t,i){"use strict";var n=i("15a9"),s=i.n(n);s.a},"6cf3":function(e,t,i){"use strict";var n=i("6d12"),s=i.n(n);s.a},"6d12":function(e,t,i){},7837:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("a-row",{attrs:{gutter:12}},[n("a-col",{attrs:{md:24,lg:17}},[n("a-card",{attrs:{bordered:!0,title:this.$t("label.newinstance")}},[n("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.handleSubmit}},[n("a-steps",{attrs:{direction:"vertical",size:"small"}},[n("a-step",{attrs:{title:this.$t("label.select.deployment.infrastructure"),status:"process"}},[n("template",{slot:"description"},[n("div",{staticStyle:{"margin-top":"15px"}},[n("span",[t._v(t._s(t.$t("message.select.a.zone")))]),n("br"),n("a-form-item",{attrs:{label:this.$t("label.zoneid")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{rules:[{required:!0,message:""+this.$t("message.error.select")}]}],expression:"['zoneid', {\n                        rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\n                      }]"}],attrs:{showSearch:"",optionFilterProp:"children",filterOption:t.filterOption,options:t.zoneSelectOptions,loading:t.loading.zones},on:{change:t.onSelectZoneId}})],1),t.isNormalAndDomainUser?t._e():n("a-form-item",{attrs:{label:this.$t("label.podid")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["podid"],expression:"['podid']"}],attrs:{showSearch:"",optionFilterProp:"children",filterOption:t.filterOption,options:t.podSelectOptions,loading:t.loading.pods},on:{change:t.onSelectPodId}})],1),t.isNormalAndDomainUser?t._e():n("a-form-item",{attrs:{label:this.$t("label.clusterid")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["clusterid"],expression:"['clusterid']"}],attrs:{showSearch:"",optionFilterProp:"children",filterOption:t.filterOption,options:t.clusterSelectOptions,loading:t.loading.clusters},on:{change:t.onSelectClusterId}})],1),t.isNormalAndDomainUser?t._e():n("a-form-item",{attrs:{label:this.$t("label.hostid")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["hostid"],expression:"['hostid']"}],attrs:{showSearch:"",optionFilterProp:"children",filterOption:t.filterOption,options:t.hostSelectOptions,loading:t.loading.hosts}})],1)],1)])],2),n("a-step",{attrs:{title:this.$t("label.templateiso"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",{staticStyle:{"margin-top":"15px"}},[n("a-card",{attrs:{tabList:t.tabList,activeTabKey:t.tabKey},on:{tabChange:function(e){return t.onTabChange(e,"tabKey")}}},["templateid"===t.tabKey?n("p",[t._v(" "+t._s(t.$t("message.template.desc"))+" "),n("template-iso-selection",{attrs:{"input-decorator":"templateid",items:t.options.templates,selected:t.tabKey,loading:t.loading.templates,preFillContent:t.dataPreFill},on:{"handle-search-filter":function(e){return t.fetchAllTemplates(e)},"update-template-iso":t.updateFieldValue}}),n("span",[t._v(" "+t._s(t.$t("label.override.rootdisk.size"))+" "),n("a-switch",{staticStyle:{"margin-left":"10px"},on:{change:function(t){e.showRootDiskSizeChanger=t}}})],1),n("disk-size-selection",{directives:[{name:"show",rawName:"v-show",value:t.showRootDiskSizeChanger,expression:"showRootDiskSizeChanger"}],staticStyle:{"margin-top":"10px"},attrs:{"input-decorator":"rootdisksize",preFillContent:t.dataPreFill,minDiskSize:t.dataPreFill.minrootdisksize},on:{"update-disk-size":t.updateFieldValue}})],1):n("p",[t._v(" "+t._s(t.$t("message.iso.desc"))+" "),n("template-iso-selection",{attrs:{"input-decorator":"isoid",items:t.options.isos,selected:t.tabKey,loading:t.loading.isos,preFillContent:t.dataPreFill},on:{"handle-search-filter":function(e){return t.fetchAllIsos(e)},"update-template-iso":t.updateFieldValue}}),n("a-form-item",{attrs:{label:this.$t("label.hypervisor")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["hypervisor",{initialValue:t.hypervisorSelectOptions&&t.hypervisorSelectOptions.length>0?t.hypervisorSelectOptions[0].value:null,rules:[{required:!0,message:""+this.$t("message.error.select")}]}],expression:"['hypervisor', {\n                            initialValue: hypervisorSelectOptions && hypervisorSelectOptions.length > 0\n                              ? hypervisorSelectOptions[0].value\n                              : null,\n                            rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\n                          }]"}],attrs:{options:t.hypervisorSelectOptions},on:{change:function(t){return e.hypervisor=t}}})],1)],1)]),n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["templateid"],expression:"['templateid']"}]})],1),n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["isoid"],expression:"['isoid']"}]})],1),n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rootdisksize"],expression:"['rootdisksize']"}]})],1)],1):t._e()])],2),n("a-step",{attrs:{title:this.$t("label.serviceofferingid"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",[t.zoneSelected&&t.templateConfigurationExists?n("a-form-item",[n("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.configuration"))+" "),n("a-tooltip",{attrs:{title:t.$t("message.ovf.configurations")}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["templateConfiguration"],expression:"[\n                        'templateConfiguration'\n                      ]"}],attrs:{showSearch:"",optionFilterProp:"children",defaultActiveFirstOption:"",placeholder:t.$t("label.configuration"),filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},on:{change:t.onSelectTemplateConfigurationId}},t._l(t.templateConfigurations,(function(e){return n("a-select-option",{key:e.id},[t._v(" "+t._s(e.name||e.description)+" ")])})),1),t.selectedTemplateConfiguration&&t.selectedTemplateConfiguration.description?n("span",[t._v(t._s(t.selectedTemplateConfiguration.description))]):t._e()],1):t._e(),n("compute-offering-selection",{attrs:{"compute-items":t.options.serviceOfferings,"row-count":t.rowCount.serviceOfferings,zoneId:t.zoneId,value:t.serviceOffering?t.serviceOffering.id:"",loading:t.loading.serviceOfferings,preFillContent:t.dataPreFill,"minimum-cpunumber":t.templateConfigurationExists&&t.selectedTemplateConfiguration&&t.selectedTemplateConfiguration.cpunumber?t.selectedTemplateConfiguration.cpunumber:0,"minimum-cpuspeed":t.templateConfigurationExists&&t.selectedTemplateConfiguration&&t.selectedTemplateConfiguration.cpuspeed?t.selectedTemplateConfiguration.cpuspeed:0,"minimum-memory":t.templateConfigurationExists&&t.selectedTemplateConfiguration&&t.selectedTemplateConfiguration.memory?t.selectedTemplateConfiguration.memory:0},on:{"select-compute-item":function(e){return t.updateComputeOffering(e)},"handle-search-filter":function(e){return t.handleSearchFilter("serviceOfferings",e)}}}),t.serviceOffering&&t.serviceOffering.iscustomized?n("compute-selection",{attrs:{"cpunumber-input-decorator":"cpunumber","cpuspeed-input-decorator":"cpuspeed","memory-input-decorator":"memory",preFillContent:t.dataPreFill,computeOfferingId:t.instanceConfig.computeofferingid,isConstrained:"serviceofferingdetails"in t.serviceOffering,minCpu:"serviceofferingdetails"in t.serviceOffering?1*t.serviceOffering.serviceofferingdetails.mincpunumber:0,maxCpu:"serviceofferingdetails"in t.serviceOffering?1*t.serviceOffering.serviceofferingdetails.maxcpunumber:Number.MAX_SAFE_INTEGER,minMemory:"serviceofferingdetails"in t.serviceOffering?1*t.serviceOffering.serviceofferingdetails.minmemory:0,maxMemory:"serviceofferingdetails"in t.serviceOffering?1*t.serviceOffering.serviceofferingdetails.maxmemory:Number.MAX_SAFE_INTEGER},on:{"update-compute-cpunumber":t.updateFieldValue,"update-compute-cpuspeed":t.updateFieldValue,"update-compute-memory":t.updateFieldValue}}):t._e(),t.serviceOffering&&t.serviceOffering.iscustomized?n("span",[n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cpunumber"],expression:"['cpunumber']"}]})],1),!t.serviceOffering||t.serviceOffering.cpuspeed>0?t._e():n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cpuspeed"],expression:"['cpuspeed']"}]})],1),n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["memory"],expression:"['memory']"}]})],1)],1):t._e()],1):t._e()])],2),!t.template.deployasis&&t.template.childtemplates&&t.template.childtemplates.length>0?n("a-step",{attrs:{title:t.$t("label.data.disk"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",[n("multi-disk-selection",{attrs:{items:t.template.childtemplates,diskOfferings:t.options.diskOfferings,zoneId:t.zoneId},on:{"select-multi-disk-offering":function(e){return t.updateMultiDiskOffering(e)}}})],1):t._e()])],2):n("a-step",{attrs:{title:"templateid"==t.tabKey?t.$t("label.data.disk"):t.$t("label.disk.size"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",[n("disk-offering-selection",{attrs:{items:t.options.diskOfferings,"row-count":t.rowCount.diskOfferings,zoneId:t.zoneId,value:t.diskOffering?t.diskOffering.id:"",loading:t.loading.diskOfferings,preFillContent:t.dataPreFill,isIsoSelected:"isoid"===t.tabKey},on:{"select-disk-offering-item":function(e){return t.updateDiskOffering(e)},"handle-search-filter":function(e){return t.handleSearchFilter("diskOfferings",e)}}}),t.diskOffering&&t.diskOffering.iscustomized?n("disk-size-selection",{attrs:{"input-decorator":"size",preFillContent:t.dataPreFill},on:{"update-disk-size":t.updateFieldValue}}):t._e(),n("a-form-item",{staticClass:"form-item-hidden"},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["size"],expression:"['size']"}]})],1)],1):t._e()])],2),t.zone&&"Basic"!==t.zone.networktype?n("a-step",{attrs:{title:this.$t("label.networks"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",[t.vm.templateid&&t.templateNics&&t.templateNics.length>0?n("div",t._l(t.templateNics,(function(e,i){return n("a-form-item",{key:i,attrs:{"v-bind":e.name}},[n("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(e.elementName+" - "+e.name)+" "),n("a-tooltip",{attrs:{title:e.networkDescription}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkMap.nic-"+e.InstanceID.toString(),{initialValue:t.options.networks&&t.options.networks.length>0?t.options.networks[Math.min(i,t.options.networks.length-1)].id:null}],expression:"[\n                          'networkMap.nic-' + nic.InstanceID.toString(),\n                          { initialValue: options.networks && options.networks.length > 0 ? options.networks[Math.min(nicIndex, options.networks.length - 1)].id : null }\n                        ]"}],attrs:{showSearch:"",optionFilterProp:"children",placeholder:e.networkDescription,filterOption:function(e,t){return t.componentOptions.children[0].children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},t._l(t.options.networks,(function(e){return n("a-select-option",{key:e.id},["L2"!==e.type?n("span",[t._v(" "+t._s(e.name||e.description)+" ("+t._s(t.$t("label.cidr")+": "+e.cidr)+") ")]):n("span",[t._v(t._s(e.name||e.description))])])})),1)],1)})),1):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!(t.vm.templateid&&t.templateNics&&t.templateNics.length>0),expression:"!(vm.templateid && templateNics && templateNics.length > 0)"}]},[n("network-selection",{attrs:{items:t.options.networks,"row-count":t.rowCount.networks,value:t.networkOfferingIds,loading:t.loading.networks,zoneId:t.zoneId,preFillContent:t.dataPreFill},on:{"select-network-item":function(e){return t.updateNetworks(e)},"handle-search-filter":function(e){return t.handleSearchFilter("networks",e)}}}),t.networks.length>0?n("network-configuration",{attrs:{items:t.networks,preFillContent:t.dataPreFill},on:{"update-network-config":function(e){return t.updateNetworkConfig(e)},"select-default-network-item":function(e){return t.updateDefaultNetworks(e)}}}):t._e()],1)]):t._e()])],2):t._e(),t.showSecurityGroupSection?n("a-step",{attrs:{title:t.$t("label.security.groups"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[n("security-group-selection",{attrs:{zoneId:t.zoneId,value:t.securitygroupids,loading:t.loading.networks,preFillContent:t.dataPreFill},on:{"select-security-group-item":function(e){return t.updateSecurityGroups(e)}}})],1)],2):t._e(),n("a-step",{attrs:{title:this.$t("label.sshkeypairs"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[t.zoneSelected?n("div",[n("ssh-key-pair-selection",{attrs:{items:t.options.sshKeyPairs,"row-count":t.rowCount.sshKeyPairs,zoneId:t.zoneId,value:t.sshKeyPair?t.sshKeyPair.name:"",loading:t.loading.sshKeyPairs,preFillContent:t.dataPreFill},on:{"select-ssh-key-pair-item":function(e){return t.updateSshKeyPairs(e)},"handle-search-filter":function(e){return t.handleSearchFilter("sshKeyPairs",e)}}})],1):t._e()])],2),t.vm.templateid&&t.templateProperties&&Object.keys(t.templateProperties).length>0?n("a-step",{attrs:{title:t.$t("label.ovf.properties"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},t._l(t.templateProperties,(function(e,i){return n("div",{key:i},[n("a-alert",{attrs:{message:"Category: "+i+" ("+e.length+" properties)",type:"info"}}),n("div",{staticStyle:{"margin-left":"15px","margin-top":"10px"}},t._l(e,(function(e,i){return n("a-form-item",{key:i,attrs:{"v-bind":e.key}},[n("span",{staticStyle:{"text-transform":"capitalize"},attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(e.label)+" "),n("a-tooltip",{attrs:{title:e.description}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),e.type&&"boolean"===e.type?n("span",[n("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["properties."+t.escapePropertyKey(e.key),{initialValue:"TRUE"===e.value}],expression:"['properties.' + escapePropertyKey(property.key), { initialValue: property.value==='TRUE'?true:false}]"}],attrs:{defaultChecked:"TRUE"===e.value,placeholder:e.description}})],1):!e.type||"int"!==e.type&&"real"!==e.type?e.type&&"string"===e.type&&e.qualifiers&&e.qualifiers.startsWith("ValueMap")?n("span",[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["properties."+t.escapePropertyKey(e.key),{initialValue:e.value&&e.value.length>0?e.value:t.getPropertyQualifiers(e.qualifiers,"select")[0]}],expression:"['properties.' + escapePropertyKey(property.key), { initialValue: property.value && property.value.length>0 ? property.value: getPropertyQualifiers(property.qualifiers, 'select')[0] }]"}],attrs:{showSearch:"",optionFilterProp:"children",placeholder:e.description,filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},t._l(t.getPropertyQualifiers(e.qualifiers,"select"),(function(e){return n("a-select-option",{key:e},[t._v(" "+t._s(e)+" ")])})),1)],1):e.type&&"string"===e.type&&e.password?n("span",[n("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["properties."+t.escapePropertyKey(e.key),{rules:[{initialValue:e.value},{validator:function(i,n,s){e.qualifiers||s();var o=t.getPropertyQualifiers(e.qualifiers,"number-select").min,a=t.getPropertyQualifiers(e.qualifiers,"number-select").max,r="",l=function(){return!1};o&&(r=t.$t("message.validate.minlength").replace("{0}",o),l=function(){return!n||n.length<o}),a!==Number.MAX_SAFE_INTEGER&&(o?(r=t.$t("message.validate.range.length").replace("{0}",o).replace("{1}",a),l=function(){return!n||a<n.length||n.length<o}):(r=t.$t("message.validate.maxlength").replace("{0}",a),l=function(){return!n||n.length>a})),l()&&s(r),s()}}]}],expression:"['properties.' + escapePropertyKey(property.key), {\n                            rules: [\n                              {\n                                initialValue: property.value\n                              },\n                              {\n                                validator: (rule, value, callback) => {\n                                  if (!property.qualifiers) {\n                                    callback()\n                                  }\n                                  var minlength = getPropertyQualifiers(property.qualifiers, 'number-select').min\n                                  var maxlength = getPropertyQualifiers(property.qualifiers, 'number-select').max\n                                  var errorMessage = ''\n                                  var isPasswordInvalidLength = function () {\n                                    return false\n                                  }\n                                  if (minlength) {\n                                    errorMessage = $t('message.validate.minlength').replace('{0}', minlength)\n                                    isPasswordInvalidLength = function () {\n                                      return !value || value.length < minlength\n                                    }\n                                  }\n                                  if (maxlength !== Number.MAX_SAFE_INTEGER) {\n                                    if (minlength) {\n                                      errorMessage = $t('message.validate.range.length').replace('{0}', minlength).replace('{1}', maxlength)\n                                      isPasswordInvalidLength = function () {\n                                        return !value || (maxlength < value.length || value.length < minlength)\n                                      }\n                                    } else {\n                                      errorMessage = $t('message.validate.maxlength').replace('{0}', maxlength)\n                                      isPasswordInvalidLength = function () {\n                                        return !value || value.length > maxlength\n                                      }\n                                    }\n                                  }\n                                  if (isPasswordInvalidLength()) {\n                                    callback(errorMessage)\n                                  }\n                                  callback()\n                                }\n                              }\n                            ]\n                          }]"}],attrs:{placeholder:e.description}})],1):n("span",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["properties."+t.escapePropertyKey(e.key),{initialValue:e.value}],expression:"['properties.' + escapePropertyKey(property.key), { initialValue: property.value }]"}],attrs:{placeholder:e.description}})],1):n("span",[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["properties."+t.escapePropertyKey(e.key)],expression:"['properties.'+ escapePropertyKey(property.key) ]"}],attrs:{defaultValue:e.value,placeholder:e.description,min:t.getPropertyQualifiers(e.qualifiers,"number-select").min,max:t.getPropertyQualifiers(e.qualifiers,"number-select").max}})],1)])})),1)],1)})),0)],2):t._e(),n("a-step",{attrs:{title:t.$t("label.advanced.mode"),status:t.zoneSelected?"process":"wait"}},[t.zoneSelected?n("template",{slot:"description"},[n("span",[t._v(" "+t._s(t.$t("label.isadvanced"))+" "),n("a-switch",{staticStyle:{"margin-left":"10px"},attrs:{checked:this.showDetails},on:{change:function(t){e.showDetails=t}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:this.showDetails,expression:"this.showDetails"}],staticStyle:{"margin-top":"15px"}},[t.vm.templateid&&["KVM","VMware"].includes(t.hypervisor)&&!t.template.deployasis?n("div",[n("a-form-item",{attrs:{label:t.$t("label.boottype")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["boottype"],expression:"['boottype']"}],on:{change:t.fetchBootModes}},t._l(t.options.bootTypes,(function(e){return n("a-select-option",{key:e.id},[t._v(" "+t._s(e.description)+" ")])})),1)],1),n("a-form-item",{attrs:{label:t.$t("label.bootmode")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["bootmode"],expression:"['bootmode']"}]},t._l(t.options.bootModes,(function(e){return n("a-select-option",{key:e.id},[t._v(" "+t._s(e.description)+" ")])})),1)],1)],1):t._e(),t.zoneSelected&&("isoid"===t.tabKey&&"VMware"===t.hypervisor||"templateid"===t.tabKey&&t.template&&"VMware"===t.template.hypervisor)?n("a-form-item",{attrs:{label:this.$t("label.bootintosetup")}},[n("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["bootintosetup"],expression:"['bootintosetup']"}]})],1):t._e(),n("a-form-item",{attrs:{label:t.$t("label.userdata")}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["userdata"],expression:"['userdata']"}]})],1),n("a-form-item",{attrs:{label:this.$t("label.affinity.groups")}},[n("affinity-group-selection",{attrs:{items:t.options.affinityGroups,"row-count":t.rowCount.affinityGroups,zoneId:t.zoneId,value:t.affinityGroupIds,loading:t.loading.affinityGroups,preFillContent:t.dataPreFill},on:{"select-affinity-group-item":function(e){return t.updateAffinityGroups(e)},"handle-search-filter":function(e){return t.handleSearchFilter("affinityGroups",e)}}})],1)],1)]):t._e()],2),n("a-step",{attrs:{title:this.$t("label.details"),status:t.zoneSelected?"process":"wait"}},[t.zoneSelected?n("template",{slot:"description"},[n("div",{staticStyle:{"margin-top":"15px"}},[t._v(" "+t._s(t.$t("message.vm.review.launch"))+" "),n("a-form-item",{attrs:{label:t.$t("label.name.optional")}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}]})],1),n("a-form-item",{attrs:{label:t.$t("label.group.optional")}},[n("a-auto-complete",{directives:[{name:"decorator",rawName:"v-decorator",value:["group"],expression:"['group']"}],attrs:{filterOption:t.filterOption,dataSource:t.options.instanceGroups}})],1),n("a-form-item",{attrs:{label:t.$t("label.keyboard")}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["keyboard"],expression:"['keyboard']"}],attrs:{options:t.keyboardSelectOptions}})],1)],1)]):t._e()],2),t.vm.templateid&&t.templateLicenses&&t.templateLicenses.length>0?n("a-step",{attrs:{title:t.$t("label.license.agreements"),status:t.zoneSelected?"process":"wait"}},[n("template",{slot:"description"},[n("div",{staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("message.read.accept.license.agreements"))+" "),n("a-form-item",[t._l(t.templateLicenses,(function(e,i){return n("div",{key:i,staticStyle:{"margin-top":"10px"},attrs:{"v-bind":e.id}},[n("span",{staticStyle:{"text-transform":"capitalize"},attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s("Agreement "+(i+1)+": "+e.name)+" ")]),n("a-textarea",{attrs:{value:e.text,"auto-size":{minRows:3,maxRows:8},readOnly:""}})],1)})),n("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["licensesaccepted",{rules:[{validator:function(e,i,n){i||n(t.$t("message.license.agreements.not.accepted")),n()}}]}],expression:"['licensesaccepted', {\n                        rules: [\n                          {\n                            validator: (rule, value, callback) => {\n                              if (!value) {\n                                callback($t('message.license.agreements.not.accepted'))\n                              }\n                              callback()\n                            }\n                          }\n                        ]\n                      }]"}],staticStyle:{"margin-top":"10px"}},[t._v(" "+t._s(t.$t("label.i.accept.all.license.agreements"))+" ")])],2)],1)])],2):t._e()],1),n("div",{staticClass:"card-footer"},[n("a-button",{attrs:{disabled:t.loading.deploy},on:{click:function(){return e.$router.back()}}},[t._v(" "+t._s(this.$t("label.cancel"))+" ")]),n("a-button",{attrs:{type:"primary",loading:t.loading.deploy},on:{click:t.handleSubmit}},[n("a-icon",{attrs:{type:"rocket"}}),t._v(" "+t._s(this.$t("label.launch.vm"))+" ")],1)],1)],1)],1)],1),t.isMobile()?t._e():n("a-col",{attrs:{md:24,lg:7}},[n("a-affix",{attrs:{offsetTop:75}},[n("info-card",{staticClass:"vm-info-card",attrs:{resource:t.vm,title:t.vm.name?this.$t("label.yourinstance")+" : "+t.vm.name:this.$t("label.yourinstance")}})],1)],1)],1)],1)},s=[],o=(i("a4d3"),i("e01a"),i("d28b"),i("99af"),i("4de4"),i("7db0"),i("4160"),i("caad"),i("c975"),i("a15b"),i("d81d"),i("fb6a"),i("b0c0"),i("a9e3"),i("aff5"),i("4fad"),i("b64b"),i("d3b7"),i("ac1f"),i("2532"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("2ca0"),i("159b"),i("ddb0"),i("0122")),a=i("d0af"),r=i("fc11"),l=(i("96cf"),i("c964")),c=i("f3f3"),u=i("2b0e"),d=i("365c"),p=i("2ef0"),f=i.n(p),m=i("ac0d"),h=i("4360"),g=i("dd65"),y=i("df70"),v=i("4b90"),b=i("6820"),w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.tableSource,pagination:!1,rowSelection:e.rowSelection,customRow:e.onClickRow,size:"middle",scroll:{y:225}},scopedSlots:e._u([{key:"diskSize",fn:function(t,n){return[n.isCustomized?i("div",[e._v(e._s(e.$t("label.iscustomized")))]):n.diskSize?i("div",[e._v(e._s(n.diskSize)+" GB")]):i("div",[e._v("-")])]}},{key:"iops",fn:function(t,n){return[n.miniops&&n.maxiops?i("span",[e._v(e._s(n.miniops)+" - "+e._s(n.maxiops))]):n.miniops&&!n.maxiops?i("span",[e._v(e._s(n.miniops))]):!n.miniops&&n.maxiops?i("span",[e._v(e._s(n.maxiops))]):i("span",[e._v("-")])]}}])},[i("span",{attrs:{slot:"diskSizeTitle"},slot:"diskSizeTitle"},[i("a-icon",{attrs:{type:"hdd"}}),e._v(" "+e._s(e.$t("label.disksize")))],1),i("span",{attrs:{slot:"iopsTitle"},slot:"iopsTitle"},[i("a-icon",{attrs:{type:"rocket"}}),e._v(" "+e._s(e.$t("label.minmaxiops")))],1)]),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},k=[],S={name:"DiskOfferingSelection",props:{items:{type:Array,default:function(){return[]}},rowCount:{type:Number,default:function(){return 0}},value:{type:String,default:""},loading:{type:Boolean,default:!1},preFillContent:{type:Object,default:function(){}},zoneId:{type:String,default:function(){return""}},isIsoSelected:{type:Boolean,default:!1}},data:function(){return{filter:"",columns:[{dataIndex:"name",title:this.$t("label.diskoffering"),width:"40%"},{dataIndex:"disksize",slots:{title:"diskSizeTitle"},width:"30%",scopedSlots:{customRender:"diskSize"}},{dataIndex:"iops",slots:{title:"iopsTitle"},width:"30%",scopedSlots:{customRender:"iops"}}],selectedRowKeys:["0"],dataItems:[],oldZoneId:null,options:{page:1,pageSize:10,keyword:null}}},created:function(){this.initDataItem(),this.items&&(this.dataItems=this.dataItems.concat(this.items))},computed:{tableSource:function(){return this.dataItems.map((function(e){return{key:e.id,name:e.name,diskSize:e.disksize,miniops:e.miniops,maxiops:e.maxiops,isCustomized:e.iscustomized}}))},rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectRow}}},watch:{value:function(e,t){e&&e!==t&&(this.selectedRowKeys=[e])},items:function(e,t){this.initDataItem(),this.dataItems=this.dataItems.concat(e)},loading:function(){if(!this.loading)if(this.preFillContent.diskofferingid)this.selectedRowKeys=[this.preFillContent.diskofferingid],this.$emit("select-disk-offering-item",this.preFillContent.diskofferingid);else{if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.selectedRowKeys=["0"],this.$emit("select-disk-offering-item","0")}},isIsoSelected:function(){this.isIsoSelected?this.dataItems=this.dataItems.filter((function(e){return"0"!==e.id})):this.dataItems.unshift({id:"0",name:this.$t("label.noselect"),diskSize:void 0,miniops:void 0,maxiops:void 0,isCustomized:void 0})}},methods:{initDataItem:function(){this.dataItems=[],1!==this.options.page||this.isIsoSelected||this.dataItems.push({id:"0",name:this.$t("label.noselect"),diskSize:void 0,miniops:void 0,maxiops:void 0,isCustomized:void 0})},onSelectRow:function(e){this.selectedRowKeys=e,this.$emit("select-disk-offering-item",e[0])},handleSearch:function(e){this.filter=e,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.$emit("handle-search-filter",this.options)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onClickRow:function(e){var t=this;return{on:{click:function(){t.selectedRowKeys=[e.key],t.$emit("select-disk-offering-item",e.key)}}}}}},C=S,z=(i("fb70"),i("2877")),I=Object(z["a"])(C,w,k,!1,null,"37b0f194",null),$=I.exports,x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-form-item",{staticClass:"form-item",attrs:{label:"rootdisksize"===e.inputDecorator?e.$t("label.root.disk.size"):e.$t("label.disksize")}},[i("a-row",{attrs:{gutter:12}},[i("a-col",{attrs:{md:4,lg:4}},[i("span",{staticStyle:{display:"inline-flex"}},[i("a-input-number",{on:{change:function(t){return e.updateDiskSize(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),i("span",{staticStyle:{"padding-top":"6px","margin-left":"5px"}},[e._v("GB")])],1)])],1),e.error?i("p",{staticStyle:{color:"red"}},[e._v(" "+e._s(e.$t(e.error))+" ")]):e._e()],1)},O=[],_={name:"DiskSizeSelection",props:{inputDecorator:{type:String,default:""},preFillContent:{type:Object,default:function(){}},minDiskSize:{type:Number,default:0}},watch:{minDiskSize:function(e){e&&e>0&&(this.inputValue=e,this.updateDiskSize(e))}},data:function(){return{inputValue:0,error:!1}},mounted:function(){this.fillValue()},methods:{fillValue:function(){this.inputValue=this.minDiskSize,"rootdisksize"===this.inputDecorator?this.inputValue=this.preFillContent.rootdisksize?this.preFillContent.rootdisksize:this.minDiskSize:"size"===this.inputDecorator&&(this.inputValue=this.preFillContent.size?this.preFillContent.size:this.minDiskSize),this.$emit("update-disk-size",this.inputDecorator,this.inputValue)},updateDiskSize:function(e){if(e<this.minDiskSize)return this.inputValue=this.minDiskSize,void(this.error="".concat(this.$t("message.error.limit.value")," ")+this.minDiskSize+" GB");this.error=!1,this.$emit("update-disk-size",this.inputDecorator,e)}}},F=_,T=(i("308b"),Object(z["a"])(F,x,O,!1,null,"1e0e3f8a",null)),N=T.exports,P=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.tableSource,rowKey:function(e){return e.id},pagination:!1,rowSelection:e.rowSelection,scroll:{y:225}},scopedSlots:e._u([{key:"offering",fn:function(t,n){return i("span",{},[e.validOfferings[n.id]&&e.validOfferings[n.id].length>0?i("a-select",{attrs:{defaultValue:e.validOfferings[n.id][0].id},on:{change:function(t){return e.updateOffering(t,n.id)}}},e._l(e.validOfferings[n.id],(function(t){return i("a-select-option",{key:t.id},[e._v(" "+e._s(t.displaytext)+" ")])})),1):i("span",[e._v(" "+e._s(e.$t("label.no.matching.offering"))+" ")])],1)}}])})],1)},R=[],V={name:"MultiDiskSelection",props:{items:{type:Array,default:function(){return[]}},zoneId:{type:String,default:function(){return""}}},data:function(){return{columns:[{dataIndex:"name",title:this.$t("label.data.disk")},{dataIndex:"offering",title:this.$t("label.data.disk.offering"),scopedSlots:{customRender:"offering"}}],loading:!1,selectedRowKeys:[],diskOfferings:[],validOfferings:{},values:{}}},computed:{tableSource:function(){var e=this;return this.items.map((function(t){return{id:t.id,name:"".concat(t.name," (").concat(t.size," GB)"),disabled:e.validOfferings[t.id]&&0===e.validOfferings[t.id].length}}))},rowSelection:function(){var e=this;return{type:"checkbox",selectedRowKeys:this.selectedRowKeys,getCheckboxProps:function(e){return{props:{disabled:e.disabled}}},onChange:function(t){e.selectedRowKeys=t,e.sendValues()}}}},watch:{items:function(e,t){this.items=e,this.selectedRowKeys=[],this.fetchDiskOfferings()},zoneId:function(e){this.zoneId=e,this.fetchDiskOfferings()}},created:function(){this.fetchDiskOfferings()},methods:{fetchDiskOfferings:function(){var e=this;this.diskOfferings=[],this.loading=!0,Object(d["a"])("listDiskOfferings",{zoneid:this.zoneId,listall:!0}).then((function(t){e.diskOfferings=t.listdiskofferingsresponse.diskoffering||[],e.diskOfferings=e.diskOfferings.filter((function(e){return!e.iscustomized})),e.orderDiskOfferings()})).finally((function(){e.loading=!1}))},orderDiskOfferings:function(){var e=this;this.loading=!0,this.validOfferings={};var t=!0,i=!1,n=void 0;try{for(var s,o=function(){var t=s.value;e.validOfferings[t.id]=e.diskOfferings.filter((function(e){return e.disksize>=t.size}))},a=this.items[Symbol.iterator]();!(t=(s=a.next()).done);t=!0)o()}catch(r){i=!0,n=r}finally{try{t||null==a.return||a.return()}finally{if(i)throw n}}this.setDefaultValues(),this.loading=!1},setDefaultValues:function(){this.values={};var e=!0,t=!1,i=void 0;try{for(var n,s=this.items[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var o=n.value;this.values[o.id]=this.validOfferings[o.id].length>0?this.validOfferings[o.id][0].id:""}}catch(a){t=!0,i=a}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}},updateOffering:function(e,t){this.values[t]=e,this.sendValues()},sendValues:function(){var e=this,t={};this.selectedRowKeys.map((function(i){t[i]=e.values[i]})),this.$emit("select-multi-disk-offering",t)}}},D=V,K=(i("551d"),Object(z["a"])(D,P,R,!1,null,"57410996",null)),j=K.exports,A=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-input-search",{staticClass:"search-input",attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch}}),i("a-spin",{attrs:{spinning:e.loading}},[i("a-tabs",{attrs:{animated:!1,defaultActiveKey:e.filterOpts[0].id,tabPosition:"top"},on:{change:e.changeFilterType},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}},e._l(e.filterOpts,(function(t){return i("a-tab-pane",{key:t.id,attrs:{tab:e.$t(t.name)}},[e.filterType===t.id?i("TemplateIsoRadioGroup",{attrs:{osList:e.items[t.id][e.inputDecorator.slice(0,-2)]||[],itemCount:e.items[t.id].count||0,"input-decorator":e.inputDecorator,selected:e.checkedValue,preFillContent:e.preFillContent},on:{"emit-update-template-iso":e.updateTemplateIso,"handle-search-filter":function(t){return e.eventPagination(t)}}}):e._e()],1)})),1)],1)],1)},M=[],E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-form-item",[i("a-list",{staticClass:"form-item-scroll",attrs:{itemLayout:"vertical",size:"small",dataSource:e.osList,pagination:!1},scopedSlots:e._u([{key:"renderItem",fn:function(t,n){return i("a-list-item",{key:"os.id",on:{click:function(i){return e.onClickRow(t)}}},[i("a-radio-group",{key:n,staticClass:"radio-group",on:{change:function(t){return e.updateSelectionTemplateIso(t.target.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[i("a-radio",{staticClass:"radio-group__radio",attrs:{value:t.id}},[e._v(" "+e._s(t.displaytext)+" "),i("os-logo",{staticClass:"radio-group__os-logo",attrs:{osId:t.ostypeid,"os-name":t.osName}})],1)],1)],1)}}])}),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.itemCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},L=[],G=i("0ed1"),B={name:"TemplateIsoRadioGroup",components:{OsLogo:G["a"]},props:{osList:{type:Array,default:function(){return[]}},inputDecorator:{type:String,default:""},selected:{type:String,default:""},itemCount:{type:Number,default:0},preFillContent:{type:Object,default:function(){}}},data:function(){return{value:"",options:{page:1,pageSize:10}}},mounted:function(){this.onSelectTemplateIso()},watch:{selected:function(e,t){e!==t&&this.onSelectTemplateIso()}},methods:{onSelectTemplateIso:function(){"templateid"===this.inputDecorator?this.value=this.preFillContent.templateid?this.preFillContent.templateid:this.selected:this.value=this.preFillContent.isoid?this.preFillContent.isoid:this.selected,this.$emit("emit-update-template-iso",this.inputDecorator,this.value)},updateSelectionTemplateIso:function(e){this.$emit("emit-update-template-iso",this.inputDecorator,e)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onClickRow:function(e){this.value=e.id,this.$emit("emit-update-template-iso",this.inputDecorator,this.value)}}},q=B,U=(i("6cf3"),Object(z["a"])(q,E,L,!1,null,"574197d4",null)),Z=U.exports,Q={name:"TemplateIsoSelection",components:{TemplateIsoRadioGroup:Z},props:{items:{type:Object,default:function(){}},inputDecorator:{type:String,default:""},selected:{type:String,default:""},loading:{type:Boolean,default:!1},preFillContent:{type:Object,default:function(){}}},data:function(){return{filter:"",checkedValue:"",filterOpts:[{id:"featured",name:"label.featured"},{id:"community",name:"label.community"},{id:"selfexecutable",name:"label.my.templates"},{id:"sharedexecutable",name:"label.sharedexecutable"}],filterType:"featured",pagination:!1}},watch:{items:function(e){var t=this.inputDecorator.slice(0,-2),i=!0,n=!1,s=void 0;try{for(var o,a=this.filterOpts[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value;if(e[r.id]&&e[r.id][t]&&e[r.id][t].length>0){this.pagination||(this.filterType=r.id,this.checkedValue=e[r.id][t][0].id);break}}}catch(l){n=!0,s=l}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}},inputDecorator:function(e,t){e!==t&&(this.filter="")}},beforeCreate:function(){this.form=this.$form.createForm(this)},methods:{updateTemplateIso:function(e,t){this.checkedValue=t,this.$emit("update-template-iso",e,t)},handleSearch:function(e){if(this.filter||e){this.pagination=!1,this.filter=e;var t={page:1,pageSize:10,keyword:this.filter};this.emitSearchFilter(t)}},eventPagination:function(e){this.pagination=!0,this.emitSearchFilter(e)},emitSearchFilter:function(e){e.category=this.filterType,this.$emit("handle-search-filter",e)},changeFilterType:function(e){this.filterType=e}}},J=Q,W=(i("8ba0"),Object(z["a"])(J,A,M,!1,null,"5e791e04",null)),X=W.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._v(" "+e._s(e.$t("message.select.affinity.groups"))+" "),i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id},pagination:!1,rowSelection:e.rowSelection,size:"middle",scroll:{y:225}}}),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},H=[],ee={name:"AffinityGroupSelection",props:{items:{type:Array,default:function(){return[]}},rowCount:{type:Number,default:function(){return 0}},value:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},preFillContent:{type:Object,default:function(){}},zoneId:{type:String,default:function(){return""}}},data:function(){return{filter:"",columns:[{dataIndex:"name",title:this.$t("label.affinity.groups"),width:"40%"},{dataIndex:"description",title:this.$t("label.description"),width:"60%"}],selectedRowKeys:[],oldZoneId:null,options:{page:1,pageSize:10,keyword:null}}},computed:{rowSelection:function(){var e=this;return{type:"checkbox",selectedRowKeys:this.selectedRowKeys,onChange:function(t){e.$emit("select-affinity-group-item",t)}}}},watch:{value:function(e,t){e&&!f.a.isEqual(e,t)&&(this.selectedRowKeys=e)},loading:function(){if(!this.loading)if(this.preFillContent.affinitygroupids)this.selectedRowKeys=this.preFillContent.affinitygroupids,this.$emit("select-affinity-group-item",this.preFillContent.affinitygroupids);else{if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.selectedRowKeys=[],this.$emit("select-affinity-group-item",null)}}},methods:{handleSearch:function(e){this.filter=e,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.$emit("handle-search-filter",this.options)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)}}},te=ee,ie=(i("9bd3"),Object(z["a"])(te,Y,H,!1,null,"ded54e6c",null)),ne=ie.exports,se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-button",{staticStyle:{float:"right","margin-right":"5px","z-index":"8"},attrs:{type:"primary"},on:{click:function(t){e.showCreateForm=!0}}},[e._v(" "+e._s(e.$t("label.create.network"))+" ")]),i("a-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.networkItems,rowKey:function(e){return e.id},pagination:!1,rowSelection:e.rowSelection,scroll:{y:225}},scopedSlots:e._u([{key:"expandedRowRender",fn:function(t){return i("a-list",{key:t.id,attrs:{dataSource:e.getDetails(t),size:"small"},scopedSlots:e._u([{key:"renderItem",fn:function(t){return i("a-list-item",{key:t.id},[i("a-list-item-meta",{attrs:{description:t.description},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(t.title))]},proxy:!0}],null,!0)})],1)}}])})}}])}),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1),i("a-modal",{attrs:{visible:e.showCreateForm,title:e.$t("label.add.network"),closable:!0,maskClosable:!1,footer:null,cancelText:e.$t("label.cancel"),centered:"",width:"auto"},on:{cancel:function(t){e.showCreateForm=!1}}},[i("create-network",{attrs:{resource:{zoneid:e.zoneId}},on:{"refresh-data":e.handleSearch,"close-action":function(t){e.showCreateForm=!1}}})],1)],1)},oe=[],ae=i("75c5"),re={name:"NetworkSelection",components:{CreateNetwork:ae["default"]},props:{items:{type:Array,default:function(){return[]}},rowCount:{type:Number,default:function(){return 0}},value:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},zoneId:{type:String,default:function(){return""}},preFillContent:{type:Object,default:function(){}}},data:function(){return{filter:"",selectedRowKeys:[],vpcs:[],filteredInfo:null,networkOffering:{loading:!1,opts:[]},showCreateForm:!1,oldZoneId:null,options:{page:1,pageSize:10,keyword:null}}},computed:{columns:function(){var e=[];return this.vpcs&&(e=this.vpcs.map((function(e){return{text:e.displaytext,value:e.id}}))),[{dataIndex:"name",title:this.$t("label.networks"),width:"40%"},{dataIndex:"type",title:this.$t("label.guestiptype"),width:"30%"},{dataIndex:"vpcName",title:this.$t("label.vpc"),width:"30%",filters:e,filteredValue:f.a.get(this.filteredInfo,"id"),onFilter:function(e,t){return t.vpcid===e}}]},rowSelection:function(){var e=this;return{type:"checkbox",selectedRowKeys:this.selectedRowKeys,onChange:function(t){e.$emit("select-network-item",t)}}},networkItems:function(){var e=this;return this.items.map((function(t){var i=f.a.find(e.vpcs,{id:t.vpcid});return Object(c["a"])(Object(c["a"])({},t),{vpcName:f.a.get(i,"displaytext")})}))}},watch:{value:function(e,t){e&&!f.a.isEqual(e,t)&&(this.selectedRowKeys=e)},loading:function(){if(!this.loading)if(this.preFillContent.networkids)this.selectedRowKeys=this.preFillContent.networkids,this.$emit("select-network-item",this.preFillContent.networkids);else if(this.items&&this.items.length>0){if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.selectedRowKeys=[this.items[0].id],this.$emit("select-network-item",this.selectedRowKeys)}else this.selectedRowKeys=[],this.$emit("select-network-item",[])}},beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){var e=this;Object(d["a"])("listVPCs",{projectid:h["a"].getters.project.id}).then((function(t){e.vpcs=f.a.get(t,"listvpcsresponse.vpc")}))},inject:["vmFetchNetworks"],methods:{getDetails:function(e){var t=[{title:this.$t("label.description"),description:e.displaytext},{title:this.$t("label.networkofferingid"),description:e.networkofferingdisplaytext}];return"L2"!==e.type&&t.push({title:this.$t("label.cidr"),description:e.cidr}),t},handleSearch:function(e){this.filter=e,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.$emit("handle-search-filter",this.options)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},listNetworkOfferings:function(){var e=this;return new Promise((function(t,i){var n={forvpc:!1};n.zoneid=e.zoneId,n.guestiptype="Isolated",n.supportedServices="SourceNat",n.specifyvlan=!1,n.state="Enabled",Object(d["a"])("listNetworkOfferings",n).then((function(e){var i=e.listnetworkofferingsresponse.networkoffering||[];t(i)})).catch((function(e){t(e)}))}))}}},le=re,ce=(i("6a22"),Object(z["a"])(le,se,oe,!1,null,"48e0f6f8",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-table",{attrs:{columns:e.columns,dataSource:e.dataItems,pagination:!1,rowSelection:e.rowSelection,customRow:e.onClickRow,rowKey:function(e){return e.id},size:"middle",scroll:{y:225}},scopedSlots:e._u([{key:"name",fn:function(t,n){return[i("div",[e._v(e._s(t))]),"L2"!==n.type?i("small",[e._v(e._s(e.$t("label.cidr")+": "+n.cidr))]):e._e()]}},{key:"ipAddress",fn:function(t,n){return["L2"!==n.type?i("a-form-item",[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipAddress"+n.id,{rules:[{validator:e.validatorIpAddress,cidr:n.cidr,networkType:n.type}]}],expression:"['ipAddress' + record.id, {\n          rules: [{\n            validator: validatorIpAddress,\n            cidr: record.cidr,\n            networkType: record.type\n          }]\n        }]"}],staticStyle:{width:"150px"},attrs:{placeholder:n.cidr},on:{change:function(t){return e.updateNetworkData("ipAddress",n.id,t.target.value)}}},["L2"!==n.type?i("a-tooltip",{attrs:{slot:"suffix",title:e.getIpRangeDescription(n)},slot:"suffix"},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1):e._e()],1)],1):e._e()]}},{key:"macAddress",fn:function(t,n){return[i("a-form-item",[i("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["macAddress"+n.id,{rules:[{validator:e.validatorMacAddress}]}],expression:"[`macAddress` + record.id, {\n          rules: [{\n            validator: validatorMacAddress\n          }]\n        }]"}],staticStyle:{width:"150px"},attrs:{placeholder:e.$t("label.macaddress")},on:{change:function(t){return e.updateNetworkData("macAddress",n.id,t.target.value)}}},[i("a-tooltip",{attrs:{slot:"suffix",title:e.$t("label.macaddress.example")},slot:"suffix"},[i("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1)],1)]}}])})},pe=[],fe=(i("c740"),i("13d5"),{name:"NetworkConfiguration",props:{items:{type:Array,default:function(){return[]}},value:{type:String,default:""},preFillContent:{type:Object,default:function(){}}},data:function(){return{networks:[],columns:[{dataIndex:"name",title:this.$t("label.defaultnetwork"),width:"30%",scopedSlots:{customRender:"name"}},{dataIndex:"ip",title:this.$t("label.ip"),width:"30%",scopedSlots:{customRender:"ipAddress"}},{dataIndex:"mac",title:this.$t("label.macaddress"),width:"30%",scopedSlots:{customRender:"macAddress"}}],selectedRowKeys:[],dataItems:[],macRegex:/^([0-9A-F]{2}[:-]){5}([0-9A-F]{2})$/i,ipV4Regex:/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i}},beforeCreate:function(){this.dataItems=[]},created:function(){this.dataItems=this.items,this.dataItems.length>0&&(this.selectedRowKeys=[this.dataItems[0].id],this.$emit("select-default-network-item",this.dataItems[0].id))},computed:{rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectRow}}},watch:{value:function(e,t){e&&e!==t&&(this.selectedRowKeys=[e])},items:function(e,t){var i=this;if(e&&e.length>0){this.dataItems=e;var n=this.dataItems.filter((function(e){return i.selectedRowKeys.includes(e.id)}));n&&0!==n.length||(this.selectedRowKeys=[this.dataItems[0].id],this.$emit("select-default-network-item",this.dataItems[0].id))}}},methods:{onSelectRow:function(e){this.selectedRowKeys=e,this.$emit("select-default-network-item",e[0])},updateNetworkData:function(e,t,i){var n=this,s=this.networks.findIndex((function(e){return e.key===t}));if(-1===s){var o={};return o.key=t,o[e]=i,this.networks.push(o),void this.$emit("update-network-config",this.networks)}this.networks.filter((function(s,o){s.key===t&&n.$set(n.networks[o],e,i)})),this.$emit("update-network-config",this.networks)},removeItem:function(e){this.dataItems=this.dataItems.filter((function(t){return t.id!==e})),this.selectedRowKeys.includes(e)&&this.dataItems&&this.dataItems.length>0&&(this.selectedRowKeys=[this.dataItems[0].id],this.$emit("select-default-network-item",this.dataItems[0].id))},validatorMacAddress:function(e,t,i){t&&""!==t?this.macRegex.test(t)?i():i(this.$t("message.error.macaddress")):i()},validatorIpAddress:function(e,t,i){if(t&&""!==t)if(this.ipV4Regex.test(t))if("L2"===e.networkType||this.isIp4InCidr(t,e.cidr))i();else{var n=this.calculateCidrRange(e.cidr),s="".concat(this.$t("message.error.ip.range")," ").concat(this.$t("label.from")," ").concat(n[0]," ").concat(this.$t("label.to")," ").concat(n[1]);i(s)}else i(this.$t("message.error.ipv4.address"));else i()},getIpRangeDescription:function(e){var t=this.calculateCidrRange(e.cidr),i=["".concat(this.$t("label.ip.range"),":"),t[0],"-",t[1]].join(" ");return i},isIp4InCidr:function(e,t){var i=t.split("/"),n=Object(a["a"])(i,2),s=n[0],o=n[1],r=void 0===o?32:o,l=~(Math.pow(2,32-r)-1);return(this.ip4ToInt(e)&l)===(this.ip4ToInt(s)&l)},calculateCidrRange:function(e){var t=e.split("/"),i=Object(a["a"])(t,2),n=i[0],s=i[1],o=void 0===s?32:s,r=~(Math.pow(2,32-o)-1);return[this.intToIp4(this.ip4ToInt(n)&r),this.intToIp4(this.ip4ToInt(n)|~r)]},ip4ToInt:function(e){return e.split(".").reduce((function(e,t){return(e<<8)+parseInt(t,10)}),0)>>>0},intToIp4:function(e){return[e>>>24&255,e>>>16&255,e>>>8&255,255&e].join(".")},onClickRow:function(e,t){var i=this;return{on:{click:function(t){"input"!==t.target.tagName.toLowerCase()&&(i.selectedRowKeys=[e.id],i.$emit("select-default-network-item",e.id))}}}}}}),me=fe,he=(i("dcf7"),Object(z["a"])(me,de,pe,!1,null,"12bee76e",null)),ge=he.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-table",{attrs:{loading:e.loading,columns:e.columns,dataSource:e.tableSource,rowSelection:e.rowSelection,customRow:e.onClickRow,pagination:!1,size:"middle",scroll:{y:225}},scopedSlots:e._u([{key:"account",fn:function(){return[i("a-icon",{attrs:{type:"user"}}),e._v(" "+e._s(e.$t("label.account")))]},proxy:!0},{key:"domain",fn:function(){return[i("a-icon",{attrs:{type:"block"}}),e._v(" "+e._s(e.$t("label.domain")))]},proxy:!0}])}),i("div",{staticStyle:{display:"block","text-align":"right"}},[i("a-pagination",{attrs:{size:"small",current:e.options.page,pageSize:e.options.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},ve=[],be={name:"SshKeyPairSelection",props:{items:{type:Array,default:function(){return[]}},rowCount:{type:Number,default:function(){return 0}},value:{type:String,default:""},loading:{type:Boolean,default:!1},preFillContent:{type:Object,default:function(){}},zoneId:{type:String,default:function(){return""}}},data:function(){return{filter:"",columns:[{dataIndex:"name",title:this.$t("label.sshkeypairs"),width:"40%"},{dataIndex:"account",slots:{title:"account"},width:"30%"},{dataIndex:"domain",slots:{title:"domain"},width:"30%"}],selectedRowKeys:[this.$t("label.noselect")],dataItems:[],oldZoneId:null,options:{page:1,pageSize:10,keyword:null}}},computed:{tableSource:function(){var e=[];return 1===this.options.page&&e.push({key:this.$t("label.noselect"),name:this.$t("label.noselect"),account:"-",domain:"-"}),this.items.map((function(t){e.push({key:t.name,name:t.name,account:t.account,domain:t.domain})})),e},rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedRowKeys,onChange:this.onSelectRow}}},watch:{value:function(e,t){e&&e!==t&&(this.selectedRowKeys=[e])},loading:function(){if(!this.loading)if(this.preFillContent.keypair)this.selectedRowKeys=[this.preFillContent.keypair],this.$emit("select-ssh-key-pair-item",this.preFillContent.keypair);else{if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.selectedRowKeys=[this.$t("label.noselect")],this.$emit("select-ssh-key-pair-item",this.$t("label.noselect"))}}},methods:{onSelectRow:function(e){this.selectedRowKeys=e,this.$emit("select-ssh-key-pair-item",e[0])},handleSearch:function(e){this.filter=e,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.$emit("handle-search-filter",this.options)},onChangePage:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onChangePageSize:function(e,t){this.options.page=e,this.options.pageSize=t,this.$emit("handle-search-filter",this.options)},onClickRow:function(e){var t=this;return{on:{click:function(){t.selectedRowKeys=[e.key],t.$emit("select-ssh-key-pair-item",e.key)}}}}}},we=be,ke=(i("2e96"),Object(z["a"])(we,ye,ve,!1,null,"617a8ae8",null)),Se=ke.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"margin-top":"10px"}},[i("label",[e._v(e._s(e.$t("message.select.security.groups")))]),i("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:e.$t("label.search")},on:{search:e.handleSearch},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),i("a-table",{attrs:{loading:e.loading||e.fetchLoading,columns:e.columns,dataSource:e.items,rowKey:function(e){return e.id},pagination:!1,rowSelection:e.rowSelection,size:"middle",scroll:{y:225}}}),i("div",{staticStyle:{display:"block","text-align":"right","margin-top":"30px"}},[i("a-pagination",{attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.rowCount,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100","200"],showSizeChanger:""},on:{change:e.onChangePage,showSizeChange:e.onChangePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[i("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)],1)},ze=[],Ie={name:"SecurityGroupSelection",props:{value:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!1},zoneId:{type:String,default:function(){return""}},preFillContent:{type:Object,default:function(){}}},data:function(){return{filter:"",fetchLoading:!1,columns:[{dataIndex:"name",title:this.$t("label.security.groups"),width:"40%"},{dataIndex:"description",title:this.$t("label.description"),width:"60%"}],items:[],selectedRowKeys:[],page:1,pageSize:10,keyword:null,rowCount:0}},computed:{rowSelection:function(){var e=this;return{type:"checkbox",selectedRowKeys:this.selectedRowKeys,onChange:function(t){e.$emit("select-security-group-item",t)}}}},mounted:function(){this.fetchData()},watch:{value:function(e,t){e&&!f.a.isEqual(e,t)&&(this.selectedRowKeys=e)},loading:function(){if(!this.loading)if(this.preFillContent.securitygroupids)this.selectedRowKeys=this.preFillContent.securitygroupids,this.$emit("select-security-group-item",this.preFillContent.securitygroupids);else{if(this.oldZoneId===this.zoneId)return;this.oldZoneId=this.zoneId,this.selectedRowKeys=[],this.$emit("select-security-group-item",null)}}},methods:{fetchData:function(){var e=this,t={domainid:this.$store.getters.userInfo.domainid,account:this.$store.getters.userInfo.account,page:this.page,pageSize:this.pageSize};this.keyword&&(t.keyword=this.keyword),this.items=[],this.fetchLoading=!0,Object(d["a"])("listSecurityGroups",t).then((function(t){var i=t.listsecuritygroupsresponse.securitygroup||[];if(e.rowCount=t.listsecuritygroupsresponse.count||0,i&&i.length>0){for(var n=0;n<i.length;n++)e.items.push(i[n]);e.items.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))}})).finally((function(){e.fetchLoading=!1}))},handleSearch:function(e){this.filter=e,this.page=1,this.pageSize=10,this.keyword=this.filter,this.fetchData()},onChangePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},onChangePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}},$e=Ie,xe=(i("6445"),Object(z["a"])($e,Ce,ze,!1,null,"1fe63e95",null)),Oe=xe.exports,_e={name:"Wizard",components:{SshKeyPairSelection:Se,NetworkConfiguration:ge,NetworkSelection:ue,AffinityGroupSelection:ne,TemplateIsoSelection:X,DiskSizeSelection:N,MultiDiskSelection:j,DiskOfferingSelection:$,InfoCard:y["default"],ComputeOfferingSelection:v["a"],ComputeSelection:b["a"],SecurityGroupSelection:Oe},props:{visible:{type:Boolean},preFillContent:{type:Object,default:function(){}}},mixins:[m["b"],m["c"]],data:function(){return{zoneId:"",podId:null,clusterId:null,zoneSelected:!1,vm:{name:null,zoneid:null,zonename:null,hypervisor:null,templateid:null,templatename:null,keyboard:null,keypair:null,group:null,affinitygroupids:[],affinitygroup:[],serviceofferingid:null,serviceofferingname:null,ostypeid:null,ostypename:null,rootdisksize:null,disksize:null},options:{templates:[],isos:[],hypervisors:[],serviceOfferings:[],diskOfferings:[],zones:[],affinityGroups:[],networks:[],sshKeyPairs:[],pods:[],clusters:[],hosts:[],groups:[],keyboards:[],bootTypes:[],bootModes:[]},rowCount:{},loading:{deploy:!1,templates:!1,isos:!1,hypervisors:!1,serviceOfferings:!1,diskOfferings:!1,affinityGroups:!1,networks:!1,sshKeyPairs:!1,zones:!1,pods:!1,clusters:!1,hosts:!1,groups:!1},instanceConfig:{},template:{},templateConfigurations:[],templateNics:[],templateLicenses:[],templateProperties:{},selectedTemplateConfiguration:{},iso:{},hypervisor:"",serviceOffering:{},diskOffering:{},affinityGroups:[],networks:[],networksAdd:[],zone:{},sshKeyPair:{},templateFilter:["featured","community","selfexecutable","sharedexecutable"],isoFilter:["featured","community","selfexecutable","sharedexecutable"],initDataConfig:{},defaultNetwork:"",networkConfig:[],dataNetworkCreated:[],tabList:[{key:"templateid",tab:this.$t("label.templates")},{key:"isoid",tab:this.$t("label.isos")}],tabKey:"templateid",dataPreFill:{},showDetails:!1,showRootDiskSizeChanger:!1,securitygroupids:[]}},computed:{isNormalAndDomainUser:function(){return["DomainAdmin","User"].includes(this.$store.getters.userInfo.roletype)},diskSize:function(){var e=f.a.get(this.instanceConfig,"rootdisksize",0),t=f.a.get(this.instanceConfig,"size",0),i=f.a.get(this.diskOffering,"disksize",0),n=i>0?i:t,s=[];return e>0&&s.push("".concat(e," GB (Root)")),n>0&&s.push("".concat(n," GB (Data)")),s.join(" | ")},affinityGroupIds:function(){return f.a.map(this.affinityGroups,"id")},params:function(){return{serviceOfferings:{list:"listServiceOfferings",options:{zoneid:f.a.get(this.zone,"id"),issystem:!1,page:1,pageSize:10,keyword:void 0}},diskOfferings:{list:"listDiskOfferings",options:{zoneid:f.a.get(this.zone,"id"),page:1,pageSize:10,keyword:void 0}},zones:{list:"listZones",isLoad:!0,field:"zoneid"},hypervisors:{list:"listHypervisors",options:{zoneid:f.a.get(this.zone,"id")},field:"hypervisor"},affinityGroups:{list:"listAffinityGroups",options:{page:1,pageSize:10,keyword:void 0,listall:!1}},sshKeyPairs:{list:"listSSHKeyPairs",options:{page:1,pageSize:10,keyword:void 0,listall:!1}},networks:{list:"listNetworks",options:{zoneid:f.a.get(this.zone,"id"),canusefordeploy:!0,projectid:h["a"].getters.project?h["a"].getters.project.id:null,domainid:h["a"].getters.project&&h["a"].getters.project.id?null:h["a"].getters.userInfo.domainid,account:h["a"].getters.project&&h["a"].getters.project.id?null:h["a"].getters.userInfo.account,page:1,pageSize:10,keyword:void 0}},pods:{list:"listPods",isLoad:!this.isNormalAndDomainUser,options:{zoneid:f.a.get(this.zone,"id")},field:"podid"},clusters:{list:"listClusters",isLoad:!this.isNormalAndDomainUser,options:{zoneid:f.a.get(this.zone,"id"),podid:this.podId},field:"clusterid"},hosts:{list:"listHosts",isLoad:!this.isNormalAndDomainUser,options:{zoneid:f.a.get(this.zone,"id"),podid:this.podId,clusterid:this.clusterId,state:"Up",type:"Routing"},field:"hostid"}}},networkOfferingIds:function(){return f.a.map(this.networks,"id")},zoneSelectOptions:function(){return this.options.zones.map((function(e){return{label:e.name,value:e.id}}))},hypervisorSelectOptions:function(){return this.options.hypervisors.map((function(e){return{label:e.name,value:e.name}}))},podSelectOptions:function(){var e=this.options.pods.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("label.default"),value:void 0}),e},clusterSelectOptions:function(){var e=this.options.clusters.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("label.default"),value:void 0}),e},hostSelectOptions:function(){var e=this.options.hosts.map((function(e){return{label:e.name,value:e.id}}));return e.unshift({label:this.$t("label.default"),value:void 0}),e},keyboardSelectOptions:function(){var e=this,t=this.$config.keyboardOptions||{};return Object.keys(t).map((function(i){return{label:e.$t(t[i]),value:i}}))},templateConfigurationExists:function(){return this.vm.templateid&&this.templateConfigurations&&this.templateConfigurations.length>0},networkId:function(){return this.$route.query.networkid||null},showSecurityGroupSection:function(){return this.networks.length>0&&this.zone.securitygroupsenabled||this.zone&&"Basic"===this.zone.networktype}},watch:{$route:function(e,t){"deployVirtualMachine"===e.name&&this.resetData()},instanceConfig:function(e){for(var t in this.template="",this.options.templates){var i=f.a.find(f.a.get(this.options.templates[t],"template",[]),(function(t){return t.id===e.templateid}));if(i){this.template=i;break}}for(var n in this.iso="",this.options.isos){var s=f.a.find(f.a.get(this.options.isos[n],"iso",[]),(function(t){return t.id===e.isoid}));if(s){this.iso=s;break}}if(e.hypervisor){var o=f.a.find(this.options.hypervisors,(function(t){return t.name===e.hypervisor}));this.hypervisor=o?o.name:null}this.serviceOffering=f.a.find(this.options.serviceOfferings,(function(t){return t.id===e.computeofferingid})),this.diskOffering=f.a.find(this.options.diskOfferings,(function(t){return t.id===e.diskofferingid})),this.zone=f.a.find(this.options.zones,(function(t){return t.id===e.zoneid})),this.affinityGroups=f.a.filter(this.options.affinityGroups,(function(t){return f.a.includes(e.affinitygroupids,t.id)})),this.networks=f.a.filter(this.options.networks,(function(t){return f.a.includes(e.networkids,t.id)})),this.sshKeyPair=f.a.find(this.options.sshKeyPairs,(function(t){return t.name===e.keypair})),this.zone&&(this.vm.zoneid=this.zone.id,this.vm.zonename=this.zone.name);var a=f.a.find(this.options.pods,(function(t){return t.id===e.podid}));a&&(this.vm.podid=a.id,this.vm.podname=a.name);var r=f.a.find(this.options.clusters,(function(t){return t.id===e.clusterid}));r&&(this.vm.clusterid=r.id,this.vm.clustername=r.name);var l=f.a.find(this.options.hosts,(function(t){return t.id===e.hostid}));l&&(this.vm.hostid=l.id,this.vm.hostname=l.name),this.diskSize&&(this.vm.disksizetotalgb=this.diskSize),this.networks&&(this.vm.networks=this.networks),this.template&&(this.vm.templateid=this.template.id,this.vm.templatename=this.template.displaytext,this.vm.ostypeid=this.template.ostypeid,this.vm.ostypename=this.template.ostypename),this.iso&&(this.vm.templateid=this.iso.id,this.vm.templatename=this.iso.displaytext,this.vm.ostypeid=this.iso.ostypeid,this.vm.ostypename=this.iso.ostypename,this.hypervisor&&(this.vm.hypervisor=this.hypervisor)),this.serviceOffering&&(this.vm.serviceofferingid=this.serviceOffering.id,this.vm.serviceofferingname=this.serviceOffering.displaytext,this.serviceOffering.cpunumber&&(this.vm.cpunumber=this.serviceOffering.cpunumber),this.serviceOffering.cpuspeed&&(this.vm.cpuspeed=this.serviceOffering.cpuspeed),this.serviceOffering.memory&&(this.vm.memory=this.serviceOffering.memory)),!this.template.deployasis&&this.template.childtemplates&&this.template.childtemplates.length>0?(this.vm.diskofferingid="",this.vm.diskofferingname="",this.vm.diskofferingsize=""):this.diskOffering&&(this.vm.diskofferingid=this.diskOffering.id,this.vm.diskofferingname=this.diskOffering.displaytext,this.vm.diskofferingsize=this.diskOffering.disksize),this.affinityGroups&&(this.vm.affinitygroup=this.affinityGroups)}},created:function(){var e=this;this.form=this.$form.createForm(this,{onValuesChange:function(t,i){i.isoid?e.form.setFieldsValue({templateid:null,rootdisksize:0}):i.templateid&&e.form.setFieldsValue({isoid:null}),e.instanceConfig=Object(c["a"])(Object(c["a"])({},e.form.getFieldsValue()),i),Object.keys(i).forEach((function(t){t in e.vm&&(e.vm[t]=e.instanceConfig[t])}))}}),this.form.getFieldDecorator("computeofferingid",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("diskofferingid",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("multidiskoffering",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("affinitygroupids",{initialValue:[],preserve:!0}),this.form.getFieldDecorator("networkids",{initialValue:[],preserve:!0}),this.form.getFieldDecorator("keypair",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("cpunumber",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("cpuSpeed",{initialValue:void 0,preserve:!0}),this.form.getFieldDecorator("memory",{initialValue:void 0,preserve:!0})},mounted:function(){this.dataPreFill=this.preFillContent&&Object.keys(this.preFillContent).length>0?this.preFillContent:{},this.fetchData()},provide:function(){return{vmFetchTemplates:this.fetchAllTemplates,vmFetchIsos:this.fetchAllIsos,vmFetchNetworks:this.fetchNetwork}},methods:{getPropertyQualifiers:function(e,t){var i="";switch(t){case"select":if(i=[],e&&e.includes("ValueMap")){i=e.replace("ValueMap","").substr(1).slice(0,-1).split(",");for(var n=0;n<i.length;n++)i[n]=i[n].replace(/"/g,"")}break;case"number-select":var s=0,o=Number.MAX_SAFE_INTEGER;if(e){var a=e.match(/MinLen\((\d+)\)/);a&&(s=parseInt(a[1])),a=e.match(/MaxLen\((\d+)\)/),a&&(o=parseInt(a[1]))}i={min:s,max:o};break;default:}return i},fillValue:function(e){this.form.getFieldDecorator([e],{initialValue:this.dataPreFill[e]})},fetchData:function(){var e=this;this.dataPreFill.zoneid?this.fetchDataByZone(this.dataPreFill.zoneid):f.a.each(this.params,(function(t,i){t.isLoad&&e.fetchOptions(t,i)})),this.fetchBootTypes(),this.fetchBootModes(),this.fetchInstaceGroups(),u["a"].nextTick().then((function(){["name","keyboard","boottype","bootmode","userdata"].forEach(e.fillValue),e.instanceConfig=e.form.getFieldsValue()}))},fetchDataByZone:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.fillValue("zoneid"),i.next=3,t.fetchZones();case 3:return t.options.zones=i.sent,t.zoneId=e,t.zoneSelected=!0,t.tabKey="templateid",i.next=9,f.a.each(t.params,(function(e,i){"isLoad"in e&&!e.isLoad||t.fetchOptions(e,i,["zones"])}));case 9:return i.next=11,t.fetchAllTemplates();case 11:case"end":return i.stop()}}),i)})))()},fetchBootTypes:function(){var e=[];e.push({id:"BIOS",description:"BIOS"}),e.push({id:"UEFI",description:"UEFI"}),this.options.bootTypes=e,this.$forceUpdate()},fetchBootModes:function(e){var t=[];"UEFI"===e?(t.push({id:"LEGACY",description:"LEGACY"}),t.push({id:"SECURE",description:"SECURE"})):t.push({id:"LEGACY",description:"LEGACY"}),this.options.bootModes=t,this.$forceUpdate()},fetchInstaceGroups:function(){var e=this;this.options.instanceGroups=[],Object(d["a"])("listInstanceGroups",{account:this.$store.getters.userInfo.account,domainid:this.$store.getters.userInfo.domainid,listall:!0}).then((function(t){var i=t.listinstancegroupsresponse.instancegroup||[];i.forEach((function(t){e.options.instanceGroups.push(t.name)}))}))},fetchNetwork:function(){var e=this.params.networks;this.fetchOptions(e,"networks")},resetData:function(){this.vm={},this.zoneSelected=!1,this.form.resetFields(),this.fetchData()},updateFieldValue:function(e,t){if("templateid"===e){this.tabKey="templateid",this.form.setFieldsValue({templateid:t,isoid:null}),this.resetFromTemplateConfiguration();var i="";for(var n in this.options.templates){var s=f.a.find(f.a.get(this.options.templates[n],"template",[]),(function(e){return e.id===t}));if(s){this.template=s,this.templateConfigurations=[],this.selectedTemplateConfiguration={},this.templateNics=[],this.templateLicenses=[],this.templateProperties={},this.updateTemplateParameters(),i=s;break}}if(i){var o=i.size/1073741824||0;this.dataPreFill.minrootdisksize=Math.ceil(o)}}else"isoid"===e?(this.templateConfigurations=[],this.selectedTemplateConfiguration={},this.templateNics=[],this.templateLicenses=[],this.templateProperties={},this.tabKey="isoid",this.resetFromTemplateConfiguration(),this.form.setFieldsValue({isoid:t,templateid:null})):["cpuspeed","cpunumber","memory"].includes(e)?(this.vm[e]=t,this.form.setFieldsValue(Object(r["a"])({},e,t))):this.form.setFieldsValue(Object(r["a"])({},e,t))},updateComputeOffering:function(e){var t=this;this.form.setFieldsValue({computeofferingid:e}),setTimeout((function(){t.updateTemplateConfigurationOfferingDetails(e)}),500)},updateDiskOffering:function(e){"0"!==e?this.form.setFieldsValue({diskofferingid:e}):this.form.setFieldsValue({diskofferingid:void 0})},updateMultiDiskOffering:function(e){this.form.setFieldsValue({multidiskoffering:e})},updateAffinityGroups:function(e){this.form.setFieldsValue({affinitygroupids:e})},updateNetworks:function(e){this.form.setFieldsValue({networkids:e})},updateDefaultNetworks:function(e){this.defaultNetwork=e},updateNetworkConfig:function(e){this.networkConfig=e},updateSshKeyPairs:function(e){e!==this.$t("label.noselect")?this.form.setFieldsValue({keypair:e}):this.form.setFieldsValue({keypair:void 0})},escapePropertyKey:function(e){return e.split(".").join("\\002E")},updateSecurityGroups:function(e){this.securitygroupids=e},getText:function(e){return f.a.get(e,"displaytext",f.a.get(e,"name"))},handleSubmit:function(e){var t=this;console.log("wizard submit"),e.preventDefault(),this.form.validateFields(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(i,n){var s,r,l,c,u,p,f,m,h,y,v,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=6;break}if(!i.licensesaccepted){e.next=4;break}return t.$notification.error({message:t.$t("message.license.agreements.not.accepted"),description:t.$t("message.step.license.agreements.continue")}),e.abrupt("return");case 4:return t.$notification.error({message:t.$t("message.request.failed"),description:t.$t("error.form.message")}),e.abrupt("return");case 6:if(n.templateid||n.isoid){e.next=11;break}return t.$notification.error({message:t.$t("message.request.failed"),description:t.$t("message.template.iso")}),e.abrupt("return");case 11:if(!n.isoid||n.diskofferingid&&"0"!==n.diskofferingid){e.next=14;break}return t.$notification.error({message:t.$t("message.request.failed"),description:t.$t("message.step.3.continue")}),e.abrupt("return");case 14:if(n.computeofferingid){e.next=17;break}return t.$notification.error({message:t.$t("message.request.failed"),description:t.$t("message.step.2.continue")}),e.abrupt("return");case 17:if(t.loading.deploy=!0,s=[],r={},r.zoneid=n.zoneid,r.podid=n.podid,r.clusterid=n.clusterid,r.hostid=n.hostid,r.keyboard=n.keyboard,r.boottype=n.boottype,r.bootmode=n.bootmode,n.userdata&&n.userdata.length>0&&(r.userdata=encodeURIComponent(btoa(t.sanitizeReverse(n.userdata)))),"templateid"===t.tabKey?r.templateid=n.templateid:r.templateid=n.isoid,t.showRootDiskSizeChanger&&n.rootdisksize&&n.rootdisksize>0&&(r.rootdisksize=n.rootdisksize),n.hypervisor&&n.hypervisor.length>0&&(r.hypervisor=n.hypervisor),r.serviceofferingid=n.computeofferingid,t.serviceOffering&&t.serviceOffering.iscustomized&&(n.cpunumber&&(r["details[0].cpuNumber"]=n.cpunumber),n.cpuspeed&&(r["details[0].cpuSpeed"]=n.cpuspeed),n.memory&&(r["details[0].memory"]=n.memory)),t.selectedTemplateConfiguration&&(r["details[0].configurationId"]=t.selectedTemplateConfiguration.id),!t.template.deployasis&&t.template.childtemplates&&t.template.childtemplates.length>0?n.multidiskoffering&&(l=0,Object.entries(n.multidiskoffering).forEach((function(e){var t=Object(a["a"])(e,2),i=t[0],n=t[1],s="datadiskofferinglist[".concat(l,"].datadisktemplateid"),o="datadiskofferinglist[".concat(l,"].diskofferingid");r[s]=i,r[o]=n,l++}))):(r.diskofferingid=n.diskofferingid,n.size&&(r.size=n.size)),r.affinitygroupids=(n.affinitygroupids||[]).join(","),"Basic"===t.zone.networktype){e.next=46;break}if(!("networkMap"in n)){e.next=42;break}for(c=Object.keys(n.networkMap),u=0;u<c.length;++u)n.networkMap[c[u]]&&n.networkMap[c[u]].length>0&&(r["nicnetworklist["+u+"].nic"]=c[u].replace("nic-",""),r["nicnetworklist["+u+"].network"]=n.networkMap[c[u]]);e.next=45;break;case 42:if(p=function(){var e=[];if(s=n.networkids,!(s.length>0))return t.$notification.error({message:t.$t("message.request.failed"),description:t.$t("message.step.4.continue")}),t.loading.deploy=!1,{v:void 0};for(var i=0;i<s.length;i++)if(s[i]===t.defaultNetwork){var o={networkid:t.defaultNetwork};e.unshift(o)}else{var a={networkid:s[i]};e.push(a)}for(var l=function(i){if(r["iptonetworklist["+i+"].networkid"]=e[i].networkid,t.networkConfig.length>0){var n=t.networkConfig.filter((function(t){return t.key===e[i].networkid}));n&&n.length>0&&(r["iptonetworklist["+i+"].ip"]=n[0].ipAddress?n[0].ipAddress:void 0,r["iptonetworklist["+i+"].mac"]=n[0].macAddress?n[0].macAddress:void 0)}},c=0;c<e.length;c++)l(c)}(),"object"!==Object(o["a"])(p)){e.next=45;break}return e.abrupt("return",p.v);case 45:t.securitygroupids.length>0&&(r.securitygroupids=t.securitygroupids.join(","));case 46:if(r.keypair=n.keypair,n.name&&(r.name=n.name,r.displayname=n.name),n.group&&(r.group=n.group),"properties"in n)for(f=Object.keys(n.properties),m=0;m<f.length;++m)h=f[m].split("\\002E").join("."),r["properties["+m+"].key"]=h,r["properties["+m+"].value"]=n.properties[f[m]];"bootintosetup"in n&&(r.bootintosetup=n.bootintosetup),y=t.$t("label.launch.vm"),v=n.name||"",b=t.$t("label.password"),Object(d["a"])("deployVirtualMachine",r).then((function(e){var i=e.deployvirtualmachineresponse.jobid;i&&(t.$pollJob({jobId:i,successMethod:function(e){var i=e.jobresult.virtualmachine,n=i.displayname||i.name||i.id;i.password&&t.$notification.success({message:b+" ".concat(t.$t("label.for")," ")+n,description:i.password,duration:0}),g["a"].$emit("vm-refresh-data")},errorMethod:function(){g["a"].$emit("vm-refresh-data")},loadingMessage:"".concat(y," ").concat(t.$t("label.in.progress")),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){g["a"].$emit("vm-refresh-data")}}),t.$store.dispatch("AddAsyncJob",{title:y,jobid:i,description:v,status:"progress"})),new Promise((function(e){return setTimeout(e,3e3)})).then((function(){g["a"].$emit("vm-refresh-data")})),t.$router.back()})).catch((function(e){t.$notifyError(e),t.loading.deploy=!1}));case 55:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())},fetchZones:function(){var e=this;return new Promise((function(t){e.loading.zones=!0;var i=e.params.zones;Object(d["a"])(i.list,{listall:!0}).then((function(e){var i=e.listzonesresponse.zone||[];t(i)})).catch((function(e){console.log(e.stack)})).finally((function(){e.loading.zones=!1}))}))},fetchOptions:function(e,t,i){var n=this;if(!(i&&i.length>0&&i.includes(t))){this.loading[t]=!0,e.loading=!0,e.opts=[];var s=e.options||{};"listall"in s||(s.listall=!0),Object(d["a"])(e.list,s).then((function(i){e.loading=!1,f.a.map(i,(function(i,s){if(0===Object.keys(i).length)return n.rowCount[t]=0,n.options[t]=[],void n.$forceUpdate();if(s.includes("response")&&(f.a.map(i,(function(i,s){"count"!==s?(e.opts=i,n.options[t]=i,"hypervisors"===t&&(n.hypervisor=i[0]&&i[0].name?i[0].name:null),n.$forceUpdate(),e.field&&n.fillValue(e.field)):n.rowCount[t]=i})),"zones"===t)){var o="";n.$route.query.zoneid?o=n.$route.query.zoneid:1===n.options.zones.length&&(o=n.options.zones[0].id),o&&(n.form.getFieldDecorator(["zoneid"],{initialValue:o}),n.onSelectZoneId(o))}}))})).catch((function(t){console.log(t.stack),e.loading=!1})).finally((function(){n.loading[t]=!1}))}},fetchTemplates:function(e,t){var i=Object.assign({},t);return(i.keyword||i.category!==e)&&(i.page=1,i.pageSize=i.pageSize||10),i.zoneid=f.a.get(this.zone,"id"),i.templatefilter=e,i.details="all",new Promise((function(e,t){Object(d["a"])("listTemplates",i).then((function(t){e(t)})).catch((function(e){t(e)}))}))},fetchIsos:function(e,t){var i=Object.assign({},t);return(i.keyword||i.category!==e)&&(i.page=1,i.pageSize=i.pageSize||10),i.zoneid=f.a.get(this.zone,"id"),i.isoFilter=e,i.bootable=!0,new Promise((function(e,t){Object(d["a"])("listIsos",i).then((function(t){e(t)})).catch((function(e){t(e)}))}))},fetchAllTemplates:function(e){var t=this,i=[],n={};this.loading.templates=!0,this.templateFilter.forEach((function(s){n[s]={count:0,template:[]},i.push(t.fetchTemplates(s,e))})),this.options.templates=n,Promise.all(i).then((function(e){e.forEach((function(e,i){n[t.templateFilter[i]]=f.a.isEmpty(e.listtemplatesresponse)?{count:0,template:[]}:e.listtemplatesresponse,t.options.templates=Object(c["a"])({},n),t.$forceUpdate()}))})).catch((function(e){console.log(e)})).finally((function(){t.loading.templates=!1}))},fetchAllIsos:function(e){var t=this,i=[],n={};this.loading.isos=!0,this.isoFilter.forEach((function(s){n[s]={count:0,iso:[]},i.push(t.fetchIsos(s,e))})),this.options.isos=n,Promise.all(i).then((function(e){e.forEach((function(e,i){n[t.isoFilter[i]]=f.a.isEmpty(e.listisosresponse)?{count:0,iso:[]}:e.listisosresponse,t.options.isos=Object(c["a"])({},n),t.$forceUpdate()}))})).catch((function(e){console.log(e)})).finally((function(){t.loading.isos=!1}))},filterOption:function(e,t){return t.componentOptions.children[0].text.toUpperCase().indexOf(e.toUpperCase())>=0},onSelectZoneId:function(e){var t=this;this.dataPreFill={},this.zoneId=e,this.podId=null,this.clusterId=null,this.zone=f.a.find(this.options.zones,(function(t){return t.id===e})),this.zoneSelected=!0,this.form.setFieldsValue({clusterid:void 0,podid:void 0,hostid:void 0,templateid:void 0,isoid:void 0}),this.tabKey="templateid",f.a.each(this.params,(function(e,i){t.networkId&&"networks"===i&&(e.options={id:t.networkId}),"isLoad"in e&&!e.isLoad||t.fetchOptions(e,i,["zones"])})),this.fetchAllTemplates()},onSelectPodId:function(e){this.podId=e,this.fetchOptions(this.params.clusters,"clusters"),this.fetchOptions(this.params.hosts,"hosts")},onSelectClusterId:function(e){this.clusterId=e,this.fetchOptions(this.params.hosts,"hosts")},handleSearchFilter:function(e,t){this.params[e].options=Object(c["a"])(Object(c["a"])({},this.params[e].options),t),this.fetchOptions(this.params[e],e)},onTabChange:function(e,t){this[t]=e,"isoid"===e&&this.fetchAllIsos()},sanitizeReverse:function(e){var t=e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return t},fetchTemplateNics:function(e){var t=[];if(e&&e.deployasisdetails&&Object.keys(e.deployasisdetails).length>0){var i=Object.keys(e.deployasisdetails);i=i.filter((function(e){return e.startsWith("network-")}));var n=!0,s=!1,o=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c=JSON.parse(e.deployasisdetails[l]);t.push(c)}}catch(u){s=!0,o=u}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}t.sort((function(e,t){return e.InstanceID-t.InstanceID}))}return t},groupBy:function(e,t){var i={};return e.forEach((function(e){i[e[t]]||(i[e[t]]=[]),i[e[t]].push(e)})),i},fetchTemplateProperties:function(e){var t=[];if(e&&e.deployasisdetails&&Object.keys(e.deployasisdetails).length>0){var i=Object.keys(e.deployasisdetails);i=i.filter((function(e){return e.startsWith("property-")}));var n=!0,s=!1,o=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c=JSON.parse(e.deployasisdetails[l]);t.push(c)}}catch(u){s=!0,o=u}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}t.sort((function(e,t){return e.index-t.index}))}return this.groupBy(t,"category")},fetchTemplateConfigurations:function(e){var t=[];if(e&&e.deployasisdetails&&Object.keys(e.deployasisdetails).length>0){var i=Object.keys(e.deployasisdetails);i=i.filter((function(e){return e.startsWith("configuration-")}));var n=!0,s=!1,o=void 0;try{for(var a,r=i[Symbol.iterator]();!(n=(a=r.next()).done);n=!0){var l=a.value,c=JSON.parse(e.deployasisdetails[l]);c.name=c.label,c.displaytext=c.label,c.iscustomized=!0,c.cpunumber=0,c.cpuspeed=0,c.memory=0;var u=!0,d=!1,p=void 0;try{for(var f,m=c.hardwareItems[Symbol.iterator]();!(u=(f=m.next()).done);u=!0){var h=f.value;"Processor"===h.resourceType?(c.cpunumber=h.virtualQuantity,c.cpuspeed=h.reservation):"Memory"===h.resourceType&&(c.memory=h.virtualQuantity)}}catch(g){d=!0,p=g}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}t.push(c)}}catch(g){s=!0,o=g}finally{try{n||null==r.return||r.return()}finally{if(s)throw o}}t.sort((function(e,t){return e.index-t.index}))}return t},fetchTemplateLicenses:function(e){var t=[];if(e&&e.deployasisdetails&&Object.keys(e.deployasisdetails).length>0){var i=Object.keys(e.deployasisdetails),n=/eula-\d-/;i=i.filter((function(e){return e.startsWith("eula-")})).sort();var s=!0,o=!1,a=void 0;try{for(var r,l=i[Symbol.iterator]();!(s=(r=l.next()).done);s=!0){var c=r.value,u={id:this.escapePropertyKey(c.replace(" ","-")),name:c.replace(n,""),text:e.deployasisdetails[c]};t.push(u)}}catch(d){o=!0,a=d}finally{try{s||null==l.return||l.return()}finally{if(o)throw a}}}return t},deleteFrom:function(e,t){var i=!0,n=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value;delete e[r]}}catch(l){n=!0,s=l}finally{try{i||null==a.return||a.return()}finally{if(n)throw s}}},resetFromTemplateConfiguration:function(){this.deleteFrom(this.params.serviceOfferings.options,["cpuspeed","cpunumber","memory"]),this.deleteFrom(this.dataPreFill,["cpuspeed","cpunumber","memory"]),this.handleSearchFilter("serviceOfferings",{page:1,pageSize:10})},handleTemplateConfiguration:function(){if(this.selectedTemplateConfiguration){var e={cpunumber:this.selectedTemplateConfiguration.cpunumber,cpuspeed:this.selectedTemplateConfiguration.cpuspeed,memory:this.selectedTemplateConfiguration.memory,page:1,pageSize:10};this.dataPreFill.cpunumber=e.cpunumber,this.dataPreFill.cpuspeed=e.cpuspeed,this.dataPreFill.memory=e.memory,this.handleSearchFilter("serviceOfferings",e)}},updateTemplateParameters:function(){var e=this;this.template&&(this.templateNics=this.fetchTemplateNics(this.template),this.templateConfigurations=this.fetchTemplateConfigurations(this.template),this.templateLicenses=this.fetchTemplateLicenses(this.template),this.templateProperties=this.fetchTemplateProperties(this.template),this.selectedTemplateConfiguration={},setTimeout((function(){e.templateConfigurationExists&&(e.selectedTemplateConfiguration=e.templateConfigurations[0],e.handleTemplateConfiguration(),"templateConfiguration"in e.form.fieldsStore.fieldsMeta&&e.updateFieldValue("templateConfiguration",e.selectedTemplateConfiguration.id),e.updateComputeOffering(null))}),500))},onSelectTemplateConfigurationId:function(e){this.selectedTemplateConfiguration=f.a.find(this.templateConfigurations,(function(t){return t.id===e})),this.handleTemplateConfiguration(),this.updateComputeOffering(null)},updateTemplateConfigurationOfferingDetails:function(e){var t=this.serviceOffering;t&&t.id===e||(t=f.a.find(this.options.serviceOfferings,(function(t){return t.id===e}))),t&&t.iscustomized&&this.templateConfigurationExists&&this.selectedTemplateConfiguration&&("cpunumber"in this.form.fieldsStore.fieldsMeta&&this.updateFieldValue("cpunumber",this.selectedTemplateConfiguration.cpunumber),null!=t.cpuspeed&&void 0!==t.cpuspeed||!("cpuspeed"in this.form.fieldsStore.fieldsMeta)||this.updateFieldValue("cpuspeed",this.selectedTemplateConfiguration.cpuspeed),"memory"in this.form.fieldsStore.fieldsMeta&&this.updateFieldValue("memory",this.selectedTemplateConfiguration.memory))}}},Fe=_e,Te=(i("90bc"),i("f0f1"),Object(z["a"])(Fe,n,s,!1,null,"768fd880",null));t["default"]=Te.exports},"8b7c":function(e,t,i){},"8ba0":function(e,t,i){"use strict";var n=i("8cbc"),s=i.n(n);s.a},"8cbc":function(e,t,i){},"90bc":function(e,t,i){"use strict";var n=i("c09c"),s=i.n(n);s.a},"99e8":function(e,t,i){},"9bd3":function(e,t,i){"use strict";var n=i("e11a"),s=i.n(n);s.a},aff5:function(e,t,i){var n=i("23e7");n({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},c09c:function(e,t,i){},dcf7:function(e,t,i){"use strict";var n=i("4338"),s=i.n(n);s.a},e11a:function(e,t,i){},f0f1:function(e,t,i){"use strict";var n=i("99e8"),s=i.n(n);s.a},fae4:function(e,t,i){},fb70:function(e,t,i){"use strict";var n=i("1844"),s=i.n(n);s.a}}]);
//# sourceMappingURL=chunk-21f81a9a.e9339611.js.map