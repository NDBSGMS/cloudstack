(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-522072d0"],{"6e92":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row-invitation"},[i("a-row",{attrs:{gutter:12}},[i("a-col",{attrs:{md:24,lg:24}},[i("a-input-search",{staticClass:"input-search-invitation",staticStyle:{width:"unset"},attrs:{placeholder:t.$t("label.search")},on:{search:t.onSearch},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),i("a-col",{attrs:{md:24,lg:24}},[i("a-table",{attrs:{size:"small",loading:t.loading,columns:t.columns,dataSource:t.dataSource,pagination:!1,rowKey:function(t){return t.id||t.account}},on:{change:t.onChangeTable},scopedSlots:t._u([{key:"state",fn:function(t){return[i("status",{attrs:{text:t||"",displayText:""}})]}},{key:"action",fn:function(e,a){return a.state===t.stateAllow?i("span",{staticClass:"account-button-action"},[i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.accept.project.invitation"))+" ")]),i("a-button",{attrs:{type:"success",shape:"circle",icon:"check",size:"small"},on:{click:function(e){return t.onShowConfirmAcceptInvitation(a)}}})],2),i("a-tooltip",{attrs:{placement:"top"}},[i("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.decline.invitation"))+" ")]),i("a-button",{attrs:{type:"danger",shape:"circle",icon:"close",size:"small"},on:{click:function(e){return t.onShowConfirmRevokeInvitation(a)}}})],2)],1):t._e()}}],null,!0)}),i("a-pagination",{staticClass:"row-element",attrs:{size:"small",current:t.page,pageSize:t.pageSize,total:t.itemCount,showTotal:function(e){return t.$t("label.total")+" "+e+" "+t.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:t.changePage,showSizeChange:t.changePageSize},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[i("span",[t._v(t._s(e.value)+" / "+t._s(t.$t("label.page")))])]}}])})],1)],1)],1)},n=[],o=(i("4160"),i("caad"),i("a434"),i("b0c0"),i("b64b"),i("d3b7"),i("2532"),i("159b"),i("365c")),s=i("829c"),c={name:"InvitationsTemplate",components:{Status:s["a"]},data:function(){return{columns:[],dataSource:[],listDomains:[],loading:!1,page:1,pageSize:10,itemCount:0,state:void 0,domainid:void 0,projectid:void 0,searchQuery:void 0,stateAllow:"Pending"}},created:function(){var t=this;this.columns=[{title:this.$t("label.project"),dataIndex:"project",scopedSlots:{customRender:"project"}},{title:this.$t("label.account"),dataIndex:"account",scopedSlots:{customRender:"account"}},{title:this.$t("label.domain"),dataIndex:"domain",scopedSlots:{customRender:"domain"}},{title:this.$t("label.state"),dataIndex:"state",width:130,scopedSlots:{customRender:"state"},filters:[{text:this.$t("state.pending"),value:"Pending"},{text:this.$t("state.completed"),value:"Completed"},{text:this.$t("state.declined"),value:"Declined"},{text:this.$t("state.expired"),value:"Expired"}],filterMultiple:!1},{title:this.$t("label.action"),dataIndex:"action",width:80,scopedSlots:{customRender:"action"}}],this.page=1,this.pageSize=10,this.itemCount=0,this.apiConfig=this.$store.getters.apis.listProjectInvitations||{},this.apiParams={},this.apiConfig.params.forEach((function(e){t.apiParams[e.name]=e})),this.apiParams.userid&&this.columns.splice(2,0,{title:this.$t("label.user"),dataIndex:"userid",scopedSlots:{customRender:"user"}})},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this,e={};e.page=this.page,e.pageSize=this.pageSize,e.state=this.state,e.domainid=this.domainid,e.projectid=this.projectid,e.keyword=this.searchQuery,e.listAll=!0,this.loading=!0,this.dataSource=[],this.itemCount=0,Object(o["a"])("listProjectInvitations",e).then((function(e){var i=e.listprojectinvitationsresponse.projectinvitation,a=e.listprojectinvitationsresponse.count;i&&0!==i.length&&(t.dataSource=i,t.itemCount=a)})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))},changePage:function(t,e){this.page=t,this.pageSize=e,this.fetchData()},changePageSize:function(t,e){this.page=t,this.pageSize=e,this.fetchData()},onShowConfirmAcceptInvitation:function(t){var e=this,i=this.$t("label.confirmacceptinvitation");this.$confirm({title:i,okText:this.$t("label.ok"),okType:"danger",cancelText:this.$t("label.cancel"),onOk:function(){e.updateProjectInvitation(t,!0)}})},updateProjectInvitation:function(t,e){var i=this,a="";a=e?this.$t("label.accept.project.invitation"):this.$t("label.decline.invitation");var n=this.$message.loading(a+"".concat(this.$t("label.in.progress.for")," ")+t.project,0),s={};s.projectid=t.projectid,t.userid&&null!==t.userid?s.userid=t.userid:s.account=t.account,s.domainid=t.domainid,s.accept=e,Object(o["a"])("updateProjectInvitation",s).then((function(e){var n=i.checkForAddAsyncJob(e,a,t.project);n&&(i.fetchData(),i.$emit("refresh-data"))})).catch((function(t){i.$notifyError(t)})).finally((function(){setTimeout(n,1e3)}))},onShowConfirmRevokeInvitation:function(t){var e=this,i=this.$t("label.confirmdeclineinvitation");this.$confirm({title:i,okText:this.$t("label.ok"),okType:"danger",cancelText:this.$t("label.cancel"),onOk:function(){e.updateProjectInvitation(t,!1)}})},onChangeTable:function(t,e,i){e&&0!==Object.keys(e).length&&(this.state=e.state&&e.state.length>0?e.state[0]:void 0,this.domainid=e.domain&&e.domain.length>0?e.domain[0]:void 0,this.projectid=e.project&&e.project.length>0?e.project[0]:void 0,this.fetchData())},onSearch:function(t){this.searchQuery=t,this.fetchData()},checkForAddAsyncJob:function(t,e,i){var a=!1;for(var n in t)if(n.includes("response"))for(var o in t[n])if("jobid"===o){a=!0;var s=t[n][o];this.$store.dispatch("AddAsyncJob",{title:e,jobid:s,description:i,status:"progress"})}return a}}},l=c,r=(i("b9e4"),i("2877")),d=Object(r["a"])(l,a,n,!1,null,"7ee85dbb",null);e["default"]=d.exports},b9e4:function(t,e,i){"use strict";var a=i("eb00"),n=i.n(a);n.a},eb00:function(t,e,i){}}]);
//# sourceMappingURL=chunk-522072d0.42fb5306.js.map