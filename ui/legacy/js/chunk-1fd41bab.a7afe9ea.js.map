{"version":3,"sources":["webpack:///./src/views/infra/InfraSummary.vue?db6e","webpack:///./src/views/infra/InfraSummary.vue?0924","webpack:///src/views/infra/InfraSummary.vue","webpack:///./src/views/infra/InfraSummary.vue?8c8e","webpack:///./src/views/infra/InfraSummary.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","staticStyle","loading","on","$event","fetchData","_v","_s","$t","sslFormVisible","sslModalClose","ref","form","preventDefault","handleSslFormSubmit","slot","apiParams","name","description","directives","rawName","value","rules","required","message","validateTrigger","expression","_l","item","index","key","id","addIntermediateCert","certificate","privatekey","domainsuffix","sslFormSubmitting","section","routes","substring","length","title","icon","stats","_e","staticRenderFns","components","Breadcrumb","ChartCard","data","sections","intermediateCertificates","maxCerts","beforeCreate","$form","createForm","apiConfig","$store","getters","apis","uploadCustomCertificate","params","forEach","mounted","methods","listInfra","json","listinfrastructureresponse","infrastructure","resetSslFormData","resetFields","push","pollActionCompletion","result","jobstatus","jobresult","customcertificate","errortext","duration","console","log","validateFields","errors","count","formValues","root","dns","Object","keys","includes","server","pkcs","component"],"mappings":"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","file":"js/chunk-1fd41bab.a7afe9ea.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfraSummary.vue?vue&type=style&index=0&id=100d7ef2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfraSummary.vue?vue&type=style&index=0&id=100d7ef2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24}},[_c('a-card',{staticClass:\"breadcrumb-card\"},[_c('a-col',{staticStyle:{\"display\":\"flex\"},attrs:{\"md\":24}},[_c('breadcrumb',{staticStyle:{\"padding-top\":\"6px\",\"padding-left\":\"8px\"}}),_c('a-button',{staticStyle:{\"margin-left\":\"12px\",\"margin-top\":\"4px\"},attrs:{\"loading\":_vm.loading,\"icon\":\"reload\",\"size\":\"small\",\"shape\":\"round\"},on:{\"click\":function($event){return _vm.fetchData()}}},[_vm._v(\" \"+_vm._s(_vm.$t('label.refresh'))+\" \")]),_c('a-button',{staticStyle:{\"margin-left\":\"12px\",\"margin-top\":\"4px\"},attrs:{\"icon\":\"safety-certificate\",\"size\":\"small\",\"shape\":\"round\"},on:{\"click\":function($event){_vm.sslFormVisible = true}}},[_vm._v(\" \"+_vm._s(_vm.$t('label.sslcertificates'))+\" \")]),_c('a-modal',{attrs:{\"title\":_vm.$t('label.sslcertificates'),\"visible\":_vm.sslFormVisible,\"footer\":null,\"maskClosable\":false,\"cancelText\":_vm.$t('label.cancel')},on:{\"cancel\":_vm.sslModalClose}},[_c('p',[_vm._v(\" \"+_vm._s(_vm.$t('message.update.ssl'))+\" \")]),_c('a-form',{ref:\"sslForm\",attrs:{\"form\":_vm.form},on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSslFormSubmit($event)}}},[_c('a-form-item',{attrs:{\"required\":true}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.root.certificate'))+\" \"),_c('a-tooltip',{attrs:{\"placement\":\"bottom\",\"title\":_vm.apiParams.name.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                  'root',\n                  {rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }], validateTrigger:'change'}\n                ]),expression:\"[\\n                  'root',\\n                  {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\\n                ]\"}],attrs:{\"id\":\"rootCert\",\"rows\":\"2\",\"placeholder\":_vm.$t('label.root.certificate'),\"autoFocus\":true,\"name\":\"rootCert\"}})],1),_c('transition-group',{attrs:{\"name\":\"fadeInUp\",\"tag\":\"div\"}},_vm._l((_vm.intermediateCertificates),function(item,index){return _c('a-form-item',{key:(\"key-\" + index),staticClass:\"intermediate-certificate\"},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.intermediate.certificate') + \" \" + (index + 1) + \" \")+\" \"),_c('a-tooltip',{attrs:{\"placement\":\"bottom\",\"title\":_vm.apiParams.id.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                    (\"intermediate\" + (index + 1)),\n                    {validateTrigger:'change'}\n                  ]),expression:\"[\\n                    `intermediate${index + 1}`,\\n                    {validateTrigger:'change'}\\n                  ]\"}],attrs:{\"id\":(\"intermediateCert\" + index),\"rows\":\"2\",\"placeholder\":_vm.$t('label.intermediate.certificate') + \" \" + (index + 1),\"name\":(\"intermediateCert\" + index)}})],1)}),1),_c('a-form-item',[_c('a-button',{on:{\"click\":_vm.addIntermediateCert}},[_c('a-icon',{attrs:{\"type\":\"plus-circle\"}}),_vm._v(\" \"+_vm._s(_vm.$t('label.add.intermediate.certificate'))+\" \")],1)],1),_c('a-form-item',{attrs:{\"required\":true}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.server.certificate'))+\" \"),_c('a-tooltip',{attrs:{\"placement\":\"bottom\",\"title\":_vm.apiParams.certificate.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                  'server',\n                  {rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }], validateTrigger:'change'}\n                ]),expression:\"[\\n                  'server',\\n                  {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\\n                ]\"}],attrs:{\"id\":\"serverCert\",\"rows\":\"2\",\"placeholder\":_vm.$t('label.server.certificate'),\"name\":\"serverCert\"}})],1),_c('a-form-item',{attrs:{\"required\":true}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.pkcs.private.certificate'))+\" \"),_c('a-tooltip',{attrs:{\"placement\":\"bottom\",\"title\":_vm.apiParams.privatekey.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                  'pkcs',\n                  {rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }], validateTrigger:'change'}\n                ]),expression:\"[\\n                  'pkcs',\\n                  {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\\n                ]\"}],attrs:{\"id\":\"pkcsKey\",\"rows\":\"2\",\"placeholder\":_vm.$t('label.pkcs.private.certificate'),\"name\":\"pkcsKey\"}})],1),_c('a-form-item',{attrs:{\"required\":true}},[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.domain.suffix'))+\" \"),_c('a-tooltip',{attrs:{\"placement\":\"bottom\",\"title\":_vm.apiParams.domainsuffix.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n                  'dns',\n                  {rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }], validateTrigger:'change'}\n                ]),expression:\"[\\n                  'dns',\\n                  {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\\n                ]\"}],attrs:{\"id\":\"dnsSuffix\",\"placeholder\":_vm.$t('label.domain.suffix'),\"name\":\"dnsSuffix\"}})],1),_c('a-form-item',{staticClass:\"controls\"},[_c('a-button',{staticClass:\"close-button\",on:{\"click\":this.sslModalClose}},[_vm._v(\" \"+_vm._s(_vm.$t('label.cancel' ))+\" \")]),_c('a-button',{attrs:{\"type\":\"primary\",\"htmlType\":\"submit\",\"loading\":_vm.sslFormSubmitting}},[_vm._v(\" \"+_vm._s(_vm.$t('label.submit' ))+\" \")])],1)],1)],1)],1)],1)],1),_vm._l((_vm.sections),function(section,index){return (_vm.routes[section])?_c('a-col',{key:index,staticStyle:{\"margin-bottom\":\"12px\"},attrs:{\"md\":6}},[_c('chart-card',{attrs:{\"loading\":_vm.loading}},[_c('div',{staticClass:\"chart-card-inner\"},[_c('router-link',{attrs:{\"to\":{ name: section.substring(0, section.length - 1) }}},[_c('h2',[_vm._v(_vm._s(_vm.$t(_vm.routes[section].title)))]),_c('h2',[_c('a-icon',{attrs:{\"type\":_vm.routes[section].icon}}),_vm._v(\" \"+_vm._s(_vm.stats[section]))],1)])],1)])],1):_vm._e()})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-row :gutter=\"12\">\n    <a-col :md=\"24\">\n      <a-card class=\"breadcrumb-card\">\n        <a-col :md=\"24\" style=\"display: flex\">\n          <breadcrumb style=\"padding-top: 6px; padding-left: 8px\" />\n          <a-button\n            style=\"margin-left: 12px; margin-top: 4px\"\n            :loading=\"loading\"\n            icon=\"reload\"\n            size=\"small\"\n            shape=\"round\"\n            @click=\"fetchData()\" >\n            {{ $t('label.refresh') }}\n          </a-button>\n          <a-button\n            style=\"margin-left: 12px; margin-top: 4px\"\n            icon=\"safety-certificate\"\n            size=\"small\"\n            shape=\"round\"\n            @click=\"sslFormVisible = true\">\n            {{ $t('label.sslcertificates') }}\n          </a-button>\n          <a-modal\n            :title=\"$t('label.sslcertificates')\"\n            :visible=\"sslFormVisible\"\n            :footer=\"null\"\n            :maskClosable=\"false\"\n            :cancelText=\"$t('label.cancel')\"\n            @cancel=\"sslModalClose\">\n            <p>\n              {{ $t('message.update.ssl') }}\n            </p>\n\n            <a-form @submit.prevent=\"handleSslFormSubmit\" ref=\"sslForm\" :form=\"form\">\n              <a-form-item :required=\"true\">\n                <span slot=\"label\">\n                  {{ $t('label.root.certificate') }}\n                  <a-tooltip placement=\"bottom\" :title=\"apiParams.name.description\">\n                    <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                  </a-tooltip>\n                </span>\n                <a-textarea\n                  id=\"rootCert\"\n                  rows=\"2\"\n                  :placeholder=\"$t('label.root.certificate')\"\n                  :autoFocus=\"true\"\n                  name=\"rootCert\"\n                  v-decorator=\"[\n                    'root',\n                    {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\n                  ]\"\n                ></a-textarea>\n              </a-form-item>\n\n              <transition-group name=\"fadeInUp\" tag=\"div\">\n                <a-form-item\n                  v-for=\"(item, index) in intermediateCertificates\"\n                  :key=\"`key-${index}`\"\n                  class=\"intermediate-certificate\">\n                  <span slot=\"label\">\n                    {{ $t('label.intermediate.certificate') + ` ${index + 1} ` }}\n                    <a-tooltip placement=\"bottom\" :title=\"apiParams.id.description\">\n                      <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                    </a-tooltip>\n                  </span>\n                  <a-textarea\n                    :id=\"`intermediateCert${index}`\"\n                    rows=\"2\"\n                    :placeholder=\"$t('label.intermediate.certificate') + ` ${index + 1}`\"\n                    :name=\"`intermediateCert${index}`\"\n                    v-decorator=\"[\n                      `intermediate${index + 1}`,\n                      {validateTrigger:'change'}\n                    ]\"\n                  ></a-textarea>\n                </a-form-item>\n              </transition-group>\n\n              <a-form-item>\n                <a-button @click=\"addIntermediateCert\">\n                  <a-icon type=\"plus-circle\" />\n                  {{ $t('label.add.intermediate.certificate') }}\n                </a-button>\n              </a-form-item>\n\n              <a-form-item :required=\"true\">\n                <span slot=\"label\">\n                  {{ $t('label.server.certificate') }}\n                  <a-tooltip placement=\"bottom\" :title=\"apiParams.certificate.description\">\n                    <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                  </a-tooltip>\n                </span>\n                <a-textarea\n                  id=\"serverCert\"\n                  rows=\"2\"\n                  :placeholder=\"$t('label.server.certificate')\"\n                  name=\"serverCert\"\n                  v-decorator=\"[\n                    'server',\n                    {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\n                  ]\"\n                ></a-textarea>\n              </a-form-item>\n\n              <a-form-item :required=\"true\">\n                <span slot=\"label\">\n                  {{ $t('label.pkcs.private.certificate') }}\n                  <a-tooltip placement=\"bottom\" :title=\"apiParams.privatekey.description\">\n                    <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                  </a-tooltip>\n                </span>\n                <a-textarea\n                  id=\"pkcsKey\"\n                  rows=\"2\"\n                  :placeholder=\"$t('label.pkcs.private.certificate')\"\n                  name=\"pkcsKey\"\n                  v-decorator=\"[\n                    'pkcs',\n                    {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\n                  ]\"\n                ></a-textarea>\n              </a-form-item>\n\n              <a-form-item :required=\"true\">\n                <span slot=\"label\">\n                  {{ $t('label.domain.suffix') }}\n                  <a-tooltip placement=\"bottom\" :title=\"apiParams.domainsuffix.description\">\n                    <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                  </a-tooltip>\n                </span>\n                <a-input\n                  id=\"dnsSuffix\"\n                  :placeholder=\"$t('label.domain.suffix')\"\n                  name=\"dnsSuffix\"\n                  v-decorator=\"[\n                    'dns',\n                    {rules: [{ required: true, message: `${$t('label.required')}` }], validateTrigger:'change'}\n                  ]\"\n                ></a-input>\n              </a-form-item>\n\n              <a-form-item class=\"controls\">\n                <a-button @click=\"this.sslModalClose\" class=\"close-button\">\n                  {{ $t('label.cancel' ) }}\n                </a-button>\n                <a-button type=\"primary\" htmlType=\"submit\" :loading=\"sslFormSubmitting\">\n                  {{ $t('label.submit' ) }}\n                </a-button>\n              </a-form-item>\n            </a-form>\n          </a-modal>\n        </a-col>\n      </a-card>\n    </a-col>\n    <a-col\n      :md=\"6\"\n      style=\"margin-bottom: 12px\"\n      v-for=\"(section, index) in sections\"\n      v-if=\"routes[section]\"\n      :key=\"index\">\n      <chart-card :loading=\"loading\">\n        <div class=\"chart-card-inner\">\n          <router-link :to=\"{ name: section.substring(0, section.length - 1) }\">\n            <h2>{{ $t(routes[section].title) }}</h2>\n            <h2><a-icon :type=\"routes[section].icon\" /> {{ stats[section] }}</h2>\n          </router-link>\n        </div>\n      </chart-card>\n    </a-col>\n  </a-row>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport router from '@/router'\n\nimport Breadcrumb from '@/components/widgets/Breadcrumb'\nimport ChartCard from '@/components/widgets/ChartCard'\n\nexport default {\n  name: 'InfraSummary',\n  components: {\n    Breadcrumb,\n    ChartCard\n  },\n  data () {\n    return {\n      loading: true,\n      routes: {},\n      sections: ['zones', 'pods', 'clusters', 'hosts', 'storagepools', 'imagestores', 'systemvms', 'routers', 'cpusockets', 'managementservers', 'alerts', 'ilbvms'],\n      sslFormVisible: false,\n      stats: {},\n      intermediateCertificates: [],\n      sslFormSubmitting: false,\n      maxCerts: 0\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiParams = {}\n    var apiConfig = this.$store.getters.apis.uploadCustomCertificate || {}\n    apiConfig.params.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n  },\n  mounted () {\n    this.fetchData()\n  },\n  methods: {\n    fetchData () {\n      this.routes = {}\n      for (const section of this.sections) {\n        const node = router.resolve({ name: section.substring(0, section.length - 1) })\n        this.routes[section] = {\n          title: node.route.meta.title,\n          icon: node.route.meta.icon\n        }\n      }\n      this.listInfra()\n    },\n    listInfra () {\n      this.loading = true\n      api('listInfrastructure').then(json => {\n        this.stats = []\n        if (json && json.listinfrastructureresponse && json.listinfrastructureresponse.infrastructure) {\n          this.stats = json.listinfrastructureresponse.infrastructure\n        }\n      }).finally(f => {\n        this.loading = false\n      })\n    },\n\n    resetSslFormData () {\n      this.form.resetFields()\n      this.intermediateCertificates = []\n      this.sslFormSubmitting = false\n      this.sslFormVisible = false\n    },\n\n    sslModalClose () {\n      this.resetSslFormData()\n    },\n\n    addIntermediateCert () {\n      this.intermediateCertificates.push('')\n    },\n\n    pollActionCompletion (jobId, count) {\n      api('queryAsyncJobResult', { jobid: jobId }).then(json => {\n        const result = json.queryasyncjobresultresponse\n        if (result.jobstatus === 1 && this.maxCerts === count) {\n          this.$message.success(`${this.$t('label.certificate.upload')}: ${result.jobresult.customcertificate.message}`)\n          this.$notification.success({\n            message: this.$t('label.certificate.upload'),\n            description: result.jobresult.customcertificate.message || this.$t('message.success.certificate.upload')\n          })\n        } else if (result.jobstatus === 2) {\n          this.$notification.error({\n            message: this.$t('label.certificate.upload.failed'),\n            description: result.jobresult.errortext || this.$t('label.certificate.upload.failed.description'),\n            duration: 0\n          })\n        } else if (result.jobstatus === 0) {\n          this.$message\n            .loading(`${this.$t('message.certificate.upload.processing')}: ${count}`, 2)\n            .then(() => this.pollActionCompletion(jobId, count))\n        }\n      }).catch(e => {\n        console.log(this.$t('error.fetching.async.job.result') + e)\n      })\n    },\n\n    handleSslFormSubmit () {\n      this.sslFormSubmitting = true\n\n      this.form.validateFields(errors => {\n        if (errors) {\n          this.sslFormSubmitting = false\n          return\n        }\n\n        const formValues = this.form.getFieldsValue()\n\n        this.maxCerts = 2 + Object.keys(formValues).length\n        let count = 1\n        let data = {\n          id: count,\n          certificate: formValues.root,\n          domainsuffix: formValues.dns,\n          name: 'root'\n        }\n        api('uploadCustomCertificate', {}, 'POST', data).then(response => {\n          this.pollActionCompletion(response.uploadcustomcertificateresponse.jobid, count)\n        }).then(() => {\n          this.sslModalClose()\n        })\n\n        Object.keys(formValues).forEach(key => {\n          if (key.includes('intermediate')) {\n            count = count + 1\n            const data = {\n              id: count,\n              certificate: formValues[key],\n              domainsuffix: formValues.dns,\n              name: key\n            }\n            api('uploadCustomCertificate', {}, 'POST', data).then(response => {\n              this.pollActionCompletion(response.uploadcustomcertificateresponse.jobid, count)\n            }).then(() => {\n              this.sslModalClose()\n            })\n          }\n        })\n\n        count = count <= 2 ? 3 : count + 1\n        data = {\n          id: count,\n          certificate: formValues.server,\n          domainsuffix: formValues.dns,\n          privatekey: formValues.pkcs\n        }\n        api('uploadCustomCertificate', {}, 'POST', data).then(response => {\n          this.pollActionCompletion(response.uploadcustomcertificateresponse.jobid, count)\n        }).then(() => {\n          this.sslModalClose()\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n  .breadcrumb-card {\n    margin-left: -24px;\n    margin-right: -24px;\n    margin-top: -16px;\n    margin-bottom: 12px;\n  }\n\n  .chart-card-inner {\n    text-align: center;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n  .intermediate-certificate {\n    opacity: 1;\n    transform: none;\n    transition: opacity 0.2s ease 0s, transform 0.5s ease;\n    will-change: transform;\n  }\n  .intermediate-certificate.fadeInUp-enter-active {\n    opacity: 0;\n    transform: translateY(10px);\n    transition: none;\n  }\n  .controls {\n    display: flex;\n    justify-content: flex-end;\n  }\n  .close-button {\n    margin-right: 20px;\n  }\n  .ant-form-item {\n    margin-bottom: 10px;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfraSummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InfraSummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InfraSummary.vue?vue&type=template&id=100d7ef2&scoped=true&\"\nimport script from \"./InfraSummary.vue?vue&type=script&lang=js&\"\nexport * from \"./InfraSummary.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InfraSummary.vue?vue&type=style&index=0&id=100d7ef2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"100d7ef2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}