(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54c8c480"],{"6df6":function(e,r,s){"use strict";var a=s("a31f"),t=s.n(a);t.a},a31f:function(e,r,s){},e898:function(e,r,s){"use strict";s.r(r);var a=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"form-layout"},[s("a-spin",{attrs:{spinning:e.loading}},[s("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[this.isAdminOrDomainAdmin()?e._e():s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.currentpassword"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.currentpassword.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["currentpassword",{rules:[{required:!0,message:e.$t("message.error.current.password")}]}],expression:"['currentpassword', {\n            rules: [{ required: true, message: $t('message.error.current.password') }]\n          }]"}],attrs:{placeholder:e.$t("message.error.current.password")}})],1),s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.new.password"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.password.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("message.error.new.password")}]}],expression:"['password', {\n            rules: [{ required: true, message: $t('message.error.new.password') }]\n          }]"}],attrs:{placeholder:e.$t("label.new.password")}})],1),s("a-form-item",[s("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.confirmpassword"))+" "),s("a-tooltip",{attrs:{title:e.apiParams.password.description}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),s("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirmpassword",{rules:[{required:!0,message:e.$t("message.error.confirm.password")},{validator:e.validateTwoPassword}]}],expression:"['confirmpassword', {\n            rules: [\n              {\n                required: true,\n                message: $t('message.error.confirm.password')\n              },\n              {\n                validator: validateTwoPassword\n              }\n            ]\n          }]"}],attrs:{placeholder:e.$t("label.confirmpassword.description")}})],1),s("div",{staticClass:"action-button",attrs:{span:24}},[s("a-button",{on:{click:e.closeAction}},[e._v(e._s(this.$t("label.cancel")))]),s("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(this.$t("label.ok")))])],1)],1)],1)],1)},t=[],o=(s("99af"),s("4160"),s("caad"),s("b0c0"),s("d3b7"),s("159b"),s("365c")),i={name:"ChangeUserPassword",props:{resource:{type:Object,required:!0}},data:function(){return{loading:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiParams={},this.apiConfig=this.$store.getters.apis.updateUser||{},this.apiConfig.params.forEach((function(r){e.apiParams[r.name]=r}))},methods:{isAdminOrDomainAdmin:function(){return["Admin","DomainAdmin"].includes(this.$store.getters.userInfo.roletype)},isValidValueForKey:function(e,r){return r in e&&null!=e[r]},validateTwoPassword:function(e,r,s){if(r&&0!==r.length)if("confirmpassword"===e.field){var a=this.form,t=this.$t("message.validate.equalto"),o=a.getFieldValue("password");o&&o!==r?s(t):s()}else s();else s()},handleSubmit:function(e){var r=this;e.preventDefault(),this.form.validateFields((function(e,s){if(!e){r.loading=!0;var a={id:r.resource.id,password:s.password};r.isValidValueForKey(s,"currentpassword")&&s.currentpassword.length>0&&(a.currentpassword=s.currentpassword),Object(o["a"])("updateUser",{},"POST",a).then((function(e){r.$notification.success({message:r.$t("label.action.change.password"),description:"".concat(r.$t("message.success.change.password")," ").concat(r.resource.username)}),r.$emit("refresh-data"),r.closeAction()})).catch((function(e){r.$notifyError(e)})).finally((function(){r.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},n=i,c=(s("6df6"),s("2877")),l=Object(c["a"])(n,a,t,!1,null,"23494fca",null);r["default"]=l.exports}}]);
//# sourceMappingURL=chunk-54c8c480.46376bc6.js.map