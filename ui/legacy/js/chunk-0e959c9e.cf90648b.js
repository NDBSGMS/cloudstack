(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e959c9e"],{a4de:function(t,e,a){"use strict";var i=a("d6f0"),n=a.n(i);n.a},d6f0:function(t,e,a){},e75c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form",{staticClass:"form"},[a("p",{domProps:{innerHTML:t._s(t.$t("message.select.affinity.groups"))}}),t.loading?a("div",{staticClass:"loading"},[a("a-icon",{staticStyle:{color:"#1890ff"},attrs:{type:"loading"}})],1):t._e(),a("div",{staticClass:"form__item"},[a("a-input-search",{staticStyle:{"margin-bottom":"10px"},attrs:{placeholder:t.$t("label.search")},on:{search:t.handleSearch},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),a("div",{staticClass:"form__item"},[a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",loading:t.loading,columns:t.columns,dataSource:t.items,rowKey:function(t){return t.id||t.name},pagination:{showSizeChanger:!0,total:t.total},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange}},on:{change:t.handleTableChange,"handle-search-filter":t.handleTableChange}})],1),a("div",{staticClass:"action-button",attrs:{span:24}},[a("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),a("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(this.$t("label.ok")))])],1)])},n=[],o=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("a15b"),a("d3b7"),a("3ca3"),a("ddb0"),a("365c")),s=a("dbd1"),c={name:"ChangeAffinity",props:{resource:{type:Object,required:!0}},inject:["parentFetchData"],data:function(){return{items:[],total:0,columns:[{dataIndex:"name",title:this.$t("label.name"),sorter:function(t,e){return Object(s["a"])(t[this.dataIndex]||"",e[this.dataIndex]||"")}},{dataIndex:"type",title:this.$t("label.type"),sorter:function(t,e){return Object(s["a"])(t[this.dataIndex]||"",e[this.dataIndex]||"")}},{dataIndex:"description",title:this.$t("label.description"),sorter:function(t,e){return Object(s["a"])(t[this.dataIndex]||"",e[this.dataIndex]||"")}}],selectedRowKeys:[],options:{page:1,pageSize:10,keyword:""},filter:"",loading:!1}},mounted:function(){var t=!0,e=!1,a=void 0;try{for(var i,n=this.resource.affinitygroup[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var o=i.value;this.selectedRowKeys.push(o.id)}}catch(s){e=!0,a=s}finally{try{t||null==n.return||n.return()}finally{if(e)throw a}}this.fetchData()},methods:{fetchData:function(){var t=this;this.loading=!0,this.items=[],this.total=0,Object(o["a"])("listAffinityGroups",{keyword:this.options.keyword,domainid:this.resource.domainid,accountid:this.resource.accountid,page:this.options.page,pageSize:this.options.pageSize,response:"json"}).then((function(e){t.total=e.listaffinitygroupsresponse.count,0!==t.total&&(t.items=e.listaffinitygroupsresponse.affinitygroup)})).finally((function(){t.loading=!1}))},onSelectChange:function(t){this.selectedRowKeys=t},handleSearch:function(t){this.filter=t,this.options.keyword=t,this.fetchData()},handleTableChange:function(t){this.options.page=t.current,this.options.pageSize=t.pageSize,this.fetchData()},closeAction:function(){this.$emit("close-action")},handleSubmit:function(){var t=this;this.loading=!0,Object(o["a"])("updateVMAffinityGroup",{id:this.resource.id,affinitygroupids:this.selectedRowKeys.join(",")}).then((function(e){t.$notification.success({message:t.$t("message.success.change.affinity.group")}),t.$parent.$parent.close(),t.parentFetchData()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))}}},r=c,l=(a("a4de"),a("2877")),d=Object(l["a"])(r,i,n,!1,null,"6b868a17",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-0e959c9e.cf90648b.js.map