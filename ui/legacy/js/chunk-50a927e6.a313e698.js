(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50a927e6"],{"166a":function(e,t,i){},"416d":function(e,t,i){"use strict";var a=i("166a"),r=i.n(a);r.a},"6bfd":function(e,t,i){"use strict";var a=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.checkBoxDecorator,{}],expression:"[checkBoxDecorator, {}]"}],staticClass:"pair-checkbox",on:{change:t.handleCheckChange}},[t._v(" "+t._s(t.checkBoxLabel)+" ")]),this.checked?a("a-form-item",{staticClass:"pair-select-container",attrs:{label:t.selectLabel}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:[t.selectDecorator,{initialValue:this.getSelectInitialValue()}],expression:"[selectDecorator, {\n        initialValue: this.getSelectInitialValue()\n      }]"}],attrs:{showSearch:"",optionFilterProp:"children",filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},on:{change:function(t){e.handleSelectChange(t)}}},t._l(t.selectOptions,(function(e){return a("a-select-option",{key:e.name,attrs:{disabled:!1===e.enabled}},[t._v(" "+t._s(e.name||e.description)+" ")])})),1)],1):t._e()],1)},r=[],n=(i("b0c0"),{name:"CheckBoxSelectPair",props:{resourceKey:{type:String,required:!0},checkBoxLabel:{type:String,required:!0},checkBoxDecorator:{type:String,default:""},selectOptions:{type:Array,required:!0},selectLabel:{type:String,default:""},selectDecorator:{type:String,default:""}},data:function(){return{checked:!1,selectedOption:""}},methods:{arrayHasItems:function(e){return null!==e&&void 0!==e&&Array.isArray(e)&&e.length>0},getSelectInitialValue:function(){if(this.arrayHasItems(this.selectOptions))for(var e=0;e<this.selectOptions.length;e++)if(!1!==this.selectOptions[e].enabled)return this.selectOptions[e].name;return""},handleCheckChange:function(e){this.checked=e.target.checked,this.checked&&this.arrayHasItems(this.selectOptions)&&(this.selectedOption=this.selectOptions[0].name),this.$emit("handle-checkpair-change",this.resourceKey,this.checked,"")},handleSelectChange:function(e){this.$emit("handle-checkpair-change",this.resourceKey,this.checked,e)}}}),s=n,o=(i("416d"),i("2877")),c=Object(o["a"])(s,a,r,!1,null,"7af55cbc",null);t["a"]=c.exports},"93f6":function(e,t,i){},d51c:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"form-layout"},[a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.handleSubmit}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.name"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.name.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:t.$t("message.error.name")}]}],expression:"['name', {\n            rules: [{ required: true, message: $t('message.error.name') }]\n          }]"}],attrs:{placeholder:this.$t("label.name")}})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.displaytext"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.displaytext.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["displaytext",{rules:[{required:!0,message:t.$t("message.error.description")}]}],expression:"['displaytext', {\n            rules: [{ required: true, message: $t('message.error.description') }]\n          }]"}],attrs:{placeholder:this.$t("label.displaytext")}})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.supportedservices"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.supportedservices.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("div",{staticClass:"supported-services-container",attrs:{"scroll-to":"last-child"}},[a("a-list",{attrs:{itemLayout:"horizontal",dataSource:this.supportedServices},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{},[a("CheckBoxSelectPair",{directives:[{name:"decorator",rawName:"v-decorator",value:["service."+e.name,{}],expression:"['service.'+item.name, {}]"}],attrs:{resourceKey:e.name,checkBoxLabel:e.description,checkBoxDecorator:"service."+e.name,selectOptions:e.provider,selectDecorator:e.name+".provider"},on:{"handle-checkpair-change":t.handleSupportedServiceChange}})],1)}}])})],1)]),this.connectivityServiceChecked?a("a-form-item",{attrs:{label:t.$t("label.service.connectivity.regionlevelvpccapabilitycheckbox")}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["regionlevelvpc",{initialValue:!0}],expression:"['regionlevelvpc', {initialValue: true}]"}],attrs:{defaultChecked:""}})],1):t._e(),this.connectivityServiceChecked?a("a-form-item",{attrs:{label:t.$t("label.service.connectivity.distributedroutercapabilitycheckbox")}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["distributedrouter",{initialValue:!0}],expression:"['distributedrouter', {initialValue: true}]"}],attrs:{defaultChecked:""}})],1):t._e(),this.sourceNatServiceChecked?a("a-form-item",{attrs:{label:t.$t("label.redundantrouter")}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["redundantrouter",{initialValue:!1}],expression:"['redundantrouter', {initialValue: false}]"}]})],1):t._e(),this.isAdmin()?a("a-form-item",{attrs:{label:t.$t("label.ispublic")}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["ispublic",{initialValue:this.isPublic}],expression:"['ispublic', {initialValue: this.isPublic}]"}],attrs:{defaultChecked:this.isPublic},on:{change:function(t){e.isPublic=t}}})],1):t._e(),this.isPublic?t._e():a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.domainid"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.domainid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["domainid",{rules:[{required:!0,message:""+this.$t("message.error.select")}]}],expression:"['domainid', {\n            rules: [\n              {\n                required: true,\n                message: `${this.$t('message.error.select')}`\n              }\n            ]\n          }]"}],attrs:{mode:"multiple",showSearch:"",optionFilterProp:"children",filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},loading:t.domainLoading,placeholder:this.$t("label.domain")}},t._l(this.domains,(function(e,i){return a("a-select-option",{key:i},[t._v(" "+t._s(e.name||e.description)+" ")])})),1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t.$t("label.zoneid"))+" "),a("a-tooltip",{attrs:{title:t.apiParams.zoneid.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{rules:[{validator:function(e,i,a){i&&i.length>1&&-1!==i.indexOf(0)&&a(t.$t("message.error.zone.combined")),a()}}]}],expression:"['zoneid', {\n            rules: [\n              {\n                validator: (rule, value, callback) => {\n                  if (value && value.length > 1 && value.indexOf(0) !== -1) {\n                    callback($t('message.error.zone.combined'))\n                  }\n                  callback()\n                }\n              }\n            ]\n          }]"}],attrs:{id:"zone-selection",mode:"multiple",showSearch:"",optionFilterProp:"children",filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},loading:t.zoneLoading,placeholder:this.$t("label.zone")}},t._l(this.zones,(function(e,i){return a("a-select-option",{key:i},[t._v(" "+t._s(e.name||e.description)+" ")])})),1)],1)],1),a("div",{staticClass:"action-button",attrs:{span:24}},[a("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),a("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(this.$t("label.ok")))])],1)],1)],1)},r=[],n=(i("a4d3"),i("e01a"),i("99af"),i("4160"),i("caad"),i("a15b"),i("b0c0"),i("b64b"),i("d3b7"),i("2532"),i("159b"),i("365c")),s=i("6bfd"),o={name:"AddVpcOffering",components:{CheckBoxSelectPair:s["a"]},data:function(){return{selectedDomains:[],selectedZones:[],isConserveMode:!0,isPublic:!0,domains:[],domainLoading:!1,zones:[],zoneLoading:!1,loading:!1,supportedServices:[],supportedServiceLoading:!1,connectivityServiceChecked:!1,sourceNatServiceChecked:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiParams={};var t=this.$store.getters.apis.createVPCOffering||{};t.params.forEach((function(t){e.apiParams[t.name]=t}))},created:function(){this.zones=[{id:null,name:this.$t("label.all.zone")}]},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.fetchDomainData(),this.fetchZoneData(),this.fetchSupportedServiceData()},isAdmin:function(){return["Admin"].includes(this.$store.getters.userInfo.roletype)},isSupportedServiceObject:function(e){return null!==e&&void 0!==e&&Object.keys(e).length>0&&e.constructor===Object&&"provider"in e},fetchDomainData:function(){var e=this,t={listAll:!0,details:"min"};this.domainLoading=!0,Object(n["a"])("listDomains",t).then((function(t){var i=t.listdomainsresponse.domain;e.domains=e.domains.concat(i)})).finally((function(){e.domainLoading=!1}))},fetchZoneData:function(){var e=this,t={listAll:!0};this.zoneLoading=!0,Object(n["a"])("listZones",t).then((function(t){var i=t.listzonesresponse.zone;e.zones=e.zones.concat(i)})).finally((function(){e.zoneLoading=!1}))},fetchSupportedServiceData:function(){for(var e in this.supportedServices=[],this.supportedServices.push({name:"Dhcp",provider:[{name:"VpcVirtualRouter"}]}),this.supportedServices.push({name:"Dns",provider:[{name:"VpcVirtualRouter"}]}),this.supportedServices.push({name:"Lb",provider:[{name:"VpcVirtualRouter"},{name:"InternalLbVm"}]}),this.supportedServices.push({name:"Gateway",provider:[{name:"VpcVirtualRouter"},{name:"BigSwitchBcf"}]}),this.supportedServices.push({name:"StaticNat",provider:[{name:"VpcVirtualRouter"},{name:"BigSwitchBcf"}]}),this.supportedServices.push({name:"SourceNat",provider:[{name:"VpcVirtualRouter"},{name:"BigSwitchBcf"}]}),this.supportedServices.push({name:"NetworkACL",provider:[{name:"VpcVirtualRouter"},{name:"BigSwitchBcf"}]}),this.supportedServices.push({name:"PortForwarding",provider:[{name:"VpcVirtualRouter"}]}),this.supportedServices.push({name:"UserData",provider:[{name:"VpcVirtualRouter"},{name:"ConfigDrive"}]}),this.supportedServices.push({name:"Vpn",provider:[{name:"VpcVirtualRouter"},{name:"BigSwitchBcf"}]}),this.supportedServices.push({name:"Connectivity",provider:[{name:"BigSwitchBcf"},{name:"NiciraNvp"},{name:"Ovs"},{name:"JuniperContrailVpcRouter"}]}),this.supportedServices){var t=this.supportedServices[e].name,i=t;this.supportedServices[e].description=i}},handleSupportedServiceChange:function(e,t,i){"Connectivity"===e&&(this.connectivityServiceChecked=t),"SourceNat"===e&&(this.sourceNatServiceChecked=t)},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,i){if(!e){var a={};if(a.name=i.name,a.displaytext=i.displaytext,!0!==i.ispublic){var r=i.domainid,s=null;if(r&&r.length>0){for(var o=[],c=0;c<r.length;c++)o=o.concat(t.domains[r[c]].id);s=o.join(",")}s&&(a.domainid=s)}var l=i.zoneid,d=null;if(l&&l.length>0){for(var u=[],p=0;p<l.length;p++)u=u.concat(t.zones[l[p]].id);d=u.join(",")}d&&(a.zoneid=d);var h=null,m=Object.keys(i),v=t;if(m.forEach((function(e,t){v.isSupportedServiceObject(i[e])&&(null==h&&(h={}),h[e]=i[e])})),null!=h){var f=Object.keys(h);for(var b in a.supportedservices=f.join(","),f)a["serviceProviderList["+b+"].service"]=f[b],a["serviceProviderList["+b+"].provider"]=h[f[b]].provider;var g=0;f.includes("Connectivity")&&(!0===i.regionlevelvpc&&(a["serviceCapabilityList["+g+"].service"]="Connectivity",a["serviceCapabilityList["+g+"].capabilitytype"]="RegionLevelVpc",a["serviceCapabilityList["+g+"].capabilityvalue"]=!0,g++),!0===i.distributedrouter&&(a["serviceCapabilityList["+g+"].service"]="Connectivity",a["serviceCapabilityList["+g+"].capabilitytype"]="DistributedRouter",a["serviceCapabilityList["+g+"].capabilityvalue"]=!0,g++)),f.includes("SourceNat")&&!0===i.redundantrouter&&(a["serviceCapabilityList["+g+"].service"]="SourceNat",a["serviceCapabilityList["+g+"].capabilitytype"]="RedundantRouter",a["serviceCapabilityList["+g+"].capabilityvalue"]=!0,g++)}else a.supportedservices="";Object(n["a"])("createVPCOffering",a).then((function(e){t.$message.success("".concat(t.$t("message.create.vpc.offering"),": ")+i.name),t.$emit("refresh-data"),t.closeAction()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},c=o,l=(i("f605"),i("2877")),d=Object(l["a"])(c,a,r,!1,null,"197921a7",null);t["default"]=d.exports},f605:function(e,t,i){"use strict";var a=i("93f6"),r=i.n(a);r.a}}]);
//# sourceMappingURL=chunk-50a927e6.a313e698.js.map