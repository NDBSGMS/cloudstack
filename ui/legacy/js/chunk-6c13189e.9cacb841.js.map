{"version":3,"sources":["webpack:///./src/views/project/AccountsTab.vue?0721","webpack:///./src/views/project/AccountsTab.vue?963e","webpack:///src/views/project/AccountsTab.vue","webpack:///./src/views/project/AccountsTab.vue?cf88","webpack:///./src/views/project/AccountsTab.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","loading","table","columns","dataSource","record","userid","accountid","account","scopedSlots","_u","key","fn","text","_v","_s","username","_e","getProjectRole","imProjectAdmin","length","staticClass","$t","slot","role","owner","on","$event","promoteAccount","updateProjectApi","params","filter","x","name","demoteAccount","$store","getters","apis","onShowConfirmDelete","page","pageSize","itemCount","total","changePage","changePageSize","props","value","staticRenderFns","resource","type","Object","required","data","user","projectAccount","roles","users","projectRoles","created","isProjectRolesSupported","splice","title","dataIndex","inject","mounted","fetchData","watch","newItem","id","methods","projectId","updateProject","fetchUsers","fetchProjectAccounts","fetchProjectRoles","isLoggedInUserProjectAdmin","includes","userInfo","roletype","projectRole","listProjectAccount","onMakeProjectOwner","swapowner","hasJobId","setTimeout","$confirm","okText","okType","cancelText","onOk","self","removeAccount","projectid","deleteOperation","checkForAddAsyncJob","obj","res","dispatch","jobid","jobId","description","status","component"],"mappings":"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","file":"js/chunk-6c13189e.9cacb841.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsTab.vue?vue&type=style&index=0&id=02c85c8a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsTab.vue?vue&type=style&index=0&id=02c85c8a&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-row',{attrs:{\"gutter\":12}},[_c('a-col',{attrs:{\"md\":24,\"lg\":24}},[_c('a-table',{attrs:{\"size\":\"small\",\"loading\":_vm.loading.table,\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"pagination\":false,\"rowKey\":function (record) { return record.userid ? record.userid : (record.accountid || record.account); }},scopedSlots:_vm._u([{key:\"user\",fn:function(text, record){return (record.userid)?_c('span',{},[_vm._v(\" \"+_vm._s(record.username)+\" \")]):_vm._e()}},{key:\"projectrole\",fn:function(text, record){return (record.projectroleid)?_c('span',{},[_vm._v(\" \"+_vm._s(_vm.getProjectRole(record))+\" \")]):_vm._e()}},{key:\"action\",fn:function(text, record){return (_vm.imProjectAdmin && _vm.dataSource.length > 1)?_c('span',{staticClass:\"account-button-action\"},[_c('a-tooltip',{attrs:{\"slot\":\"title\",\"placement\":\"top\",\"title\":record.userid ? _vm.$t('label.make.user.project.owner') : _vm.$t('label.make.project.owner')},slot:\"title\"},[(record.role !== _vm.owner)?_c('a-button',{attrs:{\"type\":\"default\",\"shape\":\"circle\",\"icon\":\"arrow-up\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.promoteAccount(record)}}}):_vm._e()],1),(_vm.updateProjectApi.params.filter(function (x) { return x.name === 'swapowner'; }).length > 0)?_c('a-tooltip',{attrs:{\"slot\":\"title\",\"placement\":\"top\",\"title\":record.userid ? _vm.$t('label.demote.project.owner.user') : _vm.$t('label.demote.project.owner')},slot:\"title\"},[(record.role === _vm.owner)?_c('a-button',{attrs:{\"type\":\"default\",\"shape\":\"circle\",\"icon\":\"arrow-down\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.demoteAccount(record)}}}):_vm._e()],1):_vm._e(),_c('a-tooltip',{attrs:{\"slot\":\"title\",\"placement\":\"top\",\"title\":record.userid ? _vm.$t('label.remove.project.user') : _vm.$t('label.remove.project.account')},slot:\"title\"},[_c('a-button',{attrs:{\"type\":\"danger\",\"shape\":\"circle\",\"icon\":\"delete\",\"size\":\"small\",\"disabled\":!('deleteAccountFromProject' in _vm.$store.getters.apis)},on:{\"click\":function($event){return _vm.onShowConfirmDelete(record)}}})],1)],1):_vm._e()}}],null,true)}),_c('a-pagination',{staticClass:\"row-element\",attrs:{\"size\":\"small\",\"current\":_vm.page,\"pageSize\":_vm.pageSize,\"total\":_vm.itemCount,\"showTotal\":function (total) { return ((_vm.$t('label.total')) + \" \" + total + \" \" + (_vm.$t('label.items'))); },\"pageSizeOptions\":['10', '20', '40', '80', '100'],\"showSizeChanger\":\"\"},on:{\"change\":_vm.changePage,\"showSizeChange\":_vm.changePageSize},scopedSlots:_vm._u([{key:\"buildOptionText\",fn:function(props){return [_c('span',[_vm._v(_vm._s(props.value)+\" / \"+_vm._s(_vm.$t('label.page')))])]}}])})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div>\n    <a-row :gutter=\"12\">\n      <a-col :md=\"24\" :lg=\"24\">\n        <a-table\n          size=\"small\"\n          :loading=\"loading.table\"\n          :columns=\"columns\"\n          :dataSource=\"dataSource\"\n          :pagination=\"false\"\n          :rowKey=\"record => record.userid ? record.userid : (record.accountid || record.account)\">\n          <span slot=\"user\" slot-scope=\"text, record\" v-if=\"record.userid\">\n            {{ record.username }}\n          </span>\n          <span slot=\"projectrole\" slot-scope=\"text, record\" v-if=\"record.projectroleid\">\n            {{ getProjectRole(record) }}\n          </span>\n          <span v-if=\"imProjectAdmin && dataSource.length > 1\" slot=\"action\" slot-scope=\"text, record\" class=\"account-button-action\">\n            <a-tooltip\n              slot=\"title\"\n              placement=\"top\"\n              :title=\"record.userid ? $t('label.make.user.project.owner') : $t('label.make.project.owner')\">\n              <a-button\n                v-if=\"record.role !== owner\"\n                type=\"default\"\n                shape=\"circle\"\n                icon=\"arrow-up\"\n                size=\"small\"\n                @click=\"promoteAccount(record)\" />\n            </a-tooltip>\n            <a-tooltip\n              slot=\"title\"\n              placement=\"top\"\n              :title=\"record.userid ? $t('label.demote.project.owner.user') : $t('label.demote.project.owner')\"\n              v-if=\"updateProjectApi.params.filter(x => x.name === 'swapowner').length > 0\">\n              <a-button\n                v-if=\"record.role === owner\"\n                type=\"default\"\n                shape=\"circle\"\n                icon=\"arrow-down\"\n                size=\"small\"\n                @click=\"demoteAccount(record)\" />\n            </a-tooltip>\n            <a-tooltip\n              slot=\"title\"\n              placement=\"top\"\n              :title=\"record.userid ? $t('label.remove.project.user') : $t('label.remove.project.account')\">\n              <a-button\n                type=\"danger\"\n                shape=\"circle\"\n                icon=\"delete\"\n                size=\"small\"\n                :disabled=\"!('deleteAccountFromProject' in $store.getters.apis)\"\n                @click=\"onShowConfirmDelete(record)\"/>\n            </a-tooltip>\n          </span>\n        </a-table>\n        <a-pagination\n          class=\"row-element\"\n          size=\"small\"\n          :current=\"page\"\n          :pageSize=\"pageSize\"\n          :total=\"itemCount\"\n          :showTotal=\"total => `${$t('label.total')} ${total} ${$t('label.items')}`\"\n          :pageSizeOptions=\"['10', '20', '40', '80', '100']\"\n          @change=\"changePage\"\n          @showSizeChange=\"changePageSize\"\n          showSizeChanger>\n          <template slot=\"buildOptionText\" slot-scope=\"props\">\n            <span>{{ props.value }} / {{ $t('label.page') }}</span>\n          </template>\n        </a-pagination>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\n\nexport default {\n  name: 'AccountsTab',\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      columns: [],\n      dataSource: [],\n      imProjectAdmin: false,\n      loading: {\n        user: false,\n        projectAccount: false,\n        roles: false,\n        table: false\n      },\n      page: 1,\n      pageSize: 10,\n      itemCount: 0,\n      users: [],\n      projectRoles: [],\n      owner: 'Admin',\n      role: 'Regular'\n    }\n  },\n  created () {\n    this.columns = [\n      {\n        title: this.$t('label.account'),\n        dataIndex: 'account',\n        scopedSlots: { customRender: 'account' }\n      },\n      {\n        title: this.$t('label.roletype'),\n        dataIndex: 'role',\n        scopedSlots: { customRender: 'role' }\n      },\n      {\n        title: this.$t('label.action'),\n        dataIndex: 'action',\n        scopedSlots: { customRender: 'action' }\n      }\n    ]\n    if (this.isProjectRolesSupported()) {\n      this.columns.splice(1, 0, {\n        title: this.$t('label.user'),\n        dataIndex: 'userid',\n        scopedSlots: { customRender: 'user' }\n      })\n      this.columns.splice(this.columns.length - 1, 0, {\n        title: this.$t('label.project.role'),\n        dataIndex: 'projectroleid',\n        scopedSlots: { customRender: 'projectrole' }\n      })\n    }\n    this.page = 1\n    this.pageSize = 10\n    this.itemCount = 0\n  },\n  inject: ['parentFetchData'],\n  mounted () {\n    this.fetchData()\n  },\n  watch: {\n    resource (newItem, oldItem) {\n      if (!newItem || !newItem.id) {\n        return\n      }\n      this.resource = newItem\n      this.fetchData()\n    }\n  },\n  methods: {\n    fetchData () {\n      const params = {}\n      params.projectId = this.resource.id\n      params.page = this.page\n      params.pageSize = this.pageSize\n      this.updateProjectApi = this.$store.getters.apis.updateProject\n      this.fetchUsers()\n      this.fetchProjectAccounts(params)\n      if (this.isProjectRolesSupported()) {\n        this.fetchProjectRoles()\n      }\n    },\n    changePage (page, pageSize) {\n      this.page = page\n      this.pageSize = pageSize\n      this.fetchData()\n    },\n    changePageSize (currentPage, pageSize) {\n      this.page = 0\n      this.pageSize = pageSize\n      this.fetchData()\n    },\n    isLoggedInUserProjectAdmin (user) {\n      if (['Admin', 'DomainAdmin'].includes(this.$store.getters.userInfo.roletype)) {\n        return true\n      }\n      // If I'm the logged in user Or if I'm the logged in account And I'm the owner\n      if (((user.userid && user.userid === this.$store.getters.userInfo.id) ||\n        user.account === this.$store.getters.userInfo.account) &&\n        user.role === this.owner) {\n        return true\n      }\n      return false\n    },\n    isProjectRolesSupported () {\n      return ('listProjectRoles' in this.$store.getters.apis)\n    },\n    getProjectRole (record) {\n      const projectRole = this.projectRoles.filter(role => role.id === record.projectroleid)\n      return projectRole[0].name || projectRole[0].id || null\n    },\n    fetchUsers () {\n      this.loading.user = true\n      api('listUsers', { listall: true }).then(response => {\n        this.users = response.listusersresponse.user || []\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading.user = false\n      })\n    },\n    fetchProjectRoles () {\n      this.loading.roles = true\n      api('listProjectRoles', { projectId: this.resource.id }).then(response => {\n        this.projectRoles = response.listprojectrolesresponse.projectrole || []\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading.roles = false\n      })\n    },\n    fetchProjectAccounts (params) {\n      this.loading.projectAccount = true\n      api('listProjectAccounts', params).then(json => {\n        const listProjectAccount = json.listprojectaccountsresponse.projectaccount\n        const itemCount = json.listprojectaccountsresponse.count\n        if (!listProjectAccount || listProjectAccount.length === 0) {\n          this.dataSource = []\n          return\n        }\n        for (const projectAccount of listProjectAccount) {\n          this.imProjectAdmin = this.isLoggedInUserProjectAdmin(projectAccount)\n          if (this.imProjectAdmin) {\n            break\n          }\n        }\n\n        this.itemCount = itemCount\n        this.dataSource = listProjectAccount\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading.projectAccount = false\n      })\n    },\n    onMakeProjectOwner (record) {\n      const title = this.$t('label.make.project.owner')\n      const loading = this.$message.loading(title + `${this.$t('label.in.progress.for')} ` + record.account, 0)\n      const params = {}\n      params.id = this.resource.id\n      params.account = record.account\n      this.updateProject(record, params, title, loading)\n    },\n    promoteAccount (record) {\n      var title = this.$t('label.make.project.owner')\n      const loading = this.$message.loading(title + `${this.$t('label.in.progress.for')} ` + record.account, 0)\n      const params = {}\n\n      params.id = this.resource.id\n      if (record.userid) {\n        params.userid = record.userid\n        // params.accountid = (record.user && record.user[0].accountid) || record.accountid\n        title = this.$t('label.make.user.project.owner')\n      } else {\n        params.account = record.account\n      }\n      params.roletype = this.owner\n      params.swapowner = false\n      this.updateProject(record, params, title, loading)\n    },\n    demoteAccount (record) {\n      var title = this.$t('label.demote.project.owner')\n      const loading = this.$message.loading(title + `${this.$t('label.in.progress.for')} ` + record.account, 0)\n      const params = {}\n      if (record.userid) {\n        params.userid = record.userid\n        // params.accountid = (record.user && record.user[0].accountid) || record.accountid\n        title = this.$t('label.demote.project.owner.user')\n      } else {\n        params.account = record.account\n      }\n\n      params.id = this.resource.id\n      params.roletype = 'Regular'\n      params.swapowner = false\n      this.updateProject(record, params, title, loading)\n    },\n    updateProject (record, params, title, loading) {\n      api('updateProject', params).then(json => {\n        const hasJobId = this.checkForAddAsyncJob(json, title, record.account)\n        if (hasJobId) {\n          this.fetchData()\n        }\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        setTimeout(loading, 1000)\n        this.parentFetchData()\n      })\n    },\n    onShowConfirmDelete (record) {\n      const self = this\n      const title = `${this.$t('label.deleteconfirm')} ${this.$t('label.account')}`\n\n      this.$confirm({\n        title: title,\n        okText: this.$t('label.ok'),\n        okType: 'danger',\n        cancelText: this.$t('label.cancel'),\n        onOk () {\n          self.removeAccount(record)\n        }\n      })\n    },\n    removeAccount (record) {\n      const title = this.$t('label.remove.project.account')\n      const loading = this.$message.loading(title + `${this.$t('label.in.progress.for')} ` + record.account, 0)\n      const params = {}\n      params.projectid = this.resource.id\n      if (record.userid) {\n        params.userid = record.userid\n        this.deleteOperation('deleteUserFromProject', params, record, title, loading)\n      } else {\n        params.account = record.account\n        this.deleteOperation('deleteAccountFromProject', params, record, title, loading)\n      }\n    },\n    deleteOperation (apiName, params, record, title, loading) {\n      api(apiName, params).then(json => {\n        const hasJobId = this.checkForAddAsyncJob(json, title, record.account)\n        if (hasJobId) {\n          this.fetchData()\n        }\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        setTimeout(loading, 1000)\n      })\n    },\n    checkForAddAsyncJob (json, title, description) {\n      let hasJobId = false\n\n      for (const obj in json) {\n        if (obj.includes('response')) {\n          for (const res in json[obj]) {\n            if (res === 'jobid') {\n              hasJobId = true\n              const jobId = json[obj][res]\n              this.$store.dispatch('AddAsyncJob', {\n                title: title,\n                jobid: jobId,\n                description: description,\n                status: 'progress'\n              })\n            }\n          }\n        }\n      }\n\n      return hasJobId\n    }\n  }\n}\n</script>\n\n<style scoped>\n  /deep/.ant-table-fixed-right {\n    z-index: 5;\n  }\n\n  .row-element {\n    margin-top: 10px;\n    margin-bottom: 10px;\n  }\n\n  .account-button-action button {\n    margin-right: 5px;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AccountsTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AccountsTab.vue?vue&type=template&id=02c85c8a&scoped=true&\"\nimport script from \"./AccountsTab.vue?vue&type=script&lang=js&\"\nexport * from \"./AccountsTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AccountsTab.vue?vue&type=style&index=0&id=02c85c8a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02c85c8a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}