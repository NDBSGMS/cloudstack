{"version":3,"sources":["webpack:///./src/views/infra/network/DedicatedVLANTab.vue?bbb0","webpack:///./src/views/infra/network/DedicatedVLANTab.vue?5080","webpack:///src/views/infra/network/DedicatedVLANTab.vue","webpack:///./src/views/infra/network/DedicatedVLANTab.vue?99a0","webpack:///./src/views/infra/network/DedicatedVLANTab.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fetchLoading","staticStyle","$store","getters","apis","on","handleOpenModal","_v","_s","$t","columns","items","record","id","scopedSlots","_u","key","fn","$event","handleDelete","staticClass","page","pageSize","totalCount","total","handleChangePage","handleChangePageSize","props","value","handleSubmit","model","callback","$$v","modal","expression","formLoading","form","directives","name","rawName","rules","required","message","handleScopeChange","selectedScope","handleDomainChange","_l","domain","account","_e","project","staticRenderFns","resource","type","Object","loading","Boolean","default","inject","data","domains","accounts","projects","beforeCreate","$form","createForm","mounted","fetchData","watch","newData","methods","resetFields","physicalnetworkid","description","error","response","errorresponse","errortext","duration","fetchDomains","details","listAll","fetchAccounts","domainid","e","fetchProjects","parentStartLoading","item","title","jobid","releasededicatedguestvlanrangeresponse","status","jobId","successMethod","errorMessage","errorMethod","loadingMessage","catchMessage","catchMethod","console","log","preventDefault","validateFields","errors","vlanrange","fieldValues","range","projectid","fetchBasedOnScope","getFieldValue","setTimeout","currentPage","component"],"mappings":"kHAAA,yBAAulB,EAAG,G,yCCA1lB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,SAAWN,EAAIO,eAAe,CAACH,EAAG,WAAW,CAACI,YAAY,CAAC,MAAQ,QAAQF,MAAM,CAAC,WAAa,2BAA4BN,EAAIS,OAAOC,QAAQC,MAAM,KAAO,SAAS,KAAO,QAAQC,GAAG,CAAC,MAAQZ,EAAIa,kBAAkB,CAACb,EAAIc,GAAGd,EAAIe,GAAGf,EAAIgB,GAAG,qCAAqCZ,EAAG,UAAU,CAACI,YAAY,CAAC,aAAa,OAAO,aAAa,QAAQF,MAAM,CAAC,KAAO,QAAQ,QAAUN,EAAIO,aAAa,QAAUP,EAAIiB,QAAQ,WAAajB,EAAIkB,MAAM,YAAa,EAAM,OAAS,SAAUC,GAAU,OAAOA,EAAOC,KAAOC,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASL,GAAQ,MAAO,CAACf,EAAG,eAAe,CAACE,MAAM,CAAC,MAAUN,EAAIgB,GAAG,gBAAmB,IAAK,OAAShB,EAAIgB,GAAG,aAAa,WAAahB,EAAIgB,GAAG,YAAY,UAAY,OAAOJ,GAAG,CAAC,QAAU,SAASa,GAAQ,OAAOzB,EAAI0B,aAAaP,MAAW,CAACf,EAAG,WAAW,CAACE,MAAM,CAAC,WAAa,mCAAoCN,EAAIS,OAAOC,QAAQC,MAAM,KAAO,SAAS,KAAO,SAAS,MAAQ,aAAa,UAAUP,EAAG,eAAe,CAACuB,YAAY,aAAarB,MAAM,CAAC,KAAO,QAAQ,QAAUN,EAAI4B,KAAK,SAAW5B,EAAI6B,SAAS,MAAQ7B,EAAI8B,WAAW,UAAY,SAAUC,GAAS,OAAS/B,EAAIgB,GAAG,eAAkB,IAAMe,EAAQ,IAAO/B,EAAIgB,GAAG,gBAAoB,gBAAkB,CAAC,KAAM,KAAM,KAAM,KAAM,OAAO,gBAAkB,IAAIJ,GAAG,CAAC,OAASZ,EAAIgC,iBAAiB,eAAiBhC,EAAIiC,sBAAsBZ,YAAYrB,EAAIsB,GAAG,CAAC,CAACC,IAAI,kBAAkBC,GAAG,SAASU,GAAO,MAAO,CAAC9B,EAAG,OAAO,CAACJ,EAAIc,GAAGd,EAAIe,GAAGmB,EAAMC,OAAO,MAAMnC,EAAIe,GAAGf,EAAIgB,GAAG,yBAAyBZ,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,iCAAiC,cAAe,GAAOJ,GAAG,CAAC,GAAKZ,EAAIoC,cAAcC,MAAM,CAACF,MAAOnC,EAAS,MAAEsC,SAAS,SAAUC,GAAMvC,EAAIwC,MAAMD,GAAKE,WAAW,UAAU,CAACrC,EAAG,SAAS,CAACE,MAAM,CAAC,SAAWN,EAAI0C,cAAc,CAACtC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAON,EAAI2C,KAAK,OAAS,YAAY/B,GAAG,CAAC,OAASZ,EAAIoC,eAAe,CAAChC,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,qBAAqB,CAACZ,EAAG,UAAU,CAACwC,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcX,MAAM,CAAE,QAAS,CAC9hEY,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAU,GAAMjD,EAAIgB,GAAG,sBAC/CyB,WAAW,kHAAkH,GAAGrC,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,iBAAiB,CAACZ,EAAG,WAAW,CAACE,MAAM,CAAC,aAAe,WAAWM,GAAG,CAAC,OAASZ,EAAIkD,mBAAmBb,MAAM,CAACF,MAAOnC,EAAiB,cAAEsC,SAAS,SAAUC,GAAMvC,EAAImD,cAAcZ,GAAKE,WAAW,kBAAkB,CAACrC,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAIgB,GAAG,qBAAqBZ,EAAG,kBAAkB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIc,GAAGd,EAAIe,GAAGf,EAAIgB,GAAG,sBAAsB,IAAI,GAAGZ,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,kBAAkB,CAACZ,EAAG,WAAW,CAACwC,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcX,MAAM,CAAE,SAAU,CAC/sBY,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAU,GAAMjD,EAAIgB,GAAG,sBAC/CyB,WAAW,gHAAgH7B,GAAG,CAAC,OAASZ,EAAIoD,qBAAqBpD,EAAIqD,GAAIrD,EAAW,SAAE,SAASsD,GAAQ,OAAOlD,EAAG,kBAAkB,CAACmB,IAAI+B,EAAOlC,GAAGd,MAAM,CAAC,MAAQgD,EAAOlC,KAAK,CAACpB,EAAIc,GAAGd,EAAIe,GAAGuC,EAAOT,YAAW,IAAI,GAA0B,YAAtB7C,EAAImD,cAA6B/C,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,mBAAmB,CAACZ,EAAG,WAAW,CAACwC,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcX,MAAM,CAAE,UAAW,CAC3eY,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAU,GAAMjD,EAAIgB,GAAG,sBAC/CyB,WAAW,kHAAkHzC,EAAIqD,GAAIrD,EAAY,UAAE,SAASuD,GAAS,OAAOnD,EAAG,kBAAkB,CAACmB,IAAIgC,EAAQnC,GAAGd,MAAM,CAAC,MAAQiD,EAAQV,OAAO,CAAC7C,EAAIc,GAAG,IAAId,EAAIe,GAAGwC,EAAQV,MAAM,UAAS,IAAI,GAAG7C,EAAIwD,KAA4B,YAAtBxD,EAAImD,cAA6B/C,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQN,EAAIgB,GAAG,mBAAmB,CAACZ,EAAG,WAAW,CAACwC,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcX,MAAM,CAAE,UAAW,CAC/dY,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAU,GAAMjD,EAAIgB,GAAG,sBAC/CyB,WAAW,kHAAkHzC,EAAIqD,GAAIrD,EAAY,UAAE,SAASyD,GAAS,OAAOrD,EAAG,kBAAkB,CAACmB,IAAIkC,EAAQrC,GAAGd,MAAM,CAAC,MAAQmD,EAAQrC,KAAK,CAACpB,EAAIc,GAAG,IAAId,EAAIe,GAAG0C,EAAQZ,MAAM,UAAS,IAAI,GAAG7C,EAAIwD,MAAM,IAAI,IAAI,IAAI,IAChUE,EAAkB,G,4CC+HtB,GACEb,KAAM,mBACNX,MAAO,CACLyB,SAAU,CACRC,KAAMC,OACNb,UAAU,GAEZc,QAAS,CACPF,KAAMG,QACNC,SAAS,IAGbC,OAAQ,CAAC,qBAAsB,uBAC/BC,KAbF,WAcI,MAAO,CACL3D,cAAc,EACdmC,aAAa,EACbxB,MAAO,GACPiD,QAAS,GACTC,SAAU,GACVC,SAAU,GACV7B,OAAO,EACPW,cAAe,UACfrB,WAAY,EACZF,KAAM,EACNC,SAAU,GACVZ,QAAS,CACf,CACQ,MAAR,2BACQ,UAAR,kBAEA,CACQ,MAAR,wBACQ,UAAR,UAEA,CACQ,MAAR,yBACQ,UAAR,WAEA,CACQ,MAAR,wBACQ,YAAR,CAAU,aAAV,eAKEqD,aA9CF,WA+CIrE,KAAK0C,KAAO1C,KAAKsE,MAAMC,WAAWvE,OAEpCwE,QAjDF,WAkDIxE,KAAKyE,aAEPC,MAAO,CACLb,QADJ,SACA,MACWc,GAAW3E,KAAK0D,SAASvC,IAC5BnB,KAAKyE,cAIXG,QAAS,CACPH,UADJ,WACA,WACMzE,KAAK0C,KAAKmC,cACV7E,KAAKyC,aAAc,EACnB,OAAN,OAAM,CAAN,gCACQqC,kBAAmB9E,KAAK0D,SAASvC,GACjCQ,KAAM3B,KAAK2B,KACXC,SAAU5B,KAAK4B,WACvB,kBACQ,EAAR,yEACQ,EAAR,8DACA,mBACQ,EAAR,qBACUoB,QAAS,GAAnB,0DACU+B,YAAaC,EAAMC,SAAShB,KAAKiB,cAAcC,UAC/CC,SAAU,OAEpB,oBACQ,EAAR,eACQ,EAAR,0BAGIC,aAtBJ,WAsBA,WACM,OAAN,OAAM,CAAN,eACQC,QAAS,MACTC,SAAS,IACjB,kBACQ,EAAR,yCACY,EAAZ,kBACU,EAAV,qBACYlC,OAAQ,EAApB,gBAEU,EAAV,+CAEU,EAAV,qBACYA,OAAQ,OAGZ,EAAR,kBACA,mBACQ,EAAR,gBACQ,EAAR,mBAGImC,cA5CJ,SA4CA,cACMxF,KAAKyC,aAAc,EACnB,OAAN,OAAM,CAAN,gBACQgD,SAAUC,EACVJ,QAAS,MACTC,SAAS,IACjB,kBACQ,EAAR,wCACA,kCACY,EAAZ,kBACU,EAAV,qBACYjC,QAAS,EAArB,mBAGU,EAAV,qBACYA,QAAS,OAGb,EAAR,kBACA,mBACQ,EAAR,gBACQ,EAAR,mBAGIqC,cApEJ,SAoEA,cACM3F,KAAKyC,aAAc,EACnB,OAAN,OAAM,CAAN,gBACQgD,SAAUC,EACVJ,QAAS,QACjB,kBACQ,EAAR,wCACA,kCACY,EAAZ,kBACU,EAAV,qBACY9B,QAAS,EAArB,iBAGU,EAAV,qBACYA,QAAS,OAGb,EAAR,kBACA,mBACQ,EAAR,gBACQ,EAAR,mBAGI/B,aA3FJ,SA2FA,cACMzB,KAAK4F,qBACL,OAAN,OAAM,CAAN,kCACQzE,GAAI0E,EAAK1E,KACjB,kBACQ,EAAR,+BACU2E,MAAO,GAAjB,mIACUC,MAAOd,EAASe,uCAAuCD,MACvDE,OAAQ,aAEV,EAAR,UACUC,MAAOjB,EAASe,uCAAuCD,MACvDI,cAAe,WACb,EAAZ,YACY,EAAZ,uBAEUC,aAAc,EAAxB,4BACUC,YAAa,WACX,EAAZ,YACY,EAAZ,uBAEUC,eAAgB,GAA1B,gDACUC,aAAc,EAAxB,sCACUC,YAAa,WACX,EAAZ,YACY,EAAZ,4BAGA,mBACQC,QAAQC,IAAI1B,GACZ,EAAR,+CACQ,EAAR,YACQ,EAAR,0BAGI7C,aA9HJ,SA8HA,cACMuD,EAAEiB,iBACF3G,KAAK0C,KAAKkE,gBAAe,SAA/B,GACQ,IAAIC,EAAJ,CAEA,EAAR,eACQ,EAAR,qBACQ,IAAR,0BAEQ,OAAR,OAAQ,CAAR,0BACU/B,kBAAmB,EAA7B,YACUgC,UAAWC,EAAYC,MACvBvB,SAAUsB,EAAY1D,OACtBC,QAASyD,EAAYzD,QACrB2D,UAAWF,EAAYvD,UACjC,kBACU,EAAV,SACU,EAAV,eACA,mBACU,EAAV,gBACU,EAAV,SACU,EAAV,oBAII0D,kBAvJJ,SAuJA,GACgB,YAANxB,GAAiB1F,KAAKwF,cAAcxF,KAAK0C,KAAKyE,cAAc,WACtD,YAANzB,GAAiB1F,KAAK2F,cAAc3F,KAAK0C,KAAKyE,cAAc,YAElEhE,mBA3JJ,WA2JA,WACMiE,YAAW,WACT,EAAR,qCACA,MAEInE,kBAhKJ,SAgKA,GACMjD,KAAKkH,kBAAkBxB,IAEzB9E,gBAnKJ,WAoKMZ,KAAKuC,OAAQ,EACbvC,KAAKyC,aAAc,EACnBzC,KAAKqF,gBAEPtD,iBAxKJ,SAwKA,KACM/B,KAAK2B,KAAOA,EACZ3B,KAAK4B,SAAWA,EAChB5B,KAAKyE,aAEPzC,qBA7KJ,SA6KA,KACMhC,KAAK2B,KAAO0F,EACZrH,KAAK4B,SAAWA,EAChB5B,KAAKyE,eCnX6W,I,wBCQpX6C,EAAY,eACd,EACAxH,EACA2D,GACA,EACA,KACA,WACA,MAIa,aAAA6D,E","file":"js/chunk-be795ca0.8b9df9e8.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DedicatedVLANTab.vue?vue&type=style&index=0&id=7134a903&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DedicatedVLANTab.vue?vue&type=style&index=0&id=7134a903&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-spin',{attrs:{\"spinning\":_vm.fetchLoading}},[_c('a-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"disabled\":!('dedicateGuestVlanRange' in _vm.$store.getters.apis),\"type\":\"dashed\",\"icon\":\"plus\"},on:{\"click\":_vm.handleOpenModal}},[_vm._v(_vm._s(_vm.$t('label.dedicate.vlan.vni.range')))]),_c('a-table',{staticStyle:{\"overflow-y\":\"auto\",\"margin-top\":\"20px\"},attrs:{\"size\":\"small\",\"loading\":_vm.fetchLoading,\"columns\":_vm.columns,\"dataSource\":_vm.items,\"pagination\":false,\"rowKey\":function (record) { return record.id; }},scopedSlots:_vm._u([{key:\"actions\",fn:function(record){return [_c('a-popconfirm',{attrs:{\"title\":((_vm.$t('label.delete')) + \"?\"),\"okText\":_vm.$t('label.yes'),\"cancelText\":_vm.$t('label.no'),\"placement\":\"top\"},on:{\"confirm\":function($event){return _vm.handleDelete(record)}}},[_c('a-button',{attrs:{\"disabled\":!('releaseDedicatedGuestVlanRange' in _vm.$store.getters.apis),\"icon\":\"delete\",\"type\":\"danger\",\"shape\":\"circle\"}})],1)]}}])}),_c('a-pagination',{staticClass:\"pagination\",attrs:{\"size\":\"small\",\"current\":_vm.page,\"pageSize\":_vm.pageSize,\"total\":_vm.totalCount,\"showTotal\":function (total) { return ((_vm.$t('label.total')) + \" \" + total + \" \" + (_vm.$t('label.items'))); },\"pageSizeOptions\":['10', '20', '40', '80', '100'],\"showSizeChanger\":\"\"},on:{\"change\":_vm.handleChangePage,\"showSizeChange\":_vm.handleChangePageSize},scopedSlots:_vm._u([{key:\"buildOptionText\",fn:function(props){return [_c('span',[_vm._v(_vm._s(props.value)+\" / \"+_vm._s(_vm.$t('label.page')))])]}}])}),_c('a-modal',{attrs:{\"title\":_vm.$t('label.dedicate.vlan.vni.range'),\"maskClosable\":false},on:{\"ok\":_vm.handleSubmit},model:{value:(_vm.modal),callback:function ($$v) {_vm.modal=$$v},expression:\"modal\"}},[_c('a-spin',{attrs:{\"spinning\":_vm.formLoading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.vlanrange')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['range', {\n              rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }]\n            }]),expression:\"['range', {\\n              rules: [{ required: true, message: `${$t('label.required')}` }]\\n            }]\"}]})],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.scope')}},[_c('a-select',{attrs:{\"defaultValue\":\"account\"},on:{\"change\":_vm.handleScopeChange},model:{value:(_vm.selectedScope),callback:function ($$v) {_vm.selectedScope=$$v},expression:\"selectedScope\"}},[_c('a-select-option',{attrs:{\"value\":\"account\"}},[_vm._v(_vm._s(_vm.$t('label.account')))]),_c('a-select-option',{attrs:{\"value\":\"project\"}},[_vm._v(_vm._s(_vm.$t('label.project')))])],1)],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.domain')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['domain', {\n              rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }]\n            }]),expression:\"['domain', {\\n              rules: [{ required: true, message: `${$t('label.required')}` }]\\n            }]\"}],on:{\"change\":_vm.handleDomainChange}},_vm._l((_vm.domains),function(domain){return _c('a-select-option',{key:domain.id,attrs:{\"value\":domain.id}},[_vm._v(_vm._s(domain.name))])}),1)],1),(_vm.selectedScope === 'account')?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.account')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['account', {\n              rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }]\n            }]),expression:\"['account', {\\n              rules: [{ required: true, message: `${$t('label.required')}` }]\\n            }]\"}]},_vm._l((_vm.accounts),function(account){return _c('a-select-option',{key:account.id,attrs:{\"value\":account.name}},[_vm._v(\" \"+_vm._s(account.name)+\" \")])}),1)],1):_vm._e(),(_vm.selectedScope === 'project')?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.project')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['project', {\n              rules: [{ required: true, message: (\"\" + (_vm.$t('label.required'))) }]\n            }]),expression:\"['project', {\\n              rules: [{ required: true, message: `${$t('label.required')}` }]\\n            }]\"}]},_vm._l((_vm.projects),function(project){return _c('a-select-option',{key:project.id,attrs:{\"value\":project.id}},[_vm._v(\" \"+_vm._s(project.name)+\" \")])}),1)],1):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-spin :spinning=\"fetchLoading\">\n    <a-button\n      :disabled=\"!('dedicateGuestVlanRange' in $store.getters.apis)\"\n      type=\"dashed\"\n      icon=\"plus\"\n      style=\"width: 100%\"\n      @click=\"handleOpenModal\">{{ $t('label.dedicate.vlan.vni.range') }}</a-button>\n    <a-table\n      size=\"small\"\n      style=\"overflow-y: auto; margin-top: 20px;\"\n      :loading=\"fetchLoading\"\n      :columns=\"columns\"\n      :dataSource=\"items\"\n      :pagination=\"false\"\n      :rowKey=\"record => record.id\">\n      <template slot=\"actions\" slot-scope=\"record\">\n        <a-popconfirm\n          :title=\"`${$t('label.delete')}?`\"\n          @confirm=\"handleDelete(record)\"\n          :okText=\"$t('label.yes')\"\n          :cancelText=\"$t('label.no')\"\n          placement=\"top\"\n        >\n          <a-button :disabled=\"!('releaseDedicatedGuestVlanRange' in $store.getters.apis)\" icon=\"delete\" type=\"danger\" shape=\"circle\"></a-button>\n        </a-popconfirm>\n      </template>\n    </a-table>\n    <a-pagination\n      class=\"pagination\"\n      size=\"small\"\n      :current=\"page\"\n      :pageSize=\"pageSize\"\n      :total=\"totalCount\"\n      :showTotal=\"total => `${$t('label.total')} ${total} ${$t('label.items')}`\"\n      :pageSizeOptions=\"['10', '20', '40', '80', '100']\"\n      @change=\"handleChangePage\"\n      @showSizeChange=\"handleChangePageSize\"\n      showSizeChanger>\n      <template slot=\"buildOptionText\" slot-scope=\"props\">\n        <span>{{ props.value }} / {{ $t('label.page') }}</span>\n      </template>\n    </a-pagination>\n\n    <a-modal\n      v-model=\"modal\"\n      :title=\"$t('label.dedicate.vlan.vni.range')\"\n      :maskClosable=\"false\"\n      @ok=\"handleSubmit\">\n      <a-spin :spinning=\"formLoading\">\n        <a-form\n          :form=\"form\"\n          @submit=\"handleSubmit\"\n          layout=\"vertical\" >\n          <a-form-item :label=\"$t('label.vlanrange')\">\n            <a-input\n              v-decorator=\"['range', {\n                rules: [{ required: true, message: `${$t('label.required')}` }]\n              }]\"\n            ></a-input>\n          </a-form-item>\n\n          <a-form-item :label=\"$t('label.scope')\">\n            <a-select defaultValue=\"account\" v-model=\"selectedScope\" @change=\"handleScopeChange\">\n              <a-select-option value=\"account\">{{ $t('label.account') }}</a-select-option>\n              <a-select-option value=\"project\">{{ $t('label.project') }}</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item :label=\"$t('label.domain')\">\n            <a-select\n              @change=\"handleDomainChange\"\n              v-decorator=\"['domain', {\n                rules: [{ required: true, message: `${$t('label.required')}` }]\n              }]\"\n            >\n              <a-select-option v-for=\"domain in domains\" :key=\"domain.id\" :value=\"domain.id\">{{ domain.name }}</a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item :label=\"$t('label.account')\" v-if=\"selectedScope === 'account'\">\n            <a-select\n              v-decorator=\"['account', {\n                rules: [{ required: true, message: `${$t('label.required')}` }]\n              }]\"\n            >\n              <a-select-option\n                v-for=\"account in accounts\"\n                :key=\"account.id\"\n                :value=\"account.name\">\n                {{ account.name }}\n              </a-select-option>\n            </a-select>\n          </a-form-item>\n\n          <a-form-item :label=\"$t('label.project')\" v-if=\"selectedScope === 'project'\">\n            <a-select\n              v-decorator=\"['project', {\n                rules: [{ required: true, message: `${$t('label.required')}` }]\n              }]\"\n            >\n              <a-select-option\n                v-for=\"project in projects\"\n                :key=\"project.id\"\n                :value=\"project.id\">\n                {{ project.name }}\n              </a-select-option>\n            </a-select>\n          </a-form-item>\n        </a-form>\n      </a-spin>\n    </a-modal>\n\n  </a-spin>\n</template>\n\n<script>\nimport { api } from '@/api'\n\nexport default {\n  name: 'DedicatedVLANTab',\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  inject: ['parentStartLoading', 'parentFinishLoading'],\n  data () {\n    return {\n      fetchLoading: false,\n      formLoading: false,\n      items: [],\n      domains: [],\n      accounts: [],\n      projects: [],\n      modal: false,\n      selectedScope: 'account',\n      totalCount: 0,\n      page: 1,\n      pageSize: 10,\n      columns: [\n        {\n          title: this.$t('label.vlanrange'),\n          dataIndex: 'guestvlanrange'\n        },\n        {\n          title: this.$t('label.domain'),\n          dataIndex: 'domain'\n        },\n        {\n          title: this.$t('label.account'),\n          dataIndex: 'account'\n        },\n        {\n          title: this.$t('label.action'),\n          scopedSlots: { customRender: 'actions' }\n        }\n      ]\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n  },\n  mounted () {\n    this.fetchData()\n  },\n  watch: {\n    loading (newData, oldData) {\n      if (!newData && this.resource.id) {\n        this.fetchData()\n      }\n    }\n  },\n  methods: {\n    fetchData () {\n      this.form.resetFields()\n      this.formLoading = true\n      api('listDedicatedGuestVlanRanges', {\n        physicalnetworkid: this.resource.id,\n        page: this.page,\n        pageSize: this.pageSize\n      }).then(response => {\n        this.items = response.listdedicatedguestvlanrangesresponse.dedicatedguestvlanrange || []\n        this.totalCount = response.listdedicatedguestvlanrangesresponse.count || 0\n      }).catch(error => {\n        this.$notification.error({\n          message: `${this.$t('label.error')} ${error.response.status}`,\n          description: error.response.data.errorresponse.errortext,\n          duration: 0\n        })\n      }).finally(() => {\n        this.formLoading = false\n        this.parentFinishLoading()\n      })\n    },\n    fetchDomains () {\n      api('listDomains', {\n        details: 'min',\n        listAll: true\n      }).then(response => {\n        this.domains = response.listdomainsresponse.domain || []\n        if (this.domains.length > 0) {\n          this.form.setFieldsValue({\n            domain: this.domains[0].id\n          })\n          this.fetchAccounts(this.form.getFieldValue('domain'))\n        } else {\n          this.form.setFieldsValue({\n            domain: null\n          })\n        }\n        this.formLoading = false\n      }).catch(error => {\n        this.$notifyError(error)\n        this.formLoading = false\n      })\n    },\n    fetchAccounts (e) {\n      this.formLoading = true\n      api('listAccounts', {\n        domainid: e,\n        details: 'min',\n        listAll: true\n      }).then(response => {\n        this.accounts = response.listaccountsresponse.account\n          ? response.listaccountsresponse.account : []\n        if (this.accounts.length > 0) {\n          this.form.setFieldsValue({\n            account: this.accounts[0].name\n          })\n        } else {\n          this.form.setFieldsValue({\n            account: null\n          })\n        }\n        this.formLoading = false\n      }).catch(error => {\n        this.$notifyError(error)\n        this.formLoading = false\n      })\n    },\n    fetchProjects (e) {\n      this.formLoading = true\n      api('listProjects', {\n        domainid: e,\n        details: 'min'\n      }).then(response => {\n        this.projects = response.listprojectsresponse.project\n          ? response.listprojectsresponse.project : []\n        if (this.projects.length > 0) {\n          this.form.setFieldsValue({\n            project: this.projects[0].id\n          })\n        } else {\n          this.form.setFieldsValue({\n            project: null\n          })\n        }\n        this.formLoading = false\n      }).catch(error => {\n        this.$notifyError(error)\n        this.formLoading = false\n      })\n    },\n    handleDelete (item) {\n      this.parentStartLoading()\n      api('releaseDedicatedGuestVlanRange', {\n        id: item.id\n      }).then(response => {\n        this.$store.dispatch('AddAsyncJob', {\n          title: `${this.$t('label.delete.dedicated.vlan.range')} ${item.guestvlanrange} ${this.$t('label.for')} ${item.account}`,\n          jobid: response.releasededicatedguestvlanrangeresponse.jobid,\n          status: 'progress'\n        })\n        this.$pollJob({\n          jobId: response.releasededicatedguestvlanrangeresponse.jobid,\n          successMethod: () => {\n            this.fetchData()\n            this.parentFinishLoading()\n          },\n          errorMessage: this.$t('label.deleting.failed'),\n          errorMethod: () => {\n            this.fetchData()\n            this.parentFinishLoading()\n          },\n          loadingMessage: `${this.$t('label.deleting')} ${item.id}`,\n          catchMessage: this.$t('error.fetching.async.job.result'),\n          catchMethod: () => {\n            this.fetchData()\n            this.parentFinishLoading()\n          }\n        })\n      }).catch(error => {\n        console.log(error)\n        this.$message.error(this.$t('message.fail.to.delete'))\n        this.fetchData()\n        this.parentFinishLoading()\n      })\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields(errors => {\n        if (errors) return\n\n        this.formLoading = true\n        this.parentStartLoading()\n        const fieldValues = this.form.getFieldsValue()\n\n        api('dedicateGuestVlanRange', {\n          physicalnetworkid: this.resource.id,\n          vlanrange: fieldValues.range,\n          domainid: fieldValues.domain,\n          account: fieldValues.account,\n          projectid: fieldValues.project\n        }).then(response => {\n          this.modal = false\n          this.fetchData()\n        }).catch(error => {\n          this.$notifyError(error)\n          this.modal = false\n          this.fetchData()\n        })\n      })\n    },\n    fetchBasedOnScope (e) {\n      if (e === 'account') this.fetchAccounts(this.form.getFieldValue('domain'))\n      if (e === 'project') this.fetchProjects(this.form.getFieldValue('domain'))\n    },\n    handleDomainChange () {\n      setTimeout(() => {\n        this.fetchBasedOnScope(this.selectedScope)\n      }, 100)\n    },\n    handleScopeChange (e) {\n      this.fetchBasedOnScope(e)\n    },\n    handleOpenModal () {\n      this.modal = true\n      this.formLoading = true\n      this.fetchDomains()\n    },\n    handleChangePage (page, pageSize) {\n      this.page = page\n      this.pageSize = pageSize\n      this.fetchData()\n    },\n    handleChangePageSize (currentPage, pageSize) {\n      this.page = currentPage\n      this.pageSize = pageSize\n      this.fetchData()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.list {\n\n  &__label {\n    font-weight: bold;\n  }\n\n  &__col {\n    flex: 1;\n\n    @media (min-width: 480px) {\n      &:not(:last-child) {\n        margin-right: 20px;\n      }\n    }\n  }\n\n  &__item {\n    margin-right: -8px;\n\n    &-outer-container {\n      width: 100%;\n    }\n\n    &-container {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n\n      @media (min-width: 480px) {\n        flex-direction: row;\n        margin-bottom: 10px;\n      }\n    }\n  }\n}\n\n.pagination {\n  margin-top: 20px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DedicatedVLANTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DedicatedVLANTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DedicatedVLANTab.vue?vue&type=template&id=7134a903&scoped=true&\"\nimport script from \"./DedicatedVLANTab.vue?vue&type=script&lang=js&\"\nexport * from \"./DedicatedVLANTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DedicatedVLANTab.vue?vue&type=style&index=0&id=7134a903&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7134a903\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}