{"version":3,"sources":["webpack:///./src/views/storage/UploadLocalVolume.vue?b6a2","webpack:///./src/views/storage/UploadLocalVolume.vue?7e8c","webpack:///src/views/storage/UploadLocalVolume.vue","webpack:///./src/views/storage/UploadLocalVolume.vue?f74e","webpack:///./src/views/storage/UploadLocalVolume.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","uploadPercentage","attrs","_v","_s","$t","loading","form","on","handleSubmit","directives","name","rawName","value","rules","required","message","expression","fileList","handleRemove","beforeUpload","length","_e","slot","apiParams","description","staticStyle","zoneid","initialValue","zoneSelected","_l","zone","key","id","format","formats","checksum","closeAction","staticRenderFns","data","zones","uploadParams","beforeCreate","$form","createForm","apiConfig","$store","getters","apis","getUploadParamsForVolume","params","forEach","mounted","listZones","methods","json","listzonesresponse","newFileList","splice","index","e","preventDefault","validateFields","err","undefined","input","duration","formData","append","file","$emit","component"],"mappings":"kHAAA,yBAAukB,EAAG,G,yCCA1kB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAe,CAAEN,EAAIO,iBAAmB,EAAGH,EAAG,OAAO,CAACA,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,aAAaR,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,mCAAmC,KAAKP,EAAG,aAAa,CAACI,MAAM,CAAC,QAAUR,EAAIO,qBAAqB,GAAGH,EAAG,SAAS,CAACI,MAAM,CAAC,SAAWR,EAAIY,UAAU,CAACR,EAAG,SAAS,CAACI,MAAM,CAAC,KAAOR,EAAIa,KAAK,OAAS,YAAYC,GAAG,CAAC,OAASd,EAAIe,eAAe,CAACX,EAAG,cAAc,CAACI,MAAM,CAAC,MAAQR,EAAIW,GAAG,8BAA8B,CAACP,EAAG,mBAAmB,CAACY,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,CAAE,OAAQ,CACjnBC,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAU,GAAMrB,KAAKU,GAAG,oCAChDY,WAAW,4HAA4Hf,MAAM,CAAC,UAAW,EAAM,SAAWR,EAAIwB,SAAS,OAASxB,EAAIyB,aAAa,aAAezB,EAAI0B,eAAe,CAACtB,EAAG,IAAI,CAACE,YAAY,wBAAwB,CAACF,EAAG,SAAS,CAACI,MAAM,CAAC,KAAO,mBAAmB,GAA4B,IAAxBR,EAAIwB,SAASG,OAAcvB,EAAG,IAAI,CAACE,YAAY,mBAAmB,CAACN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,8CAA8C,OAAOX,EAAI4B,QAAQ,GAAGxB,EAAG,cAAc,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,SAASqB,KAAK,SAAS,CAAC7B,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,eAAe,KAAKP,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQR,EAAI8B,UAAUb,KAAKc,cAAc,CAAC3B,EAAG,SAAS,CAAC4B,YAAY,CAAC,MAAQ,mBAAmBxB,MAAM,CAAC,KAAO,kBAAkB,IAAI,GAAGJ,EAAG,UAAU,CAACY,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,CAAE,OAAQ,CACp1BC,MAAO,CAAC,CAAEC,UAAU,EAAMC,QAAStB,EAAIW,GAAG,iCACxCY,WAAW,gHAAgHf,MAAM,CAAC,YAAcR,EAAIW,GAAG,wBAAwB,GAAGP,EAAG,cAAc,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,SAASqB,KAAK,SAAS,CAAC7B,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,eAAe,KAAKP,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQR,EAAI8B,UAAUG,OAAOF,cAAc,CAAC3B,EAAG,SAAS,CAAC4B,YAAY,CAAC,MAAQ,mBAAmBxB,MAAM,CAAC,KAAO,kBAAkB,IAAI,GAAGJ,EAAG,WAAW,CAACY,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,CAAE,SAAU,CACxhBe,aAAclC,EAAImC,aAClBf,MAAO,CACL,CACEC,UAAU,EACVC,QAAU,GAAMrB,KAAKU,GAAG,4BAG1BY,WAAW,gPAAgPvB,EAAIoC,GAAIpC,EAAS,OAAE,SAASqC,GAAM,OAAOjC,EAAG,kBAAkB,CAACkC,IAAID,EAAKE,GAAG/B,MAAM,CAAC,MAAQ6B,EAAKE,KAAK,CAACvC,EAAIS,GAAG,IAAIT,EAAIU,GAAG2B,EAAKpB,MAAQoB,EAAKN,aAAa,UAAS,IAAI,GAAG3B,EAAG,cAAc,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,SAASqB,KAAK,SAAS,CAAC7B,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,iBAAiB,KAAKP,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQR,EAAI8B,UAAUU,OAAOT,cAAc,CAAC3B,EAAG,SAAS,CAAC4B,YAAY,CAAC,MAAQ,mBAAmBxB,MAAM,CAAC,KAAO,kBAAkB,IAAI,GAAGJ,EAAG,WAAW,CAACY,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,CAAE,SAAU,CACzwBe,aAAclC,EAAIyC,QAAQ,GAC1BrB,MAAO,CACL,CACEC,UAAU,EACVC,QAAU,GAAMrB,KAAKU,GAAG,4BAG1BY,WAAW,+OAA+OvB,EAAIoC,GAAIpC,EAAW,SAAE,SAASwC,GAAQ,OAAOpC,EAAG,kBAAkB,CAACkC,IAAIE,GAAQ,CAACxC,EAAIS,GAAG,IAAIT,EAAIU,GAAG8B,GAAQ,UAAS,IAAI,GAAGpC,EAAG,cAAc,CAACA,EAAG,OAAO,CAACI,MAAM,CAAC,KAAO,SAASqB,KAAK,SAAS,CAAC7B,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIW,GAAG,yBAAyB,KAAKP,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQR,EAAI8B,UAAUY,SAASX,cAAc,CAAC3B,EAAG,SAAS,CAAC4B,YAAY,CAAC,MAAQ,mBAAmBxB,MAAM,CAAC,KAAO,kBAAkB,IAAI,GAAGJ,EAAG,UAAU,CAACY,WAAW,CAAC,CAACC,KAAK,YAAYC,QAAQ,cAAcC,MAAM,CAAE,YAAaI,WAAW,iBAAiBf,MAAM,CAAC,YAAcR,EAAIW,GAAG,wCAAwC,GAAGP,EAAG,MAAM,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,KAAK,CAACJ,EAAG,WAAW,CAACU,GAAG,CAAC,MAAQd,EAAI2C,cAAc,CAAC3C,EAAIS,GAAGT,EAAIU,GAAGT,KAAKU,GAAG,oBAAoBP,EAAG,WAAW,CAACI,MAAM,CAAC,QAAUR,EAAIY,QAAQ,KAAO,WAAWE,GAAG,CAAC,MAAQd,EAAIe,eAAe,CAACf,EAAIS,GAAGT,EAAIU,GAAGT,KAAKU,GAAG,iBAAiB,IAAI,IAAI,IAAI,IACtnCiC,EAAkB,G,2IC2GtB,GACE3B,KAAM,oBACN4B,KAFF,WAGI,MAAO,CACLrB,SAAU,GACVsB,MAAO,GACPL,QAAS,CAAC,MAAO,MAAO,OAAQ,MAAO,SACvCN,aAAc,GACdY,aAAc,KACdnC,SAAS,EACTL,iBAAkB,IAGtByC,aAbF,WAaA,WACI/C,KAAKY,KAAOZ,KAAKgD,MAAMC,WAAWjD,MAClCA,KAAK6B,UAAY,GACjB,IAAIqB,EAAYlD,KAAKmD,OAAOC,QAAQC,KAAKC,0BAA4B,GACrEJ,EAAUK,OAAOC,SAAQ,SAA7B,GACM,EAAN,wBAGEC,QArBF,WAsBIzD,KAAK0D,aAEPC,QAAS,CACPD,UADJ,WACA,WACM,OAAN,OAAM,CAAN,+BACYE,GAAQA,EAAKC,mBAAqBD,EAAKC,kBAAkBzB,OAC3D,EAAV,+BACc,EAAd,iBACY,EAAZ,iCAKIZ,aAXJ,SAWA,GACM,IAAN,2BACA,wBACMsC,EAAYC,OAAOC,EAAO,GAC1BhE,KAAKuB,SAAWuC,GAElBrC,aAjBJ,SAiBA,GAEM,OADAzB,KAAKuB,SAAW,GAAtB,2CACa,GAETT,aArBJ,SAqBA,cACMmD,EAAEC,iBACFlE,KAAKY,KAAKuD,gBAAe,SAA/B,KACQ,IAAIC,EAAJ,CAGA,IAAR,KACQ,IAAK,IAAb,QACU,IAAV,YACwBC,IAAVC,IAGQ,SAARjC,IAGJkB,EAAOlB,GAAOiC,IAEhB,OAAR,OAAQ,CAAR,gDACU,EAAV,kIADA,IAEA,aACc,EAAd,mBACY,EAAZ,qBACcjD,QAAS,EAAvB,mCACcS,YAAa,EAA3B,gCACcyC,SAAU,IAGd,IAAV,eACUhD,EAASiC,SAAQ,SAA3B,GACYgB,EAASC,OAAO,UAAWC,MAE7B,EAAV,WACU,EAAV,mBACU,EAAV,iCACA,EACA,CACY,QAAZ,CACc,eAAd,sBACc,cAAd,yBACc,YAAd,uBACc,aAAd,yBAEY,iBAAZ,YACc,EAAd,sEAEY,QAAZ,QACA,kBACY,EAAZ,uBACcrD,QAAS,EAAvB,6BACcS,YAAa,EAA3B,kDAEY,EAAZ,iBACA,mBACY,EAAZ,qBACcT,QAAS,EAAvB,4BACcS,YAAa,GAA3B,uEACcyC,SAAU,OAExB,oBACY,EAAZ,sBAKI7B,YArFJ,WAsFM1C,KAAK2E,MAAM,mBC9OyV,I,wBCQtWC,EAAY,eACd,EACA9E,EACA6C,GACA,EACA,KACA,WACA,MAIa,aAAAiC,E","file":"js/chunk-13a7ac46.05131351.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadLocalVolume.vue?vue&type=style&index=0&id=9edcc56c&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadLocalVolume.vue?vue&type=style&index=0&id=9edcc56c&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-layout\"},[(_vm.uploadPercentage > 0)?_c('span',[_c('a-icon',{attrs:{\"type\":\"loading\"}}),_vm._v(\" \"+_vm._s(_vm.$t('message.upload.file.processing'))+\" \"),_c('a-progress',{attrs:{\"percent\":_vm.uploadPercentage}})],1):_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.templatefileupload')}},[_c('a-upload-dragger',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['file', {\n            rules: [{ required: true, message: (\"\" + (this.$t('message.error.required.input')))}]\n          }]),expression:\"['file', {\\n            rules: [{ required: true, message: `${this.$t('message.error.required.input')}`}]\\n          }]\"}],attrs:{\"multiple\":false,\"fileList\":_vm.fileList,\"remove\":_vm.handleRemove,\"beforeUpload\":_vm.beforeUpload}},[_c('p',{staticClass:\"ant-upload-drag-icon\"},[_c('a-icon',{attrs:{\"type\":\"cloud-upload\"}})],1),(_vm.fileList.length === 0)?_c('p',{staticClass:\"ant-upload-text\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.volume.volumefileupload.description'))+\" \")]):_vm._e()])],1),_c('a-form-item',[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.name'))+\" \"),_c('a-tooltip',{attrs:{\"title\":_vm.apiParams.name.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['name', {\n            rules: [{ required: true, message: _vm.$t('message.error.volume.name') }]\n          }]),expression:\"['name', {\\n            rules: [{ required: true, message: $t('message.error.volume.name') }]\\n          }]\"}],attrs:{\"placeholder\":_vm.$t('label.volumename')}})],1),_c('a-form-item',[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.zone'))+\" \"),_c('a-tooltip',{attrs:{\"title\":_vm.apiParams.zoneid.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['zoneId', {\n            initialValue: _vm.zoneSelected,\n            rules: [\n              {\n                required: true,\n                message: (\"\" + (this.$t('message.error.select')))\n              }\n            ]\n          }]),expression:\"['zoneId', {\\n            initialValue: zoneSelected,\\n            rules: [\\n              {\\n                required: true,\\n                message: `${this.$t('message.error.select')}`\\n              }\\n            ]\\n          }]\"}]},_vm._l((_vm.zones),function(zone){return _c('a-select-option',{key:zone.id,attrs:{\"value\":zone.id}},[_vm._v(\" \"+_vm._s(zone.name || zone.description)+\" \")])}),1)],1),_c('a-form-item',[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.format'))+\" \"),_c('a-tooltip',{attrs:{\"title\":_vm.apiParams.format.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['format', {\n            initialValue: _vm.formats[0],\n            rules: [\n              {\n                required: false,\n                message: (\"\" + (this.$t('message.error.select')))\n              }\n            ]\n          }]),expression:\"['format', {\\n            initialValue: formats[0],\\n            rules: [\\n              {\\n                required: false,\\n                message: `${this.$t('message.error.select')}`\\n              }\\n            ]\\n          }]\"}]},_vm._l((_vm.formats),function(format){return _c('a-select-option',{key:format},[_vm._v(\" \"+_vm._s(format)+\" \")])}),1)],1),_c('a-form-item',[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.volumechecksum'))+\" \"),_c('a-tooltip',{attrs:{\"title\":_vm.apiParams.checksum.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['checksum']),expression:\"['checksum']\"}],attrs:{\"placeholder\":_vm.$t('label.volumechecksum.description')}})],1),_c('div',{staticClass:\"action-button\",attrs:{\"span\":24}},[_c('a-button',{on:{\"click\":_vm.closeAction}},[_vm._v(_vm._s(this.$t('label.cancel')))]),_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(this.$t('label.ok')))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div class=\"form-layout\">\n    <span v-if=\"uploadPercentage > 0\">\n      <a-icon type=\"loading\" />\n      {{ $t('message.upload.file.processing') }}\n      <a-progress :percent=\"uploadPercentage\" />\n    </span>\n    <a-spin :spinning=\"loading\" v-else>\n      <a-form\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        layout=\"vertical\">\n        <a-form-item :label=\"$t('label.templatefileupload')\">\n          <a-upload-dragger\n            :multiple=\"false\"\n            :fileList=\"fileList\"\n            :remove=\"handleRemove\"\n            :beforeUpload=\"beforeUpload\"\n            v-decorator=\"['file', {\n              rules: [{ required: true, message: `${this.$t('message.error.required.input')}`}]\n            }]\">\n            <p class=\"ant-upload-drag-icon\">\n              <a-icon type=\"cloud-upload\" />\n            </p>\n            <p class=\"ant-upload-text\" v-if=\"fileList.length === 0\">\n              {{ $t('label.volume.volumefileupload.description') }}\n            </p>\n          </a-upload-dragger>\n        </a-form-item>\n        <a-form-item>\n          <span slot=\"label\">\n            {{ $t('label.name') }}\n            <a-tooltip :title=\"apiParams.name.description\">\n              <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n            </a-tooltip>\n          </span>\n          <a-input\n            v-decorator=\"['name', {\n              rules: [{ required: true, message: $t('message.error.volume.name') }]\n            }]\"\n            :placeholder=\"$t('label.volumename')\" />\n        </a-form-item>\n        <a-form-item>\n          <span slot=\"label\">\n            {{ $t('label.zone') }}\n            <a-tooltip :title=\"apiParams.zoneid.description\">\n              <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n            </a-tooltip>\n          </span>\n          <a-select\n            v-decorator=\"['zoneId', {\n              initialValue: zoneSelected,\n              rules: [\n                {\n                  required: true,\n                  message: `${this.$t('message.error.select')}`\n                }\n              ]\n            }]\">\n            <a-select-option :value=\"zone.id\" v-for=\"zone in zones\" :key=\"zone.id\">\n              {{ zone.name || zone.description }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item>\n          <span slot=\"label\">\n            {{ $t('label.format') }}\n            <a-tooltip :title=\"apiParams.format.description\">\n              <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n            </a-tooltip>\n          </span>\n          <a-select\n            v-decorator=\"['format', {\n              initialValue: formats[0],\n              rules: [\n                {\n                  required: false,\n                  message: `${this.$t('message.error.select')}`\n                }\n              ]\n            }]\">\n            <a-select-option v-for=\"format in formats\" :key=\"format\">\n              {{ format }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item>\n          <span slot=\"label\">\n            {{ $t('label.volumechecksum') }}\n            <a-tooltip :title=\"apiParams.checksum.description\">\n              <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n            </a-tooltip>\n          </span>\n          <a-input\n            v-decorator=\"['checksum']\"\n            :placeholder=\"$t('label.volumechecksum.description')\"\n          />\n        </a-form-item>\n        <div :span=\"24\" class=\"action-button\">\n          <a-button @click=\"closeAction\">{{ this.$t('label.cancel') }}</a-button>\n          <a-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\">{{ this.$t('label.ok') }}</a-button>\n        </div>\n      </a-form>\n    </a-spin>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport { axios } from '../../utils/request'\n\nexport default {\n  name: 'UploadLocalVolume',\n  data () {\n    return {\n      fileList: [],\n      zones: [],\n      formats: ['RAW', 'VHD', 'VHDX', 'OVA', 'QCOW2'],\n      zoneSelected: '',\n      uploadParams: null,\n      loading: false,\n      uploadPercentage: 0\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiParams = {}\n    var apiConfig = this.$store.getters.apis.getUploadParamsForVolume || {}\n    apiConfig.params.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n  },\n  mounted () {\n    this.listZones()\n  },\n  methods: {\n    listZones () {\n      api('listZones').then(json => {\n        if (json && json.listzonesresponse && json.listzonesresponse.zone) {\n          this.zones = json.listzonesresponse.zone\n          if (this.zones.length > 0) {\n            this.zoneSelected = this.zones[0].id\n          }\n        }\n      })\n    },\n    handleRemove (file) {\n      const index = this.fileList.indexOf(file)\n      const newFileList = this.fileList.slice()\n      newFileList.splice(index, 1)\n      this.fileList = newFileList\n    },\n    beforeUpload (file) {\n      this.fileList = [...this.fileList, file]\n      return false\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err) {\n          return\n        }\n        const params = {}\n        for (const key in values) {\n          const input = values[key]\n          if (input === undefined) {\n            continue\n          }\n          if (key === 'file') {\n            continue\n          }\n          params[key] = input\n        }\n        api('getUploadParamsForVolume', params).then(json => {\n          this.uploadParams = (json.postuploadvolumeresponse && json.postuploadvolumeresponse.getuploadparams) ? json.postuploadvolumeresponse.getuploadparams : ''\n          const { fileList } = this\n          if (this.fileList.length > 1) {\n            this.$notification.error({\n              message: this.$t('message.upload.volume.failed'),\n              description: this.$t('message.upload.file.limit'),\n              duration: 0\n            })\n          }\n          const formData = new FormData()\n          fileList.forEach(file => {\n            formData.append('files[]', file)\n          })\n          this.loading = true\n          this.uploadPercentage = 0\n          axios.post(this.uploadParams.postURL,\n            formData,\n            {\n              headers: {\n                'Content-Type': 'multipart/form-data',\n                'X-signature': this.uploadParams.signature,\n                'X-expires': this.uploadParams.expires,\n                'X-metadata': this.uploadParams.metadata\n              },\n              onUploadProgress: (progressEvent) => {\n                this.uploadPercentage = Number(parseFloat(100 * progressEvent.loaded / progressEvent.total).toFixed(1))\n              },\n              timeout: 86400000\n            }).then((json) => {\n            this.$notification.success({\n              message: this.$t('message.success.upload'),\n              description: this.$t('message.success.upload.volume.description')\n            })\n            this.closeAction()\n          }).catch(e => {\n            this.$notification.error({\n              message: this.$t('message.upload.failed'),\n              description: `${this.$t('message.upload.iso.failed.description')} -  ${e}`,\n              duration: 0\n            })\n          }).finally(() => {\n            this.loading = false\n          })\n        })\n      })\n    },\n    closeAction () {\n      this.$emit('close-action')\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n  .form-layout {\n    width: 80vw;\n\n    @media (min-width: 700px) {\n      width: 550px;\n    }\n  }\n\n  .action-button {\n    text-align: right;\n\n    button {\n      margin-right: 5px;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadLocalVolume.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadLocalVolume.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadLocalVolume.vue?vue&type=template&id=9edcc56c&scoped=true&\"\nimport script from \"./UploadLocalVolume.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadLocalVolume.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadLocalVolume.vue?vue&type=style&index=0&id=9edcc56c&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9edcc56c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}