{"version":3,"sources":["webpack:///./src/views/iam/AddLdapAccount.vue?dd46","webpack:///src/views/iam/AddLdapAccount.vue","webpack:///./src/views/iam/AddLdapAccount.vue?d125","webpack:///./src/views/iam/AddLdapAccount.vue","webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/views/iam/AddLdapAccount.vue?3cff","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","$t","on","handleSearch","model","value","callback","$$v","searchQuery","expression","listLoading","columns","dataSource","columnWidth","selectedRowKeys","onChange","onSelectChange","record","username","getRowClassName","y","form","handleSubmit","fetchListLdapUsers","selectedFilter","_l","opt","key","id","_v","_s","name","directives","rawName","rules","required","memessage","apiParams","domainid","description","domainLoading","$event","account","message","roleid","roleLoading","timezone","timeZoneLoading","networkdomain","group","$store","getters","apis","checked","samlEnable","initialValue","selectedIdp","loading","idp","idx","orgName","_e","handleClose","staticRenderFns","data","oldDataSource","listDomains","listRoles","timeZoneMap","listIdps","filters","undefined","beforeCreate","$form","createForm","apiLdapCreateAccountConfig","ldapCreateAccount","apiImportLdapUsersConfig","importLdapUsers","params","forEach","created","mounted","fetchData","methods","fetchTimeZone","Promise","resolve","json","reject","error","userfilter","store","domain","result","length","listLdapUsers","i","firstname","lastname","join","fetchListDomains","fetchListRoles","fetchIdps","e","preventDefault","validateFields","err","role","values","trim","apiName","promises","push","all","then","filter","filterLdapUser","item","$emit","authorizeUsersForSamlSSO","userid","users","entityid","entityId","catch","index","component","$","$trim","forcedStringTrimMethod","target","proto","forced","fails","whitespaces","non","module","exports","METHOD_NAME"],"mappings":"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","file":"js/chunk-4fb56773.4bc02627.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ldap-account-layout\"},[_c('a-row',{attrs:{\"gutter\":0}},[_c('a-col',{attrs:{\"md\":24,\"lg\":16}},[_c('a-card',{attrs:{\"bordered\":false}},[_c('a-input-search',{staticStyle:{\"margin-bottom\":\"10px\"},attrs:{\"placeholder\":_vm.$t('label.search')},on:{\"search\":_vm.handleSearch},model:{value:(_vm.searchQuery),callback:function ($$v) {_vm.searchQuery=$$v},expression:\"searchQuery\"}}),_c('a-table',{staticStyle:{\"overflow-y\":\"auto\"},attrs:{\"size\":\"small\",\"loading\":_vm.listLoading,\"columns\":_vm.columns,\"dataSource\":_vm.dataSource,\"rowSelection\":{\n            columnWidth: 50,\n            selectedRowKeys: _vm.selectedRowKeys,\n            onChange: _vm.onSelectChange\n          },\"rowKey\":function (record) { return record.username; },\"rowClassName\":_vm.getRowClassName,\"pagination\":false,\"scroll\":{ y: '50vh' }}})],1)],1),_c('a-col',{attrs:{\"md\":24,\"lg\":8}},[_c('a-card',{attrs:{\"bordered\":false}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.filterby')}},[_c('a-select',{on:{\"change\":_vm.fetchListLdapUsers},model:{value:(_vm.selectedFilter),callback:function ($$v) {_vm.selectedFilter=$$v},expression:\"selectedFilter\"}},_vm._l((_vm.filters),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name)+\" \")])}),1)],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.domain')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['domainid', {\n                rules: [{ required: true, memessage: (\"\" + (this.$t('message.error.select'))) }]\n              }]),expression:\"['domainid', {\\n                rules: [{ required: true, memessage: `${this.$t('message.error.select')}` }]\\n              }]\"}],attrs:{\"showSearch\":\"\",\"placeholder\":_vm.apiParams.domainid.description,\"loading\":_vm.domainLoading},on:{\"change\":function($event){return _vm.fetchListLdapUsers($event)}}},_vm._l((_vm.listDomains),function(opt){return _c('a-select-option',{key:opt.name},[_vm._v(\" \"+_vm._s(opt.name)+\" \")])}),1)],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.account')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['account']),expression:\"['account']\"}],attrs:{\"placeholder\":_vm.apiParams.account.description}})],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.role')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roleid', {\n                rules: [{ required: true, message: (\"\" + (this.$t('message.error.select'))) }]\n              }]),expression:\"['roleid', {\\n                rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\\n              }]\"}],attrs:{\"showSearch\":\"\",\"placeholder\":_vm.apiParams.roleid.description,\"loading\":_vm.roleLoading}},_vm._l((_vm.listRoles),function(opt){return _c('a-select-option',{key:opt.name},[_vm._v(\" \"+_vm._s(opt.name)+\" \")])}),1)],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.timezone')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['timezone']),expression:\"['timezone']\"}],attrs:{\"showSearch\":\"\",\"placeholder\":_vm.apiParams.timezone.description,\"loading\":_vm.timeZoneLoading}},_vm._l((_vm.timeZoneMap),function(opt){return _c('a-select-option',{key:opt.id},[_vm._v(\" \"+_vm._s(opt.name || opt.description)+\" \")])}),1)],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.networkdomain')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['networkdomain']),expression:\"['networkdomain']\"}],attrs:{\"placeholder\":_vm.apiParams.networkdomain.description}})],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.ldap.group.name')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['group']),expression:\"['group']\"}],attrs:{\"placeholder\":_vm.apiParams.group.description}})],1),('authorizeSamlSso' in _vm.$store.getters.apis)?_c('div',[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.samlenable')}},[_c('a-switch',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['samlEnable']),expression:\"['samlEnable']\"}],on:{\"change\":function (checked) { this$1.samlEnable = checked }}})],1),(_vm.samlEnable)?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.samlentity')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['samlEntity', {\n                  initialValue: _vm.selectedIdp,\n                  rules: [{ required: _vm.samlEnable, message: (\"\" + (this.$t('message.error.select'))) }]\n                }]),expression:\"['samlEntity', {\\n                  initialValue: selectedIdp,\\n                  rules: [{ required: samlEnable, message: `${this.$t('message.error.select')}` }]\\n                }]\"}],attrs:{\"placeholder\":_vm.$t('label.choose.saml.indentity'),\"loading\":_vm.loading}},_vm._l((_vm.listIdps),function(idp,idx){return _c('a-select-option',{key:idx},[_vm._v(\" \"+_vm._s(idp.orgName)+\" \")])}),1)],1):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"card-footer\"},[_c('a-button',{on:{\"click\":_vm.handleClose}},[_vm._v(_vm._s(_vm.$t('label.close')))]),_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(_vm.$t('label.add')))])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div class=\"ldap-account-layout\">\n    <a-row :gutter=\"0\">\n      <a-col :md=\"24\" :lg=\"16\">\n        <a-card :bordered=\"false\">\n          <a-input-search\n            style=\"margin-bottom: 10px\"\n            :placeholder=\"$t('label.search')\"\n            v-model=\"searchQuery\"\n            @search=\"handleSearch\" />\n          <a-table\n            size=\"small\"\n            :loading=\"listLoading\"\n            :columns=\"columns\"\n            :dataSource=\"dataSource\"\n            :rowSelection=\"{\n              columnWidth: 50,\n              selectedRowKeys: selectedRowKeys,\n              onChange: onSelectChange\n            }\"\n            :rowKey=\"record => record.username\"\n            :rowClassName=\"getRowClassName\"\n            :pagination=\"false\"\n            style=\"overflow-y: auto\"\n            :scroll=\"{ y: '50vh' }\"\n          />\n        </a-card>\n      </a-col>\n      <a-col :md=\"24\" :lg=\"8\">\n        <a-card :bordered=\"false\">\n          <a-form\n            :form=\"form\"\n            @submit=\"handleSubmit\"\n            layout=\"vertical\" >\n            <a-form-item :label=\"$t('label.filterby')\">\n              <a-select @change=\"fetchListLdapUsers\" v-model=\"selectedFilter\" >\n                <a-select-option v-for=\"opt in filters\" :key=\"opt.id\" >\n                  {{ opt.name }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :label=\"$t('label.domain')\">\n              <a-select\n                showSearch\n                v-decorator=\"['domainid', {\n                  rules: [{ required: true, memessage: `${this.$t('message.error.select')}` }]\n                }]\"\n                :placeholder=\"apiParams.domainid.description\"\n                :loading=\"domainLoading\"\n                @change=\"fetchListLdapUsers($event)\" >\n                <a-select-option v-for=\"opt in listDomains\" :key=\"opt.name\">\n                  {{ opt.name }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :label=\"$t('label.account')\">\n              <a-input\n                v-decorator=\"['account']\"\n                :placeholder=\"apiParams.account.description\"\n              />\n            </a-form-item>\n            <a-form-item :label=\"$t('label.role')\">\n              <a-select\n                showSearch\n                v-decorator=\"['roleid', {\n                  rules: [{ required: true, message: `${this.$t('message.error.select')}` }]\n                }]\"\n                :placeholder=\"apiParams.roleid.description\"\n                :loading=\"roleLoading\">\n                <a-select-option v-for=\"opt in listRoles\" :key=\"opt.name\">\n                  {{ opt.name }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :label=\"$t('label.timezone')\">\n              <a-select\n                showSearch\n                v-decorator=\"['timezone']\"\n                :placeholder=\"apiParams.timezone.description\"\n                :loading=\"timeZoneLoading\">\n                <a-select-option v-for=\"opt in timeZoneMap\" :key=\"opt.id\">\n                  {{ opt.name || opt.description }}\n                </a-select-option>\n              </a-select>\n            </a-form-item>\n            <a-form-item :label=\"$t('label.networkdomain')\">\n              <a-input\n                v-decorator=\"['networkdomain']\"\n                :placeholder=\"apiParams.networkdomain.description\"\n              />\n            </a-form-item>\n            <a-form-item :label=\"$t('label.ldap.group.name')\">\n              <a-input\n                v-decorator=\"['group']\"\n                :placeholder=\"apiParams.group.description\"\n              />\n            </a-form-item>\n            <div v-if=\"'authorizeSamlSso' in $store.getters.apis\">\n              <a-form-item :label=\"$t('label.samlenable')\">\n                <a-switch v-decorator=\"['samlEnable']\" @change=\"checked => { this.samlEnable = checked }\" />\n              </a-form-item>\n              <a-form-item v-if=\"samlEnable\" :label=\"$t('label.samlentity')\">\n                <a-select\n                  v-decorator=\"['samlEntity', {\n                    initialValue: selectedIdp,\n                    rules: [{ required: samlEnable, message: `${this.$t('message.error.select')}` }]\n                  }]\"\n                  :placeholder=\"$t('label.choose.saml.indentity')\"\n                  :loading=\"loading\">\n                  <a-select-option v-for=\"(idp, idx) in listIdps\" :key=\"idx\">\n                    {{ idp.orgName }}\n                  </a-select-option>\n                </a-select>\n              </a-form-item>\n            </div>\n\n            <div class=\"card-footer\">\n              <a-button @click=\"handleClose\">{{ $t('label.close') }}</a-button>\n              <a-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\">{{ $t('label.add') }}</a-button>\n            </div>\n          </a-form>\n        </a-card>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport { timeZone } from '@/utils/timezone'\nimport store from '@/store'\n\nexport default {\n  name: 'AddLdapAccount',\n  data () {\n    return {\n      columns: [],\n      dataSource: [],\n      oldDataSource: [],\n      selectedRowKeys: [],\n      listDomains: [],\n      listRoles: [],\n      timeZoneMap: [],\n      listIdps: [],\n      selectedIdp: '',\n      filters: [],\n      selectedFilter: '',\n      listLoading: false,\n      timeZoneLoading: false,\n      domainLoading: false,\n      roleLoading: false,\n      loading: false,\n      searchQuery: undefined,\n      samlEnable: false\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiLdapCreateAccountConfig = this.$store.getters.apis.ldapCreateAccount || {}\n    this.apiImportLdapUsersConfig = this.$store.getters.apis.importLdapUsers || {}\n    this.apiParams = {}\n    this.apiLdapCreateAccountConfig.params.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n    this.apiImportLdapUsersConfig.params.forEach(param => {\n      if (!this.apiParams || !this.apiParams[param.name]) {\n        this.apiParams[param.name] = param\n      }\n    })\n  },\n  created () {\n    this.selectedRowKeys = []\n    this.dataSource = []\n    this.listDomains = []\n    this.listRoles = []\n    this.listIdps = []\n    this.columns = [\n      {\n        title: this.$t('label.name'),\n        dataIndex: 'name',\n        width: 120,\n        scopedSlots: { customRender: 'name' }\n      },\n      {\n        title: this.$t('label.username'),\n        dataIndex: 'username',\n        width: 120,\n        scopedSlots: { customRender: 'username' }\n      },\n      {\n        title: this.$t('label.email'),\n        dataIndex: 'email',\n        scopedSlots: { customRender: 'email' }\n      },\n      {\n        title: this.$t('label.user.conflict'),\n        dataIndex: 'conflictingusersource',\n        scopedSlots: { customRender: 'conflictingusersource' }\n      }\n    ]\n    this.filters = [\n      {\n        id: 'NoFilter',\n        name: 'No filter'\n      },\n      {\n        id: 'LocalDomain',\n        name: 'Local domain'\n      },\n      {\n        id: 'AnyDomain',\n        name: 'Any domain'\n      },\n      {\n        id: 'PotentialImport',\n        name: 'Potential import'\n      }\n    ]\n    this.selectedFilter = this.filters[0].id\n  },\n  mounted () {\n    this.fetchData()\n  },\n  methods: {\n    async fetchData () {\n      this.timeZoneLoading = true\n      this.domainLoading = true\n      this.roleLoading = true\n      this.fetchListLdapUsers()\n      const [\n        listTimeZone,\n        listDomains,\n        listRoles,\n        listIdps\n      ] = await Promise.all([\n        this.fetchTimeZone(),\n        this.fetchListDomains(),\n        this.fetchListRoles(),\n        ('listIdps' in this.$store.getters.apis) ? this.fetchIdps() : []\n      ]).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.timeZoneLoading = false\n        this.domainLoading = false\n        this.roleLoading = false\n      })\n      this.timeZoneMap = listTimeZone && listTimeZone.length > 0 ? listTimeZone : []\n      this.listDomains = listDomains && listDomains.length > 0 ? listDomains : []\n      this.listRoles = listRoles && listRoles.length > 0 ? listRoles : []\n      this.listIdps = listIdps && listIdps.length > 0 ? listIdps : []\n    },\n    fetchTimeZone (value) {\n      return new Promise((resolve, reject) => {\n        timeZone(value).then(json => {\n          resolve(json)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    fetchListLdapUsers (domain) {\n      this.listLoading = true\n      const params = {}\n      params.listtype = 'new'\n      params.userfilter = this.selectedFilter\n      params.domainid = store.getters.userInfo.domainid\n      if (domain) {\n        const result = this.listDomains.filter(item => item.name === domain)\n        if (result.length > 0) {\n          params.domainid = result[0].id\n        }\n      }\n      api('listLdapUsers', params).then(json => {\n        const listLdapUsers = json.ldapuserresponse.LdapUser\n        if (listLdapUsers) {\n          const ldapUserLength = listLdapUsers.length\n          for (let i = 0; i < ldapUserLength; i++) {\n            listLdapUsers[i].name = [listLdapUsers[i].firstname, listLdapUsers[i].lastname].join(' ')\n          }\n        }\n        this.dataSource = listLdapUsers\n        this.oldDataSource = listLdapUsers\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.listLoading = false\n      })\n    },\n    fetchListDomains () {\n      return new Promise((resolve, reject) => {\n        const params = {}\n        api('listDomains', params).then(json => {\n          const listDomains = json.listdomainsresponse.domain\n          resolve(listDomains)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    fetchListRoles () {\n      return new Promise((resolve, reject) => {\n        const params = {}\n        api('listRoles', params).then(json => {\n          const listRoles = json.listrolesresponse.role\n          resolve(listRoles)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    fetchIdps () {\n      return new Promise((resolve, reject) => {\n        api('listIdps').then(json => {\n          const listIdps = json.listidpsresponse.idp || []\n          if (listIdps.length !== 0) {\n            this.selectedIdp = listIdps[0].id\n          }\n          resolve(listIdps)\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err) {\n          return\n        }\n        let apiName = 'ldapCreateAccount'\n        const domain = this.listDomains.filter(item => item.name === values.domainid)\n        const role = this.listRoles.filter(item => item.name === values.roleid)\n        const promises = []\n        const params = {}\n        params.domainid = domain[0].id\n        params.roleid = role[0].id\n        params.account = values.account\n        params.timezone = values.timezone\n        params.networkdomain = values.networkdomain\n        if (values.group && values.group.trim().length > 0) {\n          params.group = values.group\n          apiName = 'importLdapUsers'\n          promises.push(new Promise((resolve, reject) => {\n            api(apiName, params).then(json => {\n              resolve(json)\n            }).catch(error => {\n              reject(error)\n            })\n          }))\n        } else {\n          this.selectedRowKeys.forEach(username => {\n            params.username = username\n            promises.push(new Promise((resolve, reject) => {\n              api(apiName, params).then(json => {\n                resolve(json)\n              }).catch(error => {\n                reject(error)\n              })\n            }))\n          })\n        }\n        this.loading = true\n        Promise.all(promises).then(responses => {\n          for (const response of responses) {\n            if (apiName === 'ldapCreateAccount' && values.samlEnable) {\n              const users = response.createaccountresponse.account.user\n              const entityId = values.samlEntity\n              if (users && entityId) {\n                this.authorizeUsersForSamlSSO(users, entityId)\n              }\n            } else if (apiName === 'importLdapUsers' && response.ldapuserresponse && values.samlEnable) {\n              this.$notification.error({\n                message: this.$t('message.request.failed'),\n                description: this.$t('message.error.enable.saml')\n              })\n            } else {\n              if (apiName === 'ldapCreateAccount') {\n                this.$notification.success({\n                  message: this.$t('label.add.ldap.account'),\n                  description: response.createaccountresponse.account.name\n                })\n              }\n            }\n          }\n          this.$emit('refresh-data')\n          this.handleClose()\n        }).catch(error => {\n          this.$notifyError(error)\n          this.$emit('refresh-data')\n        }).finally(() => {\n          this.loading = false\n        })\n      })\n    },\n    handleSearch () {\n      this.dataSource = this.oldDataSource\n      if (!this.searchQuery || this.searchQuery.length === 0) {\n        return\n      }\n      this.dataSource = this.dataSource.filter(item => this.filterLdapUser(item))\n    },\n    filterLdapUser (item) {\n      switch (true) {\n        case (item.name && item.name.toLowerCase().indexOf(this.searchQuery.toLowerCase()) > -1):\n          return item\n        case (item.username && item.username.toLowerCase().indexOf(this.searchQuery.toLowerCase()) > -1):\n          return item\n        case (item.email && item.email.toLowerCase().indexOf(this.searchQuery.toLowerCase()) > -1):\n          return item\n        default:\n          break\n      }\n    },\n    handleClose () {\n      this.$emit('close-action')\n    },\n    authorizeUsersForSamlSSO (users, entityId) {\n      const promises = []\n      for (var i = 0; i < users.length; i++) {\n        const params = {}\n        params.enable = true\n        params.userid = users[i].id\n        params.entityid = entityId\n        promises.push(new Promise((resolve, reject) => {\n          api('authorizeSamlSso', params).catch(error => {\n            reject(error)\n          })\n        }))\n      }\n      Promise.all(promises).catch(error => {\n        this.$notifyError(error)\n      })\n    },\n    onSelectChange (selectedRowKeys) {\n      this.selectedRowKeys = selectedRowKeys\n    },\n    getRowClassName (record, index) {\n      if (index % 2 === 0) {\n        return 'light-row'\n      }\n      return 'dark-row'\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.ldap-account-layout {\n  width: 85vw;\n\n  @media (min-width: 1000px) {\n    width: 900px;\n  }\n}\n\n.card-footer {\n  text-align: right;\n\n  button + button {\n    margin-left: 8px;\n  }\n}\n\n/deep/ .light-row {\n  background-color: #fff;\n}\n\n/deep/ .dark-row {\n  background-color: #f9f9f9;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLdapAccount.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLdapAccount.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddLdapAccount.vue?vue&type=template&id=655e19bb&scoped=true&\"\nimport script from \"./AddLdapAccount.vue?vue&type=script&lang=js&\"\nexport * from \"./AddLdapAccount.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddLdapAccount.vue?vue&type=style&index=0&id=655e19bb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"655e19bb\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLdapAccount.vue?vue&type=style&index=0&id=655e19bb&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddLdapAccount.vue?vue&type=style&index=0&id=655e19bb&lang=less&scoped=true&\"","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n"],"sourceRoot":""}