{"version":3,"sources":["webpack:///./src/views/iam/PermissionEditable.vue?d276","webpack:///src/views/iam/PermissionEditable.vue","webpack:///./src/views/iam/PermissionEditable.vue?081a","webpack:///./src/views/iam/PermissionEditable.vue","webpack:///./src/views/iam/RolePermissionTab.vue?234e","webpack:///src/views/iam/RolePermissionTab.vue","webpack:///./src/views/iam/RolePermissionTab.vue?73a6","webpack:///./src/views/iam/RolePermissionTab.vue","webpack:///./src/views/iam/RolePermissionTab.vue?956c","webpack:///./src/views/iam/RuleDelete.vue?5802","webpack:///src/views/iam/RuleDelete.vue","webpack:///./src/views/iam/RuleDelete.vue?c8ba","webpack:///./src/views/iam/RuleDelete.vue","webpack:///./src/views/iam/RolePermissionTab.vue?48ed","webpack:///./src/views/iam/RuleDelete.vue?8e22"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","defaultValue","on","handleChange","_v","_s","$t","staticRenderFns","props","type","String","required","methods","$emit","e","component","staticClass","staticStyle","exportRolePermissions","_e","class","updateTable","newRuleSelectError","filterOption","apis","newRule","val","newRulePermission","$event","onPermissionChange","model","value","callback","$$v","newRuleDescription","expression","slot","$store","getters","onRuleSave","changeOrder","rules","_l","record","index","key","rule","permission","description","onRuleDelete","id","name","components","RuleDelete","PermissionEditable","draggable","resource","Object","data","loadingTable","drag","mounted","keys","sort","fetchData","watch","resetNewFields","roleid","ruleorder","map","ruleid","onRuleSelect","rulesDataToCsv","length","result","join","columnDelimiter","lineDelimiter","forEach","undefined","item","includes","slice","hiddenElement","href","encodeURI","rulesCsvData","target","download","click","delete","disabled","handleDelete","Boolean","default"],"mappings":"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","file":"js/chunk-363c35b9.5d5175ec.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-select',{attrs:{\"value\":_vm.defaultValue},on:{\"change\":_vm.handleChange}},[_c('a-select-option',{attrs:{\"value\":\"allow\"}},[_vm._v(_vm._s(_vm.$t('label.allow')))]),_c('a-select-option',{attrs:{\"value\":\"deny\"}},[_vm._v(_vm._s(_vm.$t('label.deny')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-select\n    :value=\"defaultValue\"\n    @change=\"handleChange\">\n    <a-select-option value=\"allow\">{{ $t('label.allow') }}</a-select-option>\n    <a-select-option value=\"deny\">{{ $t('label.deny') }}</a-select-option>\n  </a-select>\n</template>\n\n<script>\nexport default {\n  props: {\n    defaultValue: {\n      type: String,\n      required: true\n    }\n  },\n  methods: {\n    handleChange (e) {\n      this.$emit('change', e)\n    }\n  }\n\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionEditable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionEditable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PermissionEditable.vue?vue&type=template&id=30155542&\"\nimport script from \"./PermissionEditable.vue?vue&type=script&lang=js&\"\nexport * from \"./PermissionEditable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.loadingTable)?_c('a-icon',{staticClass:\"main-loading-spinner\",attrs:{\"type\":\"loading\"}}):_c('div',[_c('div',{staticStyle:{\"width\":\"100%\",\"display\":\"flex\",\"margin-bottom\":\"10px\"}},[_c('a-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"dashed\",\"icon\":\"download\"},on:{\"click\":_vm.exportRolePermissions}},[_vm._v(\" Export Rules \")])],1),(_vm.updateTable)?_c('div',{staticClass:\"loading-overlay\"},[_c('a-icon',{attrs:{\"type\":\"loading\"}})],1):_vm._e(),_c('div',{staticClass:\"rules-list ant-list ant-list-bordered\",class:{'rules-list--overflow-hidden' : _vm.updateTable}},[_c('div',{staticClass:\"rules-table-item ant-list-item\"},[_c('div',{staticClass:\"rules-table__col rules-table__col--grab\"}),_c('div',{staticClass:\"rules-table__col rules-table__col--rule rules-table__col--new\"},[_c('a-auto-complete',{class:{'rule-dropdown-error' : _vm.newRuleSelectError},attrs:{\"autoFocus\":true,\"filterOption\":_vm.filterOption,\"dataSource\":_vm.apis,\"value\":_vm.newRule,\"placeholder\":_vm.$t('label.rule')},on:{\"change\":function (val) { return _vm.newRule = val; }}})],1),_c('div',{staticClass:\"rules-table__col rules-table__col--permission\"},[_c('permission-editable',{attrs:{\"defaultValue\":_vm.newRulePermission},on:{\"change\":function($event){return _vm.onPermissionChange(null, $event)}}})],1),_c('div',{staticClass:\"rules-table__col rules-table__col--description\"},[_c('a-input',{attrs:{\"placeholder\":_vm.$t('label.description')},model:{value:(_vm.newRuleDescription),callback:function ($$v) {_vm.newRuleDescription=$$v},expression:\"newRuleDescription\"}})],1),_c('div',{staticClass:\"rules-table__col rules-table__col--actions\"},[_c('a-tooltip',{attrs:{\"placement\":\"bottom\"}},[_c('template',{slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.save.new.rule'))+\" \")]),_c('a-button',{attrs:{\"disabled\":!('createRolePermission' in _vm.$store.getters.apis),\"icon\":\"plus\",\"type\":\"primary\",\"shape\":\"circle\"},on:{\"click\":_vm.onRuleSave}})],2)],1)]),_c('draggable',{attrs:{\"disabled\":!('updateRolePermission' in this.$store.getters.apis),\"handle\":\".drag-handle\",\"animation\":\"200\",\"ghostClass\":\"drag-ghost\"},on:{\"change\":_vm.changeOrder},model:{value:(_vm.rules),callback:function ($$v) {_vm.rules=$$v},expression:\"rules\"}},[_c('transition-group',{attrs:{\"type\":\"transition\"}},_vm._l((_vm.rules),function(record,index){return _c('div',{key:(\"item-\" + index),staticClass:\"rules-table-item ant-list-item\"},[_c('div',{staticClass:\"rules-table__col rules-table__col--grab drag-handle\"},[_c('a-icon',{attrs:{\"type\":\"drag\"}})],1),_c('div',{staticClass:\"rules-table__col rules-table__col--rule\"},[_vm._v(\" \"+_vm._s(record.rule)+\" \")]),_c('div',{staticClass:\"rules-table__col rules-table__col--permission\"},[_c('permission-editable',{attrs:{\"defaultValue\":record.permission},on:{\"change\":function($event){return _vm.onPermissionChange(record, $event)}}})],1),_c('div',{staticClass:\"rules-table__col rules-table__col--description\"},[(record.description)?[_vm._v(\" \"+_vm._s(record.description)+\" \")]:_c('div',{staticClass:\"no-description\"},[_vm._v(\" \"+_vm._s(_vm.$t('message.no.description'))+\" \")])],2),_c('div',{staticClass:\"rules-table__col rules-table__col--actions\"},[_c('rule-delete',{attrs:{\"disabled\":!('deleteRolePermission' in _vm.$store.getters.apis),\"record\":record},on:{\"delete\":function($event){return _vm.onRuleDelete(record.id)}}})],1)])}),0)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-icon v-if=\"loadingTable\" type=\"loading\" class=\"main-loading-spinner\"></a-icon>\n  <div v-else>\n    <div style=\"width: 100%; display: flex; margin-bottom: 10px\">\n      <a-button type=\"dashed\" @click=\"exportRolePermissions\" style=\"width: 100%\" icon=\"download\">\n        Export Rules\n      </a-button>\n    </div>\n    <div v-if=\"updateTable\" class=\"loading-overlay\">\n      <a-icon type=\"loading\" />\n    </div>\n    <div\n      class=\"rules-list ant-list ant-list-bordered\"\n      :class=\"{'rules-list--overflow-hidden' : updateTable}\" >\n\n      <div class=\"rules-table-item ant-list-item\">\n        <div class=\"rules-table__col rules-table__col--grab\"></div>\n        <div class=\"rules-table__col rules-table__col--rule rules-table__col--new\">\n          <a-auto-complete\n            :autoFocus=\"true\"\n            :filterOption=\"filterOption\"\n            :dataSource=\"apis\"\n            :value=\"newRule\"\n            @change=\"val => newRule = val\"\n            :placeholder=\"$t('label.rule')\"\n            :class=\"{'rule-dropdown-error' : newRuleSelectError}\" />\n        </div>\n        <div class=\"rules-table__col rules-table__col--permission\">\n          <permission-editable\n            :defaultValue=\"newRulePermission\"\n            @change=\"onPermissionChange(null, $event)\" />\n        </div>\n        <div class=\"rules-table__col rules-table__col--description\">\n          <a-input v-model=\"newRuleDescription\" :placeholder=\"$t('label.description')\"></a-input>\n        </div>\n        <div class=\"rules-table__col rules-table__col--actions\">\n          <a-tooltip\n            placement=\"bottom\">\n            <template slot=\"title\">\n              {{ $t('label.save.new.rule') }}\n            </template>\n            <a-button\n              :disabled=\"!('createRolePermission' in $store.getters.apis)\"\n              icon=\"plus\"\n              type=\"primary\"\n              shape=\"circle\"\n              @click=\"onRuleSave\"\n            >\n            </a-button>\n          </a-tooltip>\n        </div>\n      </div>\n\n      <draggable\n        v-model=\"rules\"\n        @change=\"changeOrder\"\n        :disabled=\"!('updateRolePermission' in this.$store.getters.apis)\"\n        handle=\".drag-handle\"\n        animation=\"200\"\n        ghostClass=\"drag-ghost\">\n        <transition-group type=\"transition\">\n          <div\n            v-for=\"(record, index) in rules\"\n            :key=\"`item-${index}`\"\n            class=\"rules-table-item ant-list-item\">\n            <div class=\"rules-table__col rules-table__col--grab drag-handle\">\n              <a-icon type=\"drag\"></a-icon>\n            </div>\n            <div class=\"rules-table__col rules-table__col--rule\">\n              {{ record.rule }}\n            </div>\n            <div class=\"rules-table__col rules-table__col--permission\">\n              <permission-editable\n                :defaultValue=\"record.permission\"\n                @change=\"onPermissionChange(record, $event)\" />\n            </div>\n            <div class=\"rules-table__col rules-table__col--description\">\n              <template v-if=\"record.description\">\n                {{ record.description }}\n              </template>\n              <div v-else class=\"no-description\">\n                {{ $t('message.no.description') }}\n              </div>\n            </div>\n            <div class=\"rules-table__col rules-table__col--actions\">\n              <rule-delete\n                :disabled=\"!('deleteRolePermission' in $store.getters.apis)\"\n                :record=\"record\"\n                @delete=\"onRuleDelete(record.id)\" />\n            </div>\n          </div>\n        </transition-group>\n      </draggable>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport draggable from 'vuedraggable'\nimport PermissionEditable from './PermissionEditable'\nimport RuleDelete from './RuleDelete'\n\nexport default {\n  name: 'RolePermissionTab',\n  components: {\n    RuleDelete,\n    PermissionEditable,\n    draggable\n  },\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      loadingTable: true,\n      updateTable: false,\n      rules: null,\n      newRule: '',\n      newRulePermission: 'allow',\n      newRuleDescription: '',\n      newRuleSelectError: false,\n      drag: false,\n      apis: []\n    }\n  },\n  mounted () {\n    this.apis = Object.keys(this.$store.getters.apis).sort((a, b) => a.localeCompare(b))\n    this.fetchData()\n  },\n  watch: {\n    resource: function () {\n      this.fetchData(() => {\n        this.resetNewFields()\n      })\n    }\n  },\n  methods: {\n    filterOption (input, option) {\n      return (\n        option.componentOptions.children[0].text.toUpperCase().indexOf(input.toUpperCase()) >= 0\n      )\n    },\n    resetNewFields () {\n      this.newRule = ''\n      this.newRulePermission = 'allow'\n      this.newRuleDescription = ''\n      this.newRuleSelectError = false\n    },\n    fetchData (callback = null) {\n      if (!this.resource.id) return\n      api('listRolePermissions', { roleid: this.resource.id }).then(response => {\n        this.rules = response.listrolepermissionsresponse.rolepermission\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loadingTable = false\n        this.updateTable = false\n        if (callback) callback()\n      })\n    },\n    changeOrder () {\n      api('updateRolePermission', {}, 'POST', {\n        roleid: this.resource.id,\n        ruleorder: this.rules.map(rule => rule.id)\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.fetchData()\n      })\n    },\n    onRuleDelete (key) {\n      this.updateTable = true\n      api('deleteRolePermission', { id: key }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.fetchData()\n      })\n    },\n    onPermissionChange (record, value) {\n      this.newRulePermission = value\n\n      if (!record) return\n\n      this.updateTable = true\n      api('updateRolePermission', {\n        roleid: this.resource.id,\n        ruleid: record.id,\n        permission: value\n      }).then(() => {\n        this.fetchData()\n      }).catch(error => {\n        this.$notifyError(error)\n      })\n    },\n    onRuleSelect (value) {\n      this.newRule = value\n    },\n    onRuleSave () {\n      if (!this.newRule) {\n        this.newRuleSelectError = true\n        return\n      }\n\n      this.updateTable = true\n      api('createRolePermission', {\n        rule: this.newRule,\n        permission: this.newRulePermission,\n        description: this.newRuleDescription,\n        roleid: this.resource.id\n      }).then(() => {\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.resetNewFields()\n        this.fetchData()\n      })\n    },\n    rulesDataToCsv ({ data = null, columnDelimiter = ',', lineDelimiter = '\\n' }) {\n      if (data === null || !data.length) {\n        return null\n      }\n\n      const keys = ['rule', 'permission', 'description']\n      let result = ''\n      result += keys.join(columnDelimiter)\n      result += lineDelimiter\n\n      data.forEach(item => {\n        keys.forEach(key => {\n          if (item[key] === undefined) {\n            item[key] = ''\n          }\n          result += typeof item[key] === 'string' && item[key].includes(columnDelimiter) ? `\"${item[key]}\"` : item[key]\n          result += columnDelimiter\n        })\n        result = result.slice(0, -1)\n        result += lineDelimiter\n      })\n\n      return result\n    },\n    exportRolePermissions () {\n      const rulesCsvData = this.rulesDataToCsv({ data: this.rules })\n      const hiddenElement = document.createElement('a')\n      hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(rulesCsvData)\n      hiddenElement.target = '_blank'\n      hiddenElement.download = this.resource.name + '_' + this.resource.type + '.csv'\n      hiddenElement.click()\n      hiddenElement.delete()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n  .main-loading-spinner {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 30px;\n  }\n  .role-add-btn {\n    margin-bottom: 15px;\n  }\n  .new-role-controls {\n    display: flex;\n\n    button {\n      &:not(:last-child) {\n        margin-right: 5px;\n      }\n    }\n\n  }\n\n  .rules-list {\n    max-height: 600px;\n    overflow: auto;\n\n    &--overflow-hidden {\n      overflow: hidden;\n    }\n\n  }\n\n  .rules-table {\n\n    &-item {\n      position: relative;\n      display: flex;\n      align-items: stretch;\n      padding: 0;\n      flex-wrap: wrap;\n\n      @media (min-width: 760px) {\n        flex-wrap: nowrap;\n        padding-right: 25px;\n      }\n\n    }\n\n    &__col {\n      display: flex;\n      align-items: center;\n      padding: 15px;\n\n      @media (min-width: 760px) {\n        padding: 15px 0;\n\n        &:not(:first-child) {\n          padding-left: 20px;\n        }\n\n        &:not(:last-child) {\n          border-right: 1px solid #e8e8e8;\n          padding-right: 20px;\n        }\n      }\n\n      &--grab {\n        position: absolute;\n        top: 4px;\n        left: 0;\n        width: 100%;\n\n        @media (min-width: 760px) {\n          position: relative;\n          top: auto;\n          width: 35px;\n          padding-left: 25px;\n          justify-content: center;\n        }\n\n      }\n\n      &--rule,\n      &--description {\n        word-break: break-all;\n        flex: 1;\n        width: 100%;\n\n        @media (min-width: 760px) {\n          width: auto;\n        }\n\n      }\n\n      &--rule {\n        padding-left: 60px;\n        background-color: rgba(#e6f7ff, 0.7);\n\n        @media (min-width: 760px) {\n          padding-left: 0;\n          background: none;\n        }\n\n      }\n\n      &--permission {\n        justify-content: center;\n        width: 100%;\n\n        .ant-select {\n          width: 100%;\n        }\n\n        @media (min-width: 760px) {\n          width: auto;\n\n          .ant-select {\n            width: auto;\n          }\n\n        }\n\n      }\n\n      &--actions {\n        max-width: 60px;\n        width: 100%;\n        padding-right: 0;\n\n        @media (min-width: 760px) {\n          width: auto;\n          max-width: 70px;\n          padding-right: 15px;\n        }\n\n      }\n\n      &--new {\n        padding-left: 15px;\n        background-color: transparent;\n\n        div {\n          width: 100%;\n        }\n\n      }\n\n    }\n\n  }\n\n  .no-description {\n    opacity: 0.4;\n    font-size: 0.7rem;\n\n    @media (min-width: 760px) {\n      display: none;\n    }\n\n  }\n\n  .drag-handle {\n    cursor: pointer;\n  }\n\n  .drag-ghost {\n    opacity: 0.5;\n    background: #f0f2f5;\n  }\n\n  .loading-overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: 5;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 3rem;\n    color: #39A7DE;\n    background-color: rgba(#fff, 0.8);\n  }\n</style>\n\n<style lang=\"scss\">\n  .rules-table__col--new {\n    .ant-select {\n      width: 100%;\n    }\n  }\n  .rule-dropdown-error {\n    .ant-input {\n      border-color: #ff0000\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RolePermissionTab.vue?vue&type=template&id=7650c927&scoped=true&\"\nimport script from \"./RolePermissionTab.vue?vue&type=script&lang=js&\"\nexport * from \"./RolePermissionTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RolePermissionTab.vue?vue&type=style&index=0&id=7650c927&lang=scss&scoped=true&\"\nimport style1 from \"./RolePermissionTab.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7650c927\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=style&index=1&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-tooltip',{attrs:{\"placement\":\"bottom\"}},[_c('template',{slot:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.delete.rule'))+\" \")]),_c('a-popconfirm',{attrs:{\"title\":((_vm.$t('label.delete.rule')) + \"?\"),\"disabled\":_vm.disabled},on:{\"confirm\":_vm.handleDelete}},[_c('a-button',{attrs:{\"type\":\"danger\",\"shape\":\"circle\",\"disabled\":_vm.disabled}},[_c('a-icon',{attrs:{\"type\":\"delete\"}})],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-tooltip placement=\"bottom\">\n    <template slot=\"title\">\n      {{ $t('label.delete.rule') }}\n    </template>\n    <a-popconfirm\n      :title=\"`${$t('label.delete.rule')}?`\"\n      @confirm=\"handleDelete\"\n      :disabled=\"disabled\">\n      <a-button type=\"danger\" shape=\"circle\" :disabled=\"disabled\">\n        <a-icon type=\"delete\" />\n      </a-button>\n    </a-popconfirm>\n  </a-tooltip>\n</template>\n\n<script>\nexport default {\n  name: 'RuleDelete',\n  props: {\n    record: {\n      type: Object,\n      required: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  methods: {\n    handleDelete () {\n      this.$emit('delete')\n    }\n  }\n}\n</script>\n\n<style\n  scoped\n  lang=\"scss\"\n>\n  .anticon-delete {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RuleDelete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RuleDelete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RuleDelete.vue?vue&type=template&id=c2a6d786&scoped=true&\"\nimport script from \"./RuleDelete.vue?vue&type=script&lang=js&\"\nexport * from \"./RuleDelete.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RuleDelete.vue?vue&type=style&index=0&id=c2a6d786&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c2a6d786\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=style&index=0&id=7650c927&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RolePermissionTab.vue?vue&type=style&index=0&id=7650c927&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RuleDelete.vue?vue&type=style&index=0&id=c2a6d786&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RuleDelete.vue?vue&type=style&index=0&id=c2a6d786&scoped=true&lang=scss&\""],"sourceRoot":""}