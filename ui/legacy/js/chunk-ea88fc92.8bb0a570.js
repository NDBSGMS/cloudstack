(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea88fc92","chunk-a313c058","chunk-63b01062"],{"0098":function(e,t,a){},"05d6":function(e,t,a){"use strict";var s=a("0098"),n=a.n(s);n.a},"06b2":function(e,t,a){},"0752":function(e,t,a){"use strict";var s=a("2ad5"),n=a.n(s);n.a},"2ad5":function(e,t,a){},"4f06":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.routers,rowKey:function(e){return e.id},pagination:!1,loading:e.fetchLoading},scopedSlots:e._u([{key:"name",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/router/"+s.id}}},[e._v(e._s(t))])]}},{key:"status",fn:function(e,t){return[a("status",{staticClass:"status",attrs:{text:t.state,displayText:""}})]}},{key:"requiresupgrade",fn:function(t,a){return[e._v(" "+e._s(a.requiresupgrade?e.$t("label.yes"):e.$t("label.no"))+" ")]}},{key:"isredundantrouter",fn:function(t,a){return[e._v(" "+e._s(a.isredundantrouter?a.redundantstate:a.isredundantrouter)+" ")]}},{key:"hostname",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/host/"+s.hostid}}},[e._v(e._s(s.hostname||s.hostid))])]}}])})},n=[],i=(a("d3b7"),a("2ca0"),a("365c")),r=a("829c"),o={name:"RoutersTab",components:{Status:r["a"]},props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{fetchLoading:!1,routers:[],columns:[{title:this.$t("label.name"),dataIndex:"name",scopedSlots:{customRender:"name"}},{title:this.$t("label.status"),dataIndex:"state",scopedSlots:{customRender:"status"}},{title:this.$t("label.ip"),dataIndex:"publicip"},{title:this.$t("label.version"),dataIndex:"version"},{title:this.$t("label.requiresupgrade"),dataIndex:"requiresupgrade",scopedSlots:{customRender:"requiresupgrade"}},{title:this.$t("label.isredundantrouter"),dataIndex:"isredundantrouter",scopedSlots:{customRender:"isredundantrouter"}},{title:this.$t("label.hostname"),dataIndex:"hostname",scopedSlots:{customRender:"hostname"}}]}},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this,t={listAll:!0};this.$route.fullPath.startsWith("/vpc")?t.vpcid=this.resource.id:t.networkid=this.resource.id,this.fetchLoading=!0,Object(i["a"])("listRouters",t).then((function(t){e.routers=t.listroutersresponse.router||[]})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))}}},l=o,c=(a("729c"),a("2877")),d=Object(c["a"])(l,s,n,!1,null,"7db0eb28",null);t["default"]=d.exports},"729c":function(e,t,a){"use strict";var s=a("06b2"),n=a.n(s);n.a},"76cf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.fetchLoading}},[a("a-tabs",{attrs:{activeKey:e.currentTab,tabPosition:"mobile"===e.device?"top":"left",animated:!1},on:{change:e.handleChangeTab}},[a("a-tab-pane",{key:"details",attrs:{tab:e.$t("label.details")}},[a("DetailsTab",{attrs:{resource:e.resource,loading:e.loading}})],1),a("a-tab-pane",{key:"tier",attrs:{tab:e.$t("label.networks")}},[a("VpcTiersTab",{attrs:{resource:e.resource,loading:e.loading}})],1),"listPublicIpAddresses"in e.$store.getters.apis?a("a-tab-pane",{key:"ip",attrs:{tab:e.$t("label.public.ips")}},[a("IpAddressesTab",{attrs:{resource:e.resource,loading:e.loading}})],1):e._e(),"listNetworkACLLists"in e.$store.getters.apis?a("a-tab-pane",{key:"acl",attrs:{tab:e.$t("label.network.acl.lists")}},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus",disabled:!("createNetworkACLList"in e.$store.getters.apis)},on:{click:function(){return e.handleOpenModals("networkAcl")}}},[e._v(" "+e._s(e.$t("label.add.network.acl.list"))+" ")]),a("a-table",{staticClass:"table",attrs:{size:"small",columns:e.networkAclsColumns,dataSource:e.networkAcls,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"name",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/acllist/"+s.id}}},[e._v(" "+e._s(t)+" ")])]}}],null,!1,2397411940)}),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.itemCounts.networkAcls,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}],null,!1,3544671426)}),a("a-modal",{attrs:{title:e.$t("label.add.acl.list"),maskClosable:!1},on:{ok:e.handleNetworkAclFormSubmit},model:{value:e.modals.networkAcl,callback:function(t){e.$set(e.modals,"networkAcl",t)},expression:"modals.networkAcl"}},[a("a-form",{attrs:{form:e.networkAclForm},on:{submit:function(t){return t.preventDefault(),e.handleNetworkAclFormSubmit(t)}}},[a("a-form-item",{attrs:{label:e.$t("label.add.list.name")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['name', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}]})],1),a("a-form-item",{attrs:{label:e.$t("label.description")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['description', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}]})],1)],1)],1)],1):e._e(),"listPrivateGateways"in e.$store.getters.apis?a("a-tab-pane",{key:"pgw",attrs:{tab:e.$t("label.private.gateway")}},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus",disabled:!("createPrivateGateway"in e.$store.getters.apis)},on:{click:function(){return e.handleOpenModals("privateGateways")}}},[e._v(e._s(e.$t("label.add.private.gateway")))]),a("a-table",{staticClass:"table",attrs:{size:"small",columns:e.privateGatewaysColumns,dataSource:e.privateGateways,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"ipaddress",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/privategw/"+s.id}}},[e._v(e._s(t))])]}},{key:"state",fn:function(e,t){return[a("status",{attrs:{text:t.state,displayText:""}})]}}],null,!1,2160641531)}),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.itemCounts.privateGateways,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}],null,!1,3544671426)}),a("a-modal",{attrs:{title:e.$t("label.add.new.gateway"),maskClosable:!1},on:{ok:e.handleGatewayFormSubmit},model:{value:e.modals.gateway,callback:function(t){e.$set(e.modals,"gateway",t)},expression:"modals.gateway"}},[a("a-spin",{attrs:{spinning:e.modals.gatewayLoading}},[a("p",[e._v(e._s(e.$t("message.add.new.gateway.to.vpc")))]),a("a-form",{attrs:{form:e.gatewayForm},on:{submit:function(t){return t.preventDefault(),e.handleGatewayFormSubmit(t)}}},[a("a-form-item",{attrs:{label:e.$t("label.physicalnetworkid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["physicalnetwork"],expression:"['physicalnetwork']"}]},e._l(e.physicalnetworks,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:e.$t("label.vlan"),required:!0}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["vlan",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['vlan', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.placeholders.vlan}})],1),e.$store.getters.apis.createPrivateGateway&&e.$store.getters.apis.createPrivateGateway.params.filter((function(e){return"bypassvlanoverlapcheck"===e.name})).length>0?a("a-form-item",{attrs:{label:e.$t("label.bypassvlanoverlapcheck")}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["bypassvlanoverlapcheck"],expression:"['bypassvlanoverlapcheck']"}]})],1):e._e(),a("a-form-item",{attrs:{label:e.$t("label.publicip"),required:!0}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipaddress",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['ipaddress', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.placeholders.ipaddress}})],1),a("a-form-item",{attrs:{label:e.$t("label.gateway"),required:!0}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['gateway', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.placeholders.gateway}})],1),a("a-form-item",{attrs:{label:e.$t("label.netmask"),required:!0}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['netmask', {rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.placeholders.netmask}})],1),a("a-form-item",{attrs:{label:e.$t("label.sourcenat")}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["nat"],expression:"['nat']"}]})],1),a("a-form-item",{attrs:{label:e.$t("label.aclid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["acl"],expression:"['acl']"}]},e._l(e.networkAcls,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1)],1)],1):e._e(),"listVpnGateways"in e.$store.getters.apis?a("a-tab-pane",{key:"vpngw",attrs:{tab:e.$t("label.vpn.gateway")}},[0===e.vpnGateways.length?a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus",disabled:!("createVpnGateway"in e.$store.getters.apis)},on:{click:e.handleCreateVpnGateway}},[e._v(" "+e._s(e.$t("label.create.site.vpn.gateway"))+" ")]):e._e(),a("a-list",{staticClass:"list"},e._l(e.vpnGateways,(function(t){return a("a-list-item",{key:t.id},[a("div",{staticClass:"list__item"},[a("div",{staticClass:"list__col"},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.ip")))]),a("div",[a("router-link",{attrs:{to:{path:"/s2svpn/"+t.id}}},[e._v(" "+e._s(t.publicip)+" ")])],1)])])])})),1)],1):e._e(),"listVpnConnections"in e.$store.getters.apis?a("a-tab-pane",{key:"vpnc",attrs:{tab:e.$t("label.vpn.connection")}},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus",disabled:!("createVpnConnection"in e.$store.getters.apis)},on:{click:function(t){return e.handleOpenModals("vpnConnection")}}},[e._v(" "+e._s(e.$t("label.create.site.vpn.connection"))+" ")]),a("a-table",{staticClass:"table",attrs:{size:"small",columns:e.vpnConnectionsColumns,dataSource:e.vpnConnections,pagination:!1,rowKey:function(e){return e.id}},scopedSlots:e._u([{key:"publicip",fn:function(t,s){return a("a",{attrs:{href:"javascript:;"}},[a("router-link",{attrs:{to:{path:"/s2svpnconn/"+s.id}}},[e._v(" "+e._s(t)+" ")])],1)}},{key:"state",fn:function(e){return[a("status",{attrs:{text:e||"",displayText:""}})]}}],null,!1,3887066557)}),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.itemCounts.vpnConnections,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}],null,!1,3544671426)}),a("a-modal",{attrs:{title:e.$t("label.create.vpn.connection"),maskClosable:!1},on:{ok:e.handleVpnConnectionFormSubmit},model:{value:e.modals.vpnConnection,callback:function(t){e.$set(e.modals,"vpnConnection",t)},expression:"modals.vpnConnection"}},[a("a-spin",{attrs:{spinning:e.modals.vpnConnectionLoading}},[a("a-form",{attrs:{form:e.vpnConnectionForm},on:{submit:function(t){return t.preventDefault(),e.handleVpnConnectionFormSubmit(t)}}},[a("a-form-item",{attrs:{label:e.$t("label.vpncustomergatewayid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["vpncustomergateway"],expression:"['vpncustomergateway']"}]},e._l(e.vpncustomergateways,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:e.$t("label.passive")}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["passive"],expression:"['passive']"}]})],1)],1)],1)],1)],1):e._e(),"Admin"===e.$store.getters.userInfo.roletype?a("a-tab-pane",{key:"vr",attrs:{tab:e.$t("label.virtual.routers")}},[a("RoutersTab",{attrs:{resource:e.resource,loading:e.loading}})],1):e._e()],1)],1)},n=[],i=(a("a4d3"),a("e01a"),a("b0c0"),a("d3b7"),a("365c")),r=a("ac0d"),o=a("5801"),l=a("829c"),c=a("c444"),d=a("4f06"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.fetchLoading}},[a("a-button",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{type:"dashed",icon:"plus",disabled:!("createNetwork"in e.$store.getters.apis)},on:{click:e.handleOpenModal}},[e._v(e._s(e.$t("label.add.network")))]),a("a-list",{staticClass:"list"},e._l(e.networks,(function(t,s){return a("a-list-item",{key:s,staticClass:"list__item"},[a("div",{staticClass:"list__item-outer-container"},[a("div",{staticClass:"list__item-container"},[a("div",{staticClass:"list__col"},[a("div",{staticClass:"list__label"},[e._v(" "+e._s(e.$t("label.name"))+" ")]),a("div",[a("router-link",{attrs:{to:{path:"/guestnetwork/"+t.id}}},[e._v(e._s(t.name)+" ")]),t.broadcasturi?a("a-tag",[e._v(e._s(t.broadcasturi))]):e._e()],1)]),a("div",{staticClass:"list__col"},[a("div",{staticClass:"list__label"},[e._v(e._s(e.$t("label.state")))]),a("div",[a("status",{attrs:{text:t.state,displayText:""}})],1)]),a("div",{staticClass:"list__col"},[a("div",{staticClass:"list__label"},[e._v(" "+e._s(e.$t("label.cidr"))+" ")]),a("div",[e._v(e._s(t.cidr))])]),a("div",{staticClass:"list__col"},[a("div",{staticClass:"list__label"},[e._v(" "+e._s(e.$t("label.aclid"))+" ")]),a("div",[a("router-link",{attrs:{to:{path:"/acllist/"+t.aclid}}},[e._v(" "+e._s(t.aclname)+" ")])],1)])]),a("a-collapse",{staticStyle:{"margin-left":"-18px"},attrs:{bordered:!1},scopedSlots:e._u([{key:"expandIcon",fn:function(e){return[a("a-icon",{attrs:{type:"caret-right",rotate:e.isActive?90:0}})]}}],null,!0)},[a("a-collapse-panel",{key:"vm",style:e.customStyle,attrs:{header:e.$t("label.instances")}},[a("a-button",{staticStyle:{"margin-bottom":"15px",width:"100%"},attrs:{icon:"plus",type:"dashed",disabled:!("deployVirtualMachine"in e.$store.getters.apis)},on:{click:function(a){return e.$router.push({path:"/action/deployVirtualMachine?networkid="+t.id+"&zoneid="+t.zoneid})}}},[e._v(" "+e._s(e.$t("label.vm.add"))+" ")]),a("a-table",{staticClass:"table",attrs:{size:"small",columns:e.vmCols,dataSource:e.vms[t.id],rowKey:function(e){return e.id},pagination:!1,loading:e.fetchLoading},scopedSlots:e._u([{key:"name",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/vm/"+s.id}}},[e._v(e._s(s.name)+" ")])]}},{key:"state",fn:function(e,t){return[a("status",{attrs:{text:t.state,displayText:""}})]}},{key:"ip",fn:function(s,n){return e._l(n.nic,(function(s){return a("div",{key:s.id},[e._v(" "+e._s(s.networkid===t.id?s.ipaddress:"")+" ")])}))}}],null,!0)}),a("a-divider"),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.itemCounts.vms[t.id],showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}],null,!0)})],1),a("a-collapse-panel",{key:"ilb",style:e.customStyle,attrs:{header:e.$t("label.internal.lb"),disabled:!e.showIlb(t)}},[a("a-button",{staticStyle:{"margin-bottom":"15px",width:"100%"},attrs:{icon:"plus",type:"dashed",disabled:!("createLoadBalancer"in e.$store.getters.apis)},on:{click:function(a){return e.handleAddInternalLB(t.id)}}},[e._v(" "+e._s(e.$t("label.add.internal.lb"))+" ")]),a("a-table",{staticClass:"table",attrs:{size:"small",columns:e.internalLbCols,dataSource:e.internalLB[t.id],rowKey:function(e){return e.id},pagination:!1,loading:e.fetchLoading},scopedSlots:e._u([{key:"name",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/ilb/"+s.id}}},[e._v(e._s(s.name)+" ")])]}}],null,!0)}),a("a-divider"),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.itemCounts.internalLB[t.id],showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}],null,!0)})],1)],1)],1)])})),1),a("a-modal",{attrs:{title:e.$t("label.add.new.tier"),maskClosable:!1},on:{ok:e.handleAddNetworkSubmit},model:{value:e.showCreateNetworkModal,callback:function(t){e.showCreateNetworkModal=t},expression:"showCreateNetworkModal"}},[a("a-spin",{attrs:{spinning:e.modalLoading}},[a("a-form",{attrs:{form:e.form},on:{submit:function(t){return t.preventDefault(),e.handleAddNetworkSubmit(t)}}},[a("a-form-item",{attrs:{label:e.$t("label.name")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['name',{rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.$t("label.unique.name.tier")}})],1),a("a-form-item",{attrs:{label:e.$t("label.networkofferingid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkOffering",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['networkOffering',{rules: [{ required: true, message: `${$t('label.required')}` }]}]"}]},e._l(e.networkOfferings,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-item",{attrs:{label:e.$t("label.gateway")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['gateway',{rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.$t("label.create.network.gateway.description")}})],1),a("a-form-item",{attrs:{label:e.$t("label.netmask")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"['netmask',{rules: [{ required: true, message: `${$t('label.required')}` }]}]"}],attrs:{placeholder:e.$t("label.create.network.netmask.description")}})],1),a("a-form-item",{attrs:{label:e.$t("label.externalid")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["externalId"],expression:"['externalId']"}]})],1),a("a-form-item",{attrs:{label:e.$t("label.aclid")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["acl"],expression:"['acl']"}]},e._l(e.networkAclList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1)],1)],1),a("a-modal",{attrs:{title:e.$t("label.add.internal.lb"),maskClosable:!1},on:{ok:e.handleAddInternalLBSubmit},model:{value:e.showAddInternalLB,callback:function(t){e.showAddInternalLB=t},expression:"showAddInternalLB"}},[a("a-spin",{attrs:{spinning:e.modalLoading}},[a("a-form",{attrs:{form:e.form},on:{submit:function(t){return t.preventDefault(),e.handleAddInternalLBSubmit(t)}}},[a("a-form-item",{attrs:{label:e.$t("label.name")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("message.error.internallb.name")}]}],expression:"['name', { rules: [{ required: true, message: $t('message.error.internallb.name')}] }]"}],attrs:{placeholder:e.$t("label.internallb.name.description")}})],1),a("a-form-item",{attrs:{label:e.$t("label.description")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{placeholder:e.$t("label.internallb.description")}})],1),a("a-form-item",{attrs:{label:e.$t("label.sourceipaddress")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sourceIP"],expression:"['sourceIP']"}],attrs:{placeholder:e.$t("label.internallb.sourceip.description")}})],1),a("a-form-item",{attrs:{label:e.$t("label.sourceport")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sourcePort",{rules:[{required:!0,message:e.$t("message.error.internallb.source.port")}]}],expression:"['sourcePort', { rules: [{ required: true, message: $t('message.error.internallb.source.port')}] }]"}]})],1),a("a-form-item",{attrs:{label:e.$t("label.instanceport")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["instancePort",{rules:[{required:!0,message:e.$t("message.error.internallb.instance.port")}]}],expression:"['instancePort', { rules: [{ required: true, message: $t('message.error.internallb.instance.port')}] }]"}]})],1),a("a-form-item",{attrs:{label:e.$t("label.algorithm")}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["algorithm",{initialValue:"Source",rules:[{required:!0,message:""+e.$t("label.required")}]}],expression:"[\n              'algorithm',\n              {\n                initialValue: 'Source',\n                rules: [{ required: true, message: `${$t('label.required')}`}]\n              }]"}]},e._l(Object.keys(e.algorithms),(function(t,s){return a("a-select-option",{key:s,attrs:{value:e.algorithms[t]}},[e._v(" "+e._s(t)+" ")])})),1)],1)],1)],1)],1)],1)},p=[],h=(a("d28b"),a("4de4"),a("3ca3"),a("ddb0"),{name:"VpcTiersTab",components:{Status:l["a"]},props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},inject:["parentFetchData"],data:function(){return{networks:[],networkid:"",fetchLoading:!1,showCreateNetworkModal:!1,showAddInternalLB:!1,networkOfferings:[],networkAclList:[],modalLoading:!1,internalLB:{},LBPublicIPs:{},staticNats:{},vms:{},algorithms:{Source:"source","Round-robin":"roundrobin","Least connections":"leastconn"},internalLbCols:[{title:this.$t("label.name"),dataIndex:"name",scopedSlots:{customRender:"name"}},{title:this.$t("label.sourceipaddress"),dataIndex:"sourceipaddress"},{title:this.$t("label.algorithm"),dataIndex:"algorithm"},{title:this.$t("label.account"),dataIndex:"account"}],LBPublicIPCols:[{title:this.$t("label.ip"),dataIndex:"ipaddress",scopedSlots:{customRender:"ipaddress"}},{title:this.$t("label.state"),dataIndex:"state"},{title:this.$t("label.networkid"),dataIndex:"associatedNetworkName"},{title:this.$t("label.vm"),dataIndex:"virtualmachinename"}],StaticNatCols:[{title:this.$t("label.ips"),dataIndex:"ipaddress",scopedSlots:{customRender:"ipaddress"}},{title:this.$t("label.zoneid"),dataIndex:"zonename"},{title:this.$t("label.networkid"),dataIndex:"associatedNetworkName"},{title:this.$t("label.state"),dataIndex:"state"}],vmCols:[{title:this.$t("label.name"),dataIndex:"name",scopedSlots:{customRender:"name"}},{title:this.$t("label.state"),dataIndex:"state",scopedSlots:{customRender:"state"}},{title:this.$t("label.ip"),scopedSlots:{customRender:"ip"}}],customStyle:"margin-bottom: -10px; border-bottom-style: none",page:1,pageSize:10,itemCounts:{internalLB:{},publicIps:{},snats:{},vms:{}}}},mounted:function(){this.fetchData()},watch:{loading:function(e,t){!e&&this.resource.id&&this.fetchData()}},beforeCreate:function(){this.form=this.$form.createForm(this)},methods:{showIlb:function(e){return e.service.filter((function(e){return"Lb"===e.name&&e.capability.filter((function(e){return"LbSchemes"===e.name&&"Internal"===e.value})).length>0})).length>0||!1},fetchData:function(){this.networks=this.resource.network;var e=!0,t=!1,a=void 0;try{for(var s,n=this.networks[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var i=s.value;this.fetchLoadBalancers(i.id),this.fetchVMs(i.id)}}catch(r){t=!0,a=r}finally{try{e||null==n.return||n.return()}finally{if(t)throw a}}},fetchNetworkAclList:function(){var e=this;this.fetchLoading=!0,this.modalLoading=!0,Object(i["a"])("listNetworkACLLists",{vpcid:this.resource.id}).then((function(t){e.networkAclList=t.listnetworkacllistsresponse.networkacllist||[],e.$nextTick((function(){this.form.setFieldsValue({acl:this.networkAclList[0].id})}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1,e.modalLoading=!1}))},fetchNetworkOfferings:function(){var e=this;this.fetchLoading=!0,this.modalLoading=!0,Object(i["a"])("listNetworkOfferings",{forvpc:!0,guestiptype:"Isolated",supportedServices:"SourceNat",state:"Enabled"}).then((function(t){e.networkOfferings=t.listnetworkofferingsresponse.networkoffering||[],e.$nextTick((function(){this.form.setFieldsValue({networkOffering:this.networkOfferings[0].id})}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1,e.modalLoading=!1}))},fetchLoadBalancers:function(e){var t=this;this.fetchLoading=!0,Object(i["a"])("listLoadBalancers",{networkid:e,page:this.page,pagesize:this.pageSize}).then((function(a){t.internalLB[e]=a.listloadbalancersresponse.loadbalancer||[],t.itemCounts.internalLB[e]=a.listloadbalancersresponse.count||0,t.$forceUpdate()})).finally((function(){t.fetchLoading=!1}))},fetchVMs:function(e){var t=this;this.fetchLoading=!0,Object(i["a"])("listVirtualMachines",{listAll:!0,vpcid:this.resource.id,networkid:e,page:this.page,pagesize:this.pageSize}).then((function(a){t.vms[e]=a.listvirtualmachinesresponse.virtualmachine||[],t.itemCounts.vms[e]=a.listvirtualmachinesresponse.count||0,t.$forceUpdate()})).finally((function(){t.fetchLoading=!1}))},closeModal:function(){this.$emit("close-action")},handleOpenModal:function(){this.form=this.$form.createForm(this),this.fetchNetworkAclList(),this.fetchNetworkOfferings(),this.showCreateNetworkModal=!0},handleAddInternalLB:function(e){this.form=this.$form.createForm(this),this.showAddInternalLB=!0,this.networkid=e},handleAddNetworkSubmit:function(){var e=this;this.fetchLoading=!0,this.form.validateFields((function(t,a){t?e.fetchLoading=!1:(e.showCreateNetworkModal=!1,Object(i["a"])("createNetwork",{vpcid:e.resource.id,domainid:e.resource.domainid,account:e.resource.account,networkOfferingId:a.networkOffering,name:a.name,displayText:a.name,gateway:a.gateway,netmask:a.netmask,zoneId:e.resource.zoneid,externalid:a.externalId,aclid:a.acl}).then((function(){e.$notification.success({message:e.$t("message.success.add.vpc.network")})})).catch((function(t){e.$notifyError(t)})).finally((function(){e.parentFetchData(),e.fetchData(),e.fetchLoading=!1})))}))},handleAddInternalLBSubmit:function(){var e=this;this.fetchLoading=!0,this.modalLoading=!0,this.form.validateFields((function(t,a){t?e.fetchLoading=!1:Object(i["a"])("createLoadBalancer",{name:a.name,sourceport:a.sourcePort,instanceport:a.instancePort,algorithm:a.algorithm,networkid:e.networkid,sourceipaddressnetworkid:e.networkid,scheme:"Internal"}).then((function(t){e.$store.dispatch("AddAsyncJob",{title:e.$t("message.create.internallb"),jobid:t.createloadbalancerresponse.jobid,description:a.name,status:"progress"}),e.$pollJob({jobId:t.createloadbalancerresponse.jobid,successMessage:e.$t("message.success.create.internallb"),successMethod:function(){e.fetchData()},errorMessage:"".concat(e.$t("message.create.internallb.failed")," ")+t,errorMethod:function(){e.fetchData()},loadingMessage:e.$t("message.create.internallb.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.fetchData()}})})).catch((function(t){console.error(t),e.$message.error(e.$t("message.create.internallb.failed"))})).finally((function(){e.modalLoading=!1,e.fetchLoading=!1,e.showAddInternalLB=!1,e.fetchData()}))}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}}),m=h,f=(a("b506"),a("2877")),g=Object(f["a"])(m,u,p,!1,null,"567fed6e",null),b=g.exports,v={name:"VpcTab",components:{DetailsTab:o["default"],Status:l["a"],IpAddressesTab:c["default"],RoutersTab:d["default"],VpcTiersTab:b},mixins:[r["c"]],props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{fetchLoading:!1,privateGateways:[],vpnGateways:[],vpnConnections:[],networkAcls:[],modals:{gateway:!1,gatewayLoading:!1,vpnConnection:!1,vpnConnectionLoading:!1,networkAcl:!1},placeholders:{vlan:null,ipaddress:null,gateway:null,netmask:null},physicalnetworks:[],vpncustomergateways:[],privateGatewaysColumns:[{title:this.$t("label.ip"),dataIndex:"ipaddress",scopedSlots:{customRender:"ipaddress"}},{title:this.$t("label.state"),dataIndex:"state",scopedSlots:{customRender:"state"}},{title:this.$t("label.gateway"),dataIndex:"gateway"},{title:this.$t("label.netmask"),dataIndex:"netmask"},{title:this.$t("label.vlan"),dataIndex:"vlan"}],vpnConnectionsColumns:[{title:this.$t("label.ip"),dataIndex:"publicip",scopedSlots:{customRender:"publicip"}},{title:this.$t("label.state"),dataIndex:"state",scopedSlots:{customRender:"state"}},{title:this.$t("label.gateway"),dataIndex:"gateway"},{title:this.$t("label.ipsecpsk"),dataIndex:"ipsecpsk"}],networkAclsColumns:[{title:this.$t("label.name"),dataIndex:"name",scopedSlots:{customRender:"name"}},{title:this.$t("label.description"),dataIndex:"description"}],itemCounts:{privateGateways:0,vpnConnections:0,networkAcls:0},page:1,pageSize:10,currentTab:"details"}},beforeCreate:function(){this.gatewayForm=this.$form.createForm(this),this.vpnConnectionForm=this.$form.createForm(this),this.networkAclForm=this.$form.createForm(this)},mounted:function(){this.handleFetchData()},watch:{loading:function(e,t){!e&&this.resource.id&&this.handleFetchData()}},methods:{handleChangeTab:function(e){this.currentTab=e,this.page=1,this.pageSize=10,this.handleFetchData()},handleFetchData:function(){switch(this.currentTab){case"pgw":this.fetchPrivateGateways();break;case"vpngw":this.fetchVpnGateways();break;case"vpnc":this.fetchVpnConnections();break;case"acl":this.fetchAclList();break}},fetchPrivateGateways:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("listPrivateGateways",{vpcid:this.resource.id,listAll:!0,page:this.page,pagesize:this.pageSize}).then((function(t){e.privateGateways=t.listprivategatewaysresponse.privategateway,e.itemCounts.privateGateways=t.listprivategatewaysresponse.count})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))},fetchVpnGateways:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("listVpnGateways",{vpcid:this.resource.id,listAll:!0}).then((function(t){e.vpnGateways=t.listvpngatewaysresponse.vpngateway?t.listvpngatewaysresponse.vpngateway:[]})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))},fetchVpnConnections:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("listVpnConnections",{vpcid:this.resource.id,listAll:!0,page:this.page,pagesize:this.pageSize}).then((function(t){e.vpnConnections=t.listvpnconnectionsresponse.vpnconnection,e.itemCounts.vpnConnections=t.listvpnconnectionsresponse.count})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))},fetchAclList:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("listNetworkACLLists",{vpcid:this.resource.id,listAll:!0,page:this.page,pagesize:this.pageSize}).then((function(t){e.networkAcls=t.listnetworkacllistsresponse.networkacllist,e.itemCounts.networkAcls=t.listnetworkacllistsresponse.count,!0===e.modals.gateway&&e.$nextTick((function(){e.gatewayForm.setFieldsValue({acl:e.networkAcls[0].id})}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1}))},fetchPhysicalNetworks:function(){var e=this;this.modals.gatewayLoading=!0,Object(i["a"])("listPhysicalNetworks",{zoneid:this.resource.zoneid}).then((function(t){e.physicalnetworks=t.listphysicalnetworksresponse.physicalnetwork,!0===e.modals.gateway&&e.$nextTick((function(){e.gatewayForm.setFieldsValue({physicalnetwork:e.physicalnetworks[0].id})}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.modals.gatewayLoading=!1}))},fetchVpnCustomerGateways:function(){var e=this;this.modals.vpnConnectionLoading=!0,Object(i["a"])("listVpnCustomerGateways",{listAll:!0}).then((function(t){e.vpncustomergateways=t.listvpncustomergatewaysresponse.vpncustomergateway,!0===e.modals.vpnConnection&&e.$nextTick((function(){e.vpnConnectionForm.setFieldsValue({vpncustomergateway:e.vpncustomergateways[0].id})}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.modals.vpnConnectionLoading=!1}))},handleOpenModals:function(e){switch(e){case"privateGateways":this.modals.gateway=!0,this.gatewayForm.resetFields(),this.fetchAclList(),this.fetchPhysicalNetworks();break;case"vpnConnection":this.modals.vpnConnection=!0,this.vpnConnectionForm.resetFields(),this.fetchVpnCustomerGateways(),this.fetchVpnGateways();break;case"networkAcl":this.modals.networkAcl=!0,this.networkAclForm.resetFields();break}},handleGatewayFormSubmit:function(){var e=this;this.modals.gatewayLoading=!0,this.gatewayForm.validateFields((function(t){if(t)e.modals.gatewayLoading=!1;else{var a=e.gatewayForm.getFieldsValue(),s={sourcenatsupported:a.nat,physicalnetworkid:a.physicalnetwork,vpcid:e.resource.id,ipaddress:a.ipaddress,gateway:a.gateway,netmask:a.netmask,vlan:a.vlan,aclid:a.acl};a.bypassvlanoverlapcheck&&(s.bypassvlanoverlapcheck=a.bypassvlanoverlapcheck),Object(i["a"])("createPrivateGateway",s).then((function(t){e.$store.dispatch("AddAsyncJob",{title:e.$t("message.success.add.private.gateway"),jobid:t.createprivategatewayresponse.jobid,status:"progress"}),e.$pollJob({jobId:t.createprivategatewayresponse.jobid,successMethod:function(){e.modals.gateway=!1,e.handleFetchData()},errorMessage:e.$t("message.add.private.gateway.failed"),errorMethod:function(){e.modals.gateway=!1,e.handleFetchData()},loadingMessage:e.$t("message.add.private.gateway.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.modals.gateway=!1,e.handleFetchData()}})})).catch((function(t){e.$notifyError(t)})).finally((function(){e.modals.gatewayLoading=!1,e.modals.gateway=!1,e.handleFetchData()}))}}))},handleVpnConnectionFormSubmit:function(){var e=this;this.fetchLoading=!0,this.modals.vpnConnection=!1,this.vpnConnectionForm.validateFields((function(t,a){t?e.fetchLoading=!1:Object(i["a"])("createVpnConnection",{s2svpngatewayid:e.vpnGateways[0].id,s2scustomergatewayid:a.vpncustomergateway,passive:!!a.passive&&a.passive}).then((function(t){e.$store.dispatch("AddAsyncJob",{title:e.$t("label.vpn.connection"),jobid:t.createvpnconnectionresponse.jobid,status:"progress"}),e.$pollJob({jobId:t.createvpnconnectionresponse.jobid,successMethod:function(){e.fetchVpnConnections(),e.fetchLoading=!1},errorMessage:e.$t("message.add.vpn.connection.failed"),errorMethod:function(){e.fetchVpnConnections(),e.fetchLoading=!1},loadingMessage:e.$t("message.add.vpn.connection.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.fetchVpnConnections(),e.fetchLoading=!1}})})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchVpnConnections(),e.fetchLoading=!1}))}))},handleNetworkAclFormSubmit:function(){var e=this;this.fetchLoading=!0,this.modals.networkAcl=!1,this.networkAclForm.validateFields((function(t,a){t&&(e.fetchLoading=!1),Object(i["a"])("createNetworkACLList",{name:a.name,description:a.description,vpcid:e.resource.id}).then((function(t){e.$store.dispatch("AddAsyncJob",{title:e.$t("message.success.add.network.acl"),jobid:t.createnetworkacllistresponse.jobid,status:"progress"}),e.$pollJob({jobId:t.createnetworkacllistresponse.jobid,successMethod:function(){e.fetchLoading=!1},errorMessage:e.$t("message.add.network.acl.failed"),errorMethod:function(){e.fetchLoading=!1},loadingMessage:e.$t("message.add.network.acl.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.fetchLoading=!1}})})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1,e.fetchAclList()}))}))},handleCreateVpnGateway:function(){var e=this;this.fetchLoading=!0,Object(i["a"])("createVpnGateway",{vpcid:this.resource.id}).then((function(t){e.$store.dispatch("AddAsyncJob",{title:e.$t("message.success.add.vpn.gateway"),jobid:t.createvpngatewayresponse.jobid,status:"progress"}),e.$pollJob({jobId:t.createvpngatewayresponse.jobid,successMethod:function(){e.fetchLoading=!1},errorMessage:e.$t("message.add.vpn.gateway.failed"),errorMethod:function(){e.fetchLoading=!1},loadingMessage:e.$t("message.add.vpn.gateway.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.fetchLoading=!1}})})).catch((function(t){e.$notifyError(t)})).finally((function(){e.fetchLoading=!1,e.handleFetchData()}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.handleFetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.handleFetchData()}}},w=v,y=(a("05d6"),Object(f["a"])(w,s,n,!1,null,"5c191f0e",null));t["default"]=y.exports},"76d1":function(e,t,a){},b506:function(e,t,a){"use strict";var s=a("76d1"),n=a.n(s);n.a},c444:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-spin",{attrs:{spinning:e.fetchLoading}},[a("a-button",{staticStyle:{width:"100%","margin-bottom":"15px"},attrs:{disabled:!("associateIpAddress"in e.$store.getters.apis),type:"dashed",icon:"plus"},on:{click:e.onShowAcquireIp}},[e._v(" "+e._s(e.$t("label.acquire.new.ip"))+" ")]),e.$route.path.startsWith("/vpc")?a("div",[e._v(" Select Tier: "),a("a-select",{staticStyle:{width:"40%","margin-left":"15px","margin-bottom":"15px"},attrs:{loading:e.fetchLoading,defaultActiveFirstOption:"",value:e.vpcTier},on:{change:e.handleTierSelect}},[a("a-select-option",{key:"all",attrs:{value:""}},[e._v(" "+e._s(e.$t("label.view.all"))+" ")]),e._l(e.networksList,(function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(" "+e._s(t.name)+" ")])}))],2)],1):e._e(),a("a-table",{staticStyle:{"overflow-y":"auto"},attrs:{size:"small",columns:e.columns,dataSource:e.ips,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"ipaddress",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/publicip/"+s.id}}},[e._v(e._s(t)+" ")]),!0===s.issourcenat?a("a-tag",[e._v("source-nat")]):e._e()]}},{key:"state",fn:function(e,t){return[a("status",{attrs:{text:t.state,displayText:""}})]}},{key:"virtualmachineid",fn:function(t,s){return[s.virtualmachineid?a("a-icon",{attrs:{type:"desktop"}}):e._e(),a("router-link",{attrs:{to:{path:"/vm/"+s.virtualmachineid}}},[e._v(" "+e._s(s.virtualmachinename||s.virtualmachineid)+" ")])]}},{key:"associatednetworkname",fn:function(t,s){return[a("router-link",{attrs:{to:{path:"/guestnetwork/"+s.associatednetworkid}}},[e._v(" "+e._s(s.associatednetworkname||s.associatednetworkid)+" ")])]}},{key:"action",fn:function(t,s){return[!0!==s.issourcenat?a("a-button",{attrs:{type:"danger",icon:"delete",shape:"circle",disabled:!("disassociateIpAddress"in e.$store.getters.apis)},on:{click:function(t){return e.releaseIpAddress(s)}}}):e._e()]}}])}),a("a-divider"),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.totalIps,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1),e.showAcquireIp?a("a-modal",{attrs:{visible:e.showAcquireIp,title:e.$t("label.acquire.new.ip"),closable:!0,okText:e.$t("label.ok"),cancelText:e.$t("label.cancel"),centered:"",width:"450px"},on:{cancel:e.onCloseModal,ok:e.acquireIpAddress}},[a("a-spin",{attrs:{spinning:e.acquireLoading}},[a("a-alert",{attrs:{message:e.$t("message.action.acquire.ip"),type:"warning"}}),a("a-form-item",{attrs:{label:e.$t("label.ipaddress")}},[a("a-select",{staticStyle:{width:"100%"},attrs:{showSearch:""},model:{value:e.acquireIp,callback:function(t){e.acquireIp=t},expression:"acquireIp"}},e._l(e.listPublicIpAddress,(function(t){return a("a-select-option",{key:t.ipaddress},[e._v(e._s(t.ipaddress))])})),1)],1)],1)],1):e._e()],1)},n=[],i=(a("99af"),a("4160"),a("b0c0"),a("d3b7"),a("2ca0"),a("159b"),a("96cf"),a("c964")),r=a("365c"),o=a("829c"),l={name:"IpAddressesTab",components:{Status:o["a"]},props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},data:function(){return{fetchLoading:!1,ips:[],ipsTiers:[],networksList:[],defaultNetwork:"",vpcTier:"",page:1,pageSize:10,totalIps:0,tiersSelect:!1,columns:[{title:this.$t("label.ipaddress"),dataIndex:"ipaddress",scopedSlots:{customRender:"ipaddress"}},{title:this.$t("label.state"),dataIndex:"state",scopedSlots:{customRender:"state"}},{title:this.$t("label.vm"),dataIndex:"virtualmachineid",scopedSlots:{customRender:"virtualmachineid"}},{title:this.$t("label.network"),dataIndex:"associatednetworkname",scopedSlots:{customRender:"associatednetworkname"}},{title:"",scopedSlots:{customRender:"action"}}],showAcquireIp:!1,acquireLoading:!1,acquireIp:null,listPublicIpAddress:[]}},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this,t={listall:!0,page:this.page,pagesize:this.pageSize};this.$route.path.startsWith("/vpc")?(this.networksList=this.resource.network,t.vpcid=this.resource.id,t.forvirtualnetwork=!0,this.vpcTier&&(t.associatednetworkid=this.vpcTier)):t.associatednetworkid=this.resource.id,this.fetchLoading=!0,Object(r["a"])("listPublicIpAddresses",t).then((function(t){e.totalIps=t.listpublicipaddressesresponse.count||0,e.ips=t.listpublicipaddressesresponse.publicipaddress||[]})).finally((function(){e.fetchLoading=!1}))},fetchListPublicIpAddress:function(){var e=this;return new Promise((function(t,a){var s={zoneid:e.resource.zoneid,domainid:e.resource.domainid,account:e.resource.account,forvirtualnetwork:!0,allocatedonly:!1};Object(r["a"])("listPublicIpAddresses",s).then((function(e){var a=e.listpublicipaddressesresponse.publicipaddress||[];t(a)})).catch(a)}))},handleTierSelect:function(e){this.vpcTier=e,this.fetchData()},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},acquireIpAddress:function(){var e=this,t={};this.$route.path.startsWith("/vpc")?(t.vpcid=this.resource.id,this.vpcTier&&(t.networkid=this.vpcTier)):t.networkid=this.resource.id,t.ipaddress=this.acquireIp,this.acquireLoading=!0,Object(r["a"])("associateIpAddress",t).then((function(t){e.$pollJob({jobId:t.associateipaddressresponse.jobid,successMessage:"".concat(e.$t("message.success.acquire.ip")," ").concat(e.$t("label.for")," ").concat(e.resource.name),successMethod:function(){e.fetchData()},errorMessage:e.$t("message.acquire.ip.failed"),errorMethod:function(){e.fetchData()},loadingMessage:"".concat(e.$t("label.acquiring.ip")," ").concat(e.$t("label.for")," ").concat(e.resource.name," ").concat(e.$t("label.is.in.progress")),catchMessage:e.$t("error.fetching.async.job.result")}),e.onCloseModal()})).catch((function(t){e.$notification.error({message:"".concat(e.$t("label.error")," ").concat(t.response.status),description:t.response.data.errorresponse.errortext,duration:0})})).finally((function(){e.acquireLoading=!1}))},releaseIpAddress:function(e){var t=this;this.fetchLoading=!0,Object(r["a"])("disassociateIpAddress",{id:e.id}).then((function(e){t.$pollJob({jobId:e.disassociateipaddressresponse.jobid,successMessage:t.$t("message.success.release.ip"),successMethod:function(){t.fetchData()},errorMessage:t.$t("message.release.ip.failed"),errorMethod:function(){t.fetchData()},loadingMessage:"".concat(t.$t("label.releasing.ip")," ").concat(t.$t("label.for")," ").concat(t.resource.name," ").concat(t.$t("label.is.in.progress")),catchMessage:t.$t("error.fetching.async.job.result")})})).catch((function(e){t.fetchLoading=!1,t.$notification.error({message:"".concat(t.$t("label.error")," ").concat(e.response.status),description:e.response.data.errorresponse.errortext,duration:0})}))},onShowAcquireIp:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showAcquireIp=!0,e.acquireLoading=!0,e.listPublicIpAddress=[],t.prev=3,t.next=6,e.fetchListPublicIpAddress();case 6:a=t.sent,a.forEach((function(t){"Free"===t.state&&e.listPublicIpAddress.push({ipaddress:t.ipaddress})})),e.listPublicIpAddress.sort((function(e,t){return e.ipaddress<t.ipaddress?-1:e.ipaddress>t.ipaddress?1:0})),e.acquireIp=e.listPublicIpAddress&&e.listPublicIpAddress.length>0?e.listPublicIpAddress[0].ipaddress:null,e.acquireLoading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](3),e.acquireLoading=!1,e.$notifyError(t.t0);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})))()},onCloseModal:function(){this.showAcquireIp=!1}}},c=l,d=(a("0752"),a("2877")),u=Object(d["a"])(c,s,n,!1,null,"48f7b13c",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-ea88fc92.8bb0a570.js.map