(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["auth"],{"1f48":function(e,t,a){"use strict";var s=a("d5c5"),r=a.n(s);r.a},5326:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form},on:{submit:e.handleSubmit}},[a("a-tabs",{attrs:{activeKey:e.customActiveKey,size:"large",tabBarStyle:{textAlign:"center",borderBottom:"unset"},animated:!1},on:{change:e.handleTabClick}},[a("a-tab-pane",{key:"cs"},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"safety"}}),e._v(" "+e._s(e.$t("label.login.portal"))+" ")],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:e.$t("message.error.username")},{validator:e.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"[\n            'username',\n            {rules: [{ required: true, message: $t('message.error.username') }, { validator: handleUsernameOrEmail }], validateTrigger: 'change'}\n          ]"}],attrs:{size:"large",type:"text",autoFocus:"",placeholder:e.$t("label.username")}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("message.error.password")}],validateTrigger:"blur"}],expression:"[\n            'password',\n            {rules: [{ required: true, message: $t('message.error.password') }], validateTrigger: 'blur'}\n          ]"}],attrs:{size:"large",type:"password",autocomplete:"false",placeholder:e.$t("label.password")}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["domain",{rules:[{required:!1,message:e.$t("message.error.domain")}],validateTrigger:"change"}],expression:"[\n            'domain',\n            {rules: [{ required: false, message: $t('message.error.domain') }], validateTrigger: 'change'}\n          ]"}],attrs:{size:"large",type:"text",placeholder:e.$t("label.domain")}},[a("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"block"},slot:"prefix"})],1)],1)],1),a("a-tab-pane",{key:"saml",attrs:{disabled:0===e.idps.length}},[a("span",{attrs:{slot:"tab"},slot:"tab"},[a("a-icon",{attrs:{type:"audit"}}),e._v(" "+e._s(e.$t("label.login.single.signon"))+" ")],1),a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["idp",{initialValue:e.selectedIdp}],expression:"['idp', { initialValue: selectedIdp } ]"}]},e._l(e.idps,(function(t,s){return a("a-select-option",{key:s,attrs:{value:t.id}},[e._v(" "+e._s(t.orgName)+" ")])})),1)],1)],1)],1),a("a-form-item",[a("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.state.loginBtn,disabled:e.state.loginBtn}},[e._v(e._s(e.$t("label.login")))])],1),a("translation-menu")],1)},r=[],i=(a("99af"),a("d3b7"),a("f3f3")),o=a("365c"),n=a("2f62"),l=a("b34c"),c={components:{TranslationMenu:l["a"]},data:function(){return{idps:[],selectedIdp:"",customActiveKey:"cs",loginBtn:!1,loginType:0,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0}}},created:function(){},mounted:function(){this.fetchData()},methods:Object(i["a"])(Object(i["a"])({},Object(n["b"])(["Login","Logout"])),{},{fetchData:function(){var e=this;Object(o["a"])("listIdps").then((function(t){t&&(e.idps=t.listidpsresponse.idp||[],e.selectedIdp=e.idps[0].id||"")}))},handleUsernameOrEmail:function(e,t,a){var s=this.state,r=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;r.test(t)?s.loginType=0:s.loginType=1,a()},handleTabClick:function(e){this.customActiveKey=e},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,s=this.state,r=this.customActiveKey,o=this.Login;s.loginBtn=!0;var n="cs"===r?["username","password","domain"]:["idp"];a(n,{force:!0},(function(e,a){if(e)setTimeout((function(){s.loginBtn=!1}),600);else if("cs"===r){var n=Object(i["a"])({},a);delete n.username,n[s.loginType?"username":"email"]=a.username,n.password=a.password,n.domain=a.domain,n.domain||(n.domain="/"),o(n).then((function(e){return t.loginSuccess(e)})).catch((function(e){return t.requestFailed(e)})).finally((function(){s.loginBtn=!1}))}else if("saml"===r){s.loginBtn=!1;var l=t.$config.apiBase+"?command=samlSso";a.idp&&(l+="&idpid="+a.idp),window.location.href=l}}))},loginSuccess:function(e){this.$router.push({path:"/dashboard"}).catch((function(){}))},requestFailed:function(e){if(e&&e.response&&e.response.data&&e.response.data.loginresponse){var t=e.response.data.loginresponse.errorcode+": "+e.response.data.loginresponse.errortext;this.$message.error("".concat(this.$t("label.error")," ").concat(t))}else this.$message.error(this.$t("message.login.failed"))}})},d=c,u=(a("1f48"),a("2877")),m=Object(u["a"])(d,s,r,!1,null,"136ef2c8",null);t["default"]=m.exports},d5c5:function(e,t,a){}}]);
//# sourceMappingURL=auth.896fac79.js.map