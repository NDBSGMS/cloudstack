(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d0c3311"],{"5e45":function(e,t,a){},"9f94":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("div",{staticClass:"form-layout"},[r("a-spin",{attrs:{spinning:t.loading}},[r("a-form",{attrs:{form:t.form,layout:"vertical"},on:{submit:t.handleSubmit}},[r("a-form-item",{attrs:{label:t.$t("label.name")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:t.$t("message.error.required.input")}]}],expression:"['name', {\n            rules: [{ required: true, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:t.createRoleApiParams.name.description}})],1),r("a-form-item",{attrs:{label:t.$t("label.description")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["description"],expression:"['description']"}],attrs:{placeholder:t.createRoleApiParams.description.description}})],1),"roleid"in t.createRoleApiParams?r("a-form-item",{attrs:{label:t.$t("label.based.on")}},[r("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["using",{initialValue:this.createRoleUsing}],expression:"['using', {\n            initialValue: this.createRoleUsing\n          }]"}],attrs:{buttonStyle:"solid"},on:{change:function(t){e.handleChangeCreateRole(t.target.value)}}},[r("a-radio-button",{attrs:{value:"type"}},[t._v(" "+t._s(t.$t("label.type"))+" ")]),r("a-radio-button",{attrs:{value:"role"}},[t._v(" "+t._s(t.$t("label.role"))+" ")])],1)],1):t._e(),"type"===this.createRoleUsing?r("a-form-item",{attrs:{label:t.$t("label.type")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:t.$t("message.error.select")}]}],expression:"['type', {\n            rules: [{ required: true, message: $t('message.error.select') }]\n          }]"}],attrs:{placeholder:t.createRoleApiParams.type.description}},t._l(t.defaultRoles,(function(e){return r("a-select-option",{key:e},[t._v(" "+t._s(e)+" ")])})),1)],1):t._e(),"role"===this.createRoleUsing?r("a-form-item",{attrs:{label:t.$t("label.role")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleid",{rules:[{required:!0,message:t.$t("message.error.select")}]}],expression:"['roleid', {\n            rules: [{ required: true, message: $t('message.error.select') }]\n          }]"}],attrs:{placeholder:t.createRoleApiParams.roleid.description}},t._l(t.roles,(function(e){return r("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1):t._e(),r("div",{staticClass:"action-button",attrs:{span:24}},[r("a-button",{on:{click:t.closeAction}},[t._v(t._s(this.$t("label.cancel")))]),r("a-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(this.$t("label.ok")))])],1)],1)],1)],1)},o=[],s=(a("4160"),a("caad"),a("b0c0"),a("d3b7"),a("2532"),a("159b"),a("365c")),i={name:"CreateRole",data:function(){return{roles:[],defaultRoles:["Admin","DomainAdmin","User"],createRoleUsing:"type",loading:!1}},mounted:function(){this.fetchRoles()},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiConfig=this.$store.getters.apis.createRole||{},this.createRoleApiParams={},this.apiConfig.params.forEach((function(t){e.createRoleApiParams[t.name]=t}))},watch:{$route:function(e,t){e.fullPath===t.fullPath||e.fullPath.includes("action/")||this.fetchRoles()},"$i18n.locale":function(e,t){e!==t&&this.fetchRoles()}},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){var r={};for(var o in a)if("using"!==o){var s=a[o];void 0!==s&&(r[o]=s)}t.createRole(r)}}))},closeAction:function(){this.$emit("close-action")},createRole:function(e){var t=this;this.loading=!0,Object(s["a"])("createRole",e).then((function(a){var r=a.createroleresponse.role;r&&(t.$emit("refresh-data"),t.$notification.success({message:"Create Role",description:"Sucessfully created role "+e.name})),t.closeAction()})).catch((function(e){t.$notifyError(e)})).finally((function(){t.loading=!1}))},fetchRoles:function(){var e=this,t={};Object(s["a"])("listRoles",t).then((function(t){t&&t.listrolesresponse&&t.listrolesresponse.role&&(e.roles=t.listrolesresponse.role)})).catch((function(e){console.error(e)}))},handleChangeCreateRole:function(e){this.createRoleUsing=e}}},n=i,l=(a("ed79"),a("2877")),c=Object(l["a"])(n,r,o,!1,null,"787817ce",null);t["default"]=c.exports},ed79:function(e,t,a){"use strict";var r=a("5e45"),o=a.n(r);o.a}}]);
//# sourceMappingURL=chunk-6d0c3311.59cedeea.js.map