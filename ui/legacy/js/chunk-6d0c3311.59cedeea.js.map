{"version":3,"sources":["webpack:///./src/views/iam/CreateRole.vue?583e","webpack:///src/views/iam/CreateRole.vue","webpack:///./src/views/iam/CreateRole.vue?b761","webpack:///./src/views/iam/CreateRole.vue","webpack:///./src/views/iam/CreateRole.vue?ba21"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","staticClass","attrs","loading","form","on","handleSubmit","$t","directives","name","rawName","value","rules","required","message","expression","createRoleApiParams","description","initialValue","createRoleUsing","selected","handleChangeCreateRole","target","_v","_s","_e","type","_l","role","key","roleid","id","closeAction","staticRenderFns","data","roles","defaultRoles","mounted","fetchRoles","beforeCreate","$form","createForm","apiConfig","$store","getters","apis","createRole","params","forEach","watch","to","fullPath","from","includes","methods","e","preventDefault","validateFields","err","undefined","input","$emit","json","listrolesresponse","console","error","component"],"mappings":"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","file":"js/chunk-6d0c3311.59cedeea.js","sourcesContent":["var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-layout\"},[_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',{attrs:{\"label\":_vm.$t('label.name')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['name', {\n            rules: [{ required: true, message: _vm.$t('message.error.required.input') }]\n          }]),expression:\"['name', {\\n            rules: [{ required: true, message: $t('message.error.required.input') }]\\n          }]\"}],attrs:{\"placeholder\":_vm.createRoleApiParams.name.description}})],1),_c('a-form-item',{attrs:{\"label\":_vm.$t('label.description')}},[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['description']),expression:\"['description']\"}],attrs:{\"placeholder\":_vm.createRoleApiParams.description.description}})],1),('roleid' in _vm.createRoleApiParams)?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.based.on')}},[_c('a-radio-group',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['using', {\n            initialValue: this.createRoleUsing\n          }]),expression:\"['using', {\\n            initialValue: this.createRoleUsing\\n          }]\"}],attrs:{\"buttonStyle\":\"solid\"},on:{\"change\":function (selected) { this$1.handleChangeCreateRole(selected.target.value) }}},[_c('a-radio-button',{attrs:{\"value\":\"type\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.type'))+\" \")]),_c('a-radio-button',{attrs:{\"value\":\"role\"}},[_vm._v(\" \"+_vm._s(_vm.$t('label.role'))+\" \")])],1)],1):_vm._e(),(this.createRoleUsing === 'type')?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.type')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['type', {\n            rules: [{ required: true, message: _vm.$t('message.error.select') }]\n          }]),expression:\"['type', {\\n            rules: [{ required: true, message: $t('message.error.select') }]\\n          }]\"}],attrs:{\"placeholder\":_vm.createRoleApiParams.type.description}},_vm._l((_vm.defaultRoles),function(role){return _c('a-select-option',{key:role},[_vm._v(\" \"+_vm._s(role)+\" \")])}),1)],1):_vm._e(),(this.createRoleUsing === 'role')?_c('a-form-item',{attrs:{\"label\":_vm.$t('label.role')}},[_c('a-select',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roleid', {\n            rules: [{ required: true, message: _vm.$t('message.error.select') }]\n          }]),expression:\"['roleid', {\\n            rules: [{ required: true, message: $t('message.error.select') }]\\n          }]\"}],attrs:{\"placeholder\":_vm.createRoleApiParams.roleid.description}},_vm._l((_vm.roles),function(role){return _c('a-select-option',{key:role.id,attrs:{\"value\":role.id}},[_vm._v(\" \"+_vm._s(role.name)+\" \")])}),1)],1):_vm._e(),_c('div',{staticClass:\"action-button\",attrs:{\"span\":24}},[_c('a-button',{on:{\"click\":_vm.closeAction}},[_vm._v(_vm._s(this.$t('label.cancel')))]),_c('a-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(_vm._s(this.$t('label.ok')))])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <div class=\"form-layout\">\n    <a-spin :spinning=\"loading\">\n      <a-form\n        :form=\"form\"\n        @submit=\"handleSubmit\"\n        layout=\"vertical\">\n        <a-form-item :label=\"$t('label.name')\">\n          <a-input\n            v-decorator=\"['name', {\n              rules: [{ required: true, message: $t('message.error.required.input') }]\n            }]\"\n            :placeholder=\"createRoleApiParams.name.description\" />\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.description')\">\n          <a-input\n            v-decorator=\"['description']\"\n            :placeholder=\"createRoleApiParams.description.description\" />\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.based.on')\" v-if=\"'roleid' in createRoleApiParams\">\n          <a-radio-group\n            v-decorator=\"['using', {\n              initialValue: this.createRoleUsing\n            }]\"\n            buttonStyle=\"solid\"\n            @change=\"selected => { this.handleChangeCreateRole(selected.target.value) }\">\n            <a-radio-button value=\"type\">\n              {{ $t('label.type') }}\n            </a-radio-button>\n            <a-radio-button value=\"role\">\n              {{ $t('label.role') }}\n            </a-radio-button>\n          </a-radio-group>\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.type')\" v-if=\"this.createRoleUsing === 'type'\">\n          <a-select\n            v-decorator=\"['type', {\n              rules: [{ required: true, message: $t('message.error.select') }]\n            }]\"\n            :placeholder=\"createRoleApiParams.type.description\">\n            <a-select-option v-for=\"role in defaultRoles\" :key=\"role\">\n              {{ role }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n\n        <a-form-item :label=\"$t('label.role')\" v-if=\"this.createRoleUsing === 'role'\">\n          <a-select\n            v-decorator=\"['roleid', {\n              rules: [{ required: true, message: $t('message.error.select') }]\n            }]\"\n            :placeholder=\"createRoleApiParams.roleid.description\">\n            <a-select-option\n              v-for=\"role in roles\"\n              :value=\"role.id\"\n              :key=\"role.id\">\n              {{ role.name }}\n            </a-select-option>\n          </a-select>\n        </a-form-item>\n\n        <div :span=\"24\" class=\"action-button\">\n          <a-button @click=\"closeAction\">{{ this.$t('label.cancel') }}</a-button>\n          <a-button :loading=\"loading\" type=\"primary\" @click=\"handleSubmit\">{{ this.$t('label.ok') }}</a-button>\n        </div>\n      </a-form>\n    </a-spin>\n  </div>\n</template>\n\n<script>\nimport { api } from '@/api'\n\nexport default {\n  name: 'CreateRole',\n  data () {\n    return {\n      roles: [],\n      defaultRoles: ['Admin', 'DomainAdmin', 'User'],\n      createRoleUsing: 'type',\n      loading: false\n    }\n  },\n  mounted () {\n    this.fetchRoles()\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiConfig = this.$store.getters.apis.createRole || {}\n    this.createRoleApiParams = {}\n    this.apiConfig.params.forEach(param => {\n      this.createRoleApiParams[param.name] = param\n    })\n  },\n  watch: {\n    '$route' (to, from) {\n      if (to.fullPath !== from.fullPath && !to.fullPath.includes('action/')) {\n        this.fetchRoles()\n      }\n    },\n    '$i18n.locale' (to, from) {\n      if (to !== from) {\n        this.fetchRoles()\n      }\n    }\n  },\n  methods: {\n    handleSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err) {\n          return\n        }\n        const params = {}\n        for (const key in values) {\n          if (key === 'using') {\n            continue\n          }\n\n          const input = values[key]\n          if (input === undefined) {\n            continue\n          }\n\n          params[key] = input\n        }\n\n        this.createRole(params)\n      })\n    },\n    closeAction () {\n      this.$emit('close-action')\n    },\n    createRole (params) {\n      this.loading = true\n      api('createRole', params).then(json => {\n        const role = json.createroleresponse.role\n        if (role) {\n          this.$emit('refresh-data')\n          this.$notification.success({\n            message: 'Create Role',\n            description: 'Sucessfully created role ' + params.name\n          })\n        }\n        this.closeAction()\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchRoles () {\n      const params = {}\n      api('listRoles', params).then(json => {\n        if (json && json.listrolesresponse && json.listrolesresponse.role) {\n          this.roles = json.listrolesresponse.role\n        }\n      }).catch(error => {\n        console.error(error)\n      })\n    },\n    handleChangeCreateRole (value) {\n      this.createRoleUsing = value\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n  .form-layout {\n    width: 80vw;\n\n    @media (min-width: 700px) {\n      width: 550px;\n    }\n  }\n\n  .action-button {\n    text-align: right;\n\n    button {\n      margin-right: 5px;\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRole.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRole.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateRole.vue?vue&type=template&id=787817ce&scoped=true&\"\nimport script from \"./CreateRole.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateRole.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateRole.vue?vue&type=style&index=0&id=787817ce&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"787817ce\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRole.vue?vue&type=style&index=0&id=787817ce&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateRole.vue?vue&type=style&index=0&id=787817ce&scoped=true&lang=less&\""],"sourceRoot":""}