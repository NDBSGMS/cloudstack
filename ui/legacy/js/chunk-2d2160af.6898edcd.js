(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2160af"],{c17b:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.fetchLoading}},[a("a-table",{staticStyle:{"overflow-y":"auto","margin-bottom":"15px"},attrs:{size:"small",columns:e.columns,dataSource:e.assignedVms,rowKey:function(e){return e.id},pagination:!1},scopedSlots:e._u([{key:"displayname",fn:function(t,n){return[a("router-link",{attrs:{to:{path:"/vm/"+n.id}}},[e._v(e._s(n.displayname||n.name))])]}},{key:"ipaddress",fn:function(t,n){return e._l(n.nic,(function(t){return a("span",{key:t.id},[t.networkid===e.resource.networkid?a("span",[e._v(" "+e._s(t.ipaddress)+" "),a("br")]):e._e()])}))}},{key:"remove",fn:function(t,n){return[a("a-button",{attrs:{type:"danger",icon:"delete",shape:"circle"},on:{click:function(t){return e.removeVmFromLB(n)}}})]}}])},[a("a-divider")],1),a("a-pagination",{staticClass:"row-element pagination",attrs:{size:"small",current:e.page,pageSize:e.pageSize,total:e.totalInstances,showTotal:function(t){return e.$t("label.total")+" "+t+" "+e.$t("label.items")},pageSizeOptions:["10","20","40","80","100"],showSizeChanger:""},on:{change:e.changePage,showSizeChange:e.changePageSize},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" / "+e._s(e.$t("label.page")))])]}}])})],1)},s=[],o=(a("99af"),a("b0c0"),a("d3b7"),a("365c")),i={name:"InternalLBAssignedVmTab",props:{resource:{type:Object,required:!0}},data:function(){return{fetchLoading:!1,assignedVms:[],page:1,pageSize:10,totalInstances:0,columns:[{title:this.$t("label.name"),dataIndex:"displayname",scopedSlots:{customRender:"displayname"}},{title:this.$t("label.ipaddress"),dataIndex:"ipaddress",scopedSlots:{customRender:"ipaddress"}},{title:"",scopedSlots:{customRender:"remove"}}]}},mounted:function(){this.fetchData()},watch:{resource:function(e,t){e&&e.id&&this.fetchData()}},methods:{fetchData:function(){var e=this;this.fetchLoading=!0,Object(o["a"])("listLoadBalancerRuleInstances",{id:this.resource.id,page:this.page,pagesize:this.pageSize}).then((function(t){e.totalInstances=t.listloadbalancerruleinstancesresponse.count||0,e.assignedVms=t.listloadbalancerruleinstancesresponse.loadbalancerruleinstance||[]})).finally((function(){e.fetchLoading=!1}))},removeVmFromLB:function(e){var t=this;this.fetchLoading=!0,Object(o["a"])("removeFromLoadBalancerRule",{id:this.resource.id,virtualmachineids:e.id}).then((function(a){t.$pollJob({jobId:a.removefromloadbalancerruleresponse.jobid,successMessage:"".concat(t.$t("message.success.remove.ip")," ").concat(e.name," ").concat(t.$t("label.from")," ").concat(t.resource.name),successMethod:function(){t.fetchLoading=!1,t.fetchData()},errorMessage:"".concat(t.$t("message.failed.to.remove")," ").concat(e.name," ").concat(t.$t("label.from.lb")),errorMethod:function(){t.fetchLoading=!1,t.fetchData()},loadingMessage:"".concat(t.$t("label.removing")," ").concat(e.name," ").concat(t.$t("label.from.lb")," ").concat(t.$t("label.in.progress")),catchMessage:t.$t("error.fetching.async.job.result")})}))},changePage:function(e,t){this.page=e,this.pageSize=t,this.fetchData()},changePageSize:function(e,t){this.page=e,this.pageSize=t,this.fetchData()}}},c=i,r=a("2877"),l=Object(r["a"])(c,n,s,!1,null,"1338e69e",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d2160af.6898edcd.js.map