(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8788c9ac"],{"081d":function(e,t,a){},d0b4:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-layout"},[a("a-spin",{attrs:{spinning:e.loading}},[a("a-form",{attrs:{form:e.form,loading:e.loading,layout:"vertical"},on:{submit:e.handleSubmit}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.username"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.username.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['username', {\n            rules: [{ required: true, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:e.apiParams.username.description}})],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.email"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.email.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["email",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['email', {\n            rules: [{ required: true, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:e.apiParams.email.description}})],1),a("a-row",{attrs:{gutter:12}},[a("a-col",{attrs:{md:24,lg:12}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.firstname"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.firstname.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["firstname",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['firstname', {\n                rules: [{ required: true, message: $t('message.error.required.input') }]\n              }]"}],attrs:{placeholder:e.apiParams.firstname.description}})],1)],1),a("a-col",{attrs:{md:24,lg:12}},[a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.lastname"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.lastname.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["lastname",{rules:[{required:!0,message:e.$t("message.error.required.input")}]}],expression:"['lastname', {\n                rules: [{ required: true, message: $t('message.error.required.input') }]\n              }]"}],attrs:{placeholder:e.apiParams.lastname.description}})],1)],1)],1),a("a-form-item",[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("label.timezone"))+" "),a("a-tooltip",{attrs:{title:e.apiParams.timezone.description}},[a("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["timezone"],expression:"['timezone']"}],attrs:{showSearch:"",loading:e.timeZoneLoading}},e._l(e.timeZoneMap,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.name||t.description)+" ")])})),1)],1),a("div",{staticClass:"action-button",attrs:{span:24}},[a("a-button",{on:{click:e.closeAction}},[e._v(e._s(e.$t("label.cancel")))]),a("a-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("label.ok")))])],1)],1)],1)],1)},r=[],s=(a("99af"),a("4160"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("365c")),n=a("e95a3"),o=a("b047"),l=a.n(o),c={name:"EditUser",props:{resource:{type:Object,required:!0},currentAction:{type:Object,required:!0}},data:function(){return this.fetchTimeZone=l()(this.fetchTimeZone,800),{loading:!1,timeZoneLoading:!1,timeZoneMap:[],userId:null}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiConfig=this.$store.getters.apis.updateUser||{},this.apiParams={},this.apiConfig.params.forEach((function(t){e.apiParams[t.name]=t}))},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.userId=this.$route.params.id||null,this.fetchTimeZone(),this.fillEditFormFieldValues()},fetchTimeZone:function(e){var t=this;this.timeZoneMap=[],this.timeZoneLoading=!0,Object(n["a"])(e).then((function(e){t.timeZoneMap=e,t.timeZoneLoading=!1}))},fillEditFormFieldValues:function(){var e=this,t=this.form;this.loading=!0,Object.keys(this.apiParams).forEach((function(a){var i=e.apiParams[a],r=null,s=null;s="list"===i.type||"account"===i.name?i.name.replace("ids","name").replace("id","name"):i.name,r=e.resource[s]?e.resource[s]:null,r&&t.getFieldDecorator(i.name,{initialValue:r})})),this.loading=!1},isValidValueForKey:function(e,t){return t in e&&null!=e[t]},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){if(!e){t.loading=!0;var i={id:t.userId,username:a.username,email:a.email,firstname:a.firstname,lastname:a.lastname};t.isValidValueForKey(a,"timezone")&&a.timezone.length>0&&(i.timezone=a.timezone),Object(s["a"])("updateUser",i).then((function(e){t.$emit("refresh-data"),t.$notification.success({message:t.$t("label.edit.user"),description:"".concat(t.$t("message.success.update.user")," ").concat(i.username)}),t.closeAction()})).catch((function(e){t.$notification.error({message:t.$t("message.request.failed"),description:e.response&&e.response.headers&&e.response.headers["x-description"]||e.message,duration:0})})).finally((function(){t.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},m=c,u=(a("f03e"),a("2877")),d=Object(u["a"])(m,i,r,!1,null,"c249276e",null);t["default"]=d.exports},f03e:function(e,t,a){"use strict";var i=a("081d"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-8788c9ac.35c54f12.js.map