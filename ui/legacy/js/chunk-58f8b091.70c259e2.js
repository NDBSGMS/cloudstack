(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58f8b091","chunk-2140c442","chunk-2d0c89f8"],{"082e":function(t,e,a){"use strict";var s=a("5548"),i=a.n(s);i.a},"0e73":function(t,e,a){},1863:function(t,e,a){"use strict";var s=a("0e73"),i=a.n(s);i.a},"1fa5":function(t,e,a){},"498a":function(t,e,a){"use strict";var s=a("23e7"),i=a("58a8").trim,n=a("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return i(this)}})},5548:function(t,e,a){},5656:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{size:"small",columns:t.nicColumns,dataSource:t.resource.nic,rowKey:function(t){return t.id},pagination:!1},scopedSlots:t._u([{key:"expandedRowRender",fn:function(e){return a("p",{},[t._t("actions",null,{nic:e}),a("a-descriptions",{staticStyle:{"margin-top":"10px"},attrs:{layout:"vertical",column:1,bordered:!1,size:"small"}},[a("a-descriptions-item",{attrs:{label:t.$t("label.id")}},[t._v(" "+t._s(e.id)+" ")]),e.networkid?a("a-descriptions-item",{attrs:{label:t.$t("label.networkid")}},[t._v(" "+t._s(e.networkid)+" ")]):t._e(),e.type?a("a-descriptions-item",{attrs:{label:t.$t("label.type")}},[t._v(" "+t._s(e.type)+" ")]):t._e(),e.traffictype?a("a-descriptions-item",{attrs:{label:t.$t("label.traffictype")}},[t._v(" "+t._s(e.traffictype)+" ")]):t._e(),e.secondaryip&&e.secondaryip.length>0&&"L2"!==e.type?a("a-descriptions-item",{attrs:{label:t.$t("label.secondaryips")}},[t._v(" "+t._s(e.secondaryip.map((function(t){return t.ipaddress})).join(", "))+" ")]):t._e(),e.ip6address?a("a-descriptions-item",{attrs:{label:t.$t("label.ip6address")}},[t._v(" "+t._s(e.ip6address)+" ")]):t._e(),e.ip6gateway?a("a-descriptions-item",{attrs:{label:t.$t("label.ip6gateway")}},[t._v(" "+t._s(e.ip6gateway)+" ")]):t._e(),e.ip6cidr?a("a-descriptions-item",{attrs:{label:t.$t("label.ip6cidr")}},[t._v(" "+t._s(e.ip6cidr)+" ")]):t._e(),["Admin","DomainAdmin"].includes(t.$store.getters.userInfo.roletype)?[e.broadcasturi?a("a-descriptions-item",{attrs:{label:t.$t("label.broadcasturi")}},[t._v(" "+t._s(e.broadcasturi)+" ")]):t._e(),e.isolationuri?a("a-descriptions-item",{attrs:{label:t.$t("label.isolationuri")}},[t._v(" "+t._s(e.isolationuri)+" ")]):t._e()]:t._e()],2)],2)}},{key:"networkname",fn:function(e,s){return[a("a-icon",{attrs:{type:"apartment"}}),a("router-link",{attrs:{to:{path:"/guestnetwork/"+s.networkid}}},[t._v(" "+t._s(e)+" ")]),s.isdefault?a("a-tag",[t._v(" "+t._s(t.$t("label.default"))+" ")]):t._e()]}}],null,!0)})},i=[],n={name:"NicsTable",props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},inject:["parentFetchData"],data:function(){return{nicColumns:[{title:this.$t("label.networkname"),dataIndex:"networkname",scopedSlots:{customRender:"networkname"}},{title:this.$t("label.macaddress"),dataIndex:"macaddress"},{title:this.$t("label.ipaddress"),dataIndex:"ipaddress"},{title:this.$t("label.netmask"),dataIndex:"netmask"},{title:this.$t("label.gateway"),dataIndex:"gateway"}]}},watch:{resource:function(t,e){this.resource=t}}},o=n,r=a("2877"),l=Object(r["a"])(o,s,i,!1,null,null,null);e["default"]=l.exports},6718:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.loading}},[t.disableSettings?a("a-alert",{attrs:{banner:"",message:t.$t("message.action.settings.warning.vm.running")}}):a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAddDetail,expression:"!showAddDetail"}]},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus",disabled:!("updateTemplate"in t.$store.getters.apis&&"updateVirtualMachine"in t.$store.getters.apis&&t.isAdminOrOwner())},on:{click:t.onShowAddDetail}},[t._v(" "+t._s(t.$t("label.add.setting"))+" ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddDetail,expression:"showAddDetail"}]},[a("a-input-group",{attrs:{type:"text",compact:""}},[a("a-auto-complete",{ref:"keyElm",staticClass:"detail-input",attrs:{filterOption:t.filterOption,value:t.newKey,dataSource:Object.keys(t.detailOptions),placeholder:t.$t("label.name")},on:{change:function(e){return t.onAddInputChange(e,"newKey")}}}),a("a-input",{staticStyle:{width:"30px","border-left":"0","pointer-events":"none",backgroundColor:"#fff"},attrs:{placeholder:"=",disabled:""}}),a("a-auto-complete",{staticClass:"detail-input",attrs:{filterOption:t.filterOption,value:t.newValue,dataSource:t.detailOptions[t.newKey],placeholder:t.$t("label.value")},on:{change:function(e){return t.onAddInputChange(e,"newValue")}}}),a("a-tooltip",{attrs:{arrowPointAtCenter:"",placement:"topRight"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.add.setting"))+" ")]),a("a-button",{staticClass:"detail-button",attrs:{icon:"check"},on:{click:t.addDetail}})],2),a("a-tooltip",{attrs:{arrowPointAtCenter:"",placement:"topRight"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.cancel"))+" ")]),a("a-button",{staticClass:"detail-button",attrs:{icon:"close"},on:{click:t.closeDetail}})],2)],1),t.error?a("p",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.$t(t.error))+" ")]):t._e()],1)]),a("a-list",{attrs:{size:"large"}},t._l(t.details,(function(e,s){return a("a-list-item",{key:s},[a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.name)+" ")]),a("span",{staticStyle:{"word-break":"break-all"},attrs:{slot:"description"},slot:"description"},[e.edit?a("span",{staticStyle:{display:"flex"}},[a("a-auto-complete",{staticStyle:{width:"100%"},attrs:{value:e.value,dataSource:t.detailOptions[e.name]},on:{change:function(e){return t.handleInputChange(e,s)},pressEnter:function(e){return t.updateDetail(s)}}})],1):a("span",[t._v(t._s(e.value))])])]),!t.disableSettings&&"updateTemplate"in t.$store.getters.apis&&"updateVirtualMachine"in t.$store.getters.apis&&t.isAdminOrOwner()&&t.allowEditOfDetail(e.name)?a("div",{attrs:{slot:"actions"},slot:"actions"},[e.edit?a("a-button",{attrs:{shape:"circle",size:"default"},on:{click:function(e){return t.updateDetail(s)}}},[a("a-icon",{attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#52c41a"}})],1):t._e(),e.edit?a("a-button",{attrs:{shape:"circle",size:"default"},on:{click:function(e){return t.hideEditDetail(s)}}},[a("a-icon",{attrs:{type:"close-circle",theme:"twoTone",twoToneColor:"#f5222d"}})],1):t._e(),e.edit?t._e():a("a-button",{attrs:{shape:"circle",icon:"edit"},on:{click:function(e){return t.showEditDetail(s)}}})],1):t._e(),!t.disableSettings&&"updateTemplate"in t.$store.getters.apis&&"updateVirtualMachine"in t.$store.getters.apis&&t.isAdminOrOwner()&&t.allowEditOfDetail(e.name)?a("div",{attrs:{slot:"actions"},slot:"actions"},[a("a-popconfirm",{attrs:{title:t.$t("label.delete.setting")+"?",okText:t.$t("label.yes"),cancelText:t.$t("label.no"),placement:"left"},on:{confirm:function(e){return t.deleteDetail(s)}}},[a("a-button",{attrs:{shape:"circle",type:"danger",icon:"delete"}})],1)],1):t._e()],1)})),1)],1)},i=[],n=(a("4160"),a("caad"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("1276"),a("498a"),a("159b"),a("365c")),o={name:"DetailSettings",props:{resource:{type:Object,required:!0}},data:function(){return{details:[],detailOptions:{},showAddDetail:!1,disableSettings:!1,newKey:"",newValue:"",loading:!1,resourceType:"UserVm",error:!1}},watch:{resource:function(t,e){this.updateResource(t)}},mounted:function(){this.updateResource(this.resource)},methods:{filterOption:function(t,e){return e.componentOptions.children[0].text.toUpperCase().indexOf(t.toUpperCase())>=0},updateResource:function(t){var e=this;this.details=[],t&&(this.resource=t,this.resourceType=this.$route.meta.resourceType,t.details&&(this.details=Object.keys(this.resource.details).map((function(t){return{name:t,value:e.resource.details[t],edit:!1}}))),Object(n["a"])("listDetailOptions",{resourcetype:this.resourceType,resourceid:this.resource.id}).then((function(t){e.detailOptions=t.listdetailoptionsresponse.detailoptions.details})),this.disableSettings="vm"===this.$route.meta.name&&"Stopped"!==this.resource.state)},allowEditOfDetail:function(t){return!this.resource.readonlyuidetails||!this.resource.readonlyuidetails.split(",").map((function(t){return t.trim()})).includes(t)},showEditDetail:function(t){this.details[t].edit=!0,this.details[t].originalValue=this.details[t].value,this.$set(this.details,t,this.details[t])},hideEditDetail:function(t){this.details[t].edit=!1,this.details[t].value=this.details[t].originalValue,this.$set(this.details,t,this.details[t])},handleInputChange:function(t,e){this.details[e].value=t,this.$set(this.details,e,this.details[e])},onAddInputChange:function(t,e){this.error=!1,this[e]=t},isAdminOrOwner:function(){return["Admin"].includes(this.$store.getters.userInfo.roletype)||this.resource.domainid===this.$store.getters.userInfo.domainid&&this.resource.account===this.$store.getters.userInfo.account||this.resource.project&&this.resource.projectid===this.$store.getters.project.id},runApi:function(){var t=this,e="";if("UserVm"===this.resourceType?e="updateVirtualMachine":"Template"===this.resourceType&&(e="updateTemplate"),e in this.$store.getters.apis){var a={id:this.resource.id};0===this.details.length?a.cleanupdetails=!0:this.details.forEach((function(t,e){a["details[0]."+t.name]=t.value})),this.loading=!0,Object(n["a"])(e,a).then((function(e){var a={};"UserVm"===t.resourceType&&e.updatevirtualmachineresponse.virtualmachine.details?a=e.updatevirtualmachineresponse.virtualmachine.details:"Template"===t.resourceType&&e.updatetemplateresponse.template.details&&(a=e.updatetemplateresponse.template.details),t.details=Object.keys(a).map((function(t){return{name:t,value:a[t],edit:!1}}))})).catch((function(e){t.$notifyError(e)})).finally((function(e){t.loading=!1,t.showAddDetail=!1,t.newKey="",t.newValue=""}))}else this.$notification.error({message:this.$t("error.execute.api.failed")+" "+e,description:this.$t("message.user.not.permitted.api")})},addDetail:function(){""!==this.newKey&&""!==this.newValue?(this.error=!1,this.details.push({name:this.newKey,value:this.newValue}),this.runApi()):this.error=this.$t("message.error.provide.setting")},updateDetail:function(t){this.runApi()},deleteDetail:function(t){this.details.splice(t,1),this.runApi()},onShowAddDetail:function(){var t=this;this.showAddDetail=!0,setTimeout((function(){t.$refs.keyElm.focus()}))},closeDetail:function(){this.newKey="",this.newValue="",this.error=!1,this.showAddDetail=!1}}},r=o,l=(a("082e"),a("2877")),c=Object(l["a"])(r,s,i,!1,null,"59e82484",null);e["default"]=c.exports},"9a38":function(t,e,a){"use strict";var s=a("1fa5"),i=a.n(s);i.a},c796:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.loading}},[a("a-tabs",{attrs:{activeKey:t.currentTab,tabPosition:"mobile"===t.device?"top":"left",animated:!1},on:{change:t.handleChangeTab}},[a("a-tab-pane",{key:"details",attrs:{tab:t.$t("label.details")}},[a("DetailsTab",{attrs:{resource:t.resource,loading:t.loading}})],1),t.vm.isoid?a("a-tab-pane",{key:"cdrom",attrs:{tab:t.$t("label.iso")}},[a("a-icon",{attrs:{type:"usb"}}),a("router-link",{attrs:{to:{path:"/iso/"+t.vm.isoid}}},[t._v(t._s(t.vm.isoname))]),t._v(" "),a("br"),a("a-icon",{attrs:{type:"barcode"}}),t._v(" "+t._s(t.vm.isoid)+" ")],1):t._e(),"listVolumes"in t.$store.getters.apis?a("a-tab-pane",{key:"volumes",attrs:{tab:t.$t("label.volumes")}},[a("a-table",{staticClass:"table",attrs:{size:"small",columns:t.volumeColumns,dataSource:t.volumes,rowKey:function(t){return t.id},pagination:!1},scopedSlots:t._u([{key:"name",fn:function(e,s){return[a("a-icon",{attrs:{type:"hdd"}}),a("router-link",{attrs:{to:{path:"/volume/"+s.id}}},[t._v(" "+t._s(e)+" ")]),s.provisioningtype?a("a-tag",[t._v(" "+t._s(s.provisioningtype)+" ")]):t._e()]}},{key:"state",fn:function(e){return[a("status",{attrs:{text:e||""}}),t._v(t._s(e)+" ")]}},{key:"size",fn:function(e,a){return[t._v(" "+t._s(parseFloat(a.size/1073741824).toFixed(2))+" GB ")]}}],null,!1,3516179457)})],1):t._e(),"listNics"in t.$store.getters.apis?a("a-tab-pane",{key:"nics",attrs:{tab:t.$t("label.nics")}},[a("a-button",{staticStyle:{width:"100%","margin-bottom":"10px"},attrs:{type:"dashed",loading:t.loadingNic,disabled:!("addNicToVirtualMachine"in t.$store.getters.apis)},on:{click:t.showAddModal}},[a("a-icon",{attrs:{type:"plus"}}),t._v(" "+t._s(t.$t("label.network.addvm"))+" ")],1),a("NicsTable",{attrs:{resource:t.vm,loading:t.loading},scopedSlots:t._u([{key:"actions",fn:function(e){return a("span",{},[a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.set.default.nic"))+" ")]),e.nic.isdefault?t._e():a("a-popconfirm",{attrs:{title:t.$t("label.set.default.nic"),okText:t.$t("label.yes"),cancelText:t.$t("label.no")},on:{confirm:function(a){return t.setAsDefault(e.nic)}}},[a("a-button",{attrs:{disabled:!("updateDefaultNicForVirtualMachine"in t.$store.getters.apis),icon:"check-square",shape:"circle"}})],1)],2),"L2"!==e.nic.type?a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.change.ip.addess"))+" ")]),a("a-button",{attrs:{icon:"swap",shape:"circle",disabled:!("updateVmNicIp"in t.$store.getters.apis)},on:{click:function(a){return t.onChangeIPAddress(e)}}})],2):t._e(),"L2"!==e.nic.type?a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.edit.secondary.ips"))+" ")]),a("a-button",{attrs:{icon:"environment",shape:"circle",disabled:!("addIpToNic"in t.$store.getters.apis)&&!("addIpToNic"in t.$store.getters.apis)},on:{click:function(a){return t.fetchSecondaryIPs(e.nic.id)}}})],2):t._e(),a("a-tooltip",{attrs:{placement:"bottom"}},[a("template",{slot:"title"},[t._v(" "+t._s(t.$t("label.action.delete.nic"))+" ")]),e.nic.isdefault?t._e():a("a-popconfirm",{attrs:{title:t.$t("message.network.removenic"),okText:t.$t("label.yes"),cancelText:t.$t("label.no")},on:{confirm:function(a){return t.removeNIC(e.nic)}}},[a("a-button",{attrs:{disabled:!("removeNicFromVirtualMachine"in t.$store.getters.apis),type:"danger",icon:"delete",shape:"circle"}})],1)],2)],1)}}],null,!1,968880624)})],1):t._e(),"listVMSnapshot"in t.$store.getters.apis?a("a-tab-pane",{key:"vmsnapshots",attrs:{tab:t.$t("label.vm.snapshots")}},[a("ListResourceTable",{attrs:{apiName:"listVMSnapshot",resource:t.resource,params:{virtualmachineid:this.resource.id},columns:["displayname","state","type","created"],routerlinks:function(t){return{displayname:"/vmsnapshot/"+t.id}}}})],1):t._e(),"listBackups"in t.$store.getters.apis?a("a-tab-pane",{key:"backups",attrs:{tab:t.$t("label.backup")}},[a("ListResourceTable",{attrs:{apiName:"listBackups",resource:t.resource,params:{virtualmachineid:this.resource.id},columns:["id","status","type","created"],routerlinks:function(t){return{id:"/backup/"+t.id}},showSearch:!1}})],1):t._e(),this.resource.securitygroup&&this.resource.securitygroup.length>0?a("a-tab-pane",{key:"securitygroups",attrs:{tab:t.$t("label.securitygroups")}},[a("ListResourceTable",{attrs:{items:this.resource.securitygroup,columns:["name","description"],routerlinks:function(t){return{name:"/securitygroups/"+t.id}},showSearch:!1}})],1):t._e(),a("a-tab-pane",{key:"settings",attrs:{tab:t.$t("label.settings")}},[a("DetailSettings",{attrs:{resource:t.resource,loading:t.loading}})],1)],1),a("a-modal",{attrs:{visible:t.showAddNetworkModal,title:t.$t("label.network.addvm"),maskClosable:!1,okText:t.$t("label.ok"),cancelText:t.$t("label.cancel")},on:{cancel:t.closeModals,ok:t.submitAddNetwork}},[t._v(" "+t._s(t.$t("message.network.addvm.desc"))+" "),a("div",{staticClass:"modal-form"},[a("p",{staticClass:"modal-form__label"},[t._v(t._s(t.$t("label.network"))+":")]),a("a-select",{attrs:{defaultValue:t.addNetworkData.network},on:{change:function(e){return t.addNetworkData.network=e}}},t._l(t.addNetworkData.allNetworks,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1),a("p",{staticClass:"modal-form__label"},[t._v(t._s(t.$t("label.publicip"))+":")]),a("a-input",{model:{value:t.addNetworkData.ip,callback:function(e){t.$set(t.addNetworkData,"ip",e)},expression:"addNetworkData.ip"}})],1)]),a("a-modal",{attrs:{visible:t.showUpdateIpModal,title:t.$t("label.change.ipaddress"),maskClosable:!1,okText:t.$t("label.ok"),cancelText:t.$t("label.cancel")},on:{cancel:t.closeModals,ok:t.submitUpdateIP}},[t._v(" "+t._s(t.$t("message.network.updateip"))+" "),a("div",{staticClass:"modal-form"},[a("p",{staticClass:"modal-form__label"},[t._v(t._s(t.$t("label.publicip"))+":")]),"Shared"===t.editNicResource.type?a("a-select",{attrs:{showSearch:"",loading:t.listIps.loading},model:{value:t.editIpAddressValue,callback:function(e){t.editIpAddressValue=e},expression:"editIpAddressValue"}},t._l(t.listIps.opts,(function(e){return a("a-select-option",{key:e.ipaddress},[t._v(" "+t._s(e.ipaddress)+" ")])})),1):a("a-input",{model:{value:t.editIpAddressValue,callback:function(e){t.editIpAddressValue=e},expression:"editIpAddressValue"}})],1)]),a("a-modal",{staticClass:"wide-modal",attrs:{visible:t.showSecondaryIpModal,title:t.$t("label.acquire.new.secondary.ip"),maskClosable:!1,footer:null,closable:!1}},[a("p",[t._v(" "+t._s(t.$t("message.network.secondaryip"))+" ")]),a("a-divider"),a("a-input",{attrs:{placeholder:t.$t("label.new.secondaryip.description")},model:{value:t.newSecondaryIp,callback:function(e){t.newSecondaryIp=e},expression:"newSecondaryIp"}}),a("div",{staticStyle:{"margin-top":"10px",display:"flex","justify-content":"flex-end"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:t.submitSecondaryIP}},[t._v(t._s(t.$t("label.add.secondary.ip")))]),a("a-button",{on:{click:t.closeModals}},[t._v(t._s(t.$t("label.close")))])],1),a("a-divider"),a("a-list",{attrs:{itemLayout:"vertical"}},t._l(t.secondaryIPs,(function(e,s){return a("a-list-item",{key:s},[a("a-popconfirm",{attrs:{title:t.$t("label.action.release.ip")+"?",okText:t.$t("label.yes"),cancelText:t.$t("label.no")},on:{confirm:function(a){return t.removeSecondaryIP(e.id)}}},[a("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete"}}),t._v(" "+t._s(e.ipaddress)+" ")],1)],1)})),1)],1)],1)},i=[],n=(a("99af"),a("4de4"),a("4160"),a("caad"),a("d81d"),a("d3b7"),a("2532"),a("159b"),a("365c")),o=a("ac0d"),r=a("9127"),l=a("829c"),c=a("5801"),d=a("6718"),u=a("5656"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.showSearch?a("a-input-search",{staticStyle:{width:"25vw",float:"right","margin-bottom":"10px","z-index":"8"},attrs:{placeholder:t.$t("label.search")},on:{search:t.handleSearch},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}):t._e(),a("a-table",{attrs:{size:"small",columns:t.fetchColumns(),dataSource:t.dataSource,rowKey:function(t){return t.id},loading:t.loading,pagination:t.defaultPagination},on:{change:t.handleTableChange,"handle-search-filter":t.handleTableChange},scopedSlots:t._u([t._l(Object.keys(t.routerlinks({})),(function(e,s){return{key:e,fn:function(i,n){return[a("span",{key:s},[a("router-link",{attrs:{set:t.routerlink=t.routerlinks(n),to:{path:t.routerlink[e]}}},[t._v(t._s(i))])],1)]}}})),{key:"state",fn:function(e){return[a("status",{attrs:{text:e||""}}),t._v(t._s(e)+" ")]}},{key:"status",fn:function(e){return[a("status",{attrs:{text:e||""}}),t._v(t._s(e)+" ")]}}],null,!0)}),t.defaultPagination?t._e():a("div",{staticStyle:{display:"block","text-align":"right","margin-top":"10px"}},[a("a-pagination",{attrs:{size:"small",current:t.options.page,pageSize:t.options.pageSize,total:t.total,showTotal:function(e){return t.$t("label.total")+" "+e+" "+t.$t("label.items")},pageSizeOptions:"desktop"===t.device?["20","50","100","200"]:["10","20","50","100","200"],showSizeChanger:""},on:{change:t.handleTableChange,showSizeChange:t.handlePageSizeChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(e){return[a("span",[t._v(t._s(e.value)+" / "+t._s(t.$t("label.page")))])]}}],null,!1,3544671426)})],1)],1)},h=[],f=(a("a4d3"),a("e01a"),a("d28b"),a("3ca3"),a("ddb0"),a("f3f3")),m={name:"ListResourceTable",components:{Status:l["a"]},mixins:[o["c"]],props:{resource:{type:Object,default:function(){}},apiName:{type:String,default:""},routerlinks:{type:Function,default:function(){return{}}},params:{type:Object,default:function(){}},columns:{type:Array,required:!0},showSearch:{type:Boolean,default:!0},items:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,dataSource:[],total:0,filter:"",defaultPagination:!1,options:{page:1,pageSize:10,keyword:null}}},watch:{resource:function(t,e){t!==e&&this.fetchData()},items:function(t,e){t&&(this.dataSource=t)},"$i18n.locale":function(t,e){t!==e&&this.fetchData()}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t=this;if(this.items&&this.items.length>0)return this.dataSource=this.items,void(this.defaultPagination={showSizeChanger:!0,pageSizeOptions:"desktop"===this.mixinDevice?["20","50","100","200"]:["10","20","50","100","200"]});this.loading=!0;var e=Object(f["a"])(Object(f["a"])({},this.params),this.options);e.listall=!0,e.response="json",e.details="min",Object(n["a"])(this.apiName,e).then((function(e){var a,s;for(var i in e)if(i.includes("response")){a=i;break}for(var n in e[a]){if("count"!==n){s=n;break}t.total=e[a][n]}t.dataSource=e[a][s],t.dataSource&&0!==t.dataSource.length||(t.dataSource=[])})).finally((function(){t.loading=!1}))},fetchColumns:function(){var t=[],e=!0,a=!1,s=void 0;try{for(var i,n=this.columns[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=i.value;t.push({dataIndex:o,title:this.$t("label."+o),scopedSlots:{customRender:o}})}}catch(r){a=!0,s=r}finally{try{e||null==n.return||n.return()}finally{if(a)throw s}}return t},handleSearch:function(t){this.filter=t,this.options.page=1,this.options.pageSize=10,this.options.keyword=this.filter,this.fetchData()},handleTableChange:function(t,e){this.options.page=t,this.options.pageSize=e,this.fetchData()},handlePageSizeChange:function(t,e){this.options.page=1,this.options.pageSize=e,this.fetchData()}}},b=m,g=a("2877"),v=Object(g["a"])(b,p,h,!1,null,null,null),y=v.exports,w={name:"InstanceTab",components:{ResourceLayout:r["a"],DetailsTab:c["default"],DetailSettings:d["default"],NicsTable:u["default"],Status:l["a"],ListResourceTable:y},mixins:[o["c"]],props:{resource:{type:Object,required:!0},loading:{type:Boolean,default:!1}},inject:["parentFetchData"],data:function(){return{vm:{},volumes:[],totalStorage:0,currentTab:"details",showAddNetworkModal:!1,showUpdateIpModal:!1,showSecondaryIpModal:!1,addNetworkData:{allNetworks:[],network:"",ip:""},loadingNic:!1,editIpAddressNic:"",editIpAddressValue:"",secondaryIPs:[],selectedNicId:"",newSecondaryIp:"",volumeColumns:[{title:this.$t("label.name"),dataIndex:"name",scopedSlots:{customRender:"name"}},{title:this.$t("label.state"),dataIndex:"state",scopedSlots:{customRender:"state"}},{title:this.$t("label.type"),dataIndex:"type"},{title:this.$t("label.size"),dataIndex:"size",scopedSlots:{customRender:"size"}}],editNicResource:{},listIps:{loading:!1,opts:[]}}},created:function(){this.vm=this.resource,this.fetchData()},watch:{resource:function(t,e){this.vm=t,this.fetchData()}},methods:{handleChangeTab:function(t){this.currentTab=t},fetchData:function(){var t=this;this.volumes=[],this.vm&&this.vm.id&&Object(n["a"])("listVolumes",{listall:!0,virtualmachineid:this.vm.id}).then((function(e){t.volumes=e.listvolumesresponse.volume,t.volumes&&t.volumes.sort((function(t,e){return t.deviceid-e.deviceid})),t.$set(t.resource,"volumes",t.volumes)}))},listNetworks:function(){var t=this;Object(n["a"])("listNetworks",{listAll:"true",zoneid:this.vm.zoneid}).then((function(e){t.addNetworkData.allNetworks=e.listnetworksresponse.network.filter((function(e){return!t.vm.nic.map((function(t){return t.networkid})).includes(e.id)})),t.addNetworkData.network=t.addNetworkData.allNetworks[0].id}))},fetchSecondaryIPs:function(t){var e=this;this.showSecondaryIpModal=!0,this.selectedNicId=t,Object(n["a"])("listNics",{nicId:t,keyword:"",virtualmachineid:this.vm.id}).then((function(t){e.secondaryIPs=t.listnicsresponse.nic[0].secondaryip}))},fetchPublicIps:function(t){var e=this;this.listIps.loading=!0,this.listIps.opts=[],Object(n["a"])("listPublicIpAddresses",{networkid:t,allocatedonly:!1,forvirtualnetwork:!1}).then((function(t){var a=t.listpublicipaddressesresponse.publicipaddress||[];a.forEach((function(t){"Free"===t.state&&e.listIps.opts.push({ipaddress:t.ipaddress})})),e.listIps.opts.sort((function(t,e){var a=t.ipaddress.replaceAll(".",""),s=e.ipaddress.replaceAll(".","");return parseInt(a)<parseInt(s)?-1:parseInt(a)>parseInt(s)?1:0}))})).finally((function(){e.listIps.loading=!1}))},showAddModal:function(){this.showAddNetworkModal=!0,this.listNetworks()},closeModals:function(){this.showAddNetworkModal=!1,this.showUpdateIpModal=!1,this.showSecondaryIpModal=!1,this.addNetworkData.network="",this.addNetworkData.ip="",this.editIpAddressValue="",this.newSecondaryIp=""},onChangeIPAddress:function(t){this.editNicResource=t.nic,this.editIpAddressNic=t.nic.id,this.showUpdateIpModal=!0,"Shared"===t.nic.type&&this.fetchPublicIps(t.nic.networkid)},submitAddNetwork:function(){var t=this,e={};e.virtualmachineid=this.vm.id,e.networkid=this.addNetworkData.network,this.addNetworkData.ip&&(e.ipaddress=this.addNetworkData.ip),this.showAddNetworkModal=!1,this.loadingNic=!0,Object(n["a"])("addNicToVirtualMachine",e).then((function(e){t.$pollJob({jobId:e.addnictovirtualmachineresponse.jobid,successMessage:t.$t("message.success.add.network"),successMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()},errorMessage:t.$t("message.add.network.failed"),errorMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()},loadingMessage:t.$t("message.add.network.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()}})})).catch((function(e){t.$notifyError(e),t.loadingNic=!1}))},setAsDefault:function(t){var e=this;this.loadingNic=!0,Object(n["a"])("updateDefaultNicForVirtualMachine",{virtualmachineid:this.vm.id,nicid:t.id}).then((function(a){e.$pollJob({jobId:a.updatedefaultnicforvirtualmachineresponse.jobid,successMessage:"".concat(e.$t("label.success.set")," ").concat(t.networkname," ").concat(e.$t("label.as.default"),". ").concat(e.$t("message.set.default.nic.manual"),"."),successMethod:function(){e.loadingNic=!1,e.parentFetchData()},errorMessage:"".concat(e.$t("label.error.setting")," ").concat(t.networkname," ").concat(e.$t("label.as.default")),errorMethod:function(){e.loadingNic=!1,e.parentFetchData()},loadingMessage:"".concat(e.$t("label.setting")," ").concat(t.networkname," ").concat(e.$t("label.as.default"),"..."),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.loadingNic=!1,e.parentFetchData()}})})).catch((function(t){e.$notifyError(t),e.loadingNic=!1}))},submitUpdateIP:function(){var t=this;this.loadingNic=!0,this.showUpdateIpModal=!1,Object(n["a"])("updateVmNicIp",{nicId:this.editIpAddressNic,ipaddress:this.editIpAddressValue}).then((function(e){t.$pollJob({jobId:e.updatevmnicipresponse.jobid,successMessage:t.$t("message.success.update.ipaddress"),successMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()},errorMessage:t.$t("label.error"),errorMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()},loadingMessage:t.$t("message.update.ipaddress.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.loadingNic=!1,t.closeModals(),t.parentFetchData()}})})).catch((function(e){t.$notifyError(e),t.loadingNic=!1}))},removeNIC:function(t){var e=this;this.loadingNic=!0,Object(n["a"])("removeNicFromVirtualMachine",{nicid:t.id,virtualmachineid:this.vm.id}).then((function(t){e.$pollJob({jobId:t.removenicfromvirtualmachineresponse.jobid,successMessage:e.$t("message.success.remove.nic"),successMethod:function(){e.loadingNic=!1,e.parentFetchData()},errorMessage:e.$t("message.error.remove.nic"),errorMethod:function(){e.loadingNic=!1,e.parentFetchData()},loadingMessage:e.$t("message.remove.nic.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.loadingNic=!1,e.parentFetchData()}})})).catch((function(t){e.$notifyError(t),e.loadingNic=!1}))},submitSecondaryIP:function(){var t=this;this.loadingNic=!0;var e={};e.nicid=this.selectedNicId,this.newSecondaryIp&&(e.ipaddress=this.newSecondaryIp),Object(n["a"])("addIpToNic",e).then((function(e){t.$pollJob({jobId:e.addiptovmnicresponse.jobid,successMessage:t.$t("message.success.add.secondary.ipaddress"),successMethod:function(){t.loadingNic=!1,t.fetchSecondaryIPs(t.selectedNicId),t.parentFetchData()},errorMessage:t.$t("message.error.add.secondary.ipaddress"),errorMethod:function(){t.loadingNic=!1,t.fetchSecondaryIPs(t.selectedNicId),t.parentFetchData()},loadingMessage:t.$t("message.add.secondary.ipaddress.processing"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.loadingNic=!1,t.fetchSecondaryIPs(t.selectedNicId),t.parentFetchData()}})})).catch((function(e){t.$notifyError(e),t.loadingNic=!1}))},removeSecondaryIP:function(t){var e=this;this.loadingNic=!0,Object(n["a"])("removeIpFromNic",{id:t}).then((function(t){e.$pollJob({jobId:t.removeipfromnicresponse.jobid,successMessage:e.$t("message.success.remove.secondary.ipaddress"),successMethod:function(){e.loadingNic=!1,e.fetchSecondaryIPs(e.selectedNicId),e.parentFetchData()},errorMessage:e.$t("message.error.remove.secondary.ipaddress"),errorMethod:function(){e.loadingNic=!1,e.fetchSecondaryIPs(e.selectedNicId),e.parentFetchData()},loadingMessage:e.$t("message.remove.secondary.ipaddress.processing"),catchMessage:e.$t("error.fetching.async.job.result"),catchMethod:function(){e.loadingNic=!1,e.fetchSecondaryIPs(e.selectedNicId),e.parentFetchData()}})})).catch((function(t){e.$notifyError(t),e.loadingNic=!1,e.fetchSecondaryIPs(e.selectedNicId)}))}}},k=w,$=(a("9a38"),a("1863"),Object(g["a"])(k,s,i,!1,null,"90fc9942",null));e["default"]=$.exports},c8d2:function(t,e,a){var s=a("d039"),i=a("5899"),n="​᠎";t.exports=function(t){return s((function(){return!!i[t]()||n[t]()!=n||i[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-58f8b091.70c259e2.js.map