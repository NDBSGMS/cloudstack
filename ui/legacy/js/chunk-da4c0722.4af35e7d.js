(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da4c0722"],{4361:function(e,t,a){},5951:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=this,a=t.$createElement,r=t._self._c||a;return r("a-spin",{attrs:{spinning:t.loading}},[r("a-form",{staticClass:"form",attrs:{form:t.form,layout:"vertical"}},[r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.zone")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{initialValue:this.zoneId,rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"['zoneid', {\n          initialValue: this.zoneId,\n          rules: [{ required: true, message: `${$t('label.required')}` }] }\n        ]"}]},t._l(t.zonesList,(function(e){return r("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.podname")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"[\n          'name',\n          {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}],attrs:{placeholder:t.placeholder.name}})],1),r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.reservedsystemgateway")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gateway",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"[\n          'gateway',\n          {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}],attrs:{placeholder:t.placeholder.gateway}})],1),r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.reservedsystemnetmask")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["netmask",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"[\n          'netmask',\n          {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}],attrs:{placeholder:t.placeholder.netmask}})],1),r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.reservedsystemstartip")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["startip",{rules:[{required:!0,message:""+t.$t("label.required")}]}],expression:"[\n          'startip',\n          {\n            rules: [{ required: true, message: `${$t('label.required')}` }]\n          }]"}],attrs:{placeholder:t.placeholder.startip}})],1),r("a-form-item",{staticClass:"form__item",attrs:{label:t.$t("label.reservedsystemendip")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["endip"],expression:"['endip']"}],attrs:{placeholder:t.placeholder.endip}})],1),r("div",{staticClass:"form__item"},[r("div",{staticClass:"form__label"},[t._v(t._s(t.$t("label.isdedicated")))]),r("a-checkbox",{on:{change:t.toggleDedicate}})],1),t.showDedicated?[r("DedicateDomain",{attrs:{error:t.domainError},on:{domainChange:function(e){return t.dedicatedDomainId=e},accountChange:function(e){return t.dedicatedAccount=e}}})]:t._e(),r("a-divider"),r("div",{staticClass:"actions"},[r("a-button",{on:{click:function(){return e.$parent.$parent.close()}}},[t._v(t._s(t.$t("label.cancel")))]),r("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(t._s(t.$t("label.ok")))])],1)],2)],1)},n=[],i=(a("a4d3"),a("e01a"),a("99af"),a("7db0"),a("4160"),a("b0c0"),a("b64b"),a("d3b7"),a("159b"),a("365c")),s=a("7e77"),o={name:"ClusterAdd",components:{DedicateDomain:s["a"]},props:{resource:{type:Object,required:!0}},inject:["parentFetchData"],data:function(){return{loading:!1,zonesList:[],zoneId:null,showDedicated:!1,dedicatedDomainId:null,dedicatedAccount:null,domainError:!1,params:[],placeholder:{name:null,gateway:null,netmask:null,startip:null,endip:null}}},beforeCreate:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.fetchZones()},fetchZones:function(){var e=this;this.loading=!0,Object(i["a"])("listZones").then((function(t){e.zonesList=t.listzonesresponse.zone||[],e.zoneId=e.zonesList[0].id,e.params=e.$store.getters.apis.createPod.params,Object.keys(e.placeholder).forEach((function(t){e.returnPlaceholder(t)}))})).catch((function(t){e.$notifyError(t)})).finally((function(){e.loading=!1}))},toggleDedicate:function(){this.dedicatedDomainId=null,this.dedicatedAccount=null,this.showDedicated=!this.showDedicated},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(t.loading=!0,Object(i["a"])("createPod",{zoneId:a.zoneid,name:a.name,gateway:a.gateway,netmask:a.netmask,startip:a.startip,endip:a.endip}).then((function(e){var a=e.createpodresponse.pod||{};a.id&&t.showDedicated&&t.dedicatePod(a.id),t.loading=!1,t.parentFetchData(),t.$parent.$parent.close()})).catch((function(e){t.$notification.error({message:"".concat(t.$t("label.error")," ").concat(e.response.status),description:e.response.data.createpodresponse.errortext,duration:0}),t.loading=!1})))}))},dedicatePod:function(e){var t=this;this.loading=!0,Object(i["a"])("dedicatePod",{podId:e,domainid:this.dedicatedDomainId,account:this.dedicatedAccount}).then((function(e){t.$pollJob({jobId:e.dedicatepodresponse.jobid,successMessage:t.$t("message.pod.dedicated"),successMethod:function(){t.loading=!1,t.$store.dispatch("AddAsyncJob",{title:t.$t("message.pod.dedicated"),jobid:e.dedicatepodresponse.jobid,description:"".concat(t.$t("label.domainid")," : ").concat(t.dedicatedDomainId),status:"progress"})},errorMessage:t.$t("error.dedicate.pod.failed"),errorMethod:function(){t.loading=!1},loadingMessage:t.$t("message.dedicating.pod"),catchMessage:t.$t("error.fetching.async.job.result"),catchMethod:function(){t.loading=!1}})})).catch((function(e){t.$notification.error({message:"".concat(t.$t("label.error")," ").concat(e.response.status),description:e.response.data.errorresponse.errortext,duration:0}),t.loading=!1}))},returnPlaceholder:function(e){var t=this;this.params.find((function(a){a.name===e&&(t.placeholder[e]=a.description)}))}}},d=o,c=(a("bf5e"),a("2877")),l=Object(c["a"])(d,r,n,!1,null,"bde42734",null);t["default"]=l.exports},bf5e:function(e,t,a){"use strict";var r=a("4361"),n=a.n(r);n.a}}]);
//# sourceMappingURL=chunk-da4c0722.4af35e7d.js.map