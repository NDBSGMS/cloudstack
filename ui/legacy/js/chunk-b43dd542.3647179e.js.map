{"version":3,"sources":["webpack:///./src/views/infra/HostAdd.vue?038d","webpack:///./src/views/infra/HostAdd.vue?d0b6","webpack:///src/views/infra/HostAdd.vue","webpack:///./src/views/infra/HostAdd.vue?abff","webpack:///./src/views/infra/HostAdd.vue"],"names":["render","this$1","this","_vm","_h","$createElement","_c","_self","attrs","loading","staticClass","_v","_s","$t","on","fetchPods","model","value","callback","$$v","zoneId","expression","_l","zone","key","id","name","fetchClusters","podId","pod","handleChangeCluster","clusterId","cluster","selectedClusterHyperVisorType","hostname","placeholder","username","_e","password","agentusername","agentpassword","agentport","hosttags","selectedTags","tag","toggleDedicated","domainError","dedicatedDomainId","dedicatedAccount","$parent","close","handleSubmitForm","staticRenderFns","components","DedicateDomain","props","resource","type","Object","required","inject","data","zonesList","clustersList","podsList","hostTagsList","url","selectedCluster","showDedicated","params","mounted","fetchData","methods","fetchZones","fetchHostTags","$store","getters","apis","addHost","keys","forEach","zoneid","podid","find","hypervisortype","requiredFields","input","parentNode","querySelector","classList","remove","add","$el","querySelectorAll","length","indexOf","clusterid","hypervisor","clustertype","join","args","host","message","description","error","response","addhostresponse","errortext","duration","dedicateHost","hostId","domainId","account","jobId","dedicatehostresponse","jobid","successMessage","successMethod","title","status","errorMessage","errorMethod","loadingMessage","catchMessage","catchMethod","errorresponse","returnPlaceholder","i","field","component"],"mappings":"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","file":"js/chunk-b43dd542.3647179e.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HostAdd.vue?vue&type=style&index=0&id=359c0be8&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HostAdd.vue?vue&type=style&index=0&id=359c0be8&scoped=true&lang=scss&\"","var render = function () {\nvar this$1 = this;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('div',{staticClass:\"form\"},[_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.zonenamelabel')))]),_c('a-select',{on:{\"change\":_vm.fetchPods},model:{value:(_vm.zoneId),callback:function ($$v) {_vm.zoneId=$$v},expression:\"zoneId\"}},_vm._l((_vm.zonesList),function(zone){return _c('a-select-option',{key:zone.id,attrs:{\"value\":zone.id}},[_vm._v(\" \"+_vm._s(zone.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.podname')))]),_c('a-select',{on:{\"change\":_vm.fetchClusters},model:{value:(_vm.podId),callback:function ($$v) {_vm.podId=$$v},expression:\"podId\"}},_vm._l((_vm.podsList),function(pod){return _c('a-select-option',{key:pod.id,attrs:{\"value\":pod.id}},[_vm._v(\" \"+_vm._s(pod.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.clustername')))]),_c('a-select',{on:{\"change\":_vm.handleChangeCluster},model:{value:(_vm.clusterId),callback:function ($$v) {_vm.clusterId=$$v},expression:\"clusterId\"}},_vm._l((_vm.clustersList),function(cluster){return _c('a-select-option',{key:cluster.id,attrs:{\"value\":cluster.id}},[_vm._v(\" \"+_vm._s(cluster.name)+\" \")])}),1)],1),_c('div',{staticClass:\"form__item required-field\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.selectedClusterHyperVisorType === 'VMware' ? _vm.$t('label.esx.host') : _vm.$t('label.hostnamelabel')))]),_c('span',{staticClass:\"required required-label\"},[_vm._v(_vm._s(_vm.$t('label.required')))]),_c('a-input',{model:{value:(_vm.hostname),callback:function ($$v) {_vm.hostname=$$v},expression:\"hostname\"}})],1),(_vm.selectedClusterHyperVisorType !== 'VMware')?_c('div',{staticClass:\"form__item required-field\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.username')))]),_c('span',{staticClass:\"required required-label\"},[_vm._v(_vm._s(_vm.$t('label.required')))]),_c('a-input',{attrs:{\"placeholder\":_vm.placeholder.username},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}})],1):_vm._e(),(_vm.selectedClusterHyperVisorType !== 'VMware')?_c('div',{staticClass:\"form__item required-field\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.password')))]),_c('span',{staticClass:\"required required-label\"},[_vm._v(_vm._s(_vm.$t('label.required')))]),_c('a-input',{attrs:{\"placeholder\":_vm.placeholder.password,\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e(),(_vm.selectedClusterHyperVisorType === 'Ovm3')?[_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.agent.username')))]),_c('a-input',{model:{value:(_vm.agentusername),callback:function ($$v) {_vm.agentusername=$$v},expression:\"agentusername\"}})],1),_c('div',{staticClass:\"form__item required-field\"},[_c('div',{staticClass:\"form__label\"},[_c('span',{staticClass:\"required\"},[_vm._v(\"* \")]),_vm._v(_vm._s(_vm.$t('label.agent.password')))]),_c('span',{staticClass:\"required required-label\"},[_vm._v(_vm._s(_vm.$t('label.required')))]),_c('a-input',{attrs:{\"type\":\"password\"},model:{value:(_vm.agentpassword),callback:function ($$v) {_vm.agentpassword=$$v},expression:\"agentpassword\"}})],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.agentport')))]),_c('a-input',{model:{value:(_vm.agentport),callback:function ($$v) {_vm.agentport=$$v},expression:\"agentport\"}})],1)]:_vm._e(),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.hosttags')))]),_c('a-select',{attrs:{\"mode\":\"tags\",\"placeholder\":_vm.placeholder.hosttags},model:{value:(_vm.selectedTags),callback:function ($$v) {_vm.selectedTags=$$v},expression:\"selectedTags\"}},_vm._l((_vm.hostTagsList),function(tag){return _c('a-select-option',{key:tag.name},[_vm._v(_vm._s(tag.name))])}),1)],1),_c('div',{staticClass:\"form__item\"},[_c('div',{staticClass:\"form__label\"},[_vm._v(_vm._s(_vm.$t('label.isdedicated')))]),_c('a-checkbox',{on:{\"change\":_vm.toggleDedicated}})],1),(_vm.showDedicated)?[_c('DedicateDomain',{attrs:{\"error\":_vm.domainError},on:{\"domainChange\":function (id) { return _vm.dedicatedDomainId = id; },\"accountChange\":function (id) { return _vm.dedicatedAccount = id; }}})]:_vm._e(),_c('a-divider'),_c('div',{staticClass:\"actions\"},[_c('a-button',{on:{\"click\":function () { return this$1.$parent.$parent.close(); }}},[_vm._v(_vm._s(_vm.$t('label.cancel')))]),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmitForm}},[_vm._v(_vm._s(_vm.$t('label.ok')))])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-spin :spinning=\"loading\">\n    <div class=\"form\">\n\n      <div class=\"form__item\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.zonenamelabel') }}</div>\n        <a-select v-model=\"zoneId\" @change=\"fetchPods\">\n          <a-select-option\n            v-for=\"zone in zonesList\"\n            :value=\"zone.id\"\n            :key=\"zone.id\">\n            {{ zone.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.podname') }}</div>\n        <a-select v-model=\"podId\" @change=\"fetchClusters\">\n          <a-select-option\n            v-for=\"pod in podsList\"\n            :value=\"pod.id\"\n            :key=\"pod.id\">\n            {{ pod.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.clustername') }}</div>\n        <a-select v-model=\"clusterId\" @change=\"handleChangeCluster\">\n          <a-select-option\n            v-for=\"cluster in clustersList\"\n            :value=\"cluster.id\"\n            :key=\"cluster.id\">\n            {{ cluster.name }}\n          </a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item required-field\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ selectedClusterHyperVisorType === 'VMware' ? $t('label.esx.host') : $t('label.hostnamelabel') }}</div>\n        <span class=\"required required-label\">{{ $t('label.required') }}</span>\n        <a-input v-model=\"hostname\"></a-input>\n      </div>\n\n      <div class=\"form__item required-field\" v-if=\"selectedClusterHyperVisorType !== 'VMware'\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.username') }}</div>\n        <span class=\"required required-label\">{{ $t('label.required') }}</span>\n        <a-input :placeholder=\"placeholder.username\" v-model=\"username\"></a-input>\n      </div>\n\n      <div class=\"form__item required-field\" v-if=\"selectedClusterHyperVisorType !== 'VMware'\">\n        <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.password') }}</div>\n        <span class=\"required required-label\">{{ $t('label.required') }}</span>\n        <a-input :placeholder=\"placeholder.password\" type=\"password\" v-model=\"password\"></a-input>\n      </div>\n\n      <template v-if=\"selectedClusterHyperVisorType === 'Ovm3'\">\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.agent.username') }}</div>\n          <a-input v-model=\"agentusername\"></a-input>\n        </div>\n        <div class=\"form__item required-field\">\n          <div class=\"form__label\"><span class=\"required\">* </span>{{ $t('label.agent.password') }}</div>\n          <span class=\"required required-label\">{{ $t('label.required') }}</span>\n          <a-input type=\"password\" v-model=\"agentpassword\"></a-input>\n        </div>\n        <div class=\"form__item\">\n          <div class=\"form__label\">{{ $t('label.agentport') }}</div>\n          <a-input v-model=\"agentport\"></a-input>\n        </div>\n      </template>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\">{{ $t('label.hosttags') }}</div>\n        <a-select\n          mode=\"tags\"\n          :placeholder=\"placeholder.hosttags\"\n          v-model=\"selectedTags\"\n        >\n          <a-select-option v-for=\"tag in hostTagsList\" :key=\"tag.name\">{{ tag.name }}</a-select-option>\n        </a-select>\n      </div>\n\n      <div class=\"form__item\">\n        <div class=\"form__label\">{{ $t('label.isdedicated') }}</div>\n        <a-checkbox @change=\"toggleDedicated\" />\n      </div>\n\n      <template v-if=\"showDedicated\">\n        <DedicateDomain\n          @domainChange=\"id => dedicatedDomainId = id\"\n          @accountChange=\"id => dedicatedAccount = id\"\n          :error=\"domainError\" />\n      </template>\n\n      <a-divider></a-divider>\n\n      <div class=\"actions\">\n        <a-button @click=\"() => this.$parent.$parent.close()\">{{ $t('label.cancel') }}</a-button>\n        <a-button @click=\"handleSubmitForm\" type=\"primary\">{{ $t('label.ok') }}</a-button>\n      </div>\n\n    </div>\n  </a-spin>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport DedicateDomain from '../../components/view/DedicateDomain'\n\nexport default {\n  name: 'HostAdd',\n  components: {\n    DedicateDomain\n  },\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  inject: ['parentFetchData', 'parentToggleLoading'],\n  data () {\n    return {\n      loading: false,\n      zoneId: null,\n      podId: null,\n      clusterId: null,\n      hostname: null,\n      username: null,\n      password: null,\n      selectedTags: [],\n      zonesList: [],\n      clustersList: [],\n      podsList: [],\n      hostTagsList: [],\n      url: null,\n      agentusername: null,\n      agentpassword: null,\n      agentport: null,\n      selectedCluster: null,\n      selectedClusterHyperVisorType: null,\n      showDedicated: false,\n      dedicatedDomainId: null,\n      dedicatedAccount: null,\n      domainError: false,\n      params: [],\n      placeholder: {\n        username: null,\n        password: null,\n        hosttags: null\n      }\n    }\n  },\n  mounted () {\n    this.fetchData()\n  },\n  methods: {\n    fetchData () {\n      this.fetchZones()\n      this.fetchHostTags()\n      this.params = this.$store.getters.apis.addHost.params\n      Object.keys(this.placeholder).forEach(item => { this.returnPlaceholder(item) })\n    },\n    fetchZones () {\n      this.loading = true\n      api('listZones').then(response => {\n        this.zonesList = response.listzonesresponse.zone || []\n        this.zoneId = this.zonesList[0].id || null\n        this.fetchPods()\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchPods () {\n      this.loading = true\n      api('listPods', {\n        zoneid: this.zoneId\n      }).then(response => {\n        this.podsList = response.listpodsresponse.pod || []\n        this.podId = this.podsList[0].id || null\n        this.fetchClusters()\n      }).catch(error => {\n        this.$notifyError(error)\n        this.podsList = []\n        this.podId = ''\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchClusters () {\n      this.loading = true\n      api('listClusters', {\n        podid: this.podId\n      }).then(response => {\n        this.clustersList = response.listclustersresponse.cluster || []\n        this.clusterId = this.clustersList[0].id || null\n        if (this.clusterId) {\n          this.handleChangeCluster()\n        }\n      }).catch(error => {\n        this.$notifyError(error)\n        this.clustersList = []\n        this.clusterId = null\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    fetchHostTags () {\n      this.loading = true\n      api('listHostTags').then(response => {\n        this.hostTagsList = response.listhosttagsresponse.hosttag || []\n      }).catch(error => {\n        this.$notifyError(error)\n        this.hostTagsList = []\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    handleChangeCluster () {\n      this.selectedCluster = this.clustersList.find(i => i.id === this.clusterId)\n      this.selectedClusterHyperVisorType = this.selectedCluster.hypervisortype\n    },\n    toggleDedicated () {\n      this.dedicatedDomainId = null\n      this.dedicatedAccount = null\n      this.showDedicated = !this.showDedicated\n    },\n    handleSubmitForm () {\n      const requiredFields = document.querySelectorAll('.required-field')\n\n      requiredFields.forEach(field => {\n        const input = field.querySelector('.ant-input')\n        if (!input.value) {\n          input.parentNode.querySelector('.required-label').classList.add('required-label--error')\n        } else {\n          input.parentNode.querySelector('.required-label').classList.remove('required-label--error')\n        }\n      })\n\n      if (this.$el.querySelectorAll('.required-label--error').length > 0) return\n\n      if (this.selectedClusterHyperVisorType === 'VMware') {\n        this.username = ''\n        this.password = ''\n      }\n\n      if (this.hostname.indexOf('http://') === -1) {\n        this.url = `http://${this.hostname}`\n      } else {\n        this.url = this.hostname\n      }\n\n      const args = {\n        zoneid: this.zoneId,\n        podid: this.podId,\n        clusterid: this.clusterId,\n        hypervisor: this.selectedClusterHyperVisorType,\n        clustertype: this.selectedCluster.clustertype,\n        hosttags: this.selectedTags.join(),\n        username: this.username,\n        password: this.password,\n        url: this.url,\n        agentusername: this.agentusername,\n        agentpassword: this.agentpassword,\n        agentport: this.agentport\n      }\n      Object.keys(args).forEach((key) => (args[key] == null) && delete args[key])\n\n      this.loading = true\n      api('addHost', {}, 'POST', args).then(response => {\n        const host = response.addhostresponse.host[0] || {}\n        if (host.id && this.showDedicated) {\n          this.dedicateHost(host.id)\n        }\n        this.parentFetchData()\n        this.$parent.$parent.close()\n      }).catch(error => {\n        this.$notification.error({\n          message: `${this.$t('label.error')} ${error.response.status}`,\n          description: error.response.data.addhostresponse.errortext,\n          duration: 0\n        })\n      }).finally(() => {\n        this.loading = false\n      })\n    },\n    dedicateHost (hostId) {\n      this.loading = true\n      api('dedicateHost', {\n        hostId,\n        domainId: this.dedicatedDomainId,\n        account: this.dedicatedAccount\n      }).then(response => {\n        this.$pollJob({\n          jobId: response.dedicatehostresponse.jobid,\n          successMessage: this.$t('message.host.dedicated'),\n          successMethod: () => {\n            this.loading = false\n            this.$store.dispatch('AddAsyncJob', {\n              title: this.$t('message.host.dedicated'),\n              jobid: response.dedicatehostresponse.jobid,\n              description: `${this.$t('label.domainid')} : ${this.dedicatedDomainId}`,\n              status: 'progress'\n            })\n          },\n          errorMessage: this.$t('error.dedicate.host.failed'),\n          errorMethod: () => {\n            this.loading = false\n          },\n          loadingMessage: this.$t('message.dedicating.host'),\n          catchMessage: this.$t('error.fetching.async.job.result'),\n          catchMethod: () => {\n            this.loading = false\n          }\n        })\n      }).catch(error => {\n        this.$notification.error({\n          message: `${this.$t('label.error')} ${error.response.status}`,\n          description: error.response.data.errorresponse.errortext,\n          duration: 0\n        })\n        this.loading = false\n      })\n    },\n    returnPlaceholder (field) {\n      this.params.find(i => {\n        if (i.name === field) this.placeholder[field] = i.description\n      })\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n  .form {\n    &__label {\n      margin-bottom: 5px;\n    }\n    &__item {\n      margin-bottom: 20px;\n    }\n    .ant-select {\n      width: 85vw;\n      @media (min-width: 760px) {\n        width: 400px;\n      }\n    }\n  }\n  .actions {\n    display: flex;\n    justify-content: flex-end;\n    button {\n      &:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n\n  .required {\n    color: #ff0000;\n    &-label {\n      display: none;\n      &--error {\n        display: block;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HostAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HostAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HostAdd.vue?vue&type=template&id=359c0be8&scoped=true&\"\nimport script from \"./HostAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./HostAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HostAdd.vue?vue&type=style&index=0&id=359c0be8&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"359c0be8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}