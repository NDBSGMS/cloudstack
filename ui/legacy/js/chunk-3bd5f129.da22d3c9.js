(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bd5f129"],{"128f":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"form-layout"},[r("a-spin",{attrs:{spinning:a.loading}},[r("a-form",{attrs:{form:a.form,layout:"vertical"},on:{submit:a.handleSubmit}},[r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.semanticversion"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.semanticversion.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["semanticversion",{rules:[{required:!0,message:a.$t("message.error.kuberversion")}]}],expression:"['semanticversion', {\n            rules: [{ required: true, message: $t('message.error.kuberversion') }]\n          }]"}],attrs:{placeholder:a.apiParams.semanticversion.description}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.name"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.name.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{message:a.$t("message.error.name")}]}],expression:"['name', {\n            rules: [{ message: $t('message.error.name') }]\n          }]"}],attrs:{placeholder:a.$t("label.name")}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.zoneid"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.zoneid.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["zoneid",{rules:[{validator:function(a,t,r){t&&t.length>1&&-1!==t.indexOf(0)&&r(e.$t("message.error.zone.combined")),r()}}]}],expression:"['zoneid', {\n            rules: [\n              {\n                validator: (rule, value, callback) => {\n                  if (value && value.length > 1 && value.indexOf(0) !== -1) {\n                    callback(this.$t('message.error.zone.combined'))\n                  }\n                  callback()\n                }\n              }\n            ]\n          }]"}],attrs:{id:"zone-selection",showSearch:"",optionFilterProp:"children",filterOption:function(e,a){return a.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},loading:a.zoneLoading,placeholder:a.apiParams.zoneid.description}},a._l(this.zones,(function(e,t){return r("a-select-option",{key:t},[a._v(" "+a._s(e.name||e.description)+" ")])})),1)],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.url"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.url.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url",{rules:[{required:!0,message:a.$t("message.error.binaries.iso.url")}]}],expression:"['url', {\n            rules: [{ required: true, message: $t('message.error.binaries.iso.url') }]\n          }]"}],attrs:{placeholder:a.apiParams.url.description}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.checksum"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.checksum.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["checksum",{rules:[{required:!1,message:a.$t("message.error.required.input")}]}],expression:"['checksum', {\n            rules: [{ required: false, message: $t('message.error.required.input') }]\n          }]"}],attrs:{placeholder:a.apiParams.checksum.description}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.mincpunumber"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.mincpunumber.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["mincpunumber",{rules:[{required:!0,message:a.$t("message.please.enter.value")},{validator:function(a,t,r){t&&(isNaN(t)||t<=0)&&r(e.$t("message.validate.number")),r()}}]}],expression:"['mincpunumber', {\n            rules: [{ required: true, message: $t('message.please.enter.value') },\n                    {\n                      validator: (rule, value, callback) => {\n                        if (value && (isNaN(value) || value <= 0)) {\n                          callback(this.$t('message.validate.number'))\n                        }\n                        callback()\n                      }\n                    }\n            ]\n          }]"}],attrs:{placeholder:a.apiParams.mincpunumber.description}})],1),r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(a.$t("label.minmemory"))+" "),r("a-tooltip",{attrs:{title:a.apiParams.minmemory.description}},[r("a-icon",{staticStyle:{color:"rgba(0,0,0,.45)"},attrs:{type:"info-circle"}})],1)],1),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["minmemory",{rules:[{required:!0,message:a.$t("message.please.enter.value")},{validator:function(a,t,r){t&&(isNaN(t)||t<=0)&&r(e.$t("message.validate.number")),r()}}]}],expression:"['minmemory', {\n            rules: [{ required: true, message: $t('message.please.enter.value') },\n                    {\n                      validator: (rule, value, callback) => {\n                        if (value && (isNaN(value) || value <= 0)) {\n                          callback(this.$t('message.validate.number'))\n                        }\n                        callback()\n                      }\n                    }\n            ]\n          }]"}],attrs:{placeholder:a.apiParams.minmemory.description}})],1),r("div",{staticClass:"action-button",attrs:{span:24}},[r("a-button",{on:{click:a.closeAction}},[a._v(a._s(this.$t("label.cancel")))]),r("a-button",{attrs:{loading:a.loading,type:"primary"},on:{click:a.handleSubmit}},[a._v(a._s(this.$t("label.ok")))])],1)],1)],1)],1)},i=[],s=(t("99af"),t("4160"),t("b0c0"),t("d3b7"),t("159b"),t("365c")),n={name:"AddKubernetesSupportedVersion",props:{},data:function(){return{zones:[],zoneLoading:!1,loading:!1}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this),this.apiConfig=this.$store.getters.apis.addKubernetesSupportedVersion||{},this.apiParams={},this.apiConfig.params.forEach((function(a){e.apiParams[a.name]=a}))},created:function(){this.zones=[{id:null,name:this.$t("label.all.zone")}]},mounted:function(){this.fetchData()},methods:{fetchData:function(){this.fetchZoneData()},isValidValueForKey:function(e,a){return a in e&&null!=e[a]},arrayHasItems:function(e){return null!==e&&void 0!==e&&Array.isArray(e)&&e.length>0},fetchZoneData:function(){var e=this,a={listAll:!0};this.zoneLoading=!0,Object(s["a"])("listZones",a).then((function(a){var t=a.listzonesresponse.zone;e.zones=e.zones.concat(t)})).finally((function(){e.zoneLoading=!1,e.arrayHasItems(e.zones)&&e.form.setFieldsValue({zoneid:0})}))},handleSubmit:function(e){var a=this;e.preventDefault(),this.form.validateFields((function(e,t){if(!e){a.loading=!0;var r={semanticversion:t.semanticversion,url:t.url};a.isValidValueForKey(t,"name")&&(r.name=t.name),a.isValidValueForKey(t,"checksum")&&(r.checksum=t.checksum),a.isValidValueForKey(t,"zoneid")&&(r.zoneid=a.zones[t.zoneid].id),a.isValidValueForKey(t,"mincpunumber")&&t.mincpunumber>0&&(r.mincpunumber=t.mincpunumber),a.isValidValueForKey(t,"minmemory")&&t.minmemory>0&&(r.minmemory=t.minmemory),Object(s["a"])("addKubernetesSupportedVersion",r).then((function(e){a.$message.success("".concat(a.$t("message.success.add.kuberversion"),": ").concat(t.semanticversion)),a.$emit("refresh-data"),a.closeAction()})).catch((function(e){a.$notifyError(e)})).finally((function(){a.loading=!1}))}}))},closeAction:function(){this.$emit("close-action")}}},o=n,l=(t("9281"),t("2877")),c=Object(l["a"])(o,r,i,!1,null,"0f4490b5",null);a["default"]=c.exports},"5d3e":function(e,a,t){},9281:function(e,a,t){"use strict";var r=t("5d3e"),i=t.n(r);i.a}}]);
//# sourceMappingURL=chunk-3bd5f129.da22d3c9.js.map