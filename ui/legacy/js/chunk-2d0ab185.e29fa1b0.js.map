{"version":3,"sources":["webpack:///./src/views/infra/routers/RouterHealthCheck.vue?5934","webpack:///src/views/infra/routers/RouterHealthCheck.vue","webpack:///./src/views/infra/routers/RouterHealthCheck.vue?5f42","webpack:///./src/views/infra/routers/RouterHealthCheck.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","loading","routerHealthChecksEnabled","staticStyle","$store","getters","apis","on","showGetHelathCheck","_v","_s","$t","columns","healthChecks","record","checkname","scopedSlots","_u","key","fn","staticClass","success","showGetHealthChecksForm","handleGetHealthChecksSubmit","onCloseGetHealthChecksForm","form","slot","apiParams","performfreshchecks","description","directives","name","rawName","value","expression","_e","staticRenderFns","components","Status","props","resource","type","Object","required","data","beforeCreate","$form","createForm","apiConfigParams","forEach","watch","updateResource","newItem","mounted","methods","id","checkConfigurationAndGetHealthChecks","e","preventDefault","validateFields","err","params","json","listconfigurationsresponse","configuration","config","getHealthChecks","performFreshChecks","component"],"mappings":"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","file":"js/chunk-2d0ab185.e29fa1b0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-spin',{attrs:{\"spinning\":_vm.loading}},[(!_vm.routerHealthChecksEnabled)?_c('a-alert',{attrs:{\"banner\":\"\",\"message\":_vm.$t('message.action.router.health.checks.disabled.warning')}}):_c('div',[_c('a-button',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"15px\"},attrs:{\"disabled\":!('getRouterHealthCheckResults' in _vm.$store.getters.apis),\"type\":\"primary\",\"icon\":\"play-circle\"},on:{\"click\":_vm.showGetHelathCheck}},[_vm._v(\" \"+_vm._s(_vm.$t('label.action.router.health.checks'))+\" \")]),_c('a-table',{staticStyle:{\"overflow-y\":\"auto\"},attrs:{\"columns\":_vm.columns,\"dataSource\":_vm.healthChecks,\"pagination\":false,\"rowKey\":function (record) { return record.checkname; },\"size\":\"large\"},scopedSlots:_vm._u([{key:\"status\",fn:function(record){return [_c('status',{staticClass:\"status\",attrs:{\"text\":record.success === true ? 'True' : 'False',\"displayText\":\"\"}})]}}])}),('getRouterHealthCheckResults' in _vm.$store.getters.apis)?_c('a-modal',{staticStyle:{\"top\":\"20px\"},attrs:{\"title\":_vm.$t('label.action.router.health.checks'),\"visible\":_vm.showGetHealthChecksForm,\"closable\":true,\"maskClosable\":false,\"okText\":_vm.$t('label.ok'),\"cancelText\":_vm.$t('label.cancel'),\"centered\":\"\"},on:{\"ok\":_vm.handleGetHealthChecksSubmit,\"cancel\":_vm.onCloseGetHealthChecksForm}},[_c('a-spin',{attrs:{\"spinning\":_vm.loading}},[_c('a-form',{attrs:{\"form\":_vm.form,\"layout\":\"vertical\"},on:{\"submit\":_vm.handleGetHealthChecksSubmit}},[_c('a-form-item',[_c('span',{attrs:{\"slot\":\"label\"},slot:\"label\"},[_vm._v(\" \"+_vm._s(_vm.$t('label.perform.fresh.checks'))+\" \"),_c('a-tooltip',{attrs:{\"title\":_vm.apiParams.performfreshchecks.description}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.45)\"},attrs:{\"type\":\"info-circle\"}})],1)],1),_c('a-switch',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([_vm.$t('performfreshchecks')]),expression:\"[$t('performfreshchecks')]\"}],attrs:{\"placeholder\":_vm.apiParams.performfreshchecks.description}})],1)],1)],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Licensed to the Apache Software Foundation (ASF) under one\n// or more contributor license agreements.  See the NOTICE file\n// distributed with this work for additional information\n// regarding copyright ownership.  The ASF licenses this file\n// to you under the Apache License, Version 2.0 (the\n// \"License\"); you may not use this file except in compliance\n// with the License.  You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing,\n// software distributed under the License is distributed on an\n// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n// KIND, either express or implied.  See the License for the\n// specific language governing permissions and limitations\n// under the License.\n\n<template>\n  <a-spin :spinning=\"loading\">\n    <a-alert\n      v-if=\"!routerHealthChecksEnabled\"\n      banner\n      :message=\"$t('message.action.router.health.checks.disabled.warning')\" />\n    <div v-else>\n      <a-button :disabled=\"!('getRouterHealthCheckResults' in $store.getters.apis)\" type=\"primary\" icon=\"play-circle\" style=\"width: 100%; margin-bottom: 15px\" @click=\"showGetHelathCheck\">\n        {{ $t('label.action.router.health.checks') }}\n      </a-button>\n      <a-table\n        style=\"overflow-y: auto\"\n        :columns=\"columns\"\n        :dataSource=\"healthChecks\"\n        :pagination=\"false\"\n        :rowKey=\"record => record.checkname\"\n        size=\"large\">\n        <template slot=\"status\" slot-scope=\"record\">\n          <status class=\"status\" :text=\"record.success === true ? 'True' : 'False'\" displayText />\n        </template>\n      </a-table>\n\n      <a-modal\n        v-if=\"'getRouterHealthCheckResults' in $store.getters.apis\"\n        style=\"top: 20px;\"\n        :title=\"$t('label.action.router.health.checks')\"\n        :visible=\"showGetHealthChecksForm\"\n        :closable=\"true\"\n        :maskClosable=\"false\"\n        :okText=\"$t('label.ok')\"\n        :cancelText=\"$t('label.cancel')\"\n        @ok=\"handleGetHealthChecksSubmit\"\n        @cancel=\"onCloseGetHealthChecksForm\"\n        centered>\n        <a-spin :spinning=\"loading\">\n          <a-form\n            :form=\"form\"\n            @submit=\"handleGetHealthChecksSubmit\"\n            layout=\"vertical\">\n            <a-form-item>\n              <span slot=\"label\">\n                {{ $t('label.perform.fresh.checks') }}\n                <a-tooltip :title=\"apiParams.performfreshchecks.description\">\n                  <a-icon type=\"info-circle\" style=\"color: rgba(0,0,0,.45)\" />\n                </a-tooltip>\n              </span>\n              <a-switch\n                v-decorator=\"[$t('performfreshchecks')]\"\n                :placeholder=\"apiParams.performfreshchecks.description\" />\n            </a-form-item>\n          </a-form>\n        </a-spin>\n      </a-modal>\n    </div>\n  </a-spin>\n</template>\n\n<script>\nimport { api } from '@/api'\nimport Status from '@/components/widgets/Status'\n\nexport default {\n  name: 'RouterHealthCheck',\n  components: {\n    Status\n  },\n  props: {\n    resource: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      routerHealthChecksEnabled: false,\n      healthChecks: [],\n      loading: false,\n      columns: [\n        {\n          title: this.$t('label.router.health.check.name'),\n          dataIndex: 'checkname'\n        },\n        {\n          title: this.$t('label.type'),\n          dataIndex: 'checktype'\n        },\n        {\n          title: this.$t('label.router.health.check.success'),\n          scopedSlots: { customRender: 'status' }\n        },\n        {\n          title: this.$t('label.router.health.check.last.updated'),\n          dataIndex: 'lastupdated'\n        },\n        {\n          title: this.$t('label.details'),\n          dataIndex: 'details'\n        }\n      ],\n      showGetHealthChecksForm: false\n    }\n  },\n  beforeCreate () {\n    this.form = this.$form.createForm(this)\n    this.apiConfigParams = (this.$store.getters.apis.getRouterHealthCheckResults && this.$store.getters.apis.getRouterHealthCheckResults.params) || []\n    this.apiParams = {}\n    this.apiConfigParams.forEach(param => {\n      this.apiParams[param.name] = param\n    })\n  },\n  watch: {\n    resource: function (newItem, oldItem) {\n      this.updateResource(newItem)\n    }\n  },\n  mounted () {\n    this.updateResource(this.resource)\n  },\n  methods: {\n    updateResource (resource) {\n      if (!resource) {\n        return\n      }\n      this.resource = resource\n      if (!resource.id) {\n        return\n      }\n      this.checkConfigurationAndGetHealthChecks()\n    },\n    showGetHelathCheck () {\n      this.showGetHealthChecksForm = true\n    },\n    onCloseGetHealthChecksForm () {\n      this.showGetHealthChecksForm = false\n    },\n    handleGetHealthChecksSubmit (e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        if (err) {\n          return\n        }\n        this.onCloseGetHealthChecksForm()\n        this.checkConfigurationAndGetHealthChecks(values.performfreshchecks)\n      })\n    },\n    checkConfigurationAndGetHealthChecks (performFreshChecks) {\n      var params = { name: 'router.health.checks.enabled' }\n      this.loading = true\n      api('listConfigurations', params).then(json => {\n        this.routerHealthChecksEnabled = false\n        if (json.listconfigurationsresponse.configuration !== null) {\n          var config = json.listconfigurationsresponse.configuration[0]\n          if (config && config.name === params.name) {\n            this.routerHealthChecksEnabled = config.value === 'true'\n          }\n        }\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(f => {\n        this.loading = false\n        if (this.routerHealthChecksEnabled) {\n          this.getHealthChecks(performFreshChecks)\n        }\n      })\n    },\n    getHealthChecks (performFreshChecks) {\n      var params = { routerid: this.resource.id }\n      if (performFreshChecks) {\n        params.performfreshchecks = performFreshChecks\n      }\n      this.loading = true\n      api('getRouterHealthCheckResults', params).then(json => {\n        this.healthChecks = json.getrouterhealthcheckresultsresponse.routerhealthchecks.healthchecks\n      }).catch(error => {\n        this.$notifyError(error)\n      }).finally(f => {\n        this.loading = false\n      })\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RouterHealthCheck.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RouterHealthCheck.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RouterHealthCheck.vue?vue&type=template&id=7ddb54ac&\"\nimport script from \"./RouterHealthCheck.vue?vue&type=script&lang=js&\"\nexport * from \"./RouterHealthCheck.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}